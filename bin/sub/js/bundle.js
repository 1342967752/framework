!function(){"use strict";class e extends Laya.Scene{constructor(e,t){super(),this._gameScene=null,this.loadScene(e),this._onInitUI(),this._onRegisterEvent(),"string"==typeof t&&""!==t&&Laya.Scene3D.load(t,Laya.Handler.create(null,function(e){this._onLoadSceneCompleted(e)}.bind(this)))}onOpened(){G_Event.dispatchEvent(G_EventName.EN_FIRST_OPEN_MAIN_SCENE)}_onInitUI(){"function"==typeof this.onInitUI&&this.onInitUI()}_onRegisterEvent(){G_Event.addEventListerner(G_EventName.EN_SHOW_OWN_BANNER_AD,()=>{"function"==typeof this.onShowOwnBanner&&this.onShowOwnBanner()}),G_Event.addEventListerner(G_EventName.EN_HIDE_OWN_BANNER_AD,()=>{"function"==typeof this.onHideOwnBanner&&this.onHideOwnBanner()}),G_Event.addEventListerner(G_EventName.EN_SHOW_OWN_INSERT_AD,function(e){"function"==typeof this.onShowOwnInsertAd&&this.onShowOwnInsertAd(e)}.bind(this)),G_Event.addEventListerner(G_EventName.EN_SHOW_LOCAL_TIPS,function(e){"function"==typeof this.onShowLocalTips?this.onShowLocalTips(e):G_UIManager.showUI("tips",null,e)}.bind(this)),G_Event.addEventListerner(G_EventName.EN_HIDE_LOCAL_TIPS,function(){"function"==typeof this.onHideLocalTips?this.onHideLocalTips():G_UIManager.hideUI("tips")}.bind(this)),G_Event.addEventListerner(G_EventName.EN_SHOW_LOCAL_MODAL,function(e){"function"==typeof this.onShowLocalModal?this.onShowLocalModal(e):G_UIManager.showUI("modal",null,e)}.bind(this)),G_Event.addEventListerner(G_EventName.EN_SHOW_LOCAL_LOADING,function(e){"function"==typeof this.onShowLocalLoading?this.onShowLocalLoading(e):G_UIManager.showUI("loading",null,e)}.bind(this)),G_Event.addEventListerner(G_EventName.EN_HIDE_LOCAL_LOADING,function(){"function"==typeof this.onHideLocalLoading?this.onHideLocalLoading():G_UIManager.hideUI("loading")}.bind(this)),G_Event.addEventListerner(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,function(e){"Popup"!==e&&"FullScene"!==e&&"FullSceneScroll"!==e&&"Exit"!==e&&("function"==typeof this.onShowFullSceneAd?this.onShowFullSceneAd():G_UIManager.showUI("fullSceneAd"))}.bind(this)),"function"==typeof this.onRegisterEvent&&this.onRegisterEvent()}_onLoadSceneCompleted(e){Laya.stage.addChildAt(e,0),this._gameScene=e,"function"==typeof this.onLoadSceneCompleted&&this.onLoadSceneCompleted(e)}}class n{constructor(){this.values=[]}add(e){this.values.push(e)}getValue(e){return this.values.length<=e?null:this.values[e]}remove(e){this.values.indexOf(e)>=0&&this.values.remove(e)}getCount(){return this.values.length}sort(e){let t;for(var i=0;i<this.values.length;i++){t=this.values[i];for(var n=i+1;n<this.values.length;n++)-1==e(t,this.values[n])||1==e(t,this.values[n])&&(this.values[i]=this.values[n],this.values[n]=t,t=this.values[i])}}clear(){this.values.splice(0,this.values.length)}}class s extends Laya.Script{constructor(){super(),this.camrera=null,this.modelCamera=null,this.rotTemp=new Laya.Vector3,this.isCanmeraPosToReset=!1,this.idVec=new Laya.Vector3(0,0,0),this.camreraCanShake=!1,this.shakeVal=.05,this.isUpdatePos=!1,this.worldPosTemp=new Laya.Vector3,this.screenPosTemp=new Laya.Vector2,this.upVec=new Laya.Vector3(0,1,0),this.cur_ca_move_time=0,this.ca_move_time=0,this.moveStartPos=null,this.moveEndPos=null,this.rPoint=new Laya.Vector3,this.moveTarget=null,this.rayOb=new Laya.Ray,this.obRayResult=new Laya.HitResult,this.tempV1=new Laya.Vector3,this.lastToPos=new Laya.Vector3,this.moveSpeed=.5,this.tempV2=new Laya.Vector3,this.lookAtCallBack=null,this.lastAngle=0}init(){this.camrera=G_UIHelper.seekNodeByName(this.owner,"Camera");let e=G_UIHelper.seekNodeByName(ne.getIns().owner,"modelCamera");this.modelCamera=e.getChildAt(0),this.camrera.farPlane=1e3,this.camrera.nearPlane=.01,this.camrera.removeLayer(G_GameLayer.ShowModel),this.camrera.removeLayer(G_GameLayer.hint),this.closeCameraHDR(this.camrera,!1),this.closeCameraHDR(this.modelCamera,!1),this.camrera.clearFlag=Laya.CameraClearFlags.Sky,this.setCameraField(60),this.modelCamera.removeAllLayers(),this.modelCamera.addLayer(G_GameLayer.ShowModel),we.getIns().canshow3DImage()?(this.modelCamera.active=!0,this.modelCamera.clearFlag=Laya.CameraClearFlags.SolidColor,this.modelCamera.clearColor=new Laya.Vector4(0,0,0,0),this.modelCamera.renderTarget=new Laya.RenderTexture(512,512,Laya.RenderTextureFormat.R8G8B8A8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_24_8),this.modelCamera.renderingOrder=-1,this.modelCamera.farPlane=100,this.modelCamera.nearPlane=.01):this.modelCamera.active=!1,this.rayOb.origin=this.owner.transform.position.clone(),this.rayOb.direction=new Laya.Vector3(0,0,0)}getBackMirror(){if(this.backCamera)return this.backCamera;let e=new Laya.Camera(1,.01,300);return this.closeCameraHDR(e,!1),e.clearFlag=Laya.CameraClearFlags.SolidColor,e.fieldOfView=60,e.removeLayer(G_GameLayer.ShowModel),e.removeLayer(G_GameLayer.hint),e.removeLayer(G_GameLayer.player),e.renderTarget=new Laya.RenderTexture(512,512,Laya.RenderTextureFormat.R8G8B8A8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_24_8),this.owner.parent.addChild(e),this.backCamera=e,this.backCamera}recycleBackMirror(e){this.owner.parent.addChild(e),this.backCamera=e,this.setBackMirror(!1)}setBackMirror(e){this.backCamera&&(this.backCamera.active=e)}setCameraField(e){this.camrera.fieldOfView=e}easeCameraField(e){Laya.Tween.to(this.camrera,{fieldOfView:e},1e3,Laya.Ease.linearOut)}checkOb(){return this.rayOb.origin=this.owner.transform.position,Laya.Vector3.subtract(ne.getIns().playerMgr.owner.transform.position,this.owner.transform.position,this.tempV1),this.tempV1.cloneTo(this.rayOb.direction),we.getIns().gameScene.physicsSimulation.raycastFromTo(this.owner.transform.position,ne.getIns().playerMgr.owner.transform.position.clone(),this.obRayResult,G_ColGroup.ray,G_ColGroup.rayTarget),this.obRayResult.succeeded?this.obRayResult.collider:null}getModelCamera(){return this.modelCamera}showModelCamera(e){we.getIns().canshow3DImage()?this.modelCamera.active!=e&&(this.modelCamera.active=e):this.modelCamera.active=!1}closeCameraHDR(e,t){e&&(e.enableHDR=t)}cameraToResetPos(e,t,i,n=null,s=Laya.Ease.expoOut,o=ne.getIns().playerMgr.owner){this.startPos=this.owner.transform.position.clone(),this.startRot=this.owner.transform.rotationEuler.clone(),this.cur_ca_move_time=0,this.ca_move_time=i,this.moveTarget=o;let r=e,a=t;this.moveStartPos=this.startPos.clone(),this.moveEndPos=r.clone(),Laya.Vector3.add(this.startPos,r,this.rPoint),Laya.Vector3.scale(this.rPoint,.5,this.rPoint),Laya.Tween.to(this.startRot,{x:a.x,y:a.y,z:a.z},i,s,null,0,!1,!1),Laya.Tween.to(this.startPos,{x:r.x,y:r.y,z:r.z},i,s,Laya.Handler.create(this,()=>{ce.getIns().handlerFun(n),this.isUpdatePos=!1}),0,!1,!1),this.isUpdatePos=!0}onUpdate(){if(this.isUpdatePos){let e=this.owner.transform.position;this.cycleRot(this.moveStartPos,this.moveEndPos,e,this.rPoint),this.owner.transform.position=e;let t=this.owner.transform.localRotationEuler;this.owner.transform.lookAt(this.moveTarget.transform.position,this.upVec,!1),this.rotTemp.y=this.owner.transform.localRotationEulerY+180,t.setValue(this.rotTemp.x,this.rotTemp.y,this.rotTemp.z),this.owner.transform.localRotationEuler=t}if(this.camreraCanShake){let e=this.camrera.transform.localPosition;e.setValue(this.shakeVal*Math.random(),this.shakeVal*Math.random(),0),this.camrera.transform.localPosition=e}}cycleRot(e,t,i,n){this.cur_ca_move_time+=Laya.timer.delta,this.cur_ca_move_time=this.cur_ca_move_time<0?0:this.cur_ca_move_time;let s=this.cur_ca_move_time/this.ca_move_time,o=-Math.PI*s;i.y=t.y;let r=i,a=Math.sin(o),l=Math.cos(o);return r.x=(e.x-n.x)*l-(e.z-n.z)*a+n.x,r.z=(e.x-n.x)*a+(e.z-n.z)*l+n.z,r}setCameraAngle(e){let t=this.owner.transform.localRotationEuler;e.cloneTo(t),this.owner.transform.localRotationEuler=t}lookAtTarget(e){let t=this.owner.transform.localRotationEuler;this.rotTemp.setValue(t.x,t.y,t.z),this.owner.transform.lookAt(e.transform.position,this.upVec,!1),this.rotTemp.y=this.owner.transform.localRotationEulerY+180,Math.abs(this.lastAngle-this.rotTemp.y)<1&&(this.lookAtCallBack&&ce.getIns().handlerFun(this.lookAtCallBack),this.lookAtCallBack=null),t.setValue(this.rotTemp.x,this.rotTemp.y,this.rotTemp.z),this.owner.transform.localRotationEuler=t}setCameraPos(e,t=.5){let i=this.owner.transform.position;Laya.Vector3.lerp(i,e,t,i),this.owner.transform.position=i}setCameraMove(e){e.cloneTo(this.lastToPos),Laya.Vector3.subtract(this.lastToPos,this.owner.transform.position,this.tempV2),Laya.Vector3.scalarLength(this.tempV2)>this.moveSpeed&&(Laya.Vector3.normalize(this.tempV2,this.tempV2),Laya.Vector3.scale(this.tempV2,this.moveSpeed,this.tempV2)),this.owner.transform.translate(this.tempV2,!1)}setCameraRot(e){let t=this.owner.transform.rotation;e.cloneTo(t),this.owner.transform.rotation=t}setColor(e){this.camrera.clearColor=e.clone()}worldPosToScreenPos(e){return this.camrera.viewport.project(e,this.camrera.projectionViewMatrix,this.worldPosTemp),this.screenPosTemp.x=this.worldPosTemp.x/Laya.stage.clientScaleX,this.screenPosTemp.y=this.worldPosTemp.y/Laya.stage.clientScaleY,this.screenPosTemp}cameraShake(e,t=this.shakeVal){if(this.camreraCanShake=e,this.shakeVal=t,!e){let e=this.camrera.transform.localPosition;e.setValue(0,0,0),this.camrera.transform.localPosition=e}}}class o{constructor(){this.keys=[],this.values=[]}addKey(e,t){if(this.hasKey(e))return console.error("字典有相同的键值:",e),!1;this.keys.push(e),this.values.push(t)}getValue(e){let t=this.keys.indexOf(e);return t>=0?this.values[t]:null}hasKey(e){return-1!=this.keys.indexOf(e)}removeKey(e){let t=this.keys.indexOf(e);t>=0&&(this.keys.splice(t,1),this.values.splice(t,1))}getCount(){return this.keys.length}getKeys(){return this.keys}getValues(){return this.values}sortByKey(){}sortByValue(){}clear(){this.keys=[],this.values=[]}}class a{constructor(){this.pool=new o}recycle(e,t){if(!t||t.destroyed)return;if(!ne.getIns()&&ne.getIns().recycleNode)return void t.destroy();t.parent!=ne.getIns().recycleNode&&ne.getIns().recycleNode.addChild(t),t.active=!1,this.pool.hasKey(e)||this.pool.addKey(e,[]);let i=this.pool.getValue(e);i.length>10?t.destroy():i.push(t)}getGo(e){if(!this.pool.hasKey(e))return null;let t=this.pool.getValue(e);if(0==t.length)return null;let i=t[0];return t.splice(0,1),i.active=!0,i}clearGo(){let e=this.pool.getValues();for(let t=0;t<e.length;t++)for(let i=0;i<e[t].length;i++){let n=e[t][i];n&&n.destroy()}this.pool.clear()}}class l{constructor(){this.None=-1,this.Idle=0,this.Run=1,this.kang=2}static getIns(){return this.instance||(this.instance=new l),this.instance}}class p extends Laya.Script{constructor(){super(),this._animData=new Object,this._body=null,this._anim=null,this.isAct=!1,this._animName=null}init(){if(this._body=ce.getIns().returnSprite3D(this.owner.getChildByName("Mesh")),this._body){let e=this._body.getComponent(Laya.Animator);e instanceof Laya.Animator&&(this._anim=e),this.stopAnim()}this.initAnimEvent()}initAnimEvent(){this._anim&&(this._animData=this._anim.getControllerLayer(0)._statesMap)}setLvdata(e){this.lvData=e}enablePeople(){this.isAct||(this.isAct=!0,this.enPeople())}disablePeople(e=!0){this.isAct&&(this.isAct=!1,this.disPeople(),e&&this.recycle())}disPeople(){}enPeople(){}playAnim(e,t,i=!1,n=1,s=0){this._animName=e,this._anim&&(this._anim.speed=n,i?this._anim.crossFade(e,.1,s,0):this._anim.play(e,s,0),this._animData[e]&&Laya.timer.once(1e3*this._animData[e].clip.duration(),this,()=>{ce.getIns().handlerFun(t)},null,!0))}playAnimNotSave(e,t,i=!0,n=1,s=0){e!=this._animName&&this.playAnim(e,t,!0,1,0)}getCurAnimName(){return this._animName}stopAnim(){this._anim&&(this._anim.speed=0)}setAnimSpeed(e){this._anim&&(this._anim.speed=e)}getAnimTime(e){return this._animData&&this._animData[e]?this._animData[e].time:0}setStartPos(e,t){this.owner.transform.position=e.clone(),this.owner.transform.rotationEuler=t.clone()}getPos(){return this.owner.transform.position}recycle(){}onDestroy(){this.disablePeople()}}class _ extends p{constructor(){super(),this.ownerMgr=null,this.isPlayer=!1,this.node=null,this.state=l.None}init(){super.init(),this.owner instanceof Laya.Sprite3D&&(this.node=this.owner),this.owner.ownerMgr=this,this.resgistEvent()}toRunPos(){let e=this.owner.transform.position;e.z=ne.getIns().configMgr.runPos.transform.position.z,this.owner.transform.position=e}resgistEvent(){G_Event.addEventListerner(GG_EventName.GAMESTART,this.gameStart,this),G_Event.addEventListerner(GG_EventName.END_CHECK_OVER,this.gameOver,this)}removeEvent(){G_Event.removeEventListerner(GG_EventName.GAMESTART,this.gameStart,this),G_Event.removeEventListerner(GG_EventName.END_CHECK_OVER,this.gameOver,this)}changeState(e){e!=this.state&&(this.state=e,this.changeStateAction(e))}changeStateAction(e){}onDestroy(){super.onDestroy(),this.removeEvent()}gameStart(){}gameOver(){}}class m{constructor(){this.drawPar=null,this.sp=null,this.y=.5}init(e){e instanceof Laya.Sprite3D&&(this.drawPar=e),this.sp=new Laya.PixelLineSprite3D(50),this.drawPar.addChild(this.sp),ce.getIns().resetTransform(this.sp),this.sp.transform.scale=new Laya.Vector3(1,1,1)}drawBox(e,t,i=new Laya.Color){let n=-e,s=e,o=-t,r=t,a=new Laya.Vector3(n,this.y,r),l=new Laya.Vector3(n,this.y,o),h=new Laya.Vector3(s,this.y,r),c=new Laya.Vector3(s,this.y,o),d=[],u=new Laya.PixelLineData;u.startPosition=a,u.endPosition=h,u.endColor=i,u.startColor=i;let p=new Laya.PixelLineData;p.startPosition=l,p.endPosition=c,p.endColor=i,p.startColor=i;let _=new Laya.PixelLineData;_.startPosition=a,_.endPosition=l,_.endColor=i,_.startColor=i;let g=new Laya.PixelLineData;g.startPosition=h,g.endPosition=c,g.endColor=i,g.startColor=i,d.push(u,p,_,g),this.sp.addLines(d)}drawBox3D(){}}class y{static getIns(){return this.ins||(this.ins=new y),this.ins}constructor(){this.beaRang=8,this.beaRangSquare=this.beaRang*this.beaRang,this.tempV1=new Laya.Vector3}}class w{constructor(){this.ownerBeas=[],this.isInAddBee=!1,this.beeMaxNum=20,this.curMaxBeeId=1}static getIns(){return this._ins||(this._ins=new w,G_PlatHelper.isWINPlatform()&&(window.G_BeaMgr=this._ins)),this._ins}getConbineBeeId(){let e={beeId:0,bees:[]},t=w.getIns().curMaxBeeId,i=w.getIns().ownerBeas;for(let n=1;n<=t;n++){for(let t=0;t<i.length;t++)n==i[t].beaData.beeId&&e.bees.push(i[t]);if(e.bees.length>=3){e.beeId=n;break}e.bees.splice(0,i.length)}return e}initBee(e){let t=this.getAllBeeData();if(0==t.length)return void ce.getIns().handlerFun(e);this.isInAddBee=!0;let i=0,n=()=>{++i==t.length&&(this.isInAddBee=!1,ce.getIns().handlerFun(e))};for(let e=0;e<t.length;e++){let i=G_GameDB.getBeeByID(t[e].id),s=e;ne.getIns().loadBee(i.model,e=>{this.addBee(e,t[s]),n()})}}canOpreateBee(){return!this.isInAddBee}checkIsBeeMax(){return this.beeMaxNum<=this.ownerBeas.length}createBee(e){this.isInAddBee=!0;let t=we.getPlayerInfo().addBee(e),i=G_GameDB.getBeeByID(t.id);this.isInAddBee=!0,ne.getIns().loadBee(i.model,e=>{this.addBee(e,t),this.isInAddBee=!1})}addBee(e,t){this.ownerBeas.indexOf(e)<0&&(this.curMaxBeeId<t.id&&(this.curMaxBeeId=t.id),e.setBeeData(t),e.setPlayer(ne.getIns().playerMgr),e.beePosRestart(),this.ownerBeas.push(e))}checkCanAddBee(){return w.getIns().canOpreateBee()?!w.getIns().checkIsBeeMax()||(G_PlatHelper.showToast("蜜蜂已经数量已经到达上限,请合成蜜蜂!"),!1):(G_PlatHelper.showToast("蜜蜂正在创建!"),!1)}removeBees(e,t){for(let t=0;t<e.length;t++){let i=this.ownerBeas.indexOf(e[t]);i>=0&&(this.ownerBeas.splice(i,1),e[t].desBee())}we.getPlayerInfo().upBee(t,e)}getAllBeeData(){return we.getPlayerInfo().getAllBeeDatas()}getBeeDataBtId(e){return we.getPlayerInfo().getBeeDataById(e)}getSpaceBee(){for(let e=0;e<this.ownerBeas.length;e++)if(this.ownerBeas[e].isSpace())return this.ownerBeas[e];return null}endAllBeeCollectFlower(){for(let e=0;e<this.ownerBeas.length;e++)this.ownerBeas[e].endFlower()}endAllBeeAction(){for(let e=0;e<this.ownerBeas.length;e++)this.ownerBeas[e].endFlower(),this.ownerBeas[e].beePosRestart()}forceEndColloct(){for(let e=0;e<this.ownerBeas.length;e++)this.ownerBeas[e].endFlower()}getAllBees(){return this.ownerBeas}}class I{constructor(){this.kang="kai",this.Idle="Idle",this.kanbao="kanbao",this.Run="Run",this.Walk="Walk",this.Cast_Spell="Cast Spell"}static getIns(){return this.instance||(this.instance=new I),this.instance}}class v{constructor(){this.maxId=1}static getIns(){return this.ins||(this.ins=new v,this.ins.init()),this.ins}init(){this.maxId=G_GameDB.getGrowUpByID(G_GameDB.getAllGrowUps().length-1).id}getBeeSpeedGold(e){return BigNumber(G_GameDB.getGrowUpByID(e).beeSpeedCutGold)}getBeeBuyTimesGold(e){return BigNumber(G_GameDB.getGrowUpByID(e).beeBuy)}getCapacityGold(e){return BigNumber(G_GameDB.getGrowUpByID(e).pCapacityGold)}getHurtGold(e){return BigNumber(G_GameDB.getGrowUpByID(e).pHurtGold)}getNextLvGold(e){return BigNumber(G_GameDB.getGrowUpByID(e).toNextLvGold)}}class P extends _{constructor(){super(),this.isPlayer=!0,this.cam_pos=null,this.moveSpeed=.18,this.moveVec=new Laya.Vector3,this.tempV1=new Laya.Vector3,this.tempV2=new Laya.Vector3,this.tempArray=[],this.tempRot=new Laya.Quaternion,this.cam_pos_offect=new Laya.Vector3,this.bea_center=null,this.ownerBeas=[],this.playerPoss=[],this.curPosIndex=0,this.speedVal=1,this.speedAdd=0,this.isSpeedUp=!1,this.colRang=1.2,this.colRangSquare=this.colRang*this.colRang,this.kangRang=4,this.kangRangSquare=this.kangRang*this.kangRang,this.kangIndex=0,this.kangHurt=20,this.kang_center=null,this.lastKangPos=new Laya.Vector3,this.kangTimer=0,this.kangMinTime=366.9,this.kangMaxTime=.88056*1e3,this.capcityContain=100,this.curCapcityContain=0,this.inisSpeed=.15,this.speedUpEf=null,this.isShowSpeedEf=!1,this.isInLoadSpeedUp=!1,this.hand_ef_pos=null,this.strongeEf=null,this.isShowStrongeEf=!1,this.isInLoadStrongeEf=!1,this.walkSpeed=1,this.contain_pos=null,this.honeyAnim=null,this.honeyTempName="ScaleTemp",this.isShowFullTips=!1,this.isShowCollectTips=!1,this.jiantou=null,this.rotTemp=new Laya.Vector3,this.isPlayHurtSound=!1}init(){if(super.init(),this.honeyAnim=ce.getIns().findSprite3D(this.owner,"honey").getComponent(Laya.Animator),this.jiantou=this.owner.getChildByName("jiantou"),this.honeyAnim instanceof Laya.Animator){let e=this.honeyAnim.getDefaultState(),t=new Laya.AnimatorState;t.name=this.honeyTempName,t.clipStart=e.clipStart,t.clipEnd=e.clipEnd,t.clip=e.clip,t.clip.islooping=!1,this.honeyAnim.addState(t)}this.hideJianTou(),this.contain_pos=ce.getIns().findSprite3D(this.owner,"contain_pos"),this.hand_ef_pos=ce.getIns().findSprite3D(this.owner,"hand_ef_pos"),this.cam_pos=ce.getIns().returnSprite3D(G_UIHelper.seekNodeByName(this.owner,"cam_pos")),this.bea_center=ce.getIns().returnSprite3D(G_UIHelper.seekNodeByName(this.owner,"bea_center")),this.kang_center=ce.getIns().findSprite3D(this.owner,"kang_center");for(let e=0;e<9;e++)this.playerPoss.push({vec:new Laya.Vector3(0,0,0),speedVal:1});if(we.getIns().isTest&&G_PlatHelper.isWINPlatform()){let e=new m;e.init(this.node);let t=this.colRang;e.drawBox(t,t);let i=this.kangRang;e.drawBox(i,i,new Laya.Color(0,0,0,1));let n=y.getIns().beaRang;e.drawBox(n,n)}}jianTouLookAt(e){this.jiantou.active=!0,this.jiantou.transform.getUp(this.tempV2),this.rotTemp.y=this.jiantou.transform.localRotationEulerY+180,Laya.Vector3.subtract(e,this.jiantou.transform.position,this.tempV1),Laya.Vector3.subtract(this.jiantou.transform.position,this.tempV1,this.tempV1),this.jiantou.transform.lookAt(this.tempV1,this.tempV2,!1)}hideJianTou(){this.jiantou.active=!1}setPlayerData(e){this.upContain(),this.upHurt(),this.changeSpeedUpState(),this.changeStrongeState(),this.curCapcityContain=0,this.setBottle(0,0)}setCorl(){ne.getIns().gameView.dragCrol.mouseDownFun=(()=>{this.changeState(l.getIns().Run),this.moveVec.setValue(0,0,0),this.isShowCollectTips||(this.isShowCollectTips=!0,ne.getIns().gameView.showTeachTips(1))}),ne.getIns().gameView.dragCrol.mouseUpFun=(()=>{this.mouseUp()}),ne.getIns().gameView.dragCrol.mouseMoveFun=((e,t)=>{this.moveVec.x=-e,this.moveVec.z=t,this.moveVec.y=0;let i=.01*(Math.abs(e)+Math.abs(t));i=i>1?1:i,this.speedVal=i,this.moveSpeed=(this.inisSpeed+this.speedAdd)*i,this.walkSpeed=i,Laya.Vector3.normalize(this.moveVec,this.moveVec),Laya.Vector3.scale(this.moveVec,this.moveSpeed,this.moveVec)})}mouseUp(){this.checkHasInKangPlants(!0)}checkHasInKangPlants(e=!1){if(!ne.getIns().curMap)return void this.changeState(l.getIns().Idle);let t=ne.getIns().curMap.getInHurtRangFlowers(this,e);t&&0!=t.length?(this.changeState(l.getIns().kang),e&&ne.getIns().curMap.walkToIdle(this)):this.changeState(l.getIns().Idle)}showSpeedEf(e){if(this.isShowSpeedEf=e,this.speedUpEf)this.speedUpEf.active=!1,this.speedUpEf.active=e;else{if(this.isInLoadSpeedUp)return;this.isInLoadSpeedUp=!0;let e=G_ResPath.resPath.format("Fx_Speedup");G_NodePoolMgr.preload([e],()=>{let t=G_NodePoolMgr.getNode(e);this.owner.addChild(t),ce.getIns().resetTransform(t),this.isInLoadSpeedUp=!1,this.speedUpEf=t,this.showSpeedEf(this.isShowSpeedEf)})}}canHurtFlower(e){return!!this.isShowStrongeEf||this.kangHurt>=e}showStrongeEf(e){if(this.isShowStrongeEf=e,this.strongeEf)this.strongeEf.active=!1,this.strongeEf.active=e;else{if(this.isInLoadStrongeEf)return;this.isInLoadStrongeEf=!0;let e=G_ResPath.resPath.format("Fx_Onthehand");G_NodePoolMgr.preload([e],()=>{let t=G_NodePoolMgr.getNode(e);this.hand_ef_pos.addChild(t),ce.getIns().resetTransform(t),this.isInLoadStrongeEf=!1,this.strongeEf=t,this.showStrongeEf(this.isShowStrongeEf)})}}changeStrongeState(){let e=!1;we.getPlayerInfo().getPlayerSkillDataById(2).toTime>G_ServerInfo.getServerTime()&&(e=!0),this.showStrongeEf(e)}changeSpeedUpState(){we.getPlayerInfo().getPlayerSkillDataById(1).toTime>G_ServerInfo.getServerTime()?this.speedUp():this.cancelSpeedUp()}speedUp(){this.isSpeedUp||(this.isSpeedUp=!0,this.speedAdd=this.inisSpeed,this.showSpeedEf(!0))}cancelSpeedUp(){this.isSpeedUp&&(this.isSpeedUp=!1,this.speedAdd=0,this.showSpeedEf(!1))}changeStateAction(e){if(e==l.getIns().Idle)this.playAnim(I.getIns().Idle),ne.getIns().curMap&&ne.getIns().curMap.walkToIdle(this),we.getPlayerInfo().savePlayerPos(we.getIns().levelData.id,this.node.transform.position);else if(e==l.getIns().Run)this.playAnim(I.getIns().Run);else if(e==l.getIns().kang){this.kangIndex++;let e=this.kangIndex;this.clearKangData(),this.isPlayHurtSound=!1,this.playAnim(I.getIns().kang,()=>{this.state==l.getIns().kang&&this.kangIndex==e&&(this.changeState(l.getIns().Idle),this.checkHasInKangPlants(!0))})}}onUpdate(){we.getIns().isGameStart()&&(ne.getIns().inChangeMap()||(this.doAction(),this.cameraFollow()))}doAction(){switch(this.state){case l.getIns().Idle:break;case l.getIns().Run:this.toMove();break;case l.getIns().kang:this.toKang()}}toMove(){Laya.Vector3.add(this.node.transform.position,this.moveVec,this.tempV1),ne.getIns().curMap.hasInMap(this.tempV1)&&(this.playerPoss[this.curPosIndex].speedVal=this.speedVal,this.node.transform.position.cloneTo(this.playerPoss[this.curPosIndex].vec),this.curPosIndex++,this.curPosIndex>=this.playerPoss.length&&(this.curPosIndex=0),this.node.transform.translate(this.moveVec,!1),this.playerFollow(),this._anim.speed=this.walkSpeed,ne.getIns().curMap.checkColloder(this))}clearKangData(){this.lastKangPos=null,this.kangTimer=0}toKang(){if(this.kangTimer+=Laya.timer.delta,this.kangTimer<this.kangMinTime||this.kangTimer>this.kangMaxTime)return;if(this.isPlayHurtSound||(this.isPlayHurtSound=!0,G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("hurt"))),!this.lastKangPos)return this.lastKangPos=new Laya.Vector3,void this.kang_center.transform.position.cloneTo(this.lastKangPos);let e=ne.getIns().curMap.getInHurtRangFlowers(this,!1),t=this.kang_center.transform.position;for(let i=0;i<e.length;i++)ce.vecInTriangle(this.lastKangPos,t,this.node.transform.position,e[i].getPos())&&e[i].daoEnter(this);t.cloneTo(this.lastKangPos)}addHoney(e){let t=this.curCapcityContain/this.capcityContain;this.curCapcityContain+=e,this.curCapcityContain>=this.capcityContain&&(this.curCapcityContain=this.capcityContain,this.isShowFullTips||(this.isShowFullTips=!0,ne.getIns().gameView.showTeachTips(2)));let i=this.curCapcityContain/this.capcityContain;this.setBottle(t,i),this.refershContainView()}setBottle(e,t,i=1){let n=this.honeyAnim.getControllerLayer(0).getAnimatorState(this.honeyTempName);n.clipStart=e,n.clipEnd=t,this.honeyAnim.speed=i,this.honeyAnim.play(this.honeyTempName)}useHoney(e){let t=this.curCapcityContain/this.capcityContain;this.curCapcityContain-=e,this.refershContainView();let i=this.curCapcityContain/this.capcityContain;this.setBottle(i,t,-1)}clearHoney(){let e=this.curCapcityContain/this.capcityContain;this.curCapcityContain=0,this.refershContainView();let t=this.curCapcityContain/this.capcityContain;this.setBottle(t,e,-1)}getHoney(){return this.curCapcityContain}refershContainView(){ne.getIns().gameView&&ne.getIns().gameView.setContain(this.curCapcityContain,this.capcityContain)}isHoneyFull(){return this.curCapcityContain>=this.capcityContain}playerFollow(){if(0==this.moveVec.x&&0==this.moveVec.z)return;this.moveVec.cloneTo(this.tempV1),this.tempV1.z=-this.tempV1.z,this.tempV1.y=0,Laya.Quaternion.rotationLookAt(this.tempV1,ce.getIns().upVec,this.tempRot),Laya.Quaternion.lerp(this.node.transform.rotation,this.tempRot,.1,this.tempRot);let e=this.node.transform.rotation;this.tempRot.cloneTo(e),this.node.transform.rotation=e}cameraFollow(){Laya.Vector3.add(this.node.transform.position,this.cam_pos_offect,this.tempV1),this.isSpeedUp?ne.getIns().cameraMgr.setCameraPos(this.tempV1,.004*Laya.timer.delta):ne.getIns().cameraMgr.setCameraPos(this.tempV1,.002*Laya.timer.delta)}resgistEvent(){super.resgistEvent(),G_Event.addEventListerner(G_EventName.ENUPCONTAIN,this.upContain,this),G_Event.addEventListerner(G_EventName.EN_UPHURT,this.upHurt,this),G_Event.addEventListerner(G_EventName.EN_SPEEDUPCHANGE,this.changeSpeedUpState,this),G_Event.addEventListerner(G_EventName.EN_STRONGE_CHANGE,this.changeStrongeState,this)}upContain(){let e=we.getPlayerInfo().getContainLv(),t=null;t=e>v.getIns().maxId?G_GameDB.getGrowUpByID(v.getIns().maxId):G_GameDB.getGrowUpByID(e),this.capcityContain=parseFloat(t.pCapacity),this.refershContainView()}upHurt(){let e=we.getPlayerInfo().getHurtLv(),t=null;t=e>v.getIns().maxId?G_GameDB.getGrowUpByID(v.getIns().maxId):G_GameDB.getGrowUpByID(e),this.kangHurt=parseFloat(t.pHurt)}removeEvent(){super.removeEvent(),G_Event.removeEventListerner(G_EventName.EN_STRONGE_CHANGE,this.changeStrongeState,this),G_Event.removeEventListerner(G_EventName.ENUPCONTAIN,this.upContain,this),G_Event.removeEventListerner(G_EventName.EN_UPHURT,this.upHurt,this),G_Event.removeEventListerner(G_EventName.EN_SPEEDUPCHANGE,this.changeSpeedUpState,this)}setStartPos(e,t){super.setStartPos(e,t),ne.getIns().cameraMgr.setCameraPos(this.cam_pos.transform.position,1),ne.getIns().cameraMgr.setCameraRot(this.cam_pos.transform.rotation),Laya.Vector3.subtract(this.cam_pos.transform.position,this.node.transform.position,this.cam_pos_offect),this.changeState(l.getIns().Idle)}colliderEnterObj(e,t){}collideExitObj(e,t){}isStand(){return this.state==l.getIns().Idle}hasPlantsInBeaRang(e){this.checkHasBeeToCollect(null,e)}checkHasBeeToCollect(e,t){for(let e=0;e<t.length;e++){let i=t[e];if(!i.canBeingCollect())continue;let n=w.getIns().getSpaceBee();if(!n)break;n.toFlower(i)}}changeMapCallback(){w.getIns().forceEndColloct()}changePlantCallback(){w.getIns().endAllBeeCollectFlower()}backStartPos(e,t){this.setStartPos(e,t),w.getIns().endAllBeeAction()}}class S{constructor(){this.subMgr=null,this.plat=0}static getIns(){return this.instance||(this.instance=new S),this.instance}init(){G_PlatHelper.isVIVOPlatform()?this.plat=3:G_PlatHelper.isOPPOPlatform()?this.plat=2:G_PlatHelper.isWXPlatform()?this.plat=1:G_PlatHelper.isTTPlatform()?this.plat=4:this.plat=0}setMgr(e){this.subMgr=e}Aufromvidio(){if(this.checkPlat()&&4==this.plat){let e=tt.getLaunchOptionsSync(),t="";e.group_id&&(t=e.group_id),"023001"!=e.scene&&"023002"!=e.scene||this.reportAnalytics("aufromvideo",{videoid:t})}}Enter_click(e){this.checkPlat()&&this.subMgr.appOnce({actionNumber:e})}EnterAction(e,t){this.checkPlat()&&this.subMgr.action({actionNumber:e,actionType:t})}Video_show(e){this.checkPlat()&&this.subMgr.adVideo({type:e,subType:7})}Video_broadcast(e,t){this.checkPlat()&&this.subMgr.adVideo({type:e,subType:t})}Level_show(e){this.checkPlat()&&this.subMgr.battle({logType:1,battleType:100,battleId:e.lv+100+""})}Level_win(e){this.checkPlat()&&this.subMgr.battle({logType:2,battleType:100,battleId:e.lv+100+""})}Level_fail(e){this.checkPlat()&&this.subMgr.battle({logType:3,battleType:100,battleId:e.lv+100+""})}Screen_show(e){this.checkPlat()}Screenc_click(e){this.checkPlat()}Screen_get(e){this.checkPlat()}Screen_over(e){this.reportAnalytics("screen_over",{user:e})}Screen_fail(e,t){let i={};if(1==t)i.get_fail=e;else{if(2!=t)return void console.error("提交失败",t);i.publish_fail=e}this.reportAnalytics("screen_fail",t)}reportAnalytics(e,t){this.checkPlat()}checkPlat(){return this.subMgr}}class T extends Laya.Script{constructor(){super(),this.teachBtns=[],this.curTeachId=null,this.curTeachKey=null,this.waitEnableTeachId=null,this.waitEnableTeachKey=null,this.teachEnableFun=new Object}static getIns(){return this.instance||(this.instance=new T,this.instance.init()),this.instance}init(){}checkStartTeach(){0!=we.getPlayerInfo().getCurTeachId()||this.enableTeachStep(1)}addTeachFun(e,t){this.teachEnableFun[e]||(this.teachEnableFun[e]=[]),this.teachEnableFun[e].push(t)}exeTeachFun(e){if(this.teachEnableFun[e]){let t=this.teachEnableFun[e];for(let e=0;e<t.length;e++)ce.getIns().handlerFun(t[e])}}removeTeachFun(e,t){if(this.teachEnableFun[e]){let i=this.teachEnableFun[e].indexOf(t);i>=0&&this.teachEnableFun[e].splice(i,1)}}addTeachBtn(e){this.teachBtns.indexOf(e)<0&&(this.teachBtns.push(e),this.waitEnableTeachKey&&this.waitEnableTeachKey==e.getStepKey()&&(this.enableTeachStep(this.waitEnableTeachId),this.waitEnableTeachId=null,this.waitEnableTeachKey=null))}getCurTeachId(){return this.curTeachId}getWaitEnableTeachKey(){return this.waitEnableTeachKey}getCurTeachKey(){return this.curTeachKey}removeTeachBtn(e){let t=this.teachBtns.indexOf(e);t>=0&&this.teachBtns.splice(t,1)}enableTeachStep(e){let t=G_GameDB.getTeachByID(e);if(!t)return void console.error("激活教程问题：",e);let i=t.btnKey,n=this.getTeachBtn(i);if(!n)return this.waitEnableTeachId=e,void(this.waitEnableTeachKey=i);1==t.isPause&&we.getIns().gamePause(),this.curTeachId=e,this.curTeachKey=i;let s=new Object;s.target=n,we.getUIMgr().openUI(we.getUIName().TeachView,s),this.exeTeachFun(i)}getTeachBtn(e){for(let t=0;t<this.teachBtns.length;t++)if(this.teachBtns[t].getStepKey()==e)return this.teachBtns[t];return null}closeTeachStep(e){if(!this.curTeachId)return;let t=this.curTeachId;G_PlayerInfo.setTeachId(t),this.clearTeachCache();let i=G_GameDB.getTeachByID(t);if(1==i.isPause&&we.getIns().gameResume(),!i||i&&i.btnKey!=e)return void console.error("教程关闭问题:",e,t);this.teachSumbit(t);let n=i.nextId;if(-2==n)n=i.id+1;else if(-1==n)return;G_GameDB.getTeachByID(n)?this.enableTeachStep(n):we.getUIMgr().closeUI(we.getUIName().TeachView)}teachSumbit(e){1==e?S.getIns().Enter_click(4):2==e?S.getIns().Enter_click(5):8==e&&S.getIns().Enter_click(6)}clearTeachCache(){this.curTeachKey=null,this.curTeachId=null}teachViewCloseStep(){let e=we.getUIMgr().getPageByName(we.getUIName().TeachView);e?e.closeFun():console.error("教程界面不存在")}closeCurTeachStep(){this.curTeachKey&&this.teachViewCloseStep()}hasTeach(){return null!=this.curTeachId}}class G extends Laya.Script{constructor(){super(),this.stepKey=-1}init(){}resigstBtn(){T.getIns().addTeachBtn(this)}unResigstBtn(){T.getIns().removeTeachBtn(this)}getStepKey(){return this.stepKey}}class b extends Laya.Script{constructor(){super(),this.tweenAnimType="none",this.ttType="scale",this.wxType="scale",this.oppoType="scale",this.vivoType="scale",this.qqType="scale",this.hwType="scale",this.winType="scale"}onAwake(){this.init()}init(){G_PlatHelper.isWXPlatform()?this.tweenAnimType=this.wxType:G_PlatHelper.isQQPlatform()?this.tweenAnimType=this.qqType:G_PlatHelper.isOPPOPlatform()?this.tweenAnimType=this.oppoType:G_PlatHelper.isVIVOPlatform()?this.tweenAnimType=this.vivoType:G_PlatHelper.isTTPlatform()?this.tweenAnimType=this.ttType:G_PlatHelper.isWINPlatform()?this.tweenAnimType=this.winType:G_PlatHelper.isHWPlatform()&&(this.tweenAnimType=this.hwType)}playTween(){"scale"==this.tweenAnimType?ce.getIns().setBtnScaleTween(this.owner):"shake"==this.tweenAnimType&&ce.getIns().setBtnShake(this.owner)}endTween(){ce.getIns().closeBtnTween(this.owner)}}class C{constructor(){this.isinLoadAppBox=!1,this.boxad=null,this.todayShowColorTimes=0,this.isShowNetworkErrorWindow=!1,this.blockAds=[],this.inCreateBlockAds=[],this.customAds=[],this.inCreateCustomAds=[],this.inCreateGamePortalAd=!1,this.gamePortalAd=null,this.isShowCustomAd=!1,this.customObj=new Object,this.oneCustomId="adunit-3ca653512f9dbf5c",this.vecCustomId="adunit-bb87c546e56e2ab1",this.cusOneWidth=68,this.cusOneHeight=106,this.cusMulWidth=57.6,this.cusMulHeight=328}static getIns(){return this.instance||(this.instance=new C,this.instance.init()),this.instance}init(){}cretaeBoxAd(e){if(G_PlatHelper.isOPPOPlatform())if(qg.getSystemInfoSync().platformVersionCode>=1076){this.gamePortalAd&&G_PlatHelper.showToast("拉取广告太频繁哦!");let t=e=>{this.gamePortalAd?this.gamePortalAd.destroy().then(()=>{this.gamePortalAd=null,ce.getIns().handlerFun(e)}).catch(()=>{this.gamePortalAd=null,ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)},i=()=>{let i=qg.createGamePortalAd({adUnitId:"314196"});this.gamePortalAd=i;let n=()=>{i.offLoad(n),i.show()},s=()=>{i.offClose(s),t(),ce.getIns().handlerFun(e)};i.onClose(s),i.onError(n=>{i&&i.offError(errFun),t(),ce.getIns().handlerFun(e),G_PlatHelper.showToast("拉取广告失败"),console.error("err:",n)}),i.onLoad(n)};t(()=>{i()})}else G_PlatHelper.showToast("快应用平台版本号低于1076，暂不支持互推盒子!");else G_Adv.createBoxAdv(e)}addColorSign(){G_PlatHelper.isQQPlatform()&&this.canShowColorSgin()&&(G_Adv.addColorSign(),this.addColorTimes())}createBlockAd(e=2,t=20,i=5,n="landscape"){if(window.qq&&qq.createBlockAd){let s=qq.createBlockAd({style:{left:20,top:32},adUnitId:"d9dabf021c3f23308e8cdd304f0eb730",size:i,orientation:n});s.isShowAd=!0;let o=this;this.addInCreateBlockAd(s);let r=i=>{if(!s)return;let n=G_PlatHelper.getPlat().getSystemInfoSync();2==e?(s.style.top=n.screenHeight-i.height-t,s.style.left=(n.screenWidth-i.width)/2):3==e?(s.style.top=(n.screenHeight-i.height)/2,s.style.left=t):4==e?(s.style.top=(n.screenHeight-i.height)/2,s.style.left=n.screenWidth-i.width-t):5==e&&(s.style.top=(n.screenHeight-i.height)/2-t,s.style.left=(n.screenWidth-i.width)/2)};s.onResize(r);let a=e=>{s&&(console.error("积木广告创建失败:",e),s.offError(a),s.offResize(r),s.destroy())};s.onError(a);let l=()=>{s&&(s.offLoad(l),o.removeInCreateBlockAd(s),s.isShowAd?(s.show(),o.addblockAd(s)):(s.offError(a),s.offResize(r),s.destroy()))};s.onLoad(l)}}createTwoBlockAd(e=100,t=4,i="vertical"){this.createBlockAd(3,e,t,i),this.createBlockAd(4,e,t,i)}cretaeCenterBlockAd(e=0,t=5,i="landscape"){this.createBlockAd(5,e,t,i)}addInCreateBlockAd(e){this.inCreateBlockAds.indexOf(e)<0&&this.inCreateBlockAds.push(e)}removeInCreateBlockAd(e){let t=this.inCreateBlockAds.indexOf(e);t>=0&&this.inCreateBlockAds.splice(t,1)}addblockAd(e){this.blockAds.indexOf(e)<0&&this.blockAds.push(e)}destoryBlockAd(){if(this.blockAds.length>0){for(let e=0;e<this.blockAds.length;e++)this.blockAds[e].destroy();this.blockAds.splice(0,this.blockAds.length)}if(this.inCreateBlockAds.length>0)for(let e=0;e<this.inCreateBlockAds.length;e++)this.inCreateBlockAds[e].isShowAd=!1}canShowColorSgin(){return this.todayShowColorTimes<1}addColorTimes(){this.todayShowColorTimes++}isWatchingVideoAdv(){return G_PlatHelper.isOVPlatform()?G_OVAdv.isWatchingVideoAdv():G_Adv.isWatchingVideoAdv()}checkNetworkType(){window.qg&&(qg.getNetworkType&&qg.getNetworkType({success:e=>{e&&"none"!=e.networkType||this.showNetworkError()},fail:()=>{this.showNetworkError()},complete:null}),qg.onNetworkStatusChange&&qg.onNetworkStatusChange(e=>{e&&e.isConnected||this.showNetworkError()}))}showNetworkError(){this.isShowNetworkErrorWindow||this.showModal("网络错误","请重启游戏!",!1,e=>{this.exitApp()})}showModal(e,t,i,n){window.qg&&qg.showModal&&qg.showModal({title:e,content:t,showCancel:i,success(e){e?n&&n(!0):n&&n(!1)}})}exitApp(){window.qg&&qg.exitApplication&&qg.exitApplication({success:null,fail:null,complete:null})}createCustomAd(e=2,t=20,i=0,n=this.vecCustomId){if(this.isShowCustomAd=!0,this.customObj.align=e,this.customObj.offectX=t,this.customObj.offectY=i,this.customObj.adUnitId=n,window.wx&&wx.createCustomAd){let s=0,o=0,r=G_PlatHelper.getPlat().getSystemInfoSync();2==e?(s=r.screenHeight-i,o=r.screenWidth/2):3==e?(s=r.screenHeight/2-i,o=t):4==e?(s=r.screenHeight/2-i,o=r.screenWidth-t):5==e?(s=r.screenHeight/2-i,o=r.screenWidth/2):1==e?(s=i,o=r.screenWidth/2-t):6==e?(s=r.screenHeight-i,o=t):7==e?(s=r.screenHeight-i,o=r.screenWidth-t):8==e?(s=i,o=t):9==e&&(s=i,o=r.screenWidth-t);let a=wx.createCustomAd({style:{left:o,top:s,fixed:!0},adIntervals:60,adUnitId:n});a.isShowAd=!0,this.addInCreateCustomAd(a);let l=e=>{a&&(console.error("积木广告创建失败:",e),a.offError(l),a.destroy())};a.onError(l);let h=()=>{a&&(a.offLoad(h),this.removeInCreateCustomAd(a),a.isShowAd?(a.show(),this.addCustomAd(a)):(a.offError(l),a.destroy()))};a.onLoad(h)}}createTwoCustomAd(){C.getIns().createCustomAd(3,5,this.cusMulHeight/2,this.vecCustomId),C.getIns().createCustomAd(4,5+this.cusMulWidth,this.cusMulHeight/2,this.vecCustomId)}addInCreateCustomAd(e){this.inCreateCustomAds.indexOf(e)<0&&this.inCreateCustomAds.push(e)}removeInCreateCustomAd(e){let t=this.inCreateCustomAds.indexOf(e);t>=0&&this.inCreateCustomAds.splice(t,1)}addCustomAd(e){this.customAds.indexOf(e)<0&&this.customAds.push(e)}destoryCustomAd(){this.isShowCustomAd=!1,this.destoryCustomAdNotSgin()}destoryCustomAdNotSgin(){if(this.customAds.length>0){for(let e=0;e<this.customAds.length;e++)this.customAds[e].destroy();this.customAds.splice(0,this.customAds.length)}if(this.inCreateCustomAds.length>0)for(let e=0;e<this.inCreateCustomAds.length;e++)this.inCreateCustomAds[e].isShowAd=!1}}class O extends Laya.Script{constructor(){super(),this.chineseName="基类",this.isOpen=!1,this.pageName=null,this.viewProp={},this.isAddListerener=!1,this.adObj=null,this.showMore=!1,this.isPartPage=!1,this.pageOpenCallBack=null,this.isAutoExeOpenCallBack=!0,this.isAutoDestroy=!0,this.isNeedTween=!1,this.isDealAdView=!0,this.nodeTween=[],this.tweenBg=null,this.autoDepth=!0,this.teachBtns=[],this.isShowTop=!1,this.isShowLeftBar=!1,this.useNodeTween=!1,this.tweenOpenVals=[],this.tweenOpenVals.push({time:300,prop:{scaleX:.3,scaleY:.3},ease:Laya.Ease.expoOut}),this.tweenOpenVals.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.expoOut}),this.tweenCloseVals=[],this.tweenCloseVals.push({time:150,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.backIn}),this.tweenCloseVals.push({time:150,prop:{scaleX:0,scaleY:0},ease:Laya.Ease.backIn})}insertVal(){let e=[];ce.getIns().getChildBySgin(this.owner,we.getUIName().nodeSgin,e);for(var t=0;t<e.length;t++){this.viewProp[e[t].name]=e[t];let i=e[t].getComponent(b);i&&(i.init(),this.nodeTween.push(i));let n=e[t].getComponent(G);n&&(n.init(),this.teachBtns.push(n))}}pageInit(){this.insertVal(),this.tweenBg=G_UIHelper.seekNodeByName(this.owner,"m_tween_bg")}addListerner(){this.isAddListerener=!0}pagePreload(e){ce.getIns().handlerFun(e)}tweenClose(e){if(this.isNeedTween&&this.tweenCloseVals.length>0){let t=this.tweenBg?this.tweenBg:this.owner;we.getUIMgr().tweenScale(t,this,!1,e)}else ce.getIns().handlerFun(e)}tweenOpen(e){if(this.isNeedTween&&this.tweenCloseVals.length>0){let t=this.tweenBg?this.tweenBg:this.owner;we.getUIMgr().tweenScale(t,this,!0,e)}else ce.getIns().handlerFun(e)}hightPageClose(e){}hightPageOpen(e){}pageOpen(e){this.owner.visible=!0,this.isAddListerener||this.addListerner(),this.isOpen=!0,this.playNodeTween()}pageOpenTweenOver(){this.resigstBtn(),ce.getIns().handlerFun(this.pageOpenCallBack,this)}resigstBtn(){for(let e=0;e<this.teachBtns.length;e++)this.teachBtns[e].resigstBtn()}unResigstBtn(){for(let e=0;e<this.teachBtns.length;e++)this.teachBtns[e].unResigstBtn()}playNodeTween(){for(var e=0;e<this.nodeTween.length;e++)this.nodeTween[e].playTween()}closeNodeTween(){for(var e=0;e<this.nodeTween.length;e++)this.nodeTween[e].endTween()}showAdCallBack(){C.getIns().destoryCustomAd()}pageClose(){this.isAddListerener&&this.removeListerner(),this.isOpen=!1,this.owner.visible=!1,this.closeNodeTween(),this.unResigstBtn()}removeListerner(){this.isAddListerener=!1}pageDestroy(){this.isOpen&&this.pageClose()}setPageOpenCallBack(e){this.pageOpenCallBack=e}depChangeCallBack(){}}class A{constructor(){this.isStart=!1,this.videoPath=null}init(){if(window.tt){tt.getGameRecorderManager().onError(function(e){console.log(e)})}}static getIns(){return this.instance||(this.instance=new A,this.instance.init()),this.instance}start(){if(!this.isStart&&window.tt){let e=tt.getGameRecorderManager();e.onStart(e=>{console.log("录屏开始")}),this.isStart=!0,e.start({duration:300})}}stop(e){if(this.isStart)if(window.tt){let t=tt.getGameRecorderManager();t.onStop(t=>{console.log("录屏暂停:",t.videoPath),this.videoPath=t.videoPath,ce.getIns().handlerFun(e)}),this.isStart=!1,t.stop()}else ce.getIns().handlerFun(e);else ce.getIns().handlerFun(e)}getIsStart(){return this.isStart}shareVideo(e,t=null){if(window.tt){if(null==this.videoPath)return G_PlatHelper.showToast("视屏分享失败"),void ce.getIns().handlerFun(e,!1,1);G_PlatHelper.showLoading();let i=this,n="";t&&(n=G_BaseUrlPath.replace("image.game.hnquyou.com","r.game.hnquyou.com")+t),tt.shareAppMessage({channel:"video",title:"马杀鸡了解一下",desc:"抖音小游戏#马杀鸡了解一下",imageUrl:n,templateId:"",query:"",extra:{videoPath:i.videoPath,videoTopics:["抖音小游戏#马杀鸡了解一下"],hashtag_list:["抖音小游戏#马杀鸡了解一下"],video_title:"你的技艺有我高吗？"},success(){G_PlatHelper.hideLoading(),ce.getIns().handlerFun(e,!0,0)},fail(t){G_PlatHelper.showToast("分享失败"),ce.getIns().handlerFun(e,!1,2)}})}else ce.getIns().handlerFun(e,!1,0)}}class E{constructor(){this.initTweenVals=[],this.tweenVals=[],this.tweenIndex=0,this.endBackFun=null,this.targets=[],this.isLoop=!1,this.isPlayTween=!1,this.cTween=[],this.autoRet=!1,this.delayTime=0,this.playTimes=1,this.curPlayerTimes=0,this.isTest=!1}setLoop(e){this.isLoop=e}setTarget(e){this.targets.indexOf(e)<0&&this.targets.push(e)}clearTarget(){this.targets.splice(0,this.targets.length)}setTweenVals(e){this.initTweenVals=e,this.tweenVals=e}setReverse(e){this.tweenVals=e?this.initTweenVals.slice(0).reverse():this.initTweenVals}setEndCallBack(e){this.endBackFun=e}reset(){if(!this.checkTarget())return;this.curPlayerTimes=0,this.tweenIndex=0;let e=this.tweenVals[this.tweenIndex].prop,t=Object.keys(e);for(let i=0;i<t.length;i++){let n=t[i];for(let t=0;t<this.targets.length;t++)this.targets[t][n]=e[n]}this.tweenIndex++}checkTarget(){let e=!0;for(let e=this.targets.length-1;e>=0;e--){let t=this.targets[e];t&&!t.destroyed||this.targets.splice(e,1)}return(e=0!=this.targets.length)||(e=0!=this.tweenVals.length),e}play(){this.isPlayTween||this.checkTarget()&&(this.reset(),this.isPlayTween=!0,0!=this.delayTime?Laya.timer.once(this.delayTime,this,()=>{this.doNext()}):this.doNext())}autoReset(e){this.autoRet=e}setPlayTimes(e){this.playTimes=e}doNext(){if(!this.checkTarget())return;if(!this.isPlayTween)return;if(this.tweenIndex>=this.tweenVals.length){if(this.curPlayerTimes++,!(this.isLoop||this.curPlayerTimes<this.playTimes))return void this.end();if(!this.isPlayTween)return;this.autoRet?this.reset():this.tweenIndex=0}let e=this.tweenVals[this.tweenIndex].time,t=this.tweenVals[this.tweenIndex].prop,i=this.tweenVals[this.tweenIndex].ease;this.clearTween();for(let n=0;n<this.targets.length;n++)0==n?(this.cTween.push(Laya.Tween.to(this.targets[n],t,e,i,null,0,!0,!1)),Laya.timer.once(e,this,this._doNext)):this.cTween.push(Laya.Tween.to(this.targets[n],t,e,i,null,0,!0,!1))}_doNext(){this.isPlayTween&&(this.tweenIndex++,0!=this.delayTime&&this.tweenIndex>=this.tweenVals.length?Laya.timer.once(this.delayTime,this,this.doNext):this.doNext())}setDelayTime(e){this.delayTime=e}end(){this.isPlayTween=!1,this.clearTween(),ce.getIns().handlerFun(this.endBackFun)}clearEndFun(){this.endBackFun=null}clearTween(){for(let e=this.cTween.length-1;e>=0;e--)this.cTween[e]&&this.cTween[e].clear();this.cTween.splice(0,this.cTween.length),Laya.timer.clear(this,this.doNext),Laya.timer.clear(this,this._doNext)}clearVals(){this.tweenVals.splice(0,this.tweenVals.length)}}class k extends Laya.Script{init(){this.isRes=!1,this.touchId=0,this.isMouseDwon=!1,this.mouseDownPos=new Laya.Vector3,this.mouseMoveFun=null,this.mouseDownFun=null,this.mouseUpFun=null,this.tempVec1=new Laya.Vector3,this.resginst()}resginst(){this.isRes||(this.isRes=!0,this.owner.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseUp))}mouseMove(e){if(!this.isMouseDwon)return this.isMouseDwon=!0,this.touchId=e.touchId,this.mouseDownPos.x=e.stageX,this.mouseDownPos.z=e.stageY,void ce.getIns().handlerFun(this.mouseDownFun);this.tempVec1.x=e.stageX,this.tempVec1.z=e.stageY,Laya.Vector3.subtract(this.tempVec1,this.mouseDownPos,this.tempVec1),ce.getIns().handlerFun(this.mouseMoveFun,this.tempVec1.x,-this.tempVec1.z)}mouseUp(e){this.isMouseDwon&&e.touchId==this.touchId&&(this.isMouseDwon=!1,ce.getIns().handlerFun(this.mouseUpFun))}unResginst(){this.isRes&&(this.isRes=!1,this.owner.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.mouseUp))}onDestroy(){this.unResginst()}clearCallBackFun(){this.mouseDownFun=null,this.mouseUpFun=null,this.mouseMoveFun=null}}class N extends O{constructor(){super(),this.adObj=new Object,this.endFun=null,this.curDownTime=0,this.downTime=5,this.isShowTimer=!1,this.timeDownCb=null,this.isShowTop=!0,this.isShowAd=!1,this.isOpenAd=!1,this.dragCrol=null,this.curStoreMgr=null,this.curStoreUI=null,this.storeTween=new E;let e=[];e.push({time:300,prop:{scaleX:.5,scaleY:.5},ease:Laya.Ease.linearOut}),e.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearOut}),this.storeTween.setTweenVals(e),this.storeCloseTween=new E;let t=[];t.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearIn}),t.push({time:300,prop:{scaleX:0,scaleY:0},ease:Laya.Ease.linearIn}),this.storeCloseTween.setTweenVals(t),this.containTween=null,this.speedUpData=null,this.strongeData=null,this.useTime=3e4,this.sellViewItems=[],this.notUseSellItems=[],this.inUseSellItem=[],this.sellNodes=[],this.lastSelltime=0,this.lastSellViewZorder=0}pageInit(){super.pageInit(),ne.getIns().gameView=this,this.viewProp.m_btn_setting.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_btn_setting,()=>{we.getUIMgr().openUI(we.getUIName().SettingView)})});let e=this.viewProp.m_dragArea.getComponent(k);e instanceof k&&(this.dragCrol=e,e.init()),this.viewProp.m_beeAdd.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_beeAdd,()=>{ne.getIns().curMap?this.viewProp.m_beeAdd.isMax?G_PlatHelper.showToast("已经到达最大等级!"):this.curStoreMgr.buyBee(this.viewProp.m_beeAdd_Ad,()=>{this.refershBuyBeeStore()}):console.error("商店地域问题！")})}),this.viewProp.m_backStart.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_backStart,()=>{this.backStartPos()})}),this.viewProp.m_capacityAdd.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_capacityAdd,()=>{this.viewProp.m_capacityAdd.isMax?G_PlatHelper.showToast("已经到达最大等级!"):ne.getIns().curMap?this.curStoreMgr.capacityAdd(this.viewProp.m_capacityAdd_Ad,()=>{this.refershCapacityStore()}):console.error("商店地域问题！")})}),this.viewProp.m_daoHurt.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_daoHurt,()=>{this.viewProp.m_daoHurt.isMax?G_PlatHelper.showToast("已经到达最大等级!"):ne.getIns().curMap?this.curStoreMgr.upHurt(this.viewProp.m_daoHurt_Ad,()=>{this.refershCapacityStore()}):console.error("商店地域问题！")})}),this.viewProp.m_beeSpeed.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_beeSpeed,()=>{this.viewProp.m_beeSpeed.isMax?G_PlatHelper.showToast("已经到达最大等级!"):ne.getIns().curMap?this.curStoreMgr.beeSpeedUp(this.viewProp.m_beeAdd_Ad,()=>{this.refershBuyBeeStore()}):console.error("商店地域问题！")})}),this.viewProp.m_toNext_by_gold.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_toNext_by_gold,()=>{this.viewProp.m_toNext_by_gold.isMax&&G_PlatHelper.showToast("已经全部通关!")}),this.curStoreMgr.toNextLvByGold()}),this.viewProp.m_toNext_by_honey.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_toNext_by_honey,()=>{this.viewProp.m_toNext_by_honey.isMax&&G_PlatHelper.showToast("已经全部通关!")}),this.curStoreMgr.toNextLvByHoney()}),this.viewProp.m_speedUp_ad.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_speedUp_ad,()=>{ce.getIns().shareOrAd(this.viewProp.m_speedUp_ad,()=>{this.toSpeedUp()})})}),this.viewProp.m_stronge_ad.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_stronge_ad,()=>{ce.getIns().shareOrAd(this.viewProp.m_stronge_ad,()=>{this.toStronge()})})}),this.viewProp.m_bee_change_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_bee_change_btn,()=>{this.curStoreMgr.combineBee(this.viewProp.m_bee_change_btn,()=>{this.refershBeeConBineStore()})})}),this.viewProp.m_wanted_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_wanted_btn,()=>{this.showWantedView(!1),this.refershPropView()})})}pagePreload(e){Laya.loader.load("prefab/item/sellTips.json",Laya.Handler.create(this,()=>{ce.getIns().handlerFun(e)}))}toStronge(){let e=we.getPlayerInfo().getPlayerSkillDataById(2).toTime-G_ServerInfo.getServerTime();e<=0?e=G_ServerInfo.getServerTime()+this.useTime:e+=G_ServerInfo.getServerTime()+this.useTime,we.getPlayerInfo().addSkillTime(2,e),this.refershStrongeView()}toSpeedUp(){let e=we.getPlayerInfo().getPlayerSkillDataById(1).toTime-G_ServerInfo.getServerTime();e<=0?e=G_ServerInfo.getServerTime()+this.useTime:e+=G_ServerInfo.getServerTime()+this.useTime,we.getPlayerInfo().addSkillTime(1,e),this.refershSpeedUpView()}backStartPos(){ne.getIns().curMap&&ne.getIns().curMap.toStartPos()}closeAllStore(){this.viewProp.m_beeStore.visible=!1,this.viewProp.m_capacityStore.visible=!1,this.viewProp.m_beeChange.visible=!1,this.viewProp.m_next_lv.visible=!1,this.viewProp.m_sellView.visible=!1,G_Event.dispatchEvent(G_EventName.EN_CLOSEALLSTORE)}setContain(e,t,i=!0){this.containTween&&this.containTween.clear();let n=e/t;i?this.containTween=Laya.Tween.to(this.viewProp.m_contain,{value:n},500,Laya.Ease.linearOut,null,0,!0,!1):this.viewProp.m_contain.value=n,this.viewProp.m_contain_val.text=G_Utils.bigNumber2StrNumber(BigNumber(e),2),this.viewProp.m_contain_Full.visible=n>=1}refershSpeedUpView(){let e=we.getPlayerInfo().getPlayerSkillDataById(1);this.viewProp.m_speedUp_ad.visible=!1,this.viewProp.m_speedUp_use.visible=!1,this.viewProp.m_speedUp_count.text=e.count,e.count>0?this.viewProp.m_speedUp_use.visible=!0:(ce.getIns().setAdBtnIcon(this.viewProp.m_speedUp_ad),this.viewProp.m_speedUp_ad.visible=!0),e.toTime>G_ServerInfo.getServerTime()?(this.speedUpData=e,this.openTimer(),ne.getIns().playerMgr.speedUp()):(we.getPlayerInfo().addSkillTime(1,0),this.viewProp.m_speedUp_time.text="00:00:00",ne.getIns().playerMgr.cancelSpeedUp())}refershStrongeView(){let e=we.getPlayerInfo().getPlayerSkillDataById(2);this.viewProp.m_stronge_ad.visible=!1,this.viewProp.m_stronge_use.visible=!1,this.viewProp.m_stronge_time.text=e.count,e.count>0?this.viewProp.m_stronge_use.visible=!0:(ce.getIns().setAdBtnIcon(this.viewProp.m_stronge_ad),this.viewProp.m_stronge_ad.visible=!0),e.toTime>G_ServerInfo.getServerTime()?(this.strongeData=e,this.openTimer()):(we.getPlayerInfo().addSkillTime(2,0),this.viewProp.m_stronge_time.text="00:00:00")}openTimer(){this.refershTimer(),Laya.timer.clear(this,this.refershTimer),Laya.timer.loop(1e3,this,this.refershTimer)}closeTimer(){this.speedUpData||this.strongeData||Laya.timer.clear(this,this.refershTimer)}refershTimer(){let e=G_ServerInfo.getServerTime();if(this.speedUpData){let t=this.speedUpData.toTime-e;t>0?this.viewProp.m_speedUp_time.text=G_Utils.convertSecondToHourMinuteSecond(Math.floor(.001*t),!1):this.refershSpeedUpView()}if(this.strongeData){let t=this.strongeData.toTime-e;t>0?this.viewProp.m_stronge_time.text=G_Utils.convertSecondToHourMinuteSecond(Math.floor(.001*t),!1):this.refershStrongeView()}}pageOpen(e){super.pageOpen(e),this.isOpenAd=!1,this.isShowAd=!1,this.refershNative(),this.closeTimerDown(),this.closeAllStore(),this.refershSpeedUpView(),this.refershStrongeView(),ne.getIns().playerMgr.refershContainView(),A.getIns().start(),e&&e.endFun&&(this.endFun=e.endFun,this.endFun()),this.checkDelineReward(),ne.getIns().playerMgr.setCorl(),this.showWantedView(!1),this.refershPropView(),this.startTeach()}refershPropView(){this.viewProp.m_backHome_bar.visible=we.getPlayerInfo().getBackHomeOpen(),this.viewProp.m_speedUp_bar.visible=we.getPlayerInfo().getSpeedOpen(),this.viewProp.m_stronge_bar.visible=we.getPlayerInfo().getStrongeOpen()}addListerner(){G_Event.removeEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this.appOnShow,this)}removeListerner(){G_Event.removeEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this.appOnShow,this)}refershBuyBeeStore(){let e=we.getPlayerInfo().getBeeSpeedLv(),t=v.getIns().maxId;if(e<t){let t=G_GameDB.getGrowUpByID(e);this.viewProp.m_beeSpeed.isMax=!1;let i=t.beeSpeedCutGold,n=ce.getIns().canUseItemNotTips(i,3);this.viewProp.m_beeSpeed.gray=!n,this.viewProp.m_beeSpeed_Ad.visible=!n,this.viewProp.m_beeSpeed_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(i))}else this.viewProp.m_beeSpeed_gold.text=0,this.viewProp.m_beeSpeed_Ad.visible=!1,this.viewProp.m_beeSpeed.isMax=!0,this.viewProp.m_beeSpeed.gray=!0;this.viewProp.m_beeSpeed_count.text=e;let i=we.getPlayerInfo().getBuyBeeTimes();if(i<t){let e=G_GameDB.getGrowUpByID(i);this.viewProp.m_beeAdd.isMax=!1;let t=e.beeBuy;this.viewProp.m_beeAdd_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(t));let n=ce.getIns().canUseItemNotTips(t,3);this.viewProp.m_beeAdd.gray=!n,this.viewProp.m_beeAdd_Ad.visible=!n}else this.viewProp.m_beeAdd_Ad.visible=!1,this.viewProp.m_beeAdd.isMax=!0,this.viewProp.m_beeAdd_gold.text=0,this.viewProp.m_beeAdd.gray=!0;this.viewProp.m_beeAdd_count.text=i}refershCapacityStore(){let e=we.getPlayerInfo().getContainLv(),t=v.getIns().maxId,i=G_GameDB.getGrowUpByID(e);if(e<t){this.viewProp.m_capacityAdd.isMax=!1;let e=i.pCapacityGold,t=ce.getIns().canUseItemNotTips(e,3);this.viewProp.m_capacityAdd_Ad.visible=!t,this.viewProp.m_capacityAdd.gray=!t,this.viewProp.m_capacityAdd_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(e))}else this.viewProp.m_capacityAdd_Ad.visible=!1,this.viewProp.m_capacityAdd_gold.text=0,this.viewProp.m_capacityAdd.gray=!0,this.viewProp.m_capacityAdd.isMax=!0;if(this.viewProp.m_capacityAdd_count.text=G_Utils.bigNumber2StrNumber(BigNumber(i.pCapacity)),e=we.getPlayerInfo().getHurtLv(),i=G_GameDB.getGrowUpByID(e),e<t){this.viewProp.m_daoHurt.isMax=!1;let e=i.pHurtGold,t=ce.getIns().canUseItemNotTips(e,3);this.viewProp.m_daoHurt_Ad.visible=!t,this.viewProp.m_daoHurt.gray=!t,this.viewProp.m_daoHurt_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(e))}else this.viewProp.m_daoHurt.isMax=!0,this.viewProp.m_daoHurt_gold.text=0,this.viewProp.m_daoHurt_Ad.visible=!1,this.viewProp.m_daoHurt.gray=!0;this.viewProp.m_daoHurt_count.text=G_Utils.bigNumber2StrNumber(BigNumber(i.pHurt))}refershNextLvStroe(){let e=we.getPlayerInfo().getShowLevelCount();e<v.getIns().maxId?(this.viewProp.m_toNext_by_honey.isMax=!1,this.viewProp.m_toNext_by_gold.isMax=!1,this.viewProp.m_to_next_gold.text=G_Utils.bigNumber2StrNumber(v.getIns().getNextLvGold(e)),this.viewProp.m_to_next_honey.text=this.viewProp.m_to_next_gold.text):(this.viewProp.m_toNext_by_gold.isMax=!0,this.viewProp.m_toNext_by_honey.isMax=!0,this.viewProp.m_to_next_gold.text=0,this.viewProp.m_to_next_honey.text=this.viewProp.m_to_next_gold.text)}refershBeeConBineStore(){this.viewProp.m_bee_change_btn.gray=0==w.getIns().getConbineBeeId().beeId}openStoreUI(e,t){this.storeTween.end(),this.storeTween.clearTarget(),this.curStoreMgr=t,2==e?(this.curStoreUI=this.viewProp.m_beeStore,this.refershBuyBeeStore()):3==e?(this.refershCapacityStore(),this.curStoreUI=this.viewProp.m_capacityStore):1==e?this.curStoreUI=this.viewProp.m_sellView:4==e?(this.curStoreUI=this.viewProp.m_next_lv,this.refershNextLvStroe()):5==e&&(this.curStoreUI=this.viewProp.m_beeChange,this.refershBeeConBineStore()),this.curStoreUI&&(this.curStoreUI.visible=!0,this.storeTween.setTarget(this.curStoreUI),this.storeTween.play())}hideStore(){this.curStoreUI&&(this.curStoreUI.visible=!1)}closeStoreUI(e,t){this.curStoreMgr=null,this.curStoreUI&&(this.storeCloseTween.isTest=!0,this.storeCloseTween.clearEndFun(),this.storeCloseTween.clearTarget(),this.storeCloseTween.setTarget(this.curStoreUI),this.storeCloseTween.end(),this.storeCloseTween.setEndCallBack(()=>{this.curStoreUI&&(this.curStoreUI.visible=!1,this.curStoreUI=null)}),this.storeCloseTween.play())}showWantedView(e,t){this.viewProp.m_wantedView.visible=e,e&&(this.viewProp.m_wanted_tips.text=t)}onUpdate(){if(this.curStoreMgr&&this.curStoreUI){let e=this.curStoreMgr.owner.transform.position,t=ne.getIns().cameraMgr.worldPosToScreenPos(e);this.curStoreUI.pos(t.x,t.y-200)}if(this.inUseSellItem.length>0){let e=ne.getIns().playerMgr.node.transform.position,t=ne.getIns().cameraMgr.worldPosToScreenPos(e);for(let e=0;e<this.inUseSellItem.length;e++)this.inUseSellItem[e].pos(t.x-50,t.y-150)}this.sellNodes.length>0&&Laya.timer.currTimer-this.lastSelltime>150&&(this.createSellTween(this.sellNodes.pop()),this.lastSelltime=Laya.timer.currTimer)}pageClose(){super.pageClose(),this.dragCrol.clearCallBackFun()}appOnShow(){this.checkDelineReward()}timeDownFun(){if(we.getIns().isPause)return;this.curDownTime+=1;let e=this.downTime-this.curDownTime;e>0&&(this.viewProp.m_timer_down.skin="game/gameView/time{0}.png".format(e)),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("timeDown"));let t=this.viewProp.m_timer_down,i=t.tween;i&&(i.clear(),i=null),t.scaleX=1,t.scaleY=1,t.alpha=1,i=Laya.Tween.to(t,{scaleX:2,scaleY:2,alpha:0},400,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{(i=t.tween)&&(i.clear(),i=null),Laya.Tween.to(t,{scaleX:1,scaleY:1,alpha:1},100,Laya.Ease.linearOut),t.tween=i}),null,0,!0,!1),t.tween=i,this.downTime-this.curDownTime<=0&&this.closeTimerDown()}openTimeDown(e=5,t){this.isShowTimer||(this.timeDownCb=t,this.isShowTimer=!0,this.downTime=e,this.viewProp.m_timer_down.visible=!0,this.curDownTime=0,this.viewProp.m_timer_down.skin="game/gameView/time{0}.png".format(this.downTime),Laya.timer.loop(1e3,this,this.timeDownFun))}closeTimerDown(){ce.getIns().handlerFun(this.timeDownCb),this.timeDownCb=null,this.isShowTimer=!1,this.viewProp.m_timer_down.visible=!1,Laya.timer.clear(this,this.timeDownFun)}addListerner(){super.addListerner(),G_Event.addEventListerner(G_EventName.GAMESTART,this.gameStart,this),G_Event.addEventListerner(G_EventName.END_CHECK_OVER,this.gameOver,this),G_Event.addEventListerner(G_EventName.EN_REFERSH_POPBAR,this.refershPropView,this)}removeListerner(){super.removeListerner(),G_Event.removeEventListerner(G_EventName.GAMESTART,this.gameStart,this),G_Event.removeEventListerner(G_EventName.END_CHECK_OVER,this.gameOver,this),G_Event.removeEventListerner(G_EventName.EN_REFERSH_POPBAR,this.refershPropView,this)}refershNative(){}startTeach(){this.isStartTeach||(this.isStartTeach=!0)}showTeachTips(e){1==we.getPlayerInfo().getShowLevelCount()&&(1==e?this.showWantedView(!0,"移动到花丛中，开始采蜜"):2==e?this.showWantedView(!0,"返回交易点，出售蜂蜜"):3==e&&this.showWantedView(!0,"花费金币，购买蜜蜂或升级属性"))}endTeach(){this.isStartTeach&&(this.isStartTeach=!1)}checkDelineReward(){if(G_PlayerInfo.getOutlineTime()>=180){let e=new Object;e.count=we.getPlayerInfo().getDelineGold(),we.getUIMgr().openUI(we.getUIName().DelineReward,e)}}showSellView(e){let t=null;if(this.notUseSellItems.length>0)t=this.notUseSellItems.pop();else{let e=new Laya.Prefab;e.json=Laya.loader.getRes("prefab/item/sellTips.json"),t=e.create(),this.owner.addChild(t),t.tNode=t.getChildAt(0),t.sellView_gold=G_UIHelper.seekNodeByName(t,"sellView_gold"),this.sellViewItems.push(t)}t.visible=!1,t.sellView_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(e.toFixed(2))),this.sellNodes.push(t)}setSellGold(e){this.viewProp.m_sellView_gold.text=G_Utils.bigNumber2StrNumber(BigNumber(BigNumber(e.toFixed(2))),2)}createSellTween(e){e.visible=!0,e.zOrder=this.lastSellViewZorder++;let t=e.tNode;t.centerX=0,t.centerY=0,t.alpha=1;let i=t.centerY-100;this.inUseSellItem.push(e);let n=Laya.Tween.to(t,{centerY:i,alpha:.2},800,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{e.visible=!1;let t=this.inUseSellItem.indexOf(e);t>=0&&this.inUseSellItem.splice(t,1),(t=this.notUseSellItems.indexOf(e))<0&&this.notUseSellItems.push(e),n.clear(),n.recover(),n=null}),0,!0,!1);e.tween=n}clearSellView(){this.inUseSellItem.splice(0,this.inUseSellItem.length),this.notUseSellItems.splice(0,this.notUseSellItems.length);let e=null;for(let t=0;t<this.sellViewItems.length;t++)e=this.sellViewItems[t],this.notUseSellItems.push(e),e.visible=!1,e.tween&&(e.tween.clear(),e.tween.recover(),e=null);this.lastSellViewZorder=0}}class L extends Laya.Script{constructor(){super(),this.playerActor=null,this.isAddLis=!1}init(){}setActor(e){e instanceof P&&(this.playerActor=e)}resgistLis(){this.isAddLis||(console.error("添加键位监听"),this.isAddLis=!0,Laya.stage.on(Laya.Event.KEY_DOWN,this,this.keyDown),Laya.stage.on(Laya.Event.KEY_UP,this,this.keyUp))}removeLis(){this.isAddLis&&(this.isAddLis=!1,Laya.stage.off(Laya.Event.KEY_DOWN,this,this.keyDown),Laya.stage.off(Laya.Event.KEY_UP,this,this.keyUp))}onDestroy(){this.removeLis()}keyDown(e){e.keyCode==Laya.Keyboard.W?we.getIns().gameFail():e.keyCode==Laya.Keyboard.S&&this.playerActor.changeCameraView(1),e.keyCode==Laya.Keyboard.A&&this.playerActor.toRunPos(),e.keyCode==Laya.Keyboard.D&&ne.getIns().configMgr.enemyMgr.toRunPos(),e.keyCode==Laya.Keyboard.SHIFT&&this.playerActor.speedUp(this.playerActor.boneDis+1),e.keyCode==Laya.Keyboard.SPACE&&this.playerActor.addBodyBone(2),e.keyCode==Laya.Keyboard.C&&this.playerActor.changeBodySpace(this.playerActor.boneDis-1),e.keyCode==Laya.Keyboard.X&&this.playerActor.punchOneMan(),e.keyCode==Laya.Keyboard.Z&&this.playerActor.punchMan(.5),e.keyCode==Laya.Keyboard.V&&this.playerActor.punchMan(1),e.keyCode==Laya.Keyboard.P&&this.playerActor.punchMan(.2),e.keyCode==Laya.Keyboard.T&&(Laya.timer.scale=5)}keyUp(e){e.keyCode==Laya.Keyboard.SHIFT?this.playerActor.speedEnd():e.keyCode==Laya.Keyboard.SPACE&&this.playerActor.cancelBrake(),e.keyCode==Laya.Keyboard.T&&(Laya.timer.scale=1)}}class D extends Laya.Script{constructor(){super(),this.targetPos=new Laya.Vector3,this.startPos=new Laya.Vector3,this.node=null,this.a=-15,this.leafName=null,this.jumpTween=null,this.jumpTempVec=new Laya.Vector3,this.moveSpeed=.1,this.moveTemp=new Laya.Vector3,this.curMoveTime=0,this.moveTime=500,this.targetFlower=null,this.curState=-1}init(e){this.leafName=e,this.node=ce.getIns().returnSprite3D(this.owner)}setPos(e){e.transform.localPosition.cloneTo(this.owner.transform.localPosition),this.owner.transform.localPosition=this.owner.transform.localPosition,e.transform.localRotationEuler.cloneTo(this.owner.transform.localRotationEuler),this.owner.transform.localRotationEuler=this.owner.transform.localRotationEuler}changeState(e){e!=this.curState&&(this.curState=e,1==e||(2==e?this.curMoveTime=0:3==e?(this.curMoveTime=0,G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("collect"))):4==e&&(this.curMoveTime=0)))}toTarget(e,t){this.targetFlower=t,Laya.Vector3.subtract(e,this.node.transform.position,this.moveTemp),Laya.Vector3.normalize(this.moveTemp,this.moveTemp),Laya.Vector3.scale(this.moveTemp,this.moveSpeed,this.moveTemp);let i=.5*this.node.transform.position.y+this.node.transform.position.y;this.jumpTween=Laya.Tween.to(this.jumpTempVec,{y:i},200,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.clearJumpTween(),this.jumpTween=Laya.Tween.to(this.jumpTempVec,{y:e.y},500,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{this.clearJumpTween(),this.jumpEnd()}),0,!0,!1)}),0,!0,!1),this.changeState(1)}clearJumpTween(){this.jumpTween&&(this.jumpTween.clear(),this.jumpTween.recover(),this.jumpTween=null)}onUpdate(){switch(this.curState){case 1:this.node.transform.translate(this.moveTemp,!1);let e=this.node.transform.position;e.y=this.jumpTempVec.y,this.node.transform.position=e;break;case 2:this.curMoveTime+=Laya.timer.delta,this.curMoveTime>500&&this.changeState(3);break;case 3:this.curMoveTime+=Laya.timer.delta;let t=this.curMoveTime/this.moveTime;t=t>1?1:t;let i=this.node.transform.position;Laya.Vector3.lerp(i,ne.getIns().playerMgr.getPos(),t,i),this.node.transform.position=i,1==t&&(this.isMoveToPlayer=!1,this.movePlayerEnd());break;case 4:this.curMoveTime+=Laya.timer.delta,this.curMoveTime>=3e3&&(this.recycle(),this.isToRecycle=!1)}}jumpEnd(){ne.getIns().playerMgr.isHoneyFull()?this.changeState(4):this.changeState(2)}movePlayerEnd(){ne.getIns().playerMgr.addHoney(this.targetFlower.flowerData.fallHoney),this.recycle()}recycle(){this.changeState(-1),ne.getIns().recycleMgr.recycle(this.leafName,this.owner)}}class B{constructor(){this.levelData=null,this.hurtPoint={},this.fallHoney={}}static getIns(){return this.ins||(this.ins=new B),this.ins}init(){}setLevelData(e){this.levelData=e;let t=e.hurtPoint.split(","),i=null;for(let e=0;e<t.length;e++)i=t[e].split("&"),this.hurtPoint[i[0]]=parseInt(i[1]);let n=e.fallHoney.split(",");for(let e=0;e<n.length;e++)i=n[e].split("&"),this.fallHoney[i[0]]=parseFloat(i[1])}}class M extends Laya.Script{constructor(){super(),this.toPlayerDis=1e4,this.lastCols=[],this.colType=0,this.node=null,this.buildRang=.5,this.buildRangSqu=1}init(){if(this.buildRangSqu=this.buildRang*this.buildRang,this.owner instanceof Laya.Sprite3D&&(this.node=this.owner),we.getIns().isTest&&G_PlatHelper.isWINPlatform()){let e=new m;e.init(this.owner);let t=this.buildRang;e.drawBox(t,t)}}getPos(){return this.owner.transform.position}addCols(e){this.lastCols.indexOf(e)<0&&(e.colliderEnterObj&&e.colliderEnterObj(this.colType,this),this.lastCols.push(e))}removeCols(e){let t=this.lastCols.indexOf(e);t>=0&&(this.lastCols.splice(t,1),e.collideExitObj&&e.collideExitObj(this.colType,this))}unResgist(){}resginst(){}checkRegist(){}}class R extends M{constructor(){super(),this.ownerPlane=null,this.colType=2,this.colloctPos=[],this.curTime=0,this.huaFengPos=null,this.isInReborn=!1,this.startLocalRot=new Laya.Vector3,this.isBeingStand=!1,this.flowerData=new x,this.scaleTemp=new Laya.Vector3,this.scaleTween=new E;let e=[];e.push({time:200,prop:{x:1,y:1,z:1},ease:Laya.Ease.linearOut}),e.push({time:200,prop:{x:1.2,y:1.2,z:1.2},ease:Laya.Ease.linearOut}),e.push({time:200,prop:{x:1,y:1,z:1},ease:Laya.Ease.linearIn}),this.scaleTween.setTarget(this.scaleTemp),this.scaleTween.setTweenVals(e),this.scaleTween.setEndCallBack(()=>{this.isScale=!1}),this.isScale=!1,this.flowerName=null,this.beeCarryPos=null,this.tempV1=new Laya.Vector3,this.tempV2=new Laya.Vector3,this.tempRot=new Laya.Quaternion,this.rotTween=null,this.toRot=new Laya.Vector3,this.isRot=0,this.rotSpeed=4,this.state=0,this.rotTime=0,this.maxRotAngle=45}init(){super.init(),this.huaFengPos=ce.getIns().findSprite3D(this.owner,"huaFengPos"),this.owner.transform.rotationEuler.cloneTo(this.startLocalRot),this.childNode=this.owner.getChildByName("Model"),this.beeCarryPos=this.owner.getChildByName("beeCarryPos"),ce.getIns().getChildBySgin(this.owner,"colloctPos_",this.colloctPos)}setPlantType(e,t){this.flowerName="Flower_"+t.id;let i=G_GameDB.getGrowUpByID(B.getIns().hurtPoint[e]);this.flowerData.id=t.id,this.flowerData.hurtPoint=i.pHurt,this.flowerData.fallHoney=B.getIns().fallHoney[e],this.flowerData.reBornTime=1e3*t.reBornTime}toReborn(){}toBorder(e){}getCollectPos(){let e=ce.getIns().randomNum(0,this.colloctPos.length-1);return this.colloctPos[e]}showHoneyAnim(){ce.getIns().createEf("Fx_hufen",this.huaFengPos.transform.position,ne.getIns().owner,1.5,!0)}beeStartCollect(e){this.isBeingStand=!0}beeEndColloct(e){this.isBeingStand=!1}canBeingCollect(){return!this.isBeingStand&&!this.isDeath()}isDeath(){return!1}daoEnter(e){this.beKang(e)}daoExit(e){}beKang(e){G_PlatHelper.vibratePhone(!1),this.scaleTween.end(),this.scaleTween.play(),this.isScale=!0,this.showHoneyAnim(),e.canHurtFlower(this.flowerData.hurtPoint)&&(this.isDeath()||(this.fallLeafs(!0),this.fallLeafs(!0)))}fallLeafs(e,t){ce.getIns().handlerFun(t)}setDownRotEnd(){this.isRot=2,this.node.transform.rotationEuler.cloneTo(this.toRot),this.rotTween=Laya.Tween.to(this.toRot,{x:this.startLocalRot.x,y:this.startLocalRot.y,z:this.startLocalRot.z},2e3,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.isRot=0,this.rotTween&&(this.rotTween.clear(),this.rotTween.recover(),this.rotTween=null)}),0,!0,!1)}addCols(e){super.addCols(e),this.toBorder(ne.getIns().playerMgr.playerPoss)}unResgist(){this.removeCols(ne.getIns().playerMgr),this.ownerPlane.unResgistFlower(this)}resginst(){this.ownerPlane.resgistFlower(this)}}class x{constructor(){this.id=0,this.hurtPoint=20,this.fallHoney=20,this.curHoney=this.honeyMax,this.reBornTime=1e4,this.isInReborn=!1}}class U extends R{constructor(){super(),this.buildRang=.8,this.leafs=[],this.hideLeafIndex=0,this.posTemp=new Laya.Vector3}init(){super.init(),ce.getIns().getChildBySgin(this.owner,"leaf_",this.leafs),this.leafs.sort((e,t)=>-.5+Math.random()),this.flowerData.leafs=this.leafs}toBorder(e){let t=e[0].vec,i=e[0].speedVal;if(Laya.Vector3.subtract(this.getPos(),t,this.tempV1),0==this.tempV1.x&&0==this.tempV1.z)return;Laya.timer.clear(this,this.setDownRotEnd),this.tempV1.y=20,Laya.Vector3.cross(this.tempV1,ce.getIns().upVec,this.tempV1),Laya.Vector3.normalize(this.tempV1,this.tempV1),Laya.Vector3.scale(this.tempV1,-this.maxRotAngle,this.tempV1);let n=this.rotSpeed*i;Laya.Vector3.subtract(this.tempV1,this.owner.transform.localRotationEuler,this.tempV1);let s=Laya.Vector3.scalarLength(this.tempV1)/(60*n)*1e3;Laya.Vector3.normalize(this.tempV1,this.tempV1),Laya.Vector3.scale(this.tempV1,n,this.tempV1),this.curTime=0,this.rotTime=s,this.isRot=1}setDownRotEnd(){this.isRot=2,this.node.transform.rotationEuler.cloneTo(this.toRot),this.rotTween=Laya.Tween.to(this.toRot,{x:this.startLocalRot.x,y:this.startLocalRot.y,z:this.startLocalRot.z},2e3,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{this.isRot=0,this.rotTween&&(this.rotTween.clear(),this.rotTween.recover(),this.rotTween=null)}),0,!0,!1)}onUpdate(){if(this.isInReborn)this.curTime+=Laya.timer.delta,this.curTime>=this.flowerData.reBornTime&&this.toReborn();else if(1==this.isRot?(this.curTime+=Laya.timer.delta,this.node.transform.rotate(this.tempV1,!1,!1),this.curTime>this.rotTime&&this.setDownRotEnd()):2==this.isRot&&(this.toRot.cloneTo(this.node.transform.localRotationEuler),this.node.transform.localRotationEuler=this.node.transform.localRotationEuler),this.isScale){let e=this.node.transform.localScale;this.scaleTemp.cloneTo(e),this.node.transform.localScale=e}}isDeath(){return this.hideLeafIndex>=this.leafs.length}reborn(){this.isInReborn||(this.isInReborn=!0,this.childNode.active=!1,this.curTime=0)}toReborn(){this.startLocalRot.cloneTo(this.owner.transform.rotationEuler),this.owner.transform.rotationEuler=this.owner.transform.rotationEuler,this.hideLeafIndex=0,this.isInReborn=!1,this.childNode.active=!0;for(let e=0;e<this.leafs.length;e++)this.leafs[e].active=!0;this.resginst()}beeEndColloct(e){super.beeEndColloct(e),this.isDeath()||(ce.getIns().createEf("Fx_BeeSuccess",this.huaFengPos.transform.position,ne.getIns().owner,1.5,!0),this.fallLeafs())}createLeaf(e,t){let i=ne.getIns().recycleMgr.getGo(this.flowerName),n=null;return i?(n=i.getComponent(D),t.addChild(i)):(n=(i=Laya.Sprite3D.instantiate(this.leafs[e],t)).addComponent(D)).init(this.flowerName),i.active=!0,n}createFallLeafs(e,t,i){let n=ne.getIns().recycleMgr.getGo(e),s=null;if(n)s=n.getComponent(D),t.addChild(n),n.active=!0,ce.getIns().handlerFun(i,s);else{let o=G_ResPath.resPath.format(e);G_NodePoolMgr.preload([o],()=>{n=G_NodePoolMgr.getNode(o),t.addChild(n),(s=n.addComponent(D)).init(e),ce.getIns().handlerFun(i,s)})}}fallLeafs(e,t){if(!this.isDeath()){if(e){let e="bian_{0}_1".format(this.flowerData.id);this.createFallLeafs(e,ne.getIns().owner,e=>{let t=this.posTemp;t.x=10*(-.5+Math.random()),t.z=10*(-.5+Math.random());let i=this.leafs[this.hideLeafIndex].transform.position;i.cloneTo(e.owner.transform.position),e.owner.transform.position=e.owner.transform.position;let n=this.tempV1;n.setValue(180*Math.random(),180*Math.random(),180*Math.random()),n.cloneTo(e.owner.transform.rotationEuler),e.owner.transform.rotationEuler=e.owner.transform.rotationEuler,Laya.Vector3.add(i,t,t),t.y=.84,e.toTarget(t,this)})}this.leafs[this.hideLeafIndex].active=!1,this.hideLeafIndex++,this.isDeath()&&(this.toDeath(),this.unResgist(),this.reborn())}}toDeath(){}}class H extends U{constructor(){super(),this.buildRang=1.2}toBorder(e){}toDeath(){super.toDeath(),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("flower_die_big"))}}class V extends R{constructor(){super(),this.buildRang=.6,this.dead=!1}init(){super.init()}toBorder(e){let t=e[0].vec,i=e[0].speedVal;Laya.timer.clear(this,this.setDownRotEnd),Laya.Vector3.subtract(this.getPos(),t,this.tempV1),this.tempV1.y=20,Laya.Vector3.cross(this.tempV1,ce.getIns().upVec,this.tempV1),Laya.Vector3.normalize(this.tempV1,this.tempV1),Laya.Vector3.scale(this.tempV1,-this.maxRotAngle,this.tempV1);let n=this.rotSpeed*i;Laya.Vector3.subtract(this.tempV1,this.owner.transform.localRotationEuler,this.tempV1);let s=Laya.Vector3.scalarLength(this.tempV1)/(60*n)*1e3;Laya.Vector3.normalize(this.tempV1,this.tempV1),Laya.Vector3.scale(this.tempV1,n,this.tempV1),this.curTime=0,this.rotTime=s,this.isRot=1}onUpdate(){if(this.isInReborn)this.curTime+=Laya.timer.delta,this.curTime>=this.flowerData.reBornTime&&this.toReborn();else if(1==this.isRot?(this.curTime+=Laya.timer.delta,this.node.transform.rotate(this.tempV1,!1,!1),this.curTime>this.rotTime&&this.setDownRotEnd()):2==this.isRot&&(this.toRot.cloneTo(this.node.transform.localRotationEuler),this.node.transform.localRotationEuler=this.node.transform.localRotationEuler),this.isScale){let e=this.node.transform.localScale;this.scaleTemp.cloneTo(e),this.node.transform.localScale=e}}reborn(){this.isInReborn||(this.isInReborn=!0,this.childNode.active=!1,this.curTime=0)}toReborn(){this.resginst(),this.dead=!1,this.isInReborn=!1,this.childNode.active=!0}beeEndColloct(e){super.beeEndColloct(e),this.isDeath()||ce.getIns().createEf("Fx_BeeSuccess",this.huaFengPos.transform.position,ne.getIns().owner,1.5,!0)}createLeaf(){return null}isDeath(){return this.dead}fallLeafs(e,t){this.dead=!0,this.dead&&(this.unResgist(),this.reborn()),ne.getIns().playerMgr.addHoney(this.flowerData.fallHoney),ce.getIns().handlerFun(t)}}class F extends M{constructor(){super(),this.flowers=[],this.curCheckFlowerIndex=0,this.checkFlowerCountInFrame=5,this.playerPoss=[],this.checkFlowerFrame=10,this.curCheckFrame=0,this.findArray=[],this.plantType=0}init(){super.init();let e=this.owner.name.split("_");this.plantType=parseInt(e[1]);let t=[];ce.getIns().getChildBySginInFirstChild(this.owner,"Flower_",t);let i=null;for(let e=0;e<t.length;e++){let n,s=t[e].name.split("_"),o=parseInt(s[1]);(n=5==o||7==o||8==o?t[e].addComponent(H):6==o?t[e].addComponent(V):t[e].addComponent(U)).init(),n.ownerPlane=this,i=G_GameDB.getFlowerByID(o),n.setPlantType(this.plantType,i),this.flowers.push(n)}this.checkFlowerCountInFrame=Math.ceil(t.length/this.checkFlowerFrame)}getFlowers(){return this.flowers}unResgistFlower(e){let t=this.flowers.indexOf(e);t>=0&&this.flowers.splice(t,1)}resgistFlower(e){this.flowers.indexOf(e)<0&&this.flowers.push(e)}checkCol(e,t,i,n){let s=null;this.curCheckFlowerIndex>=this.flowers.length&&(this.curCheckFlowerIndex=0);let o=this.curCheckFlowerIndex;for(let t=this.curCheckFlowerIndex;t<this.flowers.length&&!(this.curCheckFlowerIndex-o>this.checkFlowerCountInFrame);t++)this.curCheckFlowerIndex++,(s=this.flowers[t]).isDeath()?s.isInLastArray&&(s.isInLastArray=!1,s.removeCols(n)):(s.toPlayerDis=ce.getVecSquared(e.transform.position,s.getPos(),s.buildRang,i),s.toPlayerDis<0?s.isInLastArray||(s.isInLastArray=!0,s.addCols(n)):s.isInLastArray&&(s.isInLastArray=!1,s.removeCols(n)))}getAllItemArrays(){return this.flowers.concat(this.stores)}addColInNewRang(e,t,i){for(let n=t.length-1;n>=0;n--)t[n].toPlayerDis<e&&i.push(t[n])}closePlane(){}openPlane(){}}class W extends M{constructor(){super(),this.colType=1,this.buildRang=.8,this.storeType=2,this.isOpen=!1}init(){super.init(),G_Event.addEventListerner(G_EventName.EN_CLOSEALLSTORE,this.forceCloseStore,this)}onDestroy(){super.onDestroy(),G_Event.removeEventListerner(G_EventName.EN_CLOSEALLSTORE,this.forceCloseStore,this)}openStore(){this.isOpen||(this.isOpen=!0,this.openStoreEnd())}openStoreEnd(){ne.getIns().gameView.openStoreUI(this.storeType,this)}closeStore(){this.isOpen&&(this.isOpen=!1,this.closeStoreEnd())}forceCloseStore(){this.closeStore()}closeStoreEnd(){ne.getIns().gameView.closeStoreUI(this.storeType,this)}addCols(e){super.addCols(e),this.openStore()}removeCols(e){super.removeCols(e),this.closeStore()}}class j extends W{constructor(){super(),this.storeType=4}init(){super.init()}toNextLvByGold(){let e=v.getIns().getNextLvGold(we.getPlayerInfo().getShowLevelCount());ce.getIns().canUseItem(e,3)&&(ce.getIns().useItem(e,3),this.closeStore(),ne.getIns().inDoor(this))}toNextLvByHoney(){let e=v.getIns().getNextLvGold(we.getPlayerInfo().getShowLevelCount());ne.getIns().playerMgr.curCapcityContain<=e?G_PlatHelper.showToast("蜂蜜不足!"):(ne.getIns().playerMgr.useHoney(e),this.closeStore(),ne.getIns().inDoor(this))}}class K extends W{constructor(){super(),this.storeType=2,this.buildRang=2.5}buyBee(e,t){if(!w.getIns().checkCanAddBee())return;let i=v.getIns().getBeeBuyTimesGold(we.getPlayerInfo().getBuyBeeTimes()),n=()=>{we.getPlayerInfo().buyBee(),w.getIns().createBee(1),ce.getIns().handlerFun(t)};ce.getIns().canUseItemNotTips(i,3)?(n(),ce.getIns().useItem(i,3)):ce.getIns().shareOrAd(e,()=>{n()})}beeSpeedUp(e,t){let i=v.getIns().getBeeSpeedGold(we.getPlayerInfo().getBeeSpeedLv()),n=()=>{we.getPlayerInfo().upBeeSpeedLv(),ce.getIns().handlerFun(t)};ce.getIns().canUseItemNotTips(i,3)?(ce.getIns().useItem(i,3),n()):ce.getIns().shareOrAd(e,()=>{n()})}}class X extends W{constructor(){super(),this.storeType=1,this.beeSellPos=null,this.buildRang=1.8,this.teachState=0}init(){super.init(),this.beeSellPos=ce.getIns().returnSprite3D(G_UIHelper.seekNodeByName(this.owner,"beeSellPos"))}getBeeSellPos(){return this.beeSellPos}openStoreEnd(){super.openStoreEnd();let e=w.getIns().getAllBees();for(let t=0;t<e.length;t++){if(!e[t].beaData.hasHoney())continue;let i=t;Laya.timer.once(100*i,this,()=>{e[i].toSell(this)})}let t=ne.getIns().playerMgr.getHoney();if(0!=t){G_PlayerInfo.addItemByType(3,t),ne.getIns().playerMgr.clearHoney();let e=.2*t;for(let t=0;t<5;t++)ne.getIns().gameView.showSellView(e);ne.getIns().gameView.setSellGold(t),this.teachState++,G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("sell"))}else ne.getIns().gameView.hideStore()}closeStoreEnd(){super.closeStoreEnd(),ne.getIns().gameView.clearSellView(),1==this.teachState&&(this.teachState++,ne.getIns().gameView.showTeachTips(3))}sellOne(e){e>0&&(ne.getIns().gameView.showSellView(e),we.getPlayerInfo().addItemByType(3,e))}}class Y extends W{constructor(){super(),this.storeType=3,this.buildRang=3.5}capacityAdd(e,t){let i=v.getIns().getCapacityGold(we.getPlayerInfo().getContainLv()),n=()=>{we.getPlayerInfo().upContainLv(),ce.getIns().handlerFun(t)};ce.getIns().canUseItem(i,3)?(ce.getIns().useItem(i,3),n()):ce.getIns().shareOrAd(e,()=>{n()})}upHurt(e,t){let i=v.getIns().getHurtGold(we.getPlayerInfo().getHurtLv()),n=()=>{we.getPlayerInfo().upHurtLv(),ce.getIns().handlerFun(t)};ce.getIns().canUseItem(i,3)?(ce.getIns().useItem(i,3),n()):ce.getIns().shareOrAd(e,()=>{n()})}}class z extends W{constructor(){super(),this.storeType=5,this.buildRang=2}combineBee(e,t){let i=w.getIns().getConbineBeeId();if(0==i.beeId)return void G_PlatHelper.showToast("未拥有三个相同的蜜蜂!");if(!w.getIns().canOpreateBee())return void G_PlatHelper.showToast("操作太块了!");let n=i.bees;if(n.length>3){let e=n.length-3;for(let t=0;t<e;t++)n.pop()}let s=i.beeId,o=G_GameDB.getBeeByID(s).evoId;G_GameDB.getBeeByID(o)?(w.getIns().removeBees(n,o),w.getIns().createBee(o)):console.log("蜜蜂无法进化!"),ce.getIns().handlerFun(t)}}class Q extends M{constructor(){super(),this.colType=3,this.stoneType=0,this.buildRang=1}checkRegist(){this.owner.active||this.unResgist()}setStoneType(e){this.stoneType=e;let t=!1;1==this.stoneType?t=we.getPlayerInfo().getBackHomeOpen():2==this.stoneType?t=we.getPlayerInfo().getSpeedOpen():3==this.stoneType&&(t=we.getPlayerInfo().getStrongeOpen()),this.owner.active=!t}addCols(e){let t;super.addCols(e),1==this.stoneType?(we.getPlayerInfo().setBackHomeOpen(),t="获得传送石，使用后玩家可回到该岛屿的初始位置"):2==this.stoneType?(we.getPlayerInfo().setSpeedOpen(),t="速度强化，开启后增加玩家的移动速度"):3==this.stoneType&&(we.getPlayerInfo().setStrongeOpen(),t="力量强化，开启后使玩家可采摘任意花朵"),ne.getIns().gameView.showWantedView(!0,t),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("stone")),this.owner.active=!1,this.removeCols(e),this.unResgist()}unResgist(){if(ne.getIns().curMap){let e=ne.getIns().curMap.fucStones,t=e.indexOf(this);t>=0&&e.splice(t,1)}}}class J extends M{checkRegist(){this.owner.active||this.unResgist()}addCols(e){super.addCols(e),w.getIns().checkCanAddBee()&&w.getIns().createBee(1),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("box")),this.owner.active=!1,this.removeCols(e),this.unResgist()}unResgist(){if(ne.getIns().curMap){let e=ne.getIns().curMap.beeBoxs,t=e.indexOf(this);t>=0&&e.splice(t,1)}}}class Z extends Laya.Script{constructor(){super(),this.startPos=null,this.playerNavMeshGroup=null,this.mapKey=null,this.plants=[],this.beeBoxs=[],this.curNearPlane,this.tmepV1=new Laya.Vector3,this.tempV2=new Laya.Vector3,this.curColPlayers=[],this.floweArray=[],this.inKangFlowers=[],this.curFrame=0,this.checkFrame=5,this.outDoor=null,this.isInDoor=!1,this.stores=[],this.fucStones=[]}init(e){this.mapKey=e,this.startPos=this.owner.getChildByName("startPos");let t=[];if(t.push(this.owner.getChildByName("staticObj").getChildByName("end").getChildByName("outMap_1")),0!=t.length){let e=t[0].addComponent(j);e.init(),this.outDoor=e}else console.error("没有出去点");let i=[];ce.getIns().getChildBySginInFirstChild(this.owner,"plant_",i);for(let e=0;e<i.length;e++){let t=i[e].addComponent(F);t.init(),this.plants.push(t)}let n=this.owner.getChildByName("NavObj").getChildByName("hint_nav");n&&(n.active=!1);let s=[];ce.getIns().getChildBySginInFirstChild(this.owner,"Store_",s);for(let e=0;e<s.length;e++){let t,i=parseInt(s[e].name.split("_")[1]);2==i?t=s[e].addComponent(K):1==i?t=s[e].addComponent(X):3==i?t=s[e].addComponent(Y):5==i&&(t=s[e].addComponent(z)),t.init(),this.stores.push(t)}let o=[];ce.getIns().getChildBySginInFirstChild(this.owner,"wanted_",o);for(let e=0;e<o.length;e++){let t=o[e].addComponent(Q),i=parseInt(o[e].name.split("_")[1]);t.init(),t.setStoneType(i),this.fucStones.push(t),t.checkRegist()}let r=[];ce.getIns().getChildBySginInFirstChild(this.owner,"bee_box_",r);for(let e=0;e<r.length;e++){let t=r[e].addComponent(J);t.init(),this.beeBoxs.push(t),t.checkRegist()}}getPlantsByType(e){for(let t=0;t<this.plants.length;t++)if(this.plants[t].plantType==e)return this.plants[t];return null}getStoreType(e){for(let t=0;t<this.stores.length;t++)if(this.stores[t].storeType==e)return this.stores[t];return null}checkColloder(e){let t=ce.getVecSquared(this.outDoor.getPos(),e.owner.transform.position,this.outDoor.buildRang,e.colRang);if(t<=0?this.isInDoor||(this.outDoor.addCols(e),this.isInDoor=!0):this.isInDoor&&(this.outDoor.removeCols(e),this.isInDoor=!1),this.curFrame++,!this.curNearPlane||this.curFrame>this.checkFrame){t=1e3,this.curFrame=0;let i=null;for(let n=0;n<this.plants.length;n++){let s=ce.getVecSquared(e.owner.transform.position,this.plants[n].getPos(),0,0);s<t&&(i=this.plants[n],t=s)}i&&i!=this.curNearPlane&&(this.curNearPlane&&this.curNearPlane.closePlane(),e.changePlantCallback(),i instanceof F&&(this.curNearPlane=i),i.openPlane())}this.curNearPlane&&(this.checkArrayDisPlayer(this.stores,e),this.fucStones.length>0&&this.checkArrayDisPlayer(this.fucStones,e),this.beeBoxs.length>=0&&this.checkArrayDisPlayer(this.beeBoxs,e),this.curNearPlane.checkCol(e.owner,e.colRangSquare,e.colRang,e))}checkArrayDisPlayer(e,t){let i;for(let n=0;n<e.length;n++)(i=e[n]).toPlayerDis=ce.getVecSquared(t.owner.transform.position,i.getPos(),i.buildRang,t.colRang),i.toPlayerDis<0?i.isInLastArray||(i.isInLastArray=!0,i.addCols(t)):i.isInLastArray&&(i.isInLastArray=!1,i.removeCols(t))}walkToIdle(e){if(!this.curNearPlane)return;let t=this.curNearPlane.getFlowers();this.floweArray.splice(0,this.floweArray.length),this.curNearPlane.addColInNewRang(y.getIns().beaRangSquare,t,this.floweArray),e.hasPlantsInBeaRang(this.floweArray)}getInHurtRangFlowers(e,t){if(!this.curNearPlane)return this.inKangFlowers.splice(0,this.inKangFlowers.length),null;if(t){let t=this.curNearPlane.getFlowers();this.inKangFlowers.splice(0,this.inKangFlowers.length),this.curNearPlane.addColInNewRang(e.kangRangSquare,t,this.inKangFlowers);for(let e=this.inKangFlowers.length-1;e>=0;e--)this.inKangFlowers[e].isDeath()&&this.inKangFlowers.splice(e,1)}else for(let e=this.inKangFlowers.length-1;e>=0;e--)this.inKangFlowers[e].isDeath()&&this.inKangFlowers.splice(e,1);return this.inKangFlowers}getLastKangFlowers(){return this.inKangFlowers}toStartPos(){ne.getIns().playerMgr.backStartPos(this.startPos.transform.position,this.startPos.transform.rotationEuler)}getLastFlowers(){return this.floweArray}openMap(){this.owner.active=!0}closeMap(){this.owner.active=!1}getStartPoint(){return this.startPos}createNavMeshGroup(e){this.playerNavMeshGroup||(this.playerNavMeshGroup=NevMesh.getGroup(this.mapKey,e))}hasInMap(e){let t=NevMesh.zoneNodes[this.mapKey].groups[this.playerNavMeshGroup],i=NevMesh.zoneNodes[this.mapKey].vertices;if(ne.getIns().isInChangeMap)return!1;if(!i||!t)return!1;for(let n=0;n<t.length;n++)if(NevMesh.Vector3.isVectorInPolygon(e,t[n],i))return!0;return!1}}class ${constructor(){this.mapNav={}}static getIns(){return this.instance||(this.instance=new $),this.instance}loadMap(e,t){if(this.mapNav[e])return void ce.getIns().handlerFun(t,this.mapNav[e]);let i="res/online/Sprites/Conventional/{0}.nav".format(e);Laya.loader.load(i,Laya.Handler.create(this,i=>{let n=NevMesh.buildNodesByJson(i);NevMesh.setZoneData(e,n),this.mapNav[e]=n,ce.getIns().handlerFun(t)}),null,"json")}}class ee extends _{constructor(){super(),this.rotTemp_pos=null,this.playerMgr=null,this.moveRang=6,this.targetPos=new Laya.Vector3,this.isMoveEnd=!0,this.moveSpeed=.2,this.collectSpeed=.5,this.moveTemp=new Laya.Vector3(0,0,this.moveSpeed),this.tempV1=new Laya.Vector3,this.tempV3=new Laya.Vector3,this.tempRot=new Laya.Quaternion,this.moveTime=0,this.curMoveTime=0,this.tempV2=new Laya.Vector3,this.lastMoveTime=-1,this.beaData,this.targetFlower=null,this.tarMovePos=null,this.curCollectTimer=0,this.curAllTime=0,this.fowerCarrayPos=null,this.carrayLeaf=null,this.roadCount=3,this.curRoadCount=0}init(){super.init(),this.roadCount=2+Math.floor(3*Math.random()),this.rotTemp_pos=ce.getIns().returnSprite3D(G_UIHelper.seekNodeByName(this.owner,"rotTemp_pos")),this.changeState(0),this.fowerCarrayPos=ce.getIns().findSprite3D(this.owner,"flower_pos"),G_Event.addEventListerner(G_EventName.EN_BEESPEEDUP,this.speedUpCallBack,this)}onDestroy(){super.onDestroy(),G_Event.removeEventListerner(G_EventName.EN_BEESPEEDUP,this.speedUpCallBack,this)}speedUpCallBack(){this.setSpeedTime()}setBeeData(e){this.beaData=new te,this.beaData.beeId=e.id;let t=G_GameDB.getBeeByID(e.id);this.beaData.initColloctTime=1e3*t.collectSpeed,this.setSpeedTime()}setSpeedTime(){let e,t=we.getPlayerInfo().getBeeSpeedLv();e=t>v.getIns().maxId?G_GameDB.getGrowUpByID(v.getIns().maxId):G_GameDB.getGrowUpByID(t),this.beaData.collectAllTime=this.beaData.initColloctTime-this.beaData.initColloctTime*e.beeSpeedCut;let i=.3*this.beaData.initColloctTime;this.beaData.collectAllTime<i&&(this.beaData.collectAllTime=i)}setPlayer(e){e instanceof P&&(this.playerMgr=e)}canFindNextTarget(){return-1==this.lastMoveTime||(this.curRoadCount++,this.curRoadCount<this.roadCount||(this.curRoadCount=0,Laya.timer.currTimer-this.lastMoveTime>300))}changeStateAction(e){0==e?(this.playAnim(I.getIns().Idle),this.isMoveEnd=!0,this.lastMoveTime=-1):1==e?(this.isMoveEnd=!0,this.lastMoveTime=-1):2==e&&(this.playAnim(I.getIns().Cast_Spell),this.startColloct())}isSpace(){return 0==this.state&&!this.beaData.isCollectFull()}onUpdate(){if(we.getIns().isGameStart())switch(this.state){case 0:this.idleState();break;case 1:this.moveToPos(this.tarMovePos)&&this.changeState(2);break;case 2:this.inColloct();break;case 3:this.moveToPos(this.tarMovePos)&&this.endSell();break;case 4:this.moveToPos(ne.getIns().playerMgr.contain_pos,this.moveSpeed)&&this.changeState(0)}}startColloct(){this.curCollectTimer=0,this.curAllTime=0}inColloct(){this.curCollectTimer+=Laya.timer.delta,this.curAllTime+=Laya.timer.delta,this.curCollectTimer>=this.beaData.collectTime&&(this.curCollectTimer=0,this.collectOnce())}collectOnce(){this.targetFlower&&!this.targetFlower.isDeath()?(this.targetFlower.showHoneyAnim(),this.curAllTime>=this.beaData.collectAllTime&&this.endColloct()):this.endColloct()}endColloct(){this.endFlower(),this.checkHasFlower()}checkHasFlower(){ne.getIns().playerMgr.isStand()&&ne.getIns().curMap&&ne.getIns().playerMgr.checkHasBeeToCollect(this,ne.getIns().curMap.getLastFlowers())}moveToPos(e,t=this.moveSpeed){return this.isMoveEnd&&(Laya.Vector3.subtract(e.transform.position,this.node.transform.position,this.tempV1),this.moveTime=Laya.Vector3.scalarLength(this.tempV1)/(60*t)*1e3,Laya.Vector3.normalize(this.tempV1,this.moveTemp),Laya.Vector3.scale(this.moveTemp,t,this.moveTemp),this.curMoveTime=0,this.getRotByTarget(e.transform.position,this.tempRot),this.isMoveEnd=!1),this.curMoveTime+=Laya.timer.delta,Laya.Quaternion.lerp(this.node.transform.rotation,this.tempRot,this.curMoveTime/this.moveTime,this.node.transform.rotation),this.node.transform.rotation=this.node.transform.rotation,this.node.transform.translate(this.moveTemp,!1),this.curMoveTime>=this.moveTime&&(e.transform.position.cloneTo(this.node.transform.position),this.node.transform.position=this.node.transform.position,e.transform.rotation.cloneTo(this.node.transform.rotation),this.node.transform.rotation=this.node.transform.rotation,this.isMoveEnd=!0,!0)}toFlower(e){this.changeState(1),this.curMoveTime=0,this.isMoveEnd=!0,this.targetFlower=e,this.tarMovePos=this.targetFlower.getCollectPos(),e.beeStartCollect(this)}toSell(e){this.curMoveTime=0,this.isMoveEnd=!0,this.storeMgr=e,this.tarMovePos=e.getBeeSellPos(),this.changeState(3)}endSell(){let e=this.beaData.getHoney();this.beaData.clearHoney(),this.storeMgr.sellOne(e),this.clearLeaf(),this.changeState(0)}toCarrayLeaf(e,t){this.carrayLeaf=e,this.carrayLeaf.setPos(t)}clearLeaf(){this.carrayLeaf&&(this.carrayLeaf.recycle(),this.carrayLeaf=null)}endFlower(){if(this.targetFlower){if(ne.getIns().playerMgr.isHoneyFull()){this.beaData.setHoney(this.targetFlower.flowerData.fallHoney);let e=this.targetFlower.createLeaf(0,this.fowerCarrayPos);e&&this.toCarrayLeaf(e,this.targetFlower.beeCarryPos),this.changeState(0)}else this.changeState(4),ne.getIns().playerMgr.addHoney(this.targetFlower.flowerData.fallHoney);this.targetFlower.beeEndColloct(this),this.targetFlower=null}else this.changeState(0)}getRotByTarget(e,t){Laya.Vector3.subtract(e,this.node.transform.position,this.tempV1),ce.getIns().resetTransform(this.rotTemp_pos),this.rotTemp_pos.transform.getUp(this.tempV2),Laya.Vector3.subtract(this.rotTemp_pos.transform.position,this.tempV1,this.tempV3),this.rotTemp_pos.transform.lookAt(this.tempV3,this.tempV2,!1),this.rotTemp_pos.transform.rotation.cloneTo(t)}idleState(){this.isMoveEnd&&this.canFindNextTarget()&&(this.lastMoveTime=Laya.timer.currTimer,this.curMoveTime=0,this.randomPos(this.targetPos),Laya.Vector3.subtract(this.targetPos,this.node.transform.position,this.tempV1),this.moveTime=Laya.Vector3.scalarLength(this.tempV1)/(60*this.moveSpeed)*1e3,this.getRotByTarget(this.targetPos,this.tempRot),this.moveTemp.setValue(0,0,this.moveSpeed),this.isMoveEnd=!1),this.isMoveEnd||(this.curMoveTime+=Laya.timer.delta,Laya.Quaternion.lerp(this.node.transform.rotation,this.tempRot,this.curMoveTime/this.moveTime,this.node.transform.rotation),this.node.transform.rotation=this.node.transform.rotation,this.node.transform.translate(this.moveTemp,!0),this.curMoveTime>=this.moveTime&&(this.isMoveEnd=!0))}randomPos(e){let t=this.playerMgr.bea_center.transform.position;e.x=t.x-this.moveRang*(.5-Math.random()),e.y=t.y-this.moveRang*(.5-Math.random()),e.z=t.z-this.moveRang*(.5-Math.random())}beePosRestart(){let e=new Laya.Vector3;this.randomPos(e),this.setStartPos(e,new Laya.Vector3(0,0,0)),this.lastMoveTime=-1,this.changeState(0)}desBee(){Laya.timer.clearAll(this),this.endFlower(),this.clearLeaf(),this.owner.destroy()}}class te{constructor(){this.beeId=0,this.collectTime=1e3,this.collectAllTime=1e4,this.honey=0,this.initColloctTime=1e3}isCollectFull(){return this.honey>0}hasHoney(){return this.honey>0}setHoney(e){this.honey=e}clearHoney(){this.honey=0}getHoney(){return this.honey}}class ie extends O{constructor(){super(),this.openRightTween=new E,this.openLeftTween=new E}pageInit(){super.pageInit(),ne.getIns().setLoadingView(this),this.viewProp.m_bg.on(Laya.Event.CLICK,this,function(){}),this.openRightTween.setTarget(this.viewProp.m_right),this.openLeftTween.setTarget(this.viewProp.m_left);let e=[];e.push({time:500,prop:{right:0},ease:Laya.Ease.linearOut}),e.push({time:500,prop:{right:-600},ease:Laya.Ease.linearOut}),this.openRightTween.setTweenVals(e);let t=[];t.push({time:500,prop:{left:0},ease:Laya.Ease.linearOut}),t.push({time:500,prop:{left:-600},ease:Laya.Ease.linearOut}),this.openLeftTween.setTweenVals(t)}openBgTwen(){this.openRightTween.clearEndFun(),this.openRightTween.end(),this.openLeftTween.end(),this.openRightTween.setReverse(!1),this.openLeftTween.setReverse(!1),this.openRightTween.play(),this.openLeftTween.play(),this.openRightTween.setEndCallBack(()=>{we.getUIMgr().closeUI(we.getUIName().LodingView)})}closeBgTween(){this.openRightTween.clearEndFun(),this.openRightTween.end(),this.openLeftTween.end(),this.openRightTween.setReverse(!0),this.openLeftTween.setReverse(!0),this.openRightTween.play(),this.openLeftTween.play()}}class ne extends Laya.Script3D{constructor(){super(),this.isLoadPlayer=!1,this.cameraMgr,this.light=null,this.roadDis=0,this.recycleMgr=new a,this.recycleNode=null,this.gameView=null,this.playerMgr=null,this.isInChangeMap=!1,this.mapPart={},this.curMap=null,this.loadingView=null}static getIns(){return this.instance||console.error("地图类不存在!"),this.instance}static setIns(e){e instanceof ne&&(this.instance=e,G_PlatHelper.isWINPlatform()&&(window.G_MapMgr=e))}init(){this.initCamera(),this.light=G_UIHelper.seekNodeByName(this.owner,"light"),this.initLight(this.light),this.model_pos=G_UIHelper.seekNodeByName(this.owner,"model_pos");let e=new Laya.Sprite3D("recycleNode");this.owner.addChild(e),ce.getIns().resetTransform(e),this.recycleNode=e}initLight(e){e instanceof Laya.DirectionLight&&(e.shadowMode=Laya.ShadowMode.None)}initCamera(){let e=G_UIHelper.seekNodeByName(this.owner,"gameCamera").addComponent(s);e instanceof s&&(this.cameraMgr=e,e.init())}setLoadingView(e){e instanceof ie&&(this.loadingView=e)}setGameView(e){e instanceof N&&(this.gameView=e)}isReady(){return this.isLoadPlayer&&this.isOtherLoadOver}initMap(e){this.init(),ce.getIns().handlerFun(e)}changeMinMap(e,t){if(we.getUIMgr().openUI(we.getUIName().LodingView),we.getIns().levelData=e,B.getIns().setLevelData(e),this.isInChangeMap=!0,this.curMap&&this.hideMap(this.curMap),this.mapPart[e.config])this.showMap(this.mapPart[e.config]),this.isInChangeMap=!1,ce.getIns().handlerFun(t,this.mapPart[e.config]);else{this.checkPropIsOpen(e.id);let i=G_ResPath.resPath.format(e.config);G_NodePoolMgr.preload([i],()=>{let n=G_NodePoolMgr.getNode(i);if(n instanceof Laya.Sprite3D){this.owner.addChild(n),ce.getIns().resetTransform(n);let i=n.addComponent(Z);i.init(e.config),this.mapPart[e.config]=i,this.showMap(i),$.getIns().loadMap(e.config,()=>{this.isInChangeMap=!1,ce.getIns().handlerFun(t,i)})}})}}checkPropIsOpen(e){2==e?(we.getPlayerInfo().setBackHomeOpen(),this.gameView&&this.gameView.refershPropView()):3==e&&(we.getPlayerInfo().setSpeedOpen(),we.getPlayerInfo().setStrongeOpen(),this.gameView&&this.gameView.refershPropView())}inDoor(e){we.getPlayerInfo().setToNextLevelID();let t=G_GameDB.getLevelConfigByID(we.getPlayerInfo().getCurLevelId());we.getUIMgr().openUI(we.getUIName().LodingView,null,()=>{this.loadingView.closeBgTween()}),this.changeMinMap(t,e=>{let t=e.getStartPoint();this.playerMgr.setStartPos(t.transform.position,t.transform.rotationEuler),e.createNavMeshGroup(this.playerMgr.owner.transform.position),this.playerMgr.changeMapCallback(),this.loadingView.openBgTwen()})}inChangeMap(){return this.isInChangeMap}showMap(e){e instanceof Z&&(e.openMap(),this.curMap=e)}hideMap(e){e instanceof Z&&e.closeMap(),this.curMap=null}loadMainPlayer(e,t,i,n){this.isLoadPlayer=!1;let s=G_GameDB.getPlayerConfigByID(e),o=G_ResPath.resPath.format(s.model);this.curPlayerId=e,G_NodePoolMgr.preload([o],()=>{if(!this||!this.owner||this.owner.destroyed)return;if(this.curPlayerId!=e)return void console.error("玩家不对应");let r=G_NodePoolMgr.getNode(o);this.owner.addChild(r);let a=r.addComponent(P);if(a instanceof P&&(this.playerMgr=a),a.init(),a.setPlayerData(s),a.setStartPos(t,i),a.enablePeople(),G_PlatHelper.isWINPlatform()){let e=r.addComponent(L);e.init(),e.resgistLis(),e.setActor(a)}w.getIns().initBee(()=>{this.isLoadPlayer=!0,ce.getIns().handlerFun(n)})})}loadBee(e,t){let i=G_ResPath.resPath.format(e);G_NodePoolMgr.preload([i],()=>{let e=G_NodePoolMgr.getNode(i);this.owner.addChild(e);let n=e.addComponent(ee);n.init(),ce.getIns().handlerFun(t,n)})}}class se extends Laya.Script3D{constructor(){super(),this.isAutoRecycle=!1,this.key=null}recycle(e){Laya.timer.once(1e3*e,this,function(){this&&this.owner&&!this.owner.destroyed&&(this.isAutoRecycle?ne.getIns().recycleMgr.recycle(this.key,this.owner):this.owner.destroy())})}setRecycleKey(e){this.key=e}setAutoRecycle(e){this.isAutoRecycle=e}}class oe{constructor(){this.tweenPool=[]}static getIns(){return this.instance||(this.instance=new oe),this.instance}getTween(){let e=null;return 0!=this.tweenPool.length?(e=this.tweenPool[0],this.tweenPool.splice(0,1)):e=new E,e}recycleTween(e){e&&(e.setLoop(!1),e.setDelayTime(0),e.clearEndFun(),e.end(),e.clearTarget()),this.tweenPool.indexOf(e)<0&&this.tweenPool.push(e)}}class re{constructor(){this.isshowFullMatrix=!1}static getIns(){return this.instance||(this.instance=new re,this.instance.init()),this.instance}init(){}showFullMatrix(e){ce.getIns().handlerFun(e)}registerNavigateToMiniCall(){}showExitView(e){G_PlatHelper.isWXPlatform()?(G_UIManager.showUI("newGameExitAd",e),ce.getIns().hintBanner()):ce.getIns().handlerFun(e)}showAdFullView(e){G_PlatHelper.isWXPlatform()||G_PlatHelper.isWINPlatform()?G_UIManager.showUI("fullSceneAd",()=>{ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)}showMoreAd(e){G_PlatHelper.isWXPlatform()||G_PlatHelper.isWINPlatform()?G_UIManager.showUI("moreGameAd",()=>{ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)}showNewFullAd(e){G_PlatHelper.isWXPlatform()?G_UIManager.showUI("newFullSceneAd",()=>{ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)}isOnShow(e){let t=G_UIManager.getUI(e)[1];return!!t&&t.isOnShow()}showClickBtnView(e){G_PlatHelper.isWXPlatform()?G_UIManager.showUI("clickBtnMistake",()=>{ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)}}class ae{constructor(){this.gameServerName="游戏服",this.gameServerId="1",this.userId=null,this.token=null,this.isLogin=!1,this.isInit=!1,this.gameId=2211,this.appId=""}static getIns(){return this.instance||(this.instance=new ae,this.instance.init()),this.instance}init(e){this.isInit=!0,G_PlatHelper.isQQPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QQ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isTTPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_TT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isOPPOPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_OPPO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isVIVOPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_VIVO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isQTTPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isMZPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MZ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isHWPlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HW_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isNativePlatform()?this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NATIVE_MINI_PROGRAM_APP_ID).str:this.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MINI_PROGRAM_APP_ID).str,ce.getIns().handlerFun(e)}login(e){this.isInit&&this.isLogin,ce.getIns().handlerFun(e)}getUId(){return this.isLogin?this.userId:""}getAppId(){if(this.isInit)return this.appId;console.error("xiyou 没有初始化!")}}class le{constructor(){this.isExportAdvEnabled=!0,this.mistakeData=null,this.sceneId=0,this.ttData=null,this.nativeSpace=-1,this.shaderCompiled=!1,this.wxSdkVesion="1.00.00",this.mistake_boxtype=0}static getIns(){return this.instance||(this.instance=new le),this.instance}init(e){S.getIns().init(),re.getIns();let t=[],i=(e,t)=>{G_PlatHelper.getPlat()?G_Switch._getCfgByKey(G_SwitchName.SN_MISTAKE_DATA,(t,i)=>{this.mistakeData=t?i:null,console.log("mistakeData ",this.mistakeData),e()}):(this.mistakeData=null,e())};G_PlatHelper.isWXPlatform()?t.push(new Promise(i)):G_PlatHelper.isQQPlatform()?t.push(new Promise(i)):G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isOPPOPlatform()||(G_PlatHelper.isTTPlatform()?S.getIns().Aufromvidio():G_PlatHelper.isHWPlatform()||G_PlatHelper.isWINPlatform());let n=()=>{this.disLog(),this.loadOverConfig(),ce.getIns().handlerFun(e)};0!=t.length?Promise.all(t).then(e=>{n()}).catch(function(t){ce.getIns().error(t),ce.getIns().handlerFun(e)}):n()}disLog(){G_PlatHelper.getPlat()&&(console.log=function(e){})}loadOverConfig(){}cloneLevelConfig(e,t,i){for(let n=0;n<i.length;n++)e[i[n]]=t[i[n]]}getMistakeData(){return this.mistakeData}getForceUpdate(){return!!G_MistakeMgr.isForceUpdateMistakeEnabledAsync&&G_MistakeMgr.isForceUpdateMistakeEnabledAsync()}showStartAd(){return!!G_MistakeMgr.isStartAdMistakeEnabledAsync&&G_MistakeMgr.isStartAdMistakeEnabledAsync()}isMisPunch(){return!!G_MistakeMgr.isMisPunchMistakeEnabledAsync&&G_MistakeMgr.isMisPunchMistakeEnabledAsync()}autoShowPop(){return!!G_MistakeMgr.isAutoShowPopAdMistakeEnabledAsync&&G_MistakeMgr.isAutoShowPopAdMistakeEnabledAsync()}autoShowGamePop(){return!!G_MistakeMgr.isAutoShowGamePopAdMistakeEnabledAsync&&G_MistakeMgr.isAutoShowGamePopAdMistakeEnabledAsync()}gameOverGetMis(){return!!G_MistakeMgr.isGameOverGetMistakeEnabledAsync&&G_MistakeMgr.isGameOverGetMistakeEnabledAsync()}ShowBoxView(){return!!G_MistakeMgr.isShowBoxViewMistakeEnabledAsync&&G_MistakeMgr.isShowBoxViewMistakeEnabledAsync()}getIsExportAdvEnabled(){return this.isExportAdvEnabled}getIsOpenId(){return!!G_MistakeMgr.isVivoOpenAdMistakeEnabledAsync&&G_MistakeMgr.isVivoOpenAdMistakeEnabledAsync()}getNatvieMisSpace(){return this.nativeSpace}getForeceSelect(){if(G_PlatHelper.isTTPlatform()){if(0==this.ttData.adSwitch)return!1;if(!(1==this.ttData.disFunc[1].status))return!1;let e=parseFloat(this.ttData.disFunc[1].show_per);return Math.random()<=e}return!!G_MistakeMgr.isForece_selectMistakeEnabledAsync&&G_MistakeMgr.isForece_selectMistakeEnabledAsync()}showSensitiveScene(){return!G_PlatHelper.isTTPlatform()&&(!G_MistakeMgr.isSensitiveSceneMistakeEnabledAsync||G_MistakeMgr.isSensitiveSceneMistakeEnabledAsync())}getBtnDelayShow(){return G_PlatHelper.isTTPlatform()?0!=this.ttData.adSwitch&&1==this.ttData.disFunc[2].status:!!G_MistakeMgr.isBtnDelayShowMistakeEnabledAsync&&G_MistakeMgr.isBtnDelayShowMistakeEnabledAsync()}showOppoEndAd(){return!!G_MistakeMgr.isOppoEndAdMistakeEnabledAsync&&G_MistakeMgr.isOppoEndAdMistakeEnabledAsync()}showAdBox(){return!!G_MistakeMgr.isShowAdBoxMistakeEnabledAsync&&G_MistakeMgr.isShowAdBoxMistakeEnabledAsync()}preloadAsset(e){let t=[],i=G_PlayerInfo.getCurLevelId(),n=G_GameDB.getLevelConfigByID(i);t.push(G_ResPath.resPath.format(n.config));let s=G_PlayerInfo.getSkinId(),o=G_GameDB.getPlayerConfigByID(s);t.push(G_ResPath.resPath.format("Eve"+n.floorId)),t.push(G_ResPath.resPath.format(o.model)),0!=t.length?G_NodePoolMgr.preload(t,()=>{ce.getIns().handlerFun(e)}):ce.getIns().handlerFun(e)}preCompileShader(e){if(this.shaderCompiled)return void ce.getIns().handlerFun(e);this.shaderCompiled=!0;ce.getIns().loadTxt("res/tempConf/shaderCompile.txt",t=>{(t=>{let i=JSON.parse(t);ce.getIns().compileShader(i,e)})(t)})}debugModeShader(){Laya.Shader3D.debugMode=!0;let e=[];for(let t=0;t<Laya.Shader3D.debugShaderVariantCollection.variantCount;t++){let i=Laya.Shader3D.debugShaderVariantCollection.getByIndex(t),n={};n.shaderName=i.shader.name,n.defineNames=i.defineNames,n.passIndex=i.passIndex,n.subShaderIndex=i.subShaderIndex,e.push(n)}console.error(JSON.stringify(e))}openBoxView(e){if(G_PlatHelper.isWXPlatform()&&this.ShowBoxView()){let t=new Object;t.callBack=e,we.getUIMgr().openUI(we.getUIName().OpenBoxView,t)}else ce.getIns().handlerFun(e)}resetMisByNode(e){e.clickTimes=0,e.isMisShowBanner=!1,e.isCallBack=!1}clickMistake(e,t){if(le.getIns().gameOverGetMis()){if(e.clickTimes++,e.isMisShowBanner)return void(e.isCallBack||(e.isCallBack=!0,ce.getIns().handlerFun(t)));1==e.clickTimes||2==e.clickTimes&&(e.misFun=(()=>{e.misFun=(()=>{ce.getIns().hintBanner(),e.isMisShowBanner=!0}),ce.getIns().createBanner(),Laya.timer.once(2e3,e,e.misFun)}),Laya.timer.once(1500,e,e.misFun))}else ce.getIns().handlerFun(t)}}class he extends Laya.Script{constructor(){super(),this.allPages=new o,this.activePages=[],this.curPageDepth=0,this.uiPagePath="prefab/page/{0}.json",this.maxPageCount=100,this.spaceDepth=20,this.openPageOrderArray=[],this.inOpenPageArray=[],this.box=null,this.adPagesName=[],this.adPagesName.push(we.getUIName().AdFullView),this.adPagesName.push(we.getUIName().AdView),this.actionTween=[],this.openWaitFun=new Object}preLoad(e){let t=[];if(t.push(we.getUIName().AdView),0==t.length)return void ce.getIns().handlerFun(e);let i=0;for(let n=0;n<t.length;n++)this.openUI(t[n],null,()=>{i++,t.length==i&&ce.getIns().handlerFun(e)},!0)}createMask(){this.box||(this.box=new Laya.Box,this.owner.addChild(this.box),this.box.width=1e4,this.box.height=1e4,this.box.centerX=0,this.box.centerY=0,this.box.zOrder=1e4,this.box.mouseThrough=!1,this.box.mouseEnabled=!0)}cretaActivePageData(e,t){let i=new Object;return i.pageBase=e,i.vals=t,i}init(){this.createMask(),ce.getIns().log("mainUI init")}setBoxMask(){this.showMask(this.inOpenPageArray.length>0)}showMask(e){this.box&&(this.box.visible=e)}addInOpen(e,t=null){this.inOpenPageArray.indexOf(e)<0&&(this.inOpenPageArray.push(e),this.setBoxMask()),t&&(this.openWaitFun[e]||(this.openWaitFun[e]=[]),this.openWaitFun[e].push(t))}removeInOpen(e){let t=this.inOpenPageArray.indexOf(e);if(t>=0&&(this.inOpenPageArray.splice(t,1),this.setBoxMask()),this.openWaitFun[e]){let t=this.openWaitFun[e];for(let e=0;e<t.length;e++)t[e]&&t[e]();this.openWaitFun[e]=null}}hasInOpen(e){return this.inOpenPageArray.indexOf(e)>=0}openUI(e,t,i,n=!1){if(!e)return void ce.getIns().error("界面name不为空");if(n&&this.getPageByName(e))return ce.getIns().handlerFun(i),void console.log("界面已经存在 不需要预加载!");if(this.hasInOpen(e))return n?this.addInOpen(e,i):this.addInOpen(e,()=>{this.openUI(e,t,i,!1)}),void console.log("界面正在创建:",e);if(!this.canOperate(e,t))return void ce.getIns().handlerFun(i);this.addInOpen(e,i);let s=()=>{this.removeInOpen(e)},o=this.getPageByName(e),r=()=>{o?(o.owner.visible=!1,o.pageName=e,this.changePage(!0,o),o.pageInit()):ce.getIns().error("请添加界面脚本到",e)},a=()=>{let i=this.getEndActivePage();i&&!o.isPartPage&&i.hightPageOpen(e),this.changeActivePage(!0,o,t),this.changePageOrder(!0,e),this.offectPageDepth(),o.setPageOpenCallBack(s),o.pageOpen(t),o.isDealAdView&&this.showAdView(o);o.tweenOpen(()=>{o.pageOpenTweenOver()})};o?a():this.createUI(e,t=>{o=t.getComponent(O),r(),o.pagePreload(()=>{n?(console.log("预加载界面成功:",e),s()):a()})})}tweenScale(e,t,i,n){let s=oe.getIns().getTween();s.setLoop(!1),i?s.setTweenVals(t.tweenOpenVals):s.setTweenVals(t.tweenCloseVals),s.setTarget(e),s.setEndCallBack(()=>{ce.getIns().handlerFun(n),oe.getIns().recycleTween(s)}),s.play()}reShowAd(){let e=this.getEndActivePage();e&&this.showAdView(e,null)}showAdView(e,t){if(e.pageName==we.getUIName().AdView)return void ce.getIns().handlerFun(t);let i=null;this.openUI(we.getUIName().AdView,null,()=>{(i=this.getPageByName(we.getUIName().AdView)).showMoreBtn(e.showMore),i.showTop(e.isShowTop),i.showjuggleAD(e.isShowLeftBar),e.adObj?i.setBottomType(e.adObj):i.setBottomType({num:3}),e.showAdCallBack(),ce.getIns().handlerFun(t)})}changeActivePage(e,t,i){if(!t)return void ce.getIns().error("添加的激活页面不为空");let n=this.getActivePageIndexByName(t.pageName);if(e)n>=0&&this.activePages.splice(n,1),this.activePages.push(this.cretaActivePageData(t,i));else{if(n<0)return;this.activePages.splice(n,1)}}getActivePageIndexByName(e){for(var t=0;t<this.activePages.length;t++)if(this.activePages[t].pageBase.pageName==e)return t;return-1}getActivePageByName(e){for(var t=0;t<this.activePages.length;t++)if(this.activePages[t].pageBase.pageName==e)return this.activePages[t].pageBase;return null}changePage(e,t){if(!t)return void ce.getIns().error("添加的页面不存在");let i=this.getPageByName(t.pageName);e?i||this.allPages.addKey(t.pageName,t):i?this.allPages.removeKey(t.pageName):ce.getIns().error("界面不存在",t)}offectPageDepth(){let e=null,t=null;for(let i=0;i<this.activePages.length;i++)(e=this.activePages[i].pageBase).autoDepth&&(e.owner.zOrder=0+i*this.spaceDepth,this.curPageDepth=e.owner.zOrder),e.pageName==we.getUIName().LodingView&&(t=e);t&&(t.owner.zOrder=this.curPageDepth+this.spaceDepth);for(let e=0;e<this.activePages.length;e++)this.activePages[e].pageBase.depChangeCallBack()}offectPageCount(){let e=this.allPages.getCount();if(e>this.maxPageCount){let i=e-this.maxPageCount,n=null,s=this.allPages.getKeys();for(var t=0;t<s.length&&(n=this.allPages.getValue(s[t]),this.isActivePage(n.pageName)||!n.isAutoDestroy||this.hasInOpen(n.pageName)||(this.changePage(!1,n),this.changeActivePage(!1,n),n.pageDestroy(),n.owner.destroy(),!(--i<=0)));t++);}}isActivePage(e){for(var t=0;t<this.activePages.length;t++)if(e==this.activePages[t].pageBase.pageName)return!0;return!1}getPageByName(e){return this.allPages.getValue(e)}getEndActivePage(){if(0==this.activePages.length)return null;for(var e=this.activePages.length-1;e>=0;e--)if(!this.activePages[e].pageBase.isPartPage)return this.activePages[e].pageBase;return null}createUI(e,t){let i=this.uiPagePath.format(e),n=i=>{i.name=e,i.width=this.owner.width,i.height=this.owner.height,i.centerX=0,i.centerY=0,ce.getIns().handlerFun(t,i)},s=this.owner.getChildByName(e);s?(console.log(e,"已经存在!"),n(s)):Laya.loader.create(i,Laya.Handler.create(this,e=>{let t=new Laya.Prefab;t.json=e;let i=t.create();this.owner.addChild(i),n(i)}))}closeUI(e){if(this.hasInOpen(e))return void console.error("正在关闭");if(!this.canOperate(e))return void ce.getIns().handlerFun(callBack);let t=this.getPageByName(e);if(t){if(!t.isOpen)return;this.changePageOrder(!1,e),this.changeActivePage(!1,t);let i=null,n=()=>{t.isPartPage||(i=this.getEndActivePage()),i&&(i.hightPageClose(e),i.isDealAdView&&this.showAdView(i)),t.pageClose(),this.offectPageCount(),this.removeInOpen(e)};this.addInOpen(e),t.tweenClose(n)}else ce.getIns().error("关闭的界面不存在:",e)}printActivePage(){for(var e=0;e<this.activePages.length;e++)console.log(e+"",this.activePages[e].pageBase)}changePageOrder(e,t){if(e){let e=this.openPageOrderArray.length-1;if(e>=0&&t==this.openPageOrderArray[e])return;this.openPageOrderArray.push(t)}else{let e=this.openPageOrderArray.length-1;if(e<0)return;this.openPageOrderArray.splice(e,1)}}canOperate(e,t){return le.getIns().getIsExportAdvEnabled()?!(G_PlatHelper.isQQPlatform()||G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isTTPlatform())||e!=we.getUIName().AdFullView||(t&&ce.getIns().handlerFun(t.closeFun),!1):(e==we.getUIName().AdFullView&&t&&ce.getIns().handlerFun(t.closeFun),this.adPagesName.indexOf(e)<0)}hintAllUI(e){for(var t=0;t<this.activePages.length;t++)this.activePages[t].pageBase.pageName!=e&&(this.activePages[t].pageBase.owner.visible=!1)}closeAllPage(e){let t=null,i=[];i=i.concat(this.activePages);for(let n=0;n<i.length;n++)t=i[n].pageBase,e&&e.indexOf(t.pageName)>=0||this.closeUI(t.pageName)}showAllUI(){for(var e=0;e<this.activePages.length;e++)this.activePages[e].pageBase.owner.visible=!0}hintUIByName(e){let t=this.getActivePageByName(e);t&&(t.owner.visible=!1)}reShowHintUIByName(e){let t=this.getActivePageByName(e);t&&(t.owner.visible=!0)}pageIsOpen(e){let t=this.getPageByName(e);return!(!t||!t.isOpen)}}class ce{constructor(){this.init(),this.btnTweens=new o,this.showBanner=!1,this.oneVec=new Laya.Vector3(1,1,1),this.zeroVec=new Laya.Vector3(0,0,0),this.forwardTemp=new Laya.Vector3,this.upVec=new Laya.Vector3(0,1,0),this.downVec=new Laya.Vector3(0,-1,0),this.inVec=new Laya.Vector3(-1,0,0),this.targetTemp=new Laya.Vector3,this.showBannerDelay=7e4,this.showBannerTimer=0,this.forwardVec=new Laya.Vector3(0,0,1),this.backVec=new Laya.Vector3(0,0,-1),this.angleBase=180/Math.PI,this.tempV1=new Laya.Vector3,this.tempV2=new Laya.Vector3,this.tempV3=new Laya.Vector3}static getIns(){return this.instance||(this.instance=new ce),this.instance}init(){this.log("Tools init")}log(e,...t){Laya.Browser.onPC&&console.log(e,t)}error(e,...t){console.error(e,t)}handlerFun(e,...t){null!=e&&e(...t)}getVector3(e){if(e){let t=e.split("&");return new Laya.Vector3(-parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]))}return this.error("vec输入错误:",e),null}getVector4(e){if(e){let t=e.split("&");return new Laya.Vector4(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]))}return this.error("vec输入错误:",e),null}getRot(e){if(e){let t=e.split("&"),i=this.eularToQuaternion(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]));return i.x=-i.x,i.w=-i.w,i}return this.log("rot输入错误:",e),null}eularToQuaternion(e,t,i){let n=e/180*Math.PI,s=t/180*Math.PI,o=i/180*Math.PI,r=Math.cos(s/2)*Math.sin(n/2)*Math.cos(o/2)+Math.sin(s/2)*Math.cos(n/2)*Math.sin(o/2),a=Math.sin(s/2)*Math.cos(n/2)*Math.cos(o/2)-Math.cos(s/2)*Math.sin(n/2)*Math.sin(o/2),l=Math.cos(s/2)*Math.cos(n/2)*Math.sin(o/2)-Math.sin(s/2)*Math.sin(n/2)*Math.cos(o/2),h=Math.cos(s/2)*Math.cos(n/2)*Math.cos(o/2)+Math.sin(s/2)*Math.sin(n/2)*Math.sin(o/2);return new Laya.Quaternion(r,a,l,h)}resetTransform(e){if(e){let t=e.transform.localScale;this.oneVec.cloneTo(t),e.transform.localScale=t,t=e.transform.localPosition,this.zeroVec.cloneTo(t),e.transform.localPosition=t,this.resetRot(e)}}resetRot(e){if(e){let t=e.transform.localRotationEuler;this.zeroVec.cloneTo(t),e.transform.localRotationEuler=t}}removeChild(e){e&&0!=e._children.length&&e.destroyChildren()}lookAtTarget(e,t){(e=e.clone()).y=0,Laya.Vector3.subtract(e,t.transform.position,this.forwardTemp),this.forwardTemp.y=0,Laya.Vector3.subtract(t.transform.position,this.forwardTemp,this.targetTemp),t.transform.lookAt(this.targetTemp,Laya.Vector3._Up)}getChildBySgin(e,t,i){let n=null;for(var s=0;s<e._children.length;s++)0==(n=e._children[s]).name.indexOf(t)&&i.push(n),this.getChildBySgin(n,t,i)}getChildBySginInFirstChild(e,t,i){let n=null;for(var s=0;s<e._children.length;s++)0==(n=e._children[s]).name.indexOf(t)&&i.push(n)}getMatInChild(e,t){for(var i=0;i<e._children.length;i++){if(e._children[i].meshRenderer){let s=e._children[i].meshRenderer.materials;for(var n=0;n<s.length;n++)t.push(s[n])}this.getMatInChild(e._children[i],t)}}setEnableInstancing(e){let t=null;for(var i=0;i<e.length;i++)(t=e[i])&&(t._shader._enableInstancing=!0)}removeCollder(e){let t=e.getComponent(Laya.PhysicsCollider);t&&t.destroy()}playEffect(e){e.active=!1,e.active=!0}compileShader(e,t){0==e.length&&this.handlerFun(t);let i=null,n=()=>{if(0==e.length)return console.log("shder编译完成"),this.handlerFun(t),void Laya.timer.clear(this,n);for(let t=0;t<6&&t<e.length;t++)i=e.shift(),Laya.Shader3D.compileShaderByDefineNames(i.shaderName,i.subShaderIndex,i.passIndex,i.defineNames)};Laya.timer.loop(20,this,n)}onShareTouched(e,t,i){ce.getIns().btnAction(e);G_Share.share(i,{},!1,function(e){e?(G_WXHelper.showToast("分享成功"),this.handlerFun(t)):G_WXHelper.showToast("分享失败")}.bind(this))}shareOrAd(e,t,i,n=G_ShareScene.SS_FREE_TRY){if(G_PlatHelper.isWINPlatform())this.handlerFun(t);else if(e){this.isPlayAd=!0,e.doTouch||this.setAdBtnIcon(e);let s=function(){this.isPlayAd=!1,ce.getIns().handlerFun(t)}.bind(this),o=function(){this.isPlayAd=!1,ce.getIns().handlerFun(i)}.bind(this);e.doTouch(n,s,o)}}createBanner(e,t){this.showBanner=!0;let i=()=>{this.showBanner&&(G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD),ce.getIns().handlerFun(t))};G_PlatHelper.isQQPlatform()||G_PlatHelper.isWXPlatform()?Laya.timer.once(1e3,this,()=>{i()}):i()}hintBanner(){this.hintBannerNotSgin(),this.showBanner=!1}hintBannerNotSgin(){G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD)}reShowBanner(){this.showBanner&&ce.getIns().createBanner()}cretaeBannerAyn(){G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD)}setAdBtnIcon(e){e&&(e.refreshWay?e.refreshWay():G_UIHelper.refreshFreeWayOfBtn(e))}getColor(e){if(!e)return null;let t=e.split("&"),i=new Laya.Vector4(0,0,0,0);return i.x=parseFloat(t[0])/255,i.y=parseFloat(t[1])/255,i.z=parseFloat(t[2])/255,i.w=1,i}stopAnim(e){if(!e)return;let t=e.getComponent(Laya.Animator);t&&(t.speed=0);for(var i=0;i<e._children.length;i++)(t=e._children[i].getComponent(Laya.Animator))&&(t.speed=0)}playBtnShow(e,t,i){G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isTTPlatform()||G_PlatHelper.isWINPlatform()?ce.getIns().handlerFun(t):this.playBtnShowNotLimit(e,t,i)}playBtnShowNotLimit(e,t,i=G_BtnDoShowTime){if(e&&!e.destroyed){e.visible=!1;let n=100*i;e._tween=Laya.Tween.to(e,{visible:!0},n),Laya.timer.once(n,null,function(){e&&!e.destroyed&&(e._tween=null,e.visible=!0,this.handlerFun(t))}.bind(this))}}bounceScale(e,t,i,n,s=1,o=1.2){e.scaleX=s,e.scaleY=s,Laya.Tween.to(e,{scaleX:o,scaleY:o},t,Laya.Ease.bounceOut),Laya.timer.once(t,this,function(){e&&!e.destroyed&&(Laya.Tween.to(e,{scaleX:s,scaleY:s},i,Laya.Ease.linearIn),Laya.timer.once(i,null,function(){ce.getIns().handlerFun(n)}))})}showToast(e,t){e&&(t||(t=""),G_WXHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs[e]).word.format(t)))}createMatrix(e,t,i,n,s,o){e.splice(0,e.length),n.count=n.line*n.row;let r=G_ResPath.itemPath.format(t);for(var a=0;a<n.count;a++)Laya.loader.create(r,Laya.Handler.create(this,function(t){this.createOne(e,t,i,n,s,o)}))}createOne(e,t,i,n,s,o){let r=new Laya.Prefab;r.json=t;let a=r.create();i.addChild(a),e.push(a),e.length==n.count&&(this.setBoxPos(e,s,n),this.handlerFun(o))}setBoxPos(e,t,i){let n=0;i.row%2==0?n-=(i.row/2-.5)*t.h:n-=(i.row-1)/2*t.h;for(var s=0;s<i.line;s++)for(var o=0;o<i.row;o++){let r=s*i.row+o;e[r].centerX=n+t.h*o,e[r].centerY=0+t.v*s}}createG0ByPrefabs(e,t,i=!1){let n=new Laya.Prefab,s=function(e){n.json=e;let i=n.create();ce.getIns().handlerFun(t,i)};i?s(Laya.loader.getRes(e)):Laya.loader.create(e,Laya.Handler.create(this,e=>{s(e)}))}gteUiJson(e){return Laya.loader.getRes(e)}loadUiJson(e,t){Laya.loader.create(e,Laya.Handler.create(this,function(e){ce.getIns().handlerFun(t)}))}lerp(e,t,i){return i<=0?e:i>=1?t:e+(t-e)*i}bottomDoMove(e,t,i,n,s,o){if(!G_MistakeMgr.isMoveMistakeEnabledAsync()||G_PlatHelper.isTTPlatform())return e.y=i,void this.handlerFun(n,!1);let r=function(e,t,i,n){return e<.55*n?.5*Laya.Ease.bounceIn(2*e,0,i,n)+t:.5*Laya.Ease.bounceOut(2*e-n,0,i,n)+.5*i+t};e.y=t,Laya.timer.once(1e3*s,this,function(){Laya.timer.once(1e3*o,this,function(){this.handlerFun(n,!0)}),Laya.Tween.to(e,{y:i},1e3*o,r)})}canUseItem(e,t){let i=this.canUseItemNotTips(e,t);return 1==t?i||G_WXHelper.showToast("钻石不足"):2==t||(3==t?i||G_WXHelper.showToast("金币不足"):4==t||5==t&&(i||G_WXHelper.showToast("体力不足"))),i}canUseItemNotTips(e,t){if(!G_PlatHelper.getPlat())return!0;if(1==t)return G_PlayerInfo.getDiamCount().gte(e);if(2==t);else{if(3==t)return G_PlayerInfo.getCoin().gte(e);if(4==t);else if(5==t)return e<=G_PlayerInfo.getPower()}return!1}useItem(e,t,i){1==t?G_PlayerInfo.changeDiam(e,!1):2==t?we.getPlayerInfo().useSkinChip(i,e):3==t?G_PlayerInfo.minusCoin(e):5==t&&G_PlayerInfo.usePower(e)}isNumber(e){return e===+e}isString(e){return e===e+""}timestampToTime(e){let t=new Date(e);return t.getFullYear()+"年"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"月"+this.changeNum(t.getDate())+"日"}changeNum(e){return e<10?"0"+e:e}btnAction(e,t){e?(G_SoundMgr.playSound(G_SoundName.SN_CLICK),this.btnTween(e,t)):ce.getIns().handlerFun(t)}btnTween(e,t){if(!e)return;e.scaleX=.8,e.scaleY=.8;let i=e.nodeTween;i&&i.clear(),e.nodeTween=Laya.Tween.to(e,{scaleX:1,scaleY:1},100,Laya.Ease.linearOut,Laya.Handler.create(null,()=>{e.nodeTween.clear(),ce.getIns().handlerFun(t)}),0,!0,!1)}createEf(e,t,i,n,s=!1,o=this.zeroVec,r=!1,a=this.oneVec){n||0==n||(n=1);let l=G_ResPath.resPath.format(e),h=e=>{if(i){if(0!=n){let t=e.getComponent(se);t||(t=e.addComponent(se)),t.setAutoRecycle(s),t.setRecycleKey(l),t.recycle(n)}if(i.addChild(e),this.resetTransform(e),r){e.transform.localPosition=t;let i=e.transform.localRotationEuler;o.cloneTo(i),e.transform.localRotationEuler=i}else{let i=e.transform.position;t.cloneTo(i),e.transform.position=i,i=e.transform.rotationEuler,o.cloneTo(i),e.transform.rotationEuler=i}e.transform.localScale=a,this.playEffect(e)}else e.destroy()},c=ne.getIns().recycleMgr.getGo(l);if(c)return c.active=!0,void h(c);let d=[];d.push(l),G_NodePoolMgr.preload(d,()=>{if(!i||i.destroyed)return;let e=G_NodePoolMgr.getNode(l);h(e)})}showChild(e,t){if(e)for(var i=0;i<e._children.length;i++)e._children[i].active=t}setBtnScaleTween(e){if(!this.btnTweens.hasKey(e)){let t=oe.getIns().getTween(),i=[];i.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearNone}),i.push({time:300,prop:{scaleX:1.1,scaleY:1.1},ease:Laya.Ease.linearNone}),i.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearNone}),t.setTweenVals(i),t.setDelayTime(1e3),t.setTarget(e),t.setLoop(!0),t.play(),this.btnTweens.addKey(e,t)}}setBtnShake(e){if(!this.btnTweens.hasKey(e)){let t=oe.getIns().getTween();t.setLoop(!0),t.setTarget(e);let i=[];i.push({time:100,prop:{rotation:5,scaleX:1.1,scaleY:1.1},ease:Laya.Ease.linearNone}),i.push({time:200,prop:{rotation:-5},ease:Laya.Ease.linearNone}),i.push({time:100,prop:{rotation:0,scaleX:1,scaleY:1},ease:Laya.Ease.linearNone}),t.setTweenVals(i),t.play(),this.btnTweens.addKey(e,t)}}closeBtnTween(e){if(this.btnTweens.hasKey(e)){let t=this.btnTweens.getValue(e);t.end(),this.btnTweens.removeKey(e),oe.getIns().recycleTween(t)}}setImgPercent(e,t){e&&(t>0?(e.mask||(e.mask=new Laya.Sprite),e.mask.graphics.clear(),e.mask.graphics.drawPie(e.width/2,e.height/2,e.width/2,360*t-90,270,"#ffffff")):e.mask=null)}minBigNumber(e){return e.lte(0)&&(e=BigNumber(1)),e}getRandomArrayElements(e,t){let i,n,s=e.slice(0),o=e.length,r=o-t;for(;o-- >r;)i=s[n=Math.floor((o+1)*Math.random())],s[n]=s[o],s[o]=i;return s.slice(r)}createUiRoot(e,t){let i=G_UIHelper.seekNodeByName(Laya.stage,"gameUIRoot");i?console.log("uiRoot 已经存在!"):i=new Laya.Box,i.name="gameUIRoot",e.addChild(i),i.zOrder=10,i.anchorX=.5,i.anchorY=.5,i.bottom=0,i.top=0,i.left=0,i.right=0,i.updateZOrder();let n=i.addComponent(he);we.setUIMgr(n),n.init(),n.preLoad(t),console.log("maingui init")}getRandArrayIndex(e){let t=new n;for(var i=0;i<e.length;i++)t.add(e[i]);t.sort(function(e,t){return e.rate<t.rate?-1:e.rate>t.rate?1:0});let s=0;for(i=0;i<t.getCount();i++)s+=t.getValue(i).rate;let o=Math.floor(Math.random()*s),r=t.getCount();for(i=0;i<r;i++)if((o-=t.getValue(i).rate)<=0)return i;return t.getCount()-1}setUINode(e,t,i){let n=[];ce.getIns().getChildBySgin(e,t,n);for(var s=0;s<n.length;s++)i[n[s].name]=n[s]}setLayer(e,t){if(e){if(e.layer=t,e._children&&0==e._children.length)return;for(let i=0;i<e._children.length;i++)this.setLayer(e._children[i],t)}}insertVec(e,t){return e.x=t.x,e.y=t.y,e.z=t.z,e}getNodeInAnim(e,t,i){if(!e)return;let n=e._keyframeNodeOwners;for(let e=0;e<n.length;e++){let s=n[e];s.propertyOwner._owner.name.indexOf(i)>=0&&t.push(s.propertyOwner._owner)}return t}getNodeInGo(e,t,i,n=2){if(!e)return;if(n<=0)return t;n--;let s=e._children;for(let e=0;e<s.length;e++){let o=s[e];o.name.indexOf(i)>=0&&t.push(o),this.getNodeInGo(o,t,i,n)}return t}offectLevel(e){let t=G_GameDB.getAllLevelConfigCount();return e>t&&0==(e%=t)&&(e=t),e}bottomToMove(e,t,i,n=Laya.Ease.linearOut){if(!G_MistakeMgr.isMoveMistakeEnabledAsync()&&!G_PlatHelper.isWINPlatform())return e.bottom=t,void ce.getIns().handlerFun(i);e.bottom=0,Laya.timer.once(1e3*G_BtnDelayTime,null,()=>{Laya.Tween.to(e,{bottom:t},1e3*G_BrnMoveTimer,n,new Laya.Handler(null,()=>{ce.getIns().handlerFun(i)}),0,!0,!1)})}getArrayRaadomVal(e){return e[Math.floor(Math.random()*(e.length-.1))]}randomNum(e,t){return Math.floor(e+(t-e+.9)*Math.random())}changeRot(e,t,i=50){let n=t-e.transform.localRotationEulerY,s=n>=0?n:-n;if(s>=180){let e=n/s;n=n>0?360-n:360+n,n*=-e}if(0!=n){let e=n/s;n=s<i?s:i,n*=e}e.transform.localRotationEulerY+=n,e.angle>180?e.transform.localRotationEulerY-=360:e.angle<-180&&(e.transform.localRotationEulerY+=360)}changeRotLerp(e,t,i=.8){let n=e.transform.rotation;Laya.Quaternion.lerp(e.transform.rotation,t,i,n),e.transform.rotation=n}getEquipByLv(e,t){return e<3?null:e>=3&&e<6?t+1:e>=6&&e<9?t+2:t+3}setColor(e,t){e&&(t?"#00ff1e"!=e.color&&(e.color="#00ff1e"):"#ff0400"!=e.color&&(e.color="#ff0400"))}canShowBanner(){return!G_PlatHelper.isOPPOPlatform()||!(0==ce.getIns().showBannerTimer||Laya.timer.currTimer-ce.getIns().showBannerTimer<ce.getIns().showBannerDelay)}returnSprite3D(e){return e instanceof Laya.Sprite3D?e:null}findSprite3D(e,t){let i=G_UIHelper.seekNodeByName(e,t);return this.returnSprite3D(i)}cretaeMesh(e,t){let i=Laya.VertexMesh.getVertexDeclaration("POSITION,NORMAL,UV");return Laya.PrimitiveMesh._createMesh(i,new Float32Array(e),new Uint16Array(t))}loadTxt(e,t){if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().getFileSystemManager){G_PlatHelper.getPlat().getFileSystemManager().readFile({filePath:e,encoding:"latin1",success:e=>{ce.getIns().handlerFun(t,e.data)}})}else Laya.loader.load(e,Laya.Handler.create(this,e=>{ce.getIns().handlerFun(t,e)}),null,Laya.loader.TEXT)}changeAlpha(e,t){if(e instanceof Laya.PBRStandardMaterial){let i=e.albedoColor;i.w=t,e.albedoColor=i}}closeMesh(e){e&&e.meshRenderer&&(e.meshRenderer.enable=!1)}static getVecSquared(e,t,i,n){this.vecTemp||(this.vecTemp=new Laya.Vector3);let s=i+n;return s*=s,Laya.Vector3.subtract(t,e,this.vecTemp),this.vecTemp.x*this.vecTemp.x+this.vecTemp.z*this.vecTemp.z-s}static vecInTriangle(e,t,i,n){this.tempV1||(this.tempV1=new Laya.Vector3),this.tempV2||(this.tempV2=new Laya.Vector3),this.tempV3||(this.tempV3=new Laya.Vector3),Laya.Vector3.subtract(t,e,this.tempV1),Laya.Vector3.subtract(n,e,this.tempV2);let s=this.getCrossForward(this.tempV1,this.tempV2,this.tempV3);Laya.Vector3.subtract(i,t,this.tempV1),Laya.Vector3.subtract(n,t,this.tempV2);let o=this.getCrossForward(this.tempV1,this.tempV2,this.tempV3);if(s>0&&o<0||s<0&&o>0)return!1;Laya.Vector3.subtract(e,i,this.tempV1),Laya.Vector3.subtract(n,i,this.tempV2);let r=this.getCrossForward(this.tempV1,this.tempV2,this.tempV3);return!(s>0&&r<0||s<0&&r>0)}static getCrossForward(e,t,i){return e.y=0,t.y=0,Laya.Vector3.cross(e,t,i),i.y}}class de{constructor(){this.curTaskData=null,this.curTaskConfig=null,this.startTaskId=1,this.taskLine=[]}static getIns(){return this.instance||(this.instance=new de,this.instance.init()),this.instance}init(){}setTaskLine(e){this.taskLine=e}getIdInLineIndex(e){return this.taskLine.indexOf(e)}getRewardData(e){let t=[],i=e.split(","),n=[];for(let e=0;e<i.length;e++){let s={};n=i[e].split("&"),s.type=parseInt(n[0]),s.count=parseInt(n[1]),n[2]&&(s.paraId=parseInt(n[2])),t.push(s)}return t}initTaskLine(){this.taskLine=[];let e=this.startTaskId,t=0;for(;;){t++;let i=G_GameDB.getDailyTaskByID(e);if(!i)break;this.taskLine.push(i.id);let n=i.nextTask.split("&");if("0"==n[0])break;{let t=ce.getIns().randomNum(0,n.length-1);e=parseInt(n[t])}if(t>100){console.error("任务线存在死循环");break}}we.getPlayerInfo().setTaskLine(this.taskLine.concat())}isOpen(){return!0}canGetReward(e){return 1==we.getPlayerInfo().getTaskData(e).state}getTaskReward(e){let t=G_GameDB.getDailyTaskByID(e),i=this.getRewardData(t.taskReward);we.getPlayerInfo().getTaskData(e).state=2,this.toNextTask();let n=new Object;n.rewardData=i,we.getUIMgr().openUI(we.getUIName().GetRewardView,n)}getTaskId(){let e=we.getPlayerInfo().getTaskId();return e<=0&&(e=1,we.getPlayerInfo().setTaskId(e)),e}hasTask(){let e=this.getTaskId(),t=we.getPlayerInfo().getTaskData(e);return t?0==t.state:(console.error("任务不存在:",e),!1)}toNextTask(){let e=this.getTaskId(),t=this.taskLine.indexOf(e);t+1<this.taskLine.length&&(t++,we.getPlayerInfo().setTaskId(this.taskLine[t]))}getTaskData(e){let t=G_GameDB.getDailyTaskByID(e);return t||(console.error("任务不存在:",e),0)}getCurTaskKillCount(e){let t=we.getPlayerInfo().getTaskData(e);return t?t.killCount:(console.error("任务不存在:",e),0)}addKillCount(e,t,i){if(1!=we.getIns().levelType)return;if(this.taskHasOutData())return;let n=this.getTaskId(),s=this.getTaskData(n).para2.split("&"),o=parseInt(s[0]);if(0==o)this.setTaskKillCount(n,i);else if(1==o){parseInt(s[1])==e.playerData.id&&this.setTaskKillCount(n,i)}else if(2==o){parseInt(s[1])==e.playerData.quality&&this.setTaskKillCount(n,i)}else 3==o?0!=e.skillMgr.getAllBuffId().length&&this.setTaskKillCount(n,i):4==o&&0!=t.skillMgr.getAllBuffId().length&&this.setTaskKillCount(n,i)}setTaskKillCount(e,t){let i=we.getPlayerInfo().getTaskData(e);i?i.killCount+=t:console.error("不存在任务数据:",e),this.save()}checkTaskOver(){let e=this.getTaskId(),t=we.getPlayerInfo().getTaskData(e);if(t&&0==t.state){G_GameDB.getDailyTaskByID(e).para1<=t.killCount&&(t.state=1)}}hasTime(){return we.getPlayerInfo().getTaskData(this.getTaskId()).taskTime}taskHasOutData(){return 0==we.getPlayerInfo().getTaskData(this.getTaskId()).taskTime}hasReward(){let e=this.getTaskId(),t=this.taskLine.indexOf(e);if(t>0){let e=this.taskLine[t-1];if(this.canGetReward(e))return!0}return this.canGetReward(this.getTaskId())}refershTaskTime(e=!1){if(this.curTaskData||(this.curTaskData=G_GameDB.getDailyTaskByID(this.getTaskId()),this.curTaskConfig=we.getPlayerInfo().getTaskData(this.getTaskId())),-1==this.curTaskData.taskTime)return;if(0==this.curTaskConfig.taskTime)return"任务已经过时!";let t=we.getIns().gameStartTime,i=60*this.curTaskConfig.taskTime*1e3;return(e||i-t<0)&&(this.curTaskConfig.taskTime-=.001*t/60,this.curTaskConfig.taskTime=Math.max(0,this.curTaskConfig.taskTime),this.curTaskConfig=null,this.curTaskData=null,this.save()),"任务剩余时间:"+G_Utils.convertSecondToHourMinuteSecond(Math.floor((i-t)/1e3),!0)}save(){we.getPlayerInfo()._serializePlayerInfoIntoLocal()}getTaskDecs(e,t,i){let n=i.split("&");switch(n[0]){case"0":return e.format(t);case"1":let i=G_GameDB.getPlayerConfigByID(parseInt(n[1]));return e.format(t,i.name);case"2":let s=G_GameDB.getQualityByID(parseInt(n[1]));return e.format(t,s.name);case"3":case"4":return e.format(t)}}}class ue{constructor(){this.hasMedicalCase=!1}static getIns(){return this.instance||(this.instance=new ue,this.instance.init()),this.instance}init(){}clearExtraData(){this.hasMedicalCase=!1}}var pe="storage_key_of_player_info_{0}",_e=18e4;class ge{constructor(){this._playerInfo=null,this._isNewPlayer=!1,this._isBlocked=!1,this._lockedReason="",this._outlineTime=0}_serializePlayerInfoIntoLocal(){if(this._playerInfo){let e=this._playerInfo.constructor.encode(this._playerInfo).finish(),t=G_Utils.Uint8Array2HexString(e),i={saveTime:Math.floor(G_ServerInfo.getServerTime()/1e3),data:t};G_PlatHelper.setStorage(pe.format(this._playerInfo.openID),JSON.stringify(i))}}_checkPlayerInfoFromLocal(e){if(this._playerInfo){let t=G_PlatHelper.getStorage(pe.format(this._playerInfo.openID));if(t&&""!==t){let i=JSON.parse(t);if(void 0!==i.saveTime&&void 0!==i.data&&i.saveTime>this._playerInfo.lastSaveTime){let t=G_Utils.HexString2Uint8Array(i.data),n=new db.PlayerInfo.decode(t);return this._playerInfo=n,this._playerInfo.sessID=e,!0}}}return this._playerInfo.sessID=e,!1}_loadPlayerInfoFromLocal(e,t){let i=G_PlatHelper.getStorage(pe.format(e));if(i&&""!==i){let e=JSON.parse(i);if(void 0!==e.data){let i=G_Utils.HexString2Uint8Array(e.data),n=new db.PlayerInfo.decode(i);return n.sessID=t,n}}return null}_fixOptionalDataInPlayerInfo(){let e=!1;return this._playerInfo&&(void 0!==this._playerInfo.totalShareTimes&&this._playerInfo.shareTimesOfToday>this._playerInfo.totalShareTimes&&(this._playerInfo.totalShareTimes=this._playerInfo.shareTimesOfToday,e=!0),void 0!==this._playerInfo.totalAdvTimes&&this._playerInfo.advTimesOfToday>this._playerInfo.totalAdvTimes&&(this._playerInfo.totalAdvTimes=this._playerInfo.advTimesOfToday,e=!0),null===this._playerInfo.redGift&&(this._playerInfo.redGift=new db.RedGiftConfig,this._playerInfo.redGift.money=0,this._playerInfo.redGift.totalWithdrawMoney=0,this._playerInfo.redGift.totalWithdrawMoneyTimes=0,this._playerInfo.redGift.totalGotRedPackageCount=0,this._playerInfo.redGift.isWithdrawEverydayMoneyToday=!1,this._playerInfo.redGift.recordDayOfEverydayMoney=G_ServerInfo.getCurServerDayOfYear(),this._playerInfo.redGift.totalWithdrawEverydayMoney=0,e=!0)),"function"==typeof this.onFixOptionalDataInPlayerInfo&&(e=this.onFixOptionalDataInPlayerInfo()||e),e}load(e,t,i){var n=this;let s=!1,o=function(e){if(G_Switch.addCfgs(e.data.config.base),G_Switch.addCfgs(e.data.config.custom),parseInt(e.data.config.base.commitVersion,10)===G_SDKCfg.getAppVersion()?(G_Switch.addCfg(G_SwitchName.SN_IS_PUBLISHING,e.data.config.base.commitVersionStatus),"1"===e.data.config.base.commitVersionStatus.toString()?console.log("app ver: ",G_SDKCfg.getAppVersion()," ispublishing: true"):console.log("app ver: ",G_SDKCfg.getAppVersion()," ispublishing: false")):(G_Switch.addCfg(G_SwitchName.SN_IS_PUBLISHING,"0"),console.log("app ver: ",G_SDKCfg.getAppVersion()," ispublishing: false")),G_Switch.inited(),e.data.config.busAd){let t=e.data.config.busAd;for(let e in t)G_ADCfg[e]=t[e]}if(Array.isArray(e.data.config.flowAd)){e.data.config.flowAd.forEach(e=>{if(G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()||G_PlatHelper.isHWPlatform()){if("banner"===e.flows_type)G_OVAdvConfigs.push({key:"Common",posId:e.flows_id,type:"Banner"});else if("video"===e.flows_type)G_OVAdvConfigs.push({key:"Common",posId:e.flows_id,type:"Video"});else if("insert"===e.flows_type)G_OVAdvConfigs.push({key:"Common",posId:e.flows_id,type:"Insert"});else if("native"===e.flows_type){let t=e.flows_id.split("||");if(t.length>0)for(let e=1;e<=t.length;e++)G_OVAdvConfigs.push({key:"Common_"+e.toString(),posId:t[e],type:"Native"})}}else"banner"===e.flows_type?G_advConfigs.bannerAdUnitIDs=e.flows_id.split("||"):"video"===e.flows_type?G_advConfigs.videoAdUnitIDs=e.flows_id.split("||"):"insert"===e.flows_type?G_advConfigs.interstitialAdUnitIDs=e.flows_id.split("||"):"splash"===e.flows_type?G_advConfigs.splashAdUnitIDs=e.flows_id.split("||"):"recommend"===e.flows_type?G_RecommendAdUnitIDs=e.flows_id.split("||"):"box"===e.flows_type?G_BoxAdUnitIDs=e.flows_id.split("||"):"block"===e.flows_type&&(G_BlockAdUnitIDs=e.flows_id.split("||"))})}G_Share.addCfgs(e.data.config.sense),G_SupportMistakeTypes=e.data.config.mistakes,e.data.config.red&&G_RedPackageMgr.iniCfgs(e.data.config.red),e.data.config.pushPack&&e.data.config.pushPack.forEach(e=>{"一次性订阅"===e.msgType?G_Subscriber.addOnceTmplId(e.msgKey,e.msgId):"长期订阅"===e.msgType&&G_Subscriber.addForeverTmplId(e.msgKey,e.msgId)})},r=function(){n._initAfterGetPlayerInfo(),s&&(console.log("Local PlayerInfo Is Newest..."),n.save()),"function"==typeof i&&i(n._playerInfo),G_PlatHelper.canSaveOnline()&&G_Scheduler.schedule("Auto_Save_Player_Info",function(){n.save()},!1,_e)};if(G_PlatHelper.canSaveOnline()){let i=i=>{if(console.log(i),i&&0===i.code){if(""!==i.data.selfStore){let e=G_Utils.HexString2Uint8Array(i.data.selfStore);n._playerInfo=new db.PlayerInfo.decode(e),n._isNewPlayer=!1,s=n._checkPlayerInfoFromLocal(t),s=n._fixOptionalDataInPlayerInfo()||s}else n._playerInfo=n._generateNewPlayerInfo(e,t),n._playerInfo.userID=i.data.userId,n._isNewPlayer=!0,s=!0;n._playerInfo.nickname=i.data.nickname,n._playerInfo.headUrl=i.data.avatarurl,n._isBlocked=1==i.data.isLock,n._isBlocked&&(n._lockedReason=i.data.lockMessage),n._playerInfo.redGift&&(n._playerInfo.redGift.money=i.data.money,n._playerInfo.redGift.totalWithdrawMoney=i.data.totalWithdrawMoney,n._playerInfo.redGift.totalWithdrawMoneyTimes=i.data.totalWithdrawMoneyTimes,n._playerInfo.redGift.totalGotRedPackageCount=i.data.totalGotRedPackageCount,n._playerInfo.redGift.isWithdrawEverydayMoneyToday=i.data.isWithdrawEverydayMoneyToday,n._playerInfo.redGift.recordDayOfEverydayMoney=i.data.recordDayOfEverydayMoney,n._playerInfo.redGift.totalWithdrawEverydayMoney=i.data.totalWithdrawEverydayMoney),o(i),r()}else G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)};G_PlatHelper.canLoginOnline()?G_NetHelper.reqLoadPlayerInfo(t,i):G_NetHelper.reqLoadPlayerInfo_WithOpenID(e,i)}else this._playerInfo=this._loadPlayerInfoFromLocal(e,t),this._playerInfo?s=this._fixOptionalDataInPlayerInfo()||s:(this._playerInfo=this._generateNewPlayerInfo(e,t),this._isNewPlayer=!0),G_NetHelper.reqGetWebConfig(function(e){console.log(e),e&&0===e.code?(o(e),r()):G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})}_generateNewPlayerInfo(e,t){let i=new db.PlayerInfo;return i.openID=e,i.sessID=t,i.userID=0,i.lastSaveTime=0,i.nickname=G_Nickname||"",i.sex=G_Sex||0,i.headUrl=G_HeadUrl||"",i.shareTimesOfToday=0,i.totalShareTimes=0,i.recordDayOfShareTimes=G_ServerInfo.getCurServerDayOfYear(),i.advTimesOfToday=0,i.totalAdvTimes=0,i.recordDayOfAdvTimes=G_ServerInfo.getCurServerDayOfYear(),i.setting=new db.SettingConfig,i.setting.isSoundOn=!0,i.setting.isMuteOn=!0,void 0!==i.redGift&&(i.redGift=new db.RedGiftConfig,i.redGift.money=0,i.redGift.totalWithdrawMoney=0,i.redGift.totalWithdrawMoneyTimes=0,i.redGift.totalGotRedPackageCount=0,i.redGift.isWithdrawEverydayMoneyToday=!1,i.redGift.recordDayOfEverydayMoney=G_ServerInfo.getCurServerDayOfYear(),i.redGift.totalWithdrawEverydayMoney=0),"function"==typeof this.onGeneratedNewPlayerInfo&&this.onGeneratedNewPlayerInfo(i),i}_initAfterGetPlayerInfo(){this._caculateOutlineTime(),"function"==typeof this.onInitAfterGetPlayerInfo&&this.onInitAfterGetPlayerInfo()}save(){if(G_PlatHelper.canSaveOnline()&&this._playerInfo){var e=this;let t=this._playerInfo.constructor.encode(this._playerInfo).finish(),i=G_Utils.Uint8Array2HexString(t);G_PlatHelper.canLoginOnline()?G_NetHelper.reqSavePlayerInfo(this._playerInfo.sessID,i,function(){e._playerInfo.lastSaveTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e.saveToWX()}):G_NetHelper.reqSavePlayerInfo_WithOpenID(this._playerInfo.openID,i,function(){e._playerInfo.lastSaveTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e.saveToWX()})}}saveToWX(){if("undefined"!=typeof G_OpenHelper){let e={};"function"==typeof this.onFillSaveToWXData&&this.onFillSaveToWXData(e),G_OpenHelper.saveSelfInfo(e,function(){console.log("Upload To WX Cloud Succ.")})}}getOpenID(){return this._playerInfo?this._playerInfo.openID:""}getSessID(){return this._playerInfo?this._playerInfo.sessID:""}getUserID(){return this._playerInfo?this._playerInfo.userID:""}getNickName(){return this._playerInfo?this._playerInfo.nickname:""}getHeadUrl(){return this._playerInfo?this._playerInfo.headUrl:""}isNewPlayer(){return!!this._playerInfo&&this._isNewPlayer}isBlocked(){return!!this._playerInfo&&this._isBlocked}getLockedReason(){return this._lockedReason}getOutlineTime(){return this._outlineTime}setSoundEnable(e){this._playerInfo&&(this._playerInfo.setting.isSoundOn=e,this._serializePlayerInfoIntoLocal())}isSoundEnable(){return!!this._playerInfo&&this._playerInfo.setting.isSoundOn}setMuteEnable(e){this._playerInfo&&(this._playerInfo.setting.isMuteOn=e,this._serializePlayerInfoIntoLocal())}isMuteEnable(){return!!this._playerInfo&&this._playerInfo.setting.isMuteOn}getTodayShareTimes(){return this._playerInfo?(this._checkShareTimesValid(),this._playerInfo.shareTimesOfToday):0}getTotalShareTimes(){return this._playerInfo?(this._checkShareTimesValid(),void 0!==this._playerInfo.totalShareTimes?this._playerInfo.totalShareTimes:0):0}plusTodayShareTimes(){this._playerInfo&&(this._checkShareTimesValid(),this._playerInfo.shareTimesOfToday+=1,void 0!==this._playerInfo.totalShareTimes&&(this._playerInfo.totalShareTimes+=1),this._playerInfo.recordDayOfShareTimes=G_ServerInfo.getCurServerDayOfYear(),this._serializePlayerInfoIntoLocal())}_checkShareTimesValid(){this._playerInfo.recordDayOfShareTimes!==G_ServerInfo.getCurServerDayOfYear()&&(this._playerInfo.shareTimesOfToday=0,this._playerInfo.recordDayOfShareTimes=G_ServerInfo.getCurServerDayOfYear(),this._serializePlayerInfoIntoLocal())}getTodayAdvTimes(){return this._playerInfo?(this._checkAdvTimesValid(),this._playerInfo.advTimesOfToday):0}getTotalAdvTimes(){return this._playerInfo?(this._checkAdvTimesValid(),void 0!==this._playerInfo.totalAdvTimes?this._playerInfo.totalAdvTimes:0):0}plusTodayAdvimes(){this._playerInfo&&(this._checkAdvTimesValid(),this._playerInfo.advTimesOfToday+=1,void 0!==this._playerInfo.totalAdvTimes&&(this._playerInfo.totalAdvTimes+=1),this._playerInfo.recordDayOfAdvTimes=G_ServerInfo.getCurServerDayOfYear(),this._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_ADV_TIMES_CHANGED))}isNoMoreAdvTimesToday(e){G_Switch.getRewardTimesOfEachDay(function(t){"function"==typeof e&&e(this.getTodayAdvTimes()>=t)}.bind(this))}_checkAdvTimesValid(){this._playerInfo.recordDayOfAdvTimes!==G_ServerInfo.getCurServerDayOfYear()&&(this._playerInfo.advTimesOfToday=0,this._playerInfo.recordDayOfAdvTimes=G_ServerInfo.getCurServerDayOfYear(),this._serializePlayerInfoIntoLocal())}depositMoney(e){"number"!=typeof e||e<=0?console.error("depositMoney fail, check input...",e):this._playerInfo.redGift&&(this._playerInfo.redGift.money+=e,this._serializePlayerInfoIntoLocal(),console.log("{0} time depositMoney {1} succ, current money: ".format((this._playerInfo.redGift.totalGotRedPackageCount+1).toString(),e.toString()),this._playerInfo.redGift.money))}withdrawMoney(e){"number"!=typeof e||e<=0?console.error("withdrawMoney fail, check input...",e):this._playerInfo.redGift&&(this._playerInfo.redGift.money>=e?(this._playerInfo.redGift.money-=e,this._playerInfo.redGift.totalWithdrawMoney+=e,this._playerInfo.redGift.totalWithdrawMoneyTimes+=1,this._serializePlayerInfoIntoLocal(),console.log("{0} time withdrawMoney {1} succ, total withdraw {2}, rest money: ".format(this._playerInfo.redGift.totalWithdrawMoneyTimes.toString(),e.toString(),this._playerInfo.redGift.totalWithdrawMoney.toString()),this._playerInfo.redGift.money)):console.error("withdrawMoney fail, not enough money..."))}getMoney(){return this._playerInfo.redGift?this._playerInfo.redGift.money:0}getTotalWithdrawMoney(){return this._playerInfo.redGift?this._playerInfo.redGift.totalWithdrawMoney:0}getTotalWithdrawMoneyTimes(){return this._playerInfo.redGift?this._playerInfo.redGift.totalWithdrawMoneyTimes:0}addTotalGotRedPackageCount(){this._playerInfo.redGift&&(this._playerInfo.redGift.totalGotRedPackageCount+=1)}getTotalGotRedPackageCount(){return this._playerInfo.redGift?this._playerInfo.redGift.totalGotRedPackageCount:0}isWithdrawEverydayMoneyToday(){return this._playerInfo.redGift?(this._checkEverydayMoneyValid(),this._playerInfo.redGift.isWithdrawEverydayMoneyToday):0}withdrawEverydayMoney(e){"number"!=typeof e||e<=0?console.error("withdrawEverydayMoney fail, check input...",e):this._playerInfo.redGift&&(this._playerInfo.redGift.isWithdrawEverydayMoneyToday?console.error("withdrawEverydayMoney fail, withdrawed before..."):(this._playerInfo.redGift.totalWithdrawEverydayMoney+=e,this._playerInfo.redGift.isWithdrawEverydayMoneyToday=!0,this._serializePlayerInfoIntoLocal(),console.log("withdrawEverydayMoney {0} succ, total withdraw {1}".format(e.toString(),this._playerInfo.redGift.totalWithdrawEverydayMoney.toString()))))}_checkEverydayMoneyValid(){this._playerInfo.redGift&&this._playerInfo.redGift.recordDayOfEverydayMoney!==G_ServerInfo.getCurServerDayOfYear()&&(this._playerInfo.redGift.isWithdrawEverydayMoneyToday=!1,this._playerInfo.redGift.recordDayOfEverydayMoney=G_ServerInfo.getCurServerDayOfYear(),this._serializePlayerInfoIntoLocal())}_joinStrArr(e){let t="";if(e)for(let i=0;i<e.length;i++)t+=e[i],i!==e.length-1&&(t+=",");return t}_caculateOutlineTime(){this._playerInfo&&0!==this._playerInfo.lastSaveTime?(this._outlineTime=Math.floor(G_ServerInfo.getServerTime()/1e3)-this._playerInfo.lastSaveTime,this._outlineTime<0&&(this._outlineTime=0)):this._outlineTime=0,this._outlineTime>0&&console.log("Outline From Last Login: {0} seconds.".format(this._outlineTime.toString()))}}class fe extends ge{constructor(){super(),this._coinBigNumber=null,this._totalCoinBigNumber=null,this.curSelectLevelId=0,this._curMoney=0,this._dianBigNumber=null,console.log("Init G_PlayerInfo Instance...")}onGeneratedNewPlayerInfo(e){e.coin=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_BORN_COIN_NUM).num.toString(),e.totalCoin=e.coin,e.levelID=G_levelID,e.continueLevel=0,e.totalLevelCount=e.levelID,e.skinId=G_SkinId,e.diam="0",e.curSginDay=0,e.curSginWeekCount=0,e.lastSginYear="0&0",e.lastGetPowerTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e.power=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_BORN_POWER_NUM).num,e.lastViewAdGetPowerTime=0,e.todayViewAdGetPowerTimes=0,e.todayViewAdGetDiamTimes=0,e.todayTurntableTimes=0,e.isShowSubscribeApp=0,e.curDailyTaskId=G_CurDailySgin,e.curMoney=G_InitMoney,e.dailTaskSgin=G_CurDailySgin,e.dailTaskTLevel=0,e.loginDays=0,e.curGetRedTimers=0,e.lastGetRedTimers=0,e.dailyTaskBeginTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e.todayDiamGetPowerTimes=0,e.todayShowInsertAdCount=0,e.isShowTeach=1,e.getAdGoldTimes=0,e.sex=0,e.lastLevelId=1,e.beeSpeedLv=1,e.containLv=1,e.hurtLv=1}onInitAfterGetPlayerInfo(){this._loadCoin(),this._loadTotalCoin(),this._loadLevelId(),this._loadMoney(),this.loadSkin(),this.resetGetPowerAdTimes(),this.loadDiam(),0==this._playerInfo.taskLine.length&&de.getIns().initTaskLine(),de.getIns().setTaskLine(this._playerInfo.taskLine),this.getCurLevelId()>1&&(this.setBackHomeOpen(),this.setSpeedOpen(),this.setStrongeOpen())}initProp(e){e.hpLv=1,e.defLv=1,e.hurtLv=1,e.speedLv=1}onFixOptionalDataInPlayerInfo(){let e=!1,t=this._playerInfo;return t&&(null!==t.levelID&&0!==t.levelID||(t.levelID=G_levelID,e=!0),null!=t.totalLevelCount&&0!=t.totalLevelCount||(t.totalLevelCount=t.levelID,e=!0),null==t.continueLevel&&(t.continueLevel=0,e=!0),null!==t.skinId&&0!=t.skinId||(t.skinId=G_SkinId,e=!0),null==t.diam&&(t.diam="0",e=!0),null==t.curSginDay&&(t.curSginDay=0,e=!0),null==t.curSginWeekCount&&(t.curSginWeekCount=0,e=!0),null==t.lastSginYear&&(t.lastSginYear="0&0",e=!0),null===t.power&&(t.power=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_BORN_POWER_NUM).num,e=!0),null===t.lastGetPowerTime&&(t.lastGetPowerTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e=!0),null==t.lastViewAdGetPowerTime&&(t.lastViewAdGetPowerTime=0,e=!0),null==t.todayViewAdGetPowerTimes&&(t.todayViewAdGetPowerTimes=0,e=!0),null==t.todayTurntableTimes&&(t.todayTurntableTimes=0,e=!0),null==t.todayViewAdGetDiamTimes&&(t.todayViewAdGetDiamTimes=0,e=!0),null==t.todayDiamGetPowerTimes&&(t.todayDiamGetPowerTimes=0,e=!0),null==t.isShowSubscribeApp&&(t.isShowSubscribeApp=0,e=!0),null!=t.curDailyTaskId&&0!=t.curDailyTaskId||(t.curDailyTaskId=G_CurDailySgin,e=!0),null!=t.curMoney&&""!=t.curMoney||(t.curMoney=G_InitMoney,e=!0),null==t.dailTaskSgin&&(t.dailTaskSgin=G_CurDailySgin,e=!0),null==t.dailTaskTLevel&&(t.dailTaskTLevel=0,e=!0),null==t.loginDays&&(t.loginDays=0,e=!0),null==t.curGetRedTimers&&(t.curGetRedTimers=0,e=!0),null==t.lastGetRedTimers&&(t.lastGetRedTimers=0,e=!0),null!=t.dailyTaskBeginTime&&0!=t.dailyTaskBeginTime||(t.dailyTaskBeginTime=Math.floor(G_ServerInfo.getServerTime()/1e3),e=!0),null==t.todayShowInsertAdCount&&(t.todayShowInsertAdCount=0,e=!0),null==t.isShowTeach&&(t.isShowTeach=1,e=!0),0==t.lastLevelId&&(t.lastLevelId=1,e=!0),0==t.containLv&&(t.containLv=1,e=!0),0==t.beeSpeedLv&&(t.beeSpeedLv=1,e=!0),0==t.hurtLv&&(t.hurtLv=1,e=!0)),e}onFillSaveToWXData(e){this._playerInfo&&(e.totalCoin=this._playerInfo.totalCoin)}getCoin(){return this._coinBigNumber}getTotalCoin(){return this._totalCoinBigNumber}plusCoin(e){this._coinBigNumber&&this._totalCoinBigNumber?"number"==typeof e||BigNumber.isBigNumber(e)?(this._coinBigNumber=this._coinBigNumber.plus(e),this._totalCoinBigNumber=this._totalCoinBigNumber.plus(e),this._saveTotalCoin(),this._saveCoin()):console.error("PlayerInfo.plusCoin: param num must be a type of number or BigNumber..."):console.error("PlayerInfo.plusCoin: can not operation coin data before login...")}minusCoin(e){this._coinBigNumber?"number"==typeof e||BigNumber.isBigNumber(e)?(this._coinBigNumber=this._coinBigNumber.minus(e),this._saveCoin()):console.error("PlayerInfo.minusCoin: param num must be a type of number or BigNumber..."):console.error("PlayerInfo.minusCoin: can not operation coin data before login...")}_loadCoin(){this._playerInfo&&(isNaN(this._playerInfo.coin)&&(this._playerInfo.coin="0"),isNaN(this._playerInfo.totalCoin)&&(this._playerInfo.totalCoin="0")),this._playerInfo&&!this._coinBigNumber&&(this._coinBigNumber=BigNumber(this._playerInfo.coin))}_saveCoin(){this._playerInfo&&this._coinBigNumber&&(this._playerInfo.coin=this._coinBigNumber.toFixed(0),this._serializePlayerInfoIntoLocal()),G_Event.dispatchEvent(G_EventName.EN_COIN_CHANGED)}_loadTotalCoin(){this._playerInfo&&!this._totalCoinBigNumber&&(this._totalCoinBigNumber=BigNumber(this._playerInfo.totalCoin))}_saveTotalCoin(){this._playerInfo&&this._totalCoinBigNumber&&(this._playerInfo.totalCoin=this._totalCoinBigNumber.toFixed(0))}_loadLevelId(){if(this._playerInfo){let e=G_GameDB.getAllLevelConfigCount();this._playerInfo.totalLevelCount;this.curSelectLevelId=this._playerInfo.totalLevelCount%e,0==this.curSelectLevelId&&(this.curSelectLevelId=1)}}_loadMoney(){let e=this._playerInfo;e&&(ce.getIns().isString(e.curMoney)&&NaN!=e.curMoney||(e.curMoney=G_InitMoney),this._curMoney=parseFloat(e.curMoney))}_loadDailyTaskData(){let e=this._playerInfo;e&&e.dailTaskSgin!=G_CurDailySgin&&(e.dailTaskSgin=G_CurDailySgin,e.curMoney=G_InitMoney,e.dailTaskTLevel=0,e.curDailyTaskId=G_CurDailySgin,e.dailyTaskBeginTime=Math.floor(G_ServerInfo.getServerTime()/1e3))}resetGetPowerAdTimes(){let e=this._playerInfo,t=G_ServerInfo.getCurServerDayOfYear();t!=e.lastViewAdGetPowerTime&&(e.lastViewAdGetPowerTime=t,e.todayViewAdGetPowerTimes=0,e.todayViewAdGetDiamTimes=0,e.todayDiamGetPowerTimes=0,e.todayTurntableTimes=0,e.isShowSubscribeApp=0,e.loginDays++,e.curGetRedTimers=0,e.lastGetRedTimers=0,e.getAdGoldTimes=0,e.todayShowInsertAdCount=0,e.viewAdTenLuck=0,this.clearTask(),de.getIns().initTaskLine(),this._serializePlayerInfoIntoLocal())}loadSkin(){this.getSkinDataById(G_SkinId).isOwner=1,this._serializePlayerInfoIntoLocal()}getSkinDataById(e){let t=null,i=this._playerInfo.ownSkinDetail;for(let n=0;n<i.length;n++)if(e==i[n].id){t=i[n];break}return t||(t=this.createSkinData(e),i.push(t),this._serializePlayerInfoIntoLocal()),t}createSkinData(e){let t=new db.SkinData;return t.playerProp=new db.PlayerProp,this.initProp(t.playerProp),this.setSkinData(t,e),t}setSkinData(e,t){e.id=t}addSkinChipById(e,t){this.getSkinDataById(e).skinChip+=t,this._serializePlayerInfoIntoLocal()}getSkinChipById(e){return this.getSkinDataById(e).skinChip}useSkinChip(e,t){let i=this.getSkinDataById(e);i.skinChip>=t&&(i.skinChip-=t,this._serializePlayerInfoIntoLocal())}upSkinStarById(e){let t=this.getSkinDataById(e);t.star<G_MaxStar&&(t.star+=1,this._serializePlayerInfoIntoLocal())}combineSkin(e){let t=G_GameDB.getPlayerConfigByID(e).combineChip;this.useSkinChip(e,t)}canCombineSkinById(e){let t=G_GameDB.getPlayerConfigByID(e);return this.getSkinDataById(e).skinChip>=t}hasSkinById(e){return 1==this.getSkinDataById(e).isOwner}setCurSelectSkinId(e){this._playerInfo.skinId=e,this._serializePlayerInfoIntoLocal()}addSkin(e){this.getSkinDataById(e).isOwner=1}getCurLevelId(){return this.curSelectLevelId}getCurThoungLevelId(){let e=this._playerInfo.levelID+1;return G_GameDB.getLevelConfigByID(e)||e--,e}getLevelID(){return this._playerInfo.levelID}getShowLevelCount(){return 0==this._playerInfo.totalLevelCount&&(this._playerInfo.totalLevelCount=this.curSelectLevelId,this._serializePlayerInfoIntoLocal()),this._playerInfo.totalLevelCount}setToNextLevelID(){if(this.curSelectLevelId>this._playerInfo.levelID&&(this._playerInfo.levelID=this.curSelectLevelId),this.curSelectLevelId++,this._playerInfo.totalLevelCount++,!G_GameDB.getLevelConfigByID(this.curSelectLevelId)){let e=G_GameDB.getAllLevelConfigCount();this._playerInfo.totalLevelCount;this.curSelectLevelId=this._playerInfo.totalLevelCount%e,0==this.curSelectLevelId&&(this.curSelectLevelId=1)}this._serializePlayerInfoIntoLocal()}setLevelIndex(e){this.curSelectLevelId=e}getContinueLevelCount(){let e=this._playerInfo.continueLevel-1;return Math.max(0,e)}addContinueLevel(e){this._playerInfo.continueLevel+=e,this._serializePlayerInfoIntoLocal()}resetContinueLevel(){this._playerInfo.continueLevel=0,this._serializePlayerInfoIntoLocal()}setTeachId(e){this._playerInfo.teachId=e,this._serializePlayerInfoIntoLocal()}getCurTeachId(){return this._playerInfo.teachId}getSkinId(){return this._playerInfo.skinId}loadDiam(){this._playerInfo&&isNaN(this._playerInfo.diam)&&(this._playerInfo.diam="0"),this._playerInfo&&!this._dianBigNumber&&(this._dianBigNumber=BigNumber(this._playerInfo.diam))}changeDiam(e,t){this._dianBigNumber?"number"==typeof e||BigNumber.isBigNumber(e)?(this._dianBigNumber=t?this._dianBigNumber.plus(e):this._dianBigNumber.minus(e),this.saveDiam(),G_Event.dispatchEvent(G_EventName.EN_DIAM_CHANGE)):console.error("PlayerInfo.plusCoin: param num must be a type of number or BigNumber..."):console.error("PlayerInfo._dianBigNumber: can not operation coin data before login...")}saveDiam(){this._playerInfo&&this._dianBigNumber&&(this._playerInfo.diam=this._dianBigNumber.toFixed(0),this._serializePlayerInfoIntoLocal())}getDiamCount(){return this._dianBigNumber}getSginDayCount(){return 7==this._playerInfo.curSginDay&&(this.hasSginByDay()||(this._playerInfo.curSginDay=0,this._serializePlayerInfoIntoLocal())),this._playerInfo.curSginDay}hasSginByDay(){let e=this._playerInfo.lastSginYear.split("&"),t=parseInt(e[0]),i=parseInt(e[1]),n=G_ServerInfo.getServerDate().getFullYear(),s=G_ServerInfo.getCurServerDayOfYear();return n==t&&s==i}addItemByType(e,t,i){1==e?this.changeDiam(t,!0):2==e?this.addSkinChipById(i,t):3==e?this.plusCoin(t):4==e?this.addSkin(i):5==e?this.addPower(t,!1):6==e&&this.addExtraPowerCount(t)}getNextSginDay(){let e=this._playerInfo.curSginDay;return++e>7&&(e%=7),e}markSginToday(){let e=G_ServerInfo.getServerDate().getFullYear(),t=G_ServerInfo.getCurServerDayOfYear();this._playerInfo.lastSginYear=e+"&"+t,this._playerInfo.curSginDay++,7==this._playerInfo.curSginDay&&this._playerInfo.curSginWeekCount++,this._playerInfo.curSginDay>7&&(this._playerInfo.curSginDay=this._playerInfo.curSginDay%7),this._serializePlayerInfoIntoLocal()}resetSginDay(){this._playerInfo.lastSginYear="0&0"}getSginWeekCount(){if(7==this._playerInfo.curSginDay&&this.hasSginByDay()){let e=this._playerInfo.curSginWeekCount--;return e<0&&(e=0),e}return this._playerInfo.curSginWeekCount}getPower(){return this._playerInfo?this._playerInfo.power:0}usePower(e){if(this._playerInfo){let t=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num;this._playerInfo.power===t&&(this._playerInfo.lastGetPowerTime=Math.floor(G_ServerInfo.getServerTime()/1e3)),this._playerInfo.power-=e,this._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_POWER_CHANGED),this.checkPowerIsFullOrNot()}}addPower(e,t){this.addPowerNotLimit(e,t)}addPowerNotLimit(e,t){let i=this._playerInfo;if(i){if(t){let t=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NEED_TIME_TO_RESTORE_POWER).num;i.lastGetPowerTime+=t*e}let n=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num+this.getExtraPowerCount();i.power===n-e&&(i.lastGetPowerTime=0),i.power+=e,this._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_POWER_CHANGED),this.checkPowerIsFullOrNot()}}getLastGetPowerTime(){return this._playerInfo?this._playerInfo.lastGetPowerTime:0}checkPowerIsFullOrNot(){if(this._playerInfo){let e=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num;return this._playerInfo.power>=e}}canViewADGetPower(){return this._playerInfo.todayViewAdGetPowerTimes<3}addViewADGetPowerTimes(){this._playerInfo.todayViewAdGetPowerTimes++,this._serializePlayerInfoIntoLocal()}getCurViewAdGetPowerTimes(){return this._playerInfo.todayViewAdGetPowerTimes}canMakeTurntable(){return this._playerInfo.todayTurntableTimes<5}getSupTurntableTimes(){return 5-this._playerInfo.todayTurntableTimes}addTurntableTimes(e){this._playerInfo.todayTurntableTimes+=e,this._serializePlayerInfoIntoLocal()}canDiamGetPower(){return this._playerInfo.todayDiamGetPowerTimes<3}addDiamGetPowerTimes(){this._playerInfo.todayDiamGetPowerTimes++,this._serializePlayerInfoIntoLocal()}getSupDiamGetPowerTimes(){return 3-this._playerInfo.todayDiamGetPowerTimes}getIsShowSubscribeApp(){return 0==this._playerInfo.isShowSubscribeApp}setShowSubscribeApp(){this._playerInfo.isShowSubscribeApp=1,this._serializePlayerInfoIntoLocal()}getNickName(){return this._playerInfo.nickname}getHeadUrl(){return this._playerInfo.headUrl}getCurDailyTaskId(){return this._playerInfo.curDailyTaskId}toNextDailyTask(){this._playerInfo.curDailyTaskId++,this._serializePlayerInfoIntoLocal()}addMoney(e){ce.getIns().isNumber(e)||(e=0),this._curMoney+=parseFloat(e.toFixed(2)),this._playerInfo.curMoney=_curMoney+"",G_Event.dispatchEvent(G_EventName.EN_MONEY_CHANGE),this._serializePlayerInfoIntoLocal()}getMoney(){return parseFloat(this._curMoney.toFixed(2))}getDailTaskTLevel(){return this._playerInfo.dailTaskTLevel}getDailyTaskBeginTime(){return this._playerInfo.dailyTaskBeginTime}toNextDailTaskTLevel(){this._playerInfo.dailTaskTLevel++,this._serializePlayerInfoIntoLocal()}getLoginDays(){return this._playerInfo.loginDays<=0?1:this._playerInfo.loginDays}getCurGetRedTimers(){return this._playerInfo.curGetRedTimers}addGetRedTimers(){this._playerInfo.curGetRedTimers++,this._playerInfo.lastGetRedTimers=Math.floor(G_ServerInfo.getServerTime()/1e3),this._serializePlayerInfoIntoLocal()}getLastGetRedTimers(){return this._playerInfo.lastGetRedTimers}canShowInsertAd(){return this._playerInfo.todayShowInsertAdCount<8}showInsertAdAdd(){this._playerInfo.todayShowInsertAdCount++,this._serializePlayerInfoIntoLocal()}getIsShowTeach(){return 1==this._playerInfo.isShowTeach}setIsShowTeach(e){let t=0;e&&(t=1),this._playerInfo.isShowTeach=t,this._serializePlayerInfoIntoLocal()}hasTeach(){return!1}addExtraPowerCount(e){this._playerInfo.extraPowerCount+=e,this._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_POWER_CHANGED)}getExtraPowerCount(){return this._playerInfo.extraPowerCount}getDelineEf(){let e=this.getCurLevelId(),t=G_GameDB.getLevelConfigByID(e).fallHoney.split(",");return t=t[0].split("&")[1],parseFloat(t)}getDelineGold(){let e=BigNumber("0"),t=G_PlayerInfo.getOutlineTime();return t=Math.floor(Math.min(7200,t)),e=e.plus(t),e=BigNumber(e.times(this.getDelineEf()).toFixed(0))}getAdGoldTimes(){return this._playerInfo.getAdGoldTimes}addGoldTimes(){this._playerInfo.getAdGoldTimes++,this._serializePlayerInfoIntoLocal()}getSex(){return this._playerInfo.sex}changeSex(){0==this._playerInfo.sex?this._playerInfo.sex=1:this._playerInfo.sex=0,this._serializePlayerInfoIntoLocal()}getTaskData(e){let t=null,i=this._playerInfo.taskDatas;for(let n=0;n<i.length;n++)if(e==i[n].id){t=i[n];break}return t||(t=new db.TaskData,this.initTaskData(t,e),i.push(t),this._serializePlayerInfoIntoLocal()),t}initTaskData(e,t){e.id=t;let i=G_GameDB.getDailyTaskByID(t);e.state=0,e.taskTime=i.taskTime}clearTask(){this._playerInfo.taskDatas=[]}getTaskId(){return this._playerInfo.curTaskId}setTaskId(e){this._playerInfo.curTaskId=e,this._serializePlayerInfoIntoLocal()}setTaskLine(e){this._playerInfo&&(this._playerInfo.taskLine=e,this._serializePlayerInfoIntoLocal())}getTaskLine(){return this._playerInfo.taskLine}getViewAdTenLuckTimes(){return this._playerInfo.viewAdTenLuck}addViewAdTenLuckTimes(){this._playerInfo.viewAdTenLuck++,this._serializePlayerInfoIntoLocal()}getLevelDataById(e){let t=null,i=this._playerInfo.levelDatas;for(let n=0;n<i.length;n++)if(e==i[n].id){t=i[n];break}return t||(t=new db.LevelData,this.initLevelData(t,e),i.push(t),this._serializePlayerInfoIntoLocal()),t}setLevelPlayTime(e,t){let i=this.getLevelDataById(t);1==e?i.passTimes++:2==e?i.failTimes++:3==e?i.playTimes++:4==e&&i.activeExitTimes++,this._serializePlayerInfoIntoLocal()}initLevelData(e,t){e.id=t,e.playTimes=0,e.passTimes=0,e.failTimes=0}getLastPlayerPos(){return this._playerInfo.lastPlayerPos}getLastLevelId(){return this._playerInfo.lastLevelId}savePlayerPos(e,t){this._playerInfo.lastPlayerPos="{0}&{1}&{2}".format(t.x,t.y,t.z),this._playerInfo.lastLevelId=e,this._serializePlayerInfoIntoLocal()}createBeeData(e){let t=new db.BeeData;return t.id=e,t}addBee(e){let t=this.createBeeData(e);return this._playerInfo.beeDatas.push(t),this._serializePlayerInfoIntoLocal(),t}upBee(e,t){let i=this._playerInfo.beeDatas;for(let e=0;e<t.length;e++)for(let n=i.length-1;n>=0;n--)if(i[n].id==t[e].beaData.beeId){i.splice(n,1);break}this._serializePlayerInfoIntoLocal()}getBeeDataById(e){for(let t=0;t<this._playerInfo.beeDatas.length;t++)if(this._playerInfo.beeDatas[t].id==e)return this._playerInfo.beeDatas[t];return null}getAllBeeDatas(){return this._playerInfo.beeDatas}getBeeSpeedLv(){return this._playerInfo.beeSpeedLv}upBeeSpeedLv(){this._playerInfo.beeSpeedLv++,super._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_BEESPEEDUP)}getContainLv(){return this._playerInfo.containLv}upContainLv(){this._playerInfo.containLv++,super._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.ENUPCONTAIN)}getHurtLv(){return this._playerInfo.hurtLv}upHurtLv(){this._playerInfo.hurtLv++,super._serializePlayerInfoIntoLocal(),G_Event.dispatchEvent(G_EventName.EN_UPHURT)}buyBee(){this._playerInfo.buyBeeTimes++,super._serializePlayerInfoIntoLocal()}getBuyBeeTimes(){return this._playerInfo.buyBeeTimes}getSpeedUpToTime(){return this._playerInfo.speedUpToTime}createSkillData(e){let t=new db.PlayerSkillData;return t.id=e,t.toTime=0,t.count=0,this._playerInfo.playerSkillDatas.push(t),super._serializePlayerInfoIntoLocal(),t}getPlayerSkillDataById(e){let t=null,i=this._playerInfo.playerSkillDatas;for(let n=0;n<i.length;n++)if(i[n].id==e){t=i[n];break}return t||(t=this.createSkillData(e)),t}addSkillTime(e,t){this.getPlayerSkillDataById(e).toTime=t,super._serializePlayerInfoIntoLocal(),1==e?G_Event.dispatchEvent(G_EventName.EN_SPEEDUPCHANGE):2==e&&G_Event.dispatchEvent(G_EventName.EN_STRONGE_CHANGE)}setSpeedOpen(){this._playerInfo.speedUpOpen=1,super._serializePlayerInfoIntoLocal()}getSpeedOpen(){return 1==this._playerInfo.speedUpOpen}setStrongeOpen(){this._playerInfo.strongeUpOpen=1,super._serializePlayerInfoIntoLocal()}getStrongeOpen(){return 1==this._playerInfo.strongeUpOpen}setBackHomeOpen(){this._playerInfo.backHomeOpen=1,super._serializePlayerInfoIntoLocal()}getBackHomeOpen(){return 1==this._playerInfo.backHomeOpen}}window.G_PlayerInfo=new fe;class me{constructor(){this.PopupView="PopupPage",this.ReadyView="ReadyPage",this.nodeSgin="m_",this.GameOverView="GameOverView",this.GameView="GameView",this.GameOverViewEnd="GameOverEndPage",this.AdView="AdPage",this.LodingView="LodingView",this.AdFullView="AdFullPage",this.SkinView="SkinView",this.GetGoldView="GetGoldView",this.TryUseSkinView="TryUseSkin",this.UnLockItemView="UnLockItemView",this.UpdateView="UpdateView",this.MisGetDaim="MisGetDaim",this.FightBoxView="FightBoxView",this.GetDiamView="GetDiamView",this.SginView="SginView",this.TTOpenBoxView="TTOpenBoxView",this.TTGetItemView="TTGetItemView",this.TurntableView="TurntableView",this.TeachView="TeachView",this.ShareView="ShareView",this.ExtraWeapon="ExtraWeapon",this.GetPowerView="GetPowerView",this.SensibilitySettingView="SensibilitySettingView",this.GetRewardView="GetRewardView",this.EggsView="EggsView",this.EggsClue="EggsClue",this.GetEggsCube="GetEggsCube",this.DelineReward="DelineReward",this.GoldFingerView="GoldFingerView",this.ManicureVipView="ManicureVipView",this.SelectLevelModel="SelectLevelModel",this.GameOverFirst="GameOverFirst",this.ToolsView="ToolsView",this.DaliyTaskView="DaliyTaskView",this.TrainView="TrainView",this.TrainWantedView="TrainWantedView",this.SettingView="SettingView",this.PlayerInfoView="PlayerInfoView",this.RebornView="RebornView",this.OpenBoxView="openBoxView"}}class ye extends Laya.Material{static __init__(){}get albedoTexture(){return this._shaderValues.getTexture(ye.ALBEDOTEXTURE)}set albedoTexture(e){this._shaderValues.setTexture(ye.ALBEDOTEXTURE,e)}get outlineColor(){return this._shaderValues.getVector(ye.OUTLINECOLOR)}set outlineColor(e){this._shaderValues.setVector(ye.OUTLINECOLOR,e)}get outlineWidth(){return this._shaderValues.getNumber(ye.OUTLINEWIDTH)}set outlineWidth(e){e=Math.max(0,Math.min(.05,e)),this._shaderValues.setNumber(ye.OUTLINEWIDTH,e)}get outlineLightness(){return this._shaderValues.getNumber(ye.OUTLINELIGHTNESS)}set outlineLightness(e){e=Math.max(0,Math.min(1,e)),this._shaderValues.setNumber(ye.OUTLINELIGHTNESS,e)}static initShader(){ye.__init__();var e={a_Position:Laya.VertexMesh.MESH_POSITION0,a_Normal:Laya.VertexMesh.MESH_NORMAL0,a_Texcoord0:Laya.VertexMesh.MESH_TEXTURECOORDINATE0},t={u_MvpMatrix:Laya.Shader3D.PERIOD_SPRITE,u_WorldMat:Laya.Shader3D.PERIOD_SPRITE,u_OutlineWidth:Laya.Shader3D.PERIOD_MATERIAL,u_OutlineColor:Laya.Shader3D.PERIOD_MATERIAL,u_OutlineLightness:Laya.Shader3D.PERIOD_MATERIAL,u_AlbedoTexture:Laya.Shader3D.PERIOD_MATERIAL},i=Laya.Shader3D.add("MultiplePassOutlineShader"),n=new Laya.SubShader(e,t);i.addSubShader(n);n.addShaderPass("\n        attribute vec4 a_Position;\n        attribute vec3 a_Normal;\n        \n        uniform mat4 u_MvpMatrix; \n        uniform float u_OutlineWidth;\n\n        \n        void main() \n        {\n           vec4 position = vec4(a_Position.xyz + a_Normal * u_OutlineWidth, 1.0);\n           gl_Position = u_MvpMatrix * position;\n        }","\n        #ifdef FSHIGHPRECISION\n            precision highp float;\n        #else\n           precision mediump float;\n        #endif\n        uniform vec4 u_OutlineColor; \n        uniform float u_OutlineLightness;\n    \n        void main()\n        {\n           vec3 finalColor = u_OutlineColor.rgb * u_OutlineLightness;\n           gl_FragColor = vec4(finalColor,0.0); \n        }").renderState.cull=Laya.RenderState.CULL_FRONT;n.addShaderPass('\n        #include "Lighting.glsl"\n\n        attribute vec4 a_Position; \n        attribute vec2 a_Texcoord0;\n        \n        uniform mat4 u_MvpMatrix;\n        uniform mat4 u_WorldMat;\n        \n        attribute vec3 a_Normal; \n        varying vec3 v_Normal; \n        varying vec2 v_Texcoord0; \n        \n        void main() \n        {\n           gl_Position = u_MvpMatrix * a_Position;\n           mat3 worldMat=mat3(u_WorldMat); \n           v_Normal=worldMat*a_Normal; \n           v_Texcoord0 = a_Texcoord0;\n           gl_Position=remapGLPositionZ(gl_Position); \n        }',"\n        #ifdef FSHIGHPRECISION\n            precision highp float;\n        #else\n            precision mediump float;\n        #endif\n        varying vec2 v_Texcoord0;\n        varying vec3 v_Normal;\n        \n        uniform sampler2D u_AlbedoTexture;\n        \n        \n        void main()\n        {\n           vec4 albedoTextureColor = vec4(1.0);\n           \n           albedoTextureColor = texture2D(u_AlbedoTexture, v_Texcoord0);\n           gl_FragColor=albedoTextureColor;\n        }")}constructor(){super(),this.setShaderName("MultiplePassOutlineShader"),this._shaderValues.setNumber(ye.OUTLINEWIDTH,.01581197),this._shaderValues.setNumber(ye.OUTLINELIGHTNESS,1),this._shaderValues.setVector(ye.OUTLINECOLOR,new Laya.Vector4(1,1,1,0))}}ye.ALBEDOTEXTURE=Laya.Shader3D.propertyNameToID("u_AlbedoTexture"),ye.OUTLINECOLOR=Laya.Shader3D.propertyNameToID("u_OutlineColor"),ye.OUTLINEWIDTH=Laya.Shader3D.propertyNameToID("u_OutlineWidth"),ye.OUTLINELIGHTNESS=Laya.Shader3D.propertyNameToID("u_OutlineLightness");class we{constructor(){this.gameScene=null,this.levelData=null,this.notLimitConfig=null,this.trainConfig=null,this.levelType=1,this.isPause=!1,this.lastIsFail=!1,this.isTest=!1,this.isPauseMusic=!1,this.isShowLoadingPage=!1,this.mapInit=!1,this.gameMul=1,this.gameState=-1,this.enableHDR=!1,this.task01=0,this.gameStartTime=0,this.isFirstReborn=!0,this.teachConfig={config:"TeachLv1",startBuffCount:0},this.trySkinId=null,this.isTryUseSkin=!1,this.curFloorId=1}static getIns(){return this.instance||(this.instance=new we,ye.initShader()),this.instance}static getPlayerInfo(){let e=window.G_PlayerInfo;return e instanceof fe&&(this.playerInfo=e),this.playerInfo}static getUIMgr(){return this.uiMgr||console.error("不存在ui管理类!"),this.uiMgr}static getUIName(){return this.uiName||(this.uiName=new me),this.uiName}static setUIMgr(e){e instanceof he&&(this.uiMgr=e,G_PlatHelper.isWINPlatform()&&(window.G_MainGui=e))}init(e){this.gameScene=e,this.checkHdR(),G_PlatHelper.getPlat()&&(this.isTest=!1)}canshow3DImage(){return!0}checkHdR(){this.enableHDR=Laya.SystemUtils.supportRenderTextureFormat(Laya.RenderTextureFormat.R16G16B16A16)}isEnableHDR(){return this.enableHDR}initMap(){if(this.mapInit)return void console.error("地图已经初始化!");this.mapInit=!0;let e=G_UIHelper.seekNodeByName(this.gameScene,"map").addComponent(ne);ne.setIns(e),e.initMap(()=>{this.mapInit=!1})}initGame(e){let t=G_GameDB.getLevelConfigByID(we.getPlayerInfo().getLastLevelId());ne.getIns().changeMinMap(t,t=>{let i,n=we.getPlayerInfo().getLastPlayerPos(),s=new Laya.Vector3(0,0,0);if(n){let e=n.split("&");i=new Laya.Vector3(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]))}else i=ne.getIns().curMap.getStartPoint().transform.position,s=ne.getIns().curMap.getStartPoint().transform.rotationEuler;ne.getIns().loadMainPlayer(1,i,s,()=>{t.createNavMeshGroup(ne.getIns().playerMgr.owner.transform.position),this.setGameState(0),ce.getIns().handlerFun(e),we.getIns().gameStart(),ne.getIns().loadingView.openBgTwen()})})}gameStart(){this.setGameState(2),we.getUIMgr().closeUI(we.getUIName().ReadyView),we.getUIMgr().openUI(we.getUIName().GameView),G_SoundMgr.playMusic(GG_SoundName.SN_Mp3.format("gameBg"))}gamePause(){this.isPause=!0,G_Event.dispatchEvent(GG_EventName.EN_GAMEPAUSE)}gameResume(){this.isPause=!1}isGameStart(){return 2==this.gameState&&!this.isPause}setGameState(e){this.gameState=e}isGameReady(){return 0==this.gameState}isGameOver(){return 3==this.gameState||4==this.gameState}}class Ie extends e{constructor(){super("game/GameScene.scene",G_ResPath.scenePath),this.testId=-1}onOpened(){super.onOpened(),G_Event.addEventListerner(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,function(){re.getIns().isOnShow("fullSceneAd")||re.getIns().showAdFullView()})}onEnable(){this.uiRoot&&G_UIManager.registerUIRoot(this.uiRoot),Laya.SoundManager.autoStopMusic=!1,this.p2=(()=>{if(G_PlatHelper.isOVPlatform()?G_OVAdv.isWatchingVideoAdv()||G_SoundMgr.resumeMusic():G_Adv.isWatchingVideoAdv()||G_SoundMgr.resumeMusic(),we.getUIMgr()&&G_PlatHelper.isTTPlatform()){let e=we.getUIMgr().getEndActivePage();e&&e.adObj&&2==e.adObj.num&&G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD)}}),G_Event.addEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this.p2)}onDisable(){this.uiRoot&&G_UIManager.unregisterUIRoot(),G_Event.removeEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this.p2)}onInitUI(){}onRegisterEvent(){}onShowOwnBanner(){}onHideOwnBanner(){}onShowOwnInsertAd(e){G_UIManager.showUI("insertAd",e)}onShowFullSceneAd(){G_UIManager.showUI("fullSceneAd")}onShowLocalTips(e){G_UIManager.showUI("tips",null,e)}onHideLocalTips(){G_UIManager.hideUI("tips")}onLoadSceneCompleted(e){this.initFun(),le.getIns().preCompileShader(),we.getIns().init(e),we.getIns().initMap(),ce.getIns().createUiRoot(this,()=>{we.getIns().initGame()})}initFun(){G_UIHelper.playBtnTouchAction=function(e,t,i=1,n=1,s=1){e&&(e._touchTween&&(e._touchTween.clear(),e._touchTween=null),e.scaleX=i,e.scaleY=i,e._touchTween=Laya.Tween.to(e,{scaleX:1.1*i*n,scaleY:1.1*i*n},100*s,null,Laya.Handler.create(null,function(){e._touchTween=Laya.Tween.to(e,{scaleX:i,scaleY:i},50*s,null,null)}))),"function"==typeof t&&t()},G_Utils.bigNumber2StrNumber=function(e,t){if(e){if("number"==typeof e&&(e=BigNumber(e)),!(e instanceof BigNumber))return"";if(e.e<=2)return e.toFixed();let i="k";if(e.e>=6)for(let t=6;t<=246;t+=3)if(e.e>=t&&e.e<t+3){6===t?i="m":9===t?i="b":12===t?i="t":(i=String.fromCharCode("a".charCodeAt()+(t-15)/3),i+=i);break}"number"!=typeof t&&(t=2);let n=e.toExponential(t-1);return BigNumber(n.substring(0,n.indexOf("e"))).times(Math.pow(10,e.e%3)).toString()+i}return""}}}class ve extends Laya.Script{constructor(){super(),this.layoutParent="parent",this.isAlignTop=!1,this.top=0,this.isAlignBottom=!1,this.bottom=0,this.isAlignLeft=!1,this.left=0,this.isAlignRight=!1,this.right=0,this.isAlignHorizontalCenter=!1,this.horizontalCenter=0,this.isAlignVerticalCenter=!1,this.verticalCenter=0}onEnable(){Laya.stage.on(Laya.Event.RESIZE,this,this.onResize),this.onLayout()}onDisable(){Laya.stage.off(Laya.Event.RESIZE,this,this.onResize)}onResize(){this.onLayout()}onLayout(){(function(){console.log("Layout ...");let e=this.getLayoutParent();e&&(this.isAlignLeft&&this.isAlignRight&&(this.owner.width=e.width-this.left-this.right),this.isAlignTop&&this.isAlignBottom&&(this.owner.height=e.height-this.top-this.bottom),this.isAlignHorizontalCenter?this.owner.x=e.width/2-this.owner.width+this._getLayoutCenterOffsetX()+this.horizontalCenter:this.isAlignLeft?this.owner.x=this.left+this._getLayoutCenterOffsetX():this.isAlignRight&&(this.owner.x=e.width-this.right-this.owner.width+this._getLayoutCenterOffsetX()),this.isAlignVerticalCenter?this.owner.y=e.height/2-this.owner.height+this._getLayoutCenterOffsetY()+this.verticalCenter:this.isAlignTop?this.owner.y=this.top+this._getLayoutCenterOffsetY():this.isAlignBottom&&(this.owner.y=e.height-this.bottom-this.owner.height+this._getLayoutCenterOffsetY()))}).bind(this)()}getLayoutParent(){return"parent"===this.layoutParent?this.owner.parent:Laya.stage}_getLayoutCenterOffsetX(){return void 0===this.owner.pivotX||isNaN(this.owner.pivotX)||void 0===this.owner.anchorX||isNaN(this.owner.anchorX)?void 0===this.owner.pivotX||isNaN(this.owner.pivotX)?this.owner.width*this.owner.anchorX:this.owner.pivotX:0===this.owner.pivotX&&0===this.owner.anchorX?0:0!==this.owner.pivotX?this.owner.pivotX:this.owner.width*this.owner.anchorX}_getLayoutCenterOffsetY(){return void 0===this.owner.pivotY||isNaN(this.owner.pivotY)||void 0===this.owner.anchorY||isNaN(this.owner.anchorY)?void 0===this.owner.pivotY||isNaN(this.owner.pivotY)?this.owner.height*this.owner.anchorY:this.owner.pivotY:0===this.owner.pivotY&&0===this.owner.anchorY?0:0!==this.owner.pivotY?this.owner.pivotY:this.owner.height*this.owner.anchorY}}class Pe extends Laya.Sprite{constructor(e){super(),this._originalSize=e,this._imgUrl="",this._singleImgSize=null,this._totalFrames=0,this._curentFrame=0,this._rowCount=0,this._colCount=0,this._offsetTexture=new Laya.Point,this._isAnimating=!1,this._imgTexture=null,this._onSizeChangedCb=null,this.size(e.width,e.height)}setImageData(e){if(this._imgUrl!==e)if("object"==typeof e){let t=e;this._setImageAnimation(t.path,{width:t.width,height:t.height},t.frame_count)}else this._setImg(e)}_setImg(e){this._imgUrl=e,this._totalFrames=1,null!==this._imgTexture&&(this._imgTexture=null,this._singleImgSize=null,this._totalFrames=0,this._curentFrame=0,this._rowCount=0,this._colCount=0,this._offsetTexture=new Laya.Point,this._endAnimate(),this.graphics.clear(!0));let t="";if("string"==typeof e&&""!==e)t=e;else if(Array.isArray(e)&&e.length>0){let i=this._random(0,e.length-1);t=e[i]}else t="ad/default_ad.png";this.loadImage(t,Laya.Handler.create(this,function(){this._imgUrl===e&&this.texture&&(this.size(this.texture.width,this.texture.height),this._onSizeChangedCb&&this._onSizeChangedCb())}.bind(this)))}_setImageAnimation(e,t,i){i>1?(this._imgUrl=e,this._singleImgSize=t,this._totalFrames=i,this.size(t.width,t.height),this._onSizeChangedCb&&this._onSizeChangedCb(),this._loadImg(function(){e===this._imgUrl&&(null!==this.texture&&(this.texture=null),null!==this._imgTexture&&(this._curentFrame=0,this._rowCount=this._imgTexture.height/this._singleImgSize.height,this._colCount=this._imgTexture.width/this._singleImgSize.width,this._startAnimate()))}.bind(this))):this._setImg(e)}_loadImg(e){"string"==typeof this._imgUrl&&""!==this._imgUrl&&Laya.loader.load(this._imgUrl,Laya.Handler.create(this,function(){this._imgTexture=Laya.loader.getRes(this._imgUrl),"function"==typeof e&&e()}.bind(this)))}_updateFrame(){this._curentFrame+=1,this._curentFrame>this._totalFrames&&(this._curentFrame=1);let e=(this._curentFrame-1)%this._colCount*this._singleImgSize.width,t=Math.floor((this._curentFrame-1)/this._colCount)*this._singleImgSize.height;this._offsetTexture.x=-e,this._offsetTexture.y=-t,this.graphics.clear(!0),this.graphics.fillTexture(this._imgTexture,0,0,this.width,this.height,"no-repeat",this._offsetTexture)}_startAnimate(){this._endAnimate(),this._isAnimating=!0,this.timerLoop(100,this,this._updateAnimate),this._updateFrame()}_updateAnimate(){this._isAnimating&&this._checkIsOnShow(this)&&this._updateFrame()}_endAnimate(){this._isAnimating&&(this._isAnimating=!1,this.clearTimer(this,this._updateAnimate))}onSizeChanged(e){"function"==typeof e&&(this._onSizeChangedCb=e)}offSizeChanged(){this._onSizeChangedCb=null}_checkIsOnShow(e){return null===e||e&&e.visible&&this._checkIsOnShow(e.parent)}_random(e,t){if(e<0||t<=0)return 0;switch(arguments.length){case 1:return Math.floor(Math.random()*e+1);case 2:return Math.floor(Math.random()*(t-e+1)+e);default:return 0}}}class Se extends e{constructor(){if(super("game/GameTestScene.scene"),this.readyView&&this.readyView.doShow(),this.popupView&&this.popupView.doHide(),this.testBtn){let e=new Pe({width:this.testBtn.width,height:this.testBtn.height});if(e){e.onSizeChanged(function(){e.pivotX=e.width/2,e.pivotY=e.height/2,e.x=this.testBtn.width/2,e.y=this.testBtn.height/2,e.scaleX=this.testBtn.width/e.width,e.scaleY=this.testBtn.height/e.height}.bind(this)),this.testBtn.addChild(e);let t={width:96,height:96,path:"https://image.game.hnquyou.com/loading_gif.png",frame_count:12};e.setImageData(t)}}this.testImage&&(this.testImage.dark=!0)}onOpened(){super.onOpened(),G_PlatHelper.getPlat()&&(G_Switch.isPublishing(function(e){console.log("isPublishing: ",e)}),G_Switch.isNewGame(function(e){console.log("isNewGame: ",e)}),console.log("isSupportBannerAd: ",G_Adv.isSupportBannerAd()),console.log("isSupportVideoAd: ",G_Adv.isSupportVideoAd()),G_FreeGetMgr.getNextFreeGetWay(function(e){console.log("next free get way: ",e)}));let e={arr:[0,1,2],boolean:!0,date:new Date(0),err:new Error("我是一个错误"),func:function(){console.log("我是一个函数")},nul:null,num:0,obj:{name:"我是一个对象",id:1},reg:new RegExp("/我是一个正则/ig"),str:"123aa",unf:void 0};console.log(e),console.log("deepClone...");let t=G_Utils.deepClone(e);console.log(t),console.log(t.err),t.func(),console.log("cloneDeep...");let i=G_Utils.cloneDeep(e);console.log(i),console.log(i.err),i.func();let n=function(){console.log("test!!!")};console.error("aaabbccc event..."),G_Event.addEventListerner("aaabbccc",n),G_Event.removeEventListerner("aaabbccc",n),G_Event.dispatchEvent("aaabbccc")}onEnable(){this.uiRoot&&G_UIManager.registerUIRoot(this.uiRoot)}onDisable(){this.uiRoot&&G_UIManager.unregisterUIRoot()}onInitUI(){if(this.settingBtn){this.settingBtn.on("click",null,function(){G_UIHelper.playBtnTouchAction(this.settingBtn,function(){this.onMoreGameTouched()}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}.bind(this))}this.moreGamesBtn&&this.moreGamesBtn.on("click",null,function(){G_UIHelper.playBtnTouchAction(this.moreGamesBtn,()=>{})}.bind(this)),this.testUIBtn&&(G_UIHelper.refreshFreeWayOfBtn(this.testUIBtn,"comm/video_icon.png","comm/share_icon.png"),this.testUIBtn.on("click",null,function(){this.testUIBtn.doTouch(G_ShareScene.SS_SHARE_APP,function(){console.log("succ....")},function(){console.log("fail....")})}.bind(this))),this.testBannerBtn&&this.testBannerBtn.on("click",null,function(){G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD,{min:!0})}.bind(this)),this.testInsertBtn&&this.testInsertBtn.on("click",null,function(){G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_Event.dispatchEvent(G_EventName.EN_SHOW_INSERT_AD)}.bind(this)),this.testSubscribeOnceBtn&&this.testSubscribeOnceBtn.on("click",null,function(){G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_Subscriber.isSupportOnce()?G_Subscriber.reqSubscribeOnceMsgs("Test",e=>{console.log("reqSubscribeOnceMsgs state: ",e),e?G_PlatHelper.showToast("订阅一次性消息成功"):G_PlatHelper.showToast("订阅一次性消息失败")}):G_PlatHelper.showToast("当前平台暂不支持")}.bind(this)),this.testSubscribeForeverBtn&&this.testSubscribeForeverBtn.on("click",null,function(){G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_Subscriber.isSupportForever()?G_Subscriber.reqSubscribeAllForeverMsgs(e=>{console.log("reqSubscribeAllForeverMsgs state: ",e),e?G_PlatHelper.showToast("订阅长期消息成功"):G_PlatHelper.showToast("订阅长期消息失败")}):G_PlatHelper.showToast("当前平台暂不支持")}.bind(this)),this.testDepositBtn&&this.testDepositBtn.on("click",null,function(){G_RedPackageMgr.depositMoney((e,t)=>{console.log("deposit money state: ",e,t)})}.bind(this)),this.testWithdrawBtn&&this.testWithdrawBtn.on("click",null,function(){G_RedPackageMgr.withdrawMoney(3,(e,t)=>{console.log("withdraw money state: ",e,t)})}.bind(this)),this.testWithdrawEverydayBtn&&this.testWithdrawEverydayBtn.on("click",null,function(){G_RedPackageMgr.withdrawEverydayMoney((e,t)=>{console.log("withdraw everyday money state: ",e,t)})}.bind(this)),this.testLoginBtn&&this.testLoginBtn.on("click",null,function(){G_NativeWXMgr.isWXAppInstalled()?G_NativeWXMgr.reqLoginToWX((e,t)=>{console.log("login result: ",e,t)}):console.warn("wx app is not installed...")}.bind(this)),this.testShareBtn&&this.testShareBtn.on("click",null,function(){!G_PlatHelper.isNativePlatform()||G_NativeWXMgr.isWXAppInstalled()?G_UIManager.showUI("capture",function(){console.log("on show capture closed...")},e=>{G_NativeWXMgr.reqShareImage(!0,e,e=>{console.log("share result: ",e)})}):console.warn("wx app is not installed...")}.bind(this)),this.readyView&&this._initBaseMenu(this.readyView)}onRegisterEvent(){G_Event.addEventListerner(G_EventName.EN_REFRESH_VIDEO_AD,()=>{this.testUIBtn&&G_UIHelper.refreshFreeWayOfBtn(this.testUIBtn,"comm/video_icon.png","comm/share_icon.png")})}onShowOwnBanner(){G_UIManager.showUI("bannerAd")}onHideOwnBanner(){G_UIManager.hideUI("bannerAd")}onShowOwnInsertAd(e){G_UIManager.showUI("insertAd",e)}onShowLocalTips(e){G_UIManager.showUI("tips",null,e)}onHideLocalTips(){G_UIManager.hideUI("tips")}onShowLocalModal(e){G_UIManager.showUI("modal",null,e)}onShowLocalLoading(e){G_UIManager.showUI("loading",null,e)}onHideLocalLoading(){G_UIManager.hideUI("loading")}onLoadSceneCompleted(e){}onSettingTouched(e){G_UIManager.showUI("setting",function(){console.log("on show setting closed...")})}onMoreGameTouched(){G_UIManager.showUI("fakeLoadingAd",function(){console.log("on show fakeLoadingAd closed...")})}_initBaseMenu(e){e&&(e.doShow=function(){e.visible=!0},e.doHide=function(){e.visible=!1},e.doHide())}}class Te extends Laya.Script{constructor(){super(),this.gap=3e3,this._tween=null,this._shakeTimes=0}onEnable(){let e=null;(e=(()=>{this.owner&&!this.owner.destroyed&&(this._shakeTimes>0&&this._shakeTimes%2==0?(this._shakeTimes=0,this._shakeToMiddle(()=>{G_Scheduler.schedule("auto_shake_"+G_Utils.generateString(32),e,!1,this.gap,0)})):this.owner.rotation<15?(this._shakeTimes+=1,this._shakeToRight(e)):(this._shakeTimes+=1,this._shakeToLeft(e)))}))()}_shakeToLeft(e){if(this._clearTween(),this.owner&&this.owner.rotation>-15){let t=(this.owner.rotation+15)/30*50;this._tween=Laya.Tween.to(this.owner,{rotation:-15},t,null,Laya.Handler.create(null,()=>{this._tween=null,"function"==typeof e&&e()}))}else"function"==typeof e&&e()}_shakeToRight(e){if(this._clearTween(),this.owner&&this.owner.rotation<15){let t=(15-this.owner.rotation)/30*50;this._tween=Laya.Tween.to(this.owner,{rotation:15},t,null,Laya.Handler.create(null,()=>{this._tween=null,"function"==typeof e&&e()}))}else"function"==typeof e&&e()}_shakeToMiddle(e){if(this._clearTween(),this.owner&&0!=this.owner.rotation){let t=Math.abs(this.owner.rotation)/30*50;this._tween=Laya.Tween.to(this.owner,{rotation:0},t,null,Laya.Handler.create(null,()=>{this._tween=null,"function"==typeof e&&e()}))}else"function"==typeof e&&e()}_clearTween(){this.owner&&this._tween&&(this._tween.clear(),this._tween=null)}}class Ge extends Laya.Script{constructor(){super(),this.miniScale=1,this.maxScale=1.1,this.duration=800,this._tween=null}onEnable(){let e=null;(e=(()=>{this.owner&&!this.owner.destroyed&&(this.owner.scaleX<this.maxScale?this._scaleToMax(e):this._scaleToMini(e))}))()}_scaleToMini(e){if(this._clearTween(),this.owner&&this.owner.scaleX>this.miniScale){let t=(this.owner.scaleX-this.miniScale)/(this.maxScale-this.miniScale)*this.duration;this._tween=Laya.Tween.to(this.owner,{scaleX:this.miniScale,scaleY:this.miniScale},t,null,Laya.Handler.create(null,()=>{this._tween=null,"function"==typeof e&&e()}),0,!1,!1)}else"function"==typeof e&&e()}_scaleToMax(e){if(this._clearTween(),this.owner&&this.owner.scaleX<this.maxScale){let t=(this.maxScale-this.owner.scaleX)/(this.maxScale-this.miniScale)*this.duration;this._tween=Laya.Tween.to(this.owner,{scaleX:this.maxScale,scaleY:this.maxScale},t,null,Laya.Handler.create(null,()=>{this._tween=null,"function"==typeof e&&e()}),0,!1,!1)}else"function"==typeof e&&e()}_clearTween(){this.owner&&this._tween&&(this._tween.clear(),this._tween=null)}}let be=Laya.UIUtils;be.darkFilter=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]),be.dark=function(e,t=!0){t?be.addFilter(e,be.darkFilter):be.clearFilter(e,Laya.ColorFilter)},Laya.Sprite.drawToCanvas=function(e,t,i,n,s,o){s-=e.x,o-=e.y,s|=0,o|=0,i|=0,n|=0;var r=new Laya.Context;r.size(i,n),r.asBitmap=!0,r._targets.start(),r._targets.clear(0,0,0,0),Laya.RenderSprite.renders[t]._fun(e,r,s,o),r.flush(),r._targets.end(),r._targets.restore();var a=r._targets.getData(0,0,i,n);r.destroy();var l=new Laya.HTMLCanvas(!0);l.size(i,n);for(var h=l.getContext("2d").getImageData(0,0,i,n),c=4*i,d=h.data,u=n-1,p=u*c,_=0;u>=0;u--)d.set(a.subarray(_,_+c),p),p-=c,_+=c;var g=new Laya.HTMLCanvas(!0);return g.size(i,n),g.getContext("2d").putImageData(h,0,0),g},Laya.UIComponent.prototype._dark=!1,Object.defineProperty(Laya.UIComponent.prototype,"dark",{get:function(){return this._dark},set:function(e){e!==this._dark&&(this._dark=e,Laya.UIUtils.dark(this,e))}}),Laya.List.prototype.onCellMouse=function(e){e.type===Laya.Event.MOUSE_DOWN&&(this._isMoved=!1);var t=e.currentTarget,i=this._startIndex+this._cells.indexOf(t);i<0||(e.type===Laya.Event.CLICK||e.type===Laya.Event.RIGHT_CLICK?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(t,!0,0):e.type!==Laya.Event.MOUSE_OVER&&e.type!==Laya.Event.MOUSE_OUT||this.changeCellState(t,e.type===Laya.Event.MOUSE_OVER,0),this.mouseHandler&&this.mouseHandler.runWith([e,i]))},Laya.List.prototype.changeCells=function(e){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),i=t.width+this._spaceX||1,n=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/i):Math.ceil(this._width/i)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/n):Math.round(this._height/n));var s=this._width?this._width:i*this.repeatX-this._spaceX,o=this._height?this._height:n*this.repeatY-this._spaceY;this._cellSize=this._isVertical?n:i,this._cellOffset=this._isVertical?n*Math.max(this._repeatY2,this._repeatY)-o-this._spaceY:i*Math.max(this._repeatX2,this._repeatX)-s-this._spaceX,this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=o:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=s),this.setContentSize(s,o);var r=this._isVertical?this.repeatX:this.repeatY,a=this._isVertical?this.repeatY:this.repeatX;this._createItems(0,r,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},Laya.Animator.prototype._setClipDatasToNode=function(e,t,i,n){for(var s=e._realtimeDatas,o=e._clip._nodes,r=e._nodeOwners,a=0,l=o.count;a<l;a++){var h=r[a];if(h){var c=h.propertyOwner;if(c){switch(h.type){case 0:for(var d=h.property,u=d.length-1,p=0;p<u&&(c=c[d[p]]);p++);if(this._applyFloat(c,d[u],h,t,i,n,s[a]),c instanceof Laya.Vector4){let e=h.propertyOwner;for(let t=0;t<u;t++)if(e=e[d[t]],t==u-2){e[d[t+1]]=c;break}}break;case 1:var _=c.localPosition;this._applyPositionAndRotationEuler(h,t,i,n,s[a],_),c.localPosition=_;break;case 2:var g=c.localRotation;this._applyRotation(h,t,i,n,s[a],g),c.localRotation=g;break;case 3:var f=c.localScale;this._applyScale(h,t,i,n,s[a],f),c.localScale=f;break;case 4:var m=c.localRotationEuler;this._applyPositionAndRotationEuler(h,t,i,n,s[a],m),c.localRotationEuler=m}h.updateMark=this._updateMark}}}},Object.defineProperty(Laya.List.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(e){this._selectedIndex=e,this.changeSelectStatus(),this.event(Laya.Event.CHANGE),this.selectHandler&&this.selectHandler.runWith(e),this.startIndex=this._startIndex}}),Object.defineProperty(Laya.CharRender_Canvas.prototype,"canvasWidth",{get:function(){return Laya.CharRender_Canvas.canvas.width},set:function(e){Laya.CharRender_Canvas.canvas.width!=e&&(Laya.CharRender_Canvas.canvas.width=e,e>2048&&console.warn("画文字设置的宽度太大，超过2048了"),this.ctx.setTransform(this.lastScaleX,0,0,this.lastScaleY,0,0))}}),Laya.getMiniAdpter=function(){return Laya.MiniAdpter?Laya.MiniAdpter:Laya.QQMiniAdapter?Laya.QQMiniAdapter:Laya.VVMiniAdapter?Laya.VVMiniAdapter:Laya.QGMiniAdapter?Laya.QGMiniAdapter:Laya.TTMiniAdapter?Laya.TTMiniAdapter:Laya.HWMiniAdapter?Laya.HWMiniAdapter:null},String.prototype.format=function(e){var t=this;if(arguments.length<1)return t;var i=arguments;for(var n in 1==arguments.length&&"object"==typeof e&&(i=e),i){var s=i[n];null!=s&&(t=t.replace("{"+n+"}",s))}return t};var Ce={init:function(){window.G_EventName={EN_SYSTEM_ERROR:"EN_SYSTEM_ERROR",EN_SDK_NOT_SUPPORT:"EN_SDK_NOT_SUPPORT",EN_NET_CONNECTION_LOST:"EN_NET_CONNECTION_LOST",EN_NET_CONNECTION_RECOVER:"EN_NET_CONNECTION_RECOVER",EN_WILL_EXIT:"EN_WILL_EXIT",EN_APP_AFTER_ONSHOW:"EN_APP_AFTER_ONSHOW",EN_APP_BEFORE_ONHIDE:"EN_APP_BEFORE_ONHIDE",EN_BANNER_NOT_SUPPORT_RIGHT_NOW:"EN_BANNER_NOT_SUPPORT_RIGHT_NOW",EN_VIDEO_NOT_SUPPORT_RIGHT_NOW:"EN_VIDEO_NOT_SUPPORT_RIGHT_NOW",EN_INTERSTITIAL_NOT_SUPPORT_RIGHT_NOW:"EN_INTERSTITIAL_NOT_SUPPORT_RIGHT_NOW",EN_LAUNCH_APP_FROM_UNKNOW:"EN_LAUNCH_APP_FROM_UNKNOW",EN_LAUNCH_APP_FROM_EVERYWHERE:"EN_LAUNCH_APP_FROM_EVERYWHERE",EN_LAUNCH_APP_FROM_RECENT:"EN_LAUNCH_APP_FROM_RECENT",EN_LAUNCH_APP_FROM_FAVOURITE:"EN_LAUNCH_APP_FROM_FAVOURITE",EN_LAUNCH_APP_FROM_SINGLE_SHARE:"EN_LAUNCH_APP_FROM_SINGLE_SHARE",EN_LAUNCH_APP_FROM_GROUP_SHARE:"EN_LAUNCH_APP_FROM_GROUP_SHARE",EN_LAUNCH_APP_FROM_SHARE:"EN_LAUNCH_APP_FROM_SHARE",EN_LAUNCH_APP_BACK_FROM_OTHER_APP:"EN_LAUNCH_APP_BACK_FROM_OTHER_APP",EN_SHOW_LOCAL_TIPS:"EN_SHOW_LOCAL_TIPS",EN_HIDE_LOCAL_TIPS:"EN_HIDE_LOCAL_TIPS",EN_SHOW_LOCAL_MODAL:"EN_SHOW_LOCAL_MODAL",EN_SHOW_LOCAL_LOADING:"EN_SHOW_LOCAL_LOADING",EN_HIDE_LOCAL_LOADING:"EN_HIDE_LOCAL_LOADING"};let e={};window.G_NotPropagationEventName=e,window.G_IsGlobalEventPropagation=function(t){return"string"!=typeof t||(!G_EventName[t]||!e[t])};window.G_OpenDataOperation={ODO_PRELOAD:"preload",ODO_SHOW_RANK:"show_rank"};window.G_ReportEventName={REN_NAVIGATION_TO_MINIPROGRAM:"navigation_to_miniprogram",REN_NAVIGATION_TO_MINIPROGRAM_SUCCESS:"navigation_to_miniprogram_success",REN_NAVIGATION_TO_MINIPROGRAM_CANCEL:"navigation_to_miniprogram_cancel",REN_NAVIGATION_TO_MINIPROGRAM_ERROR:"navigation_to_miniprogram_error",REN_RECEIVED_MEMORY_WARNING:"received_memory_warning"};window.G_Const={C_TIMEOUT_OF_LOGIN:1e4,C_SCHEDULE_REPEAT_FOREVER:1561963389461};window.G_Dbs=[],window.G_LoginBtnPath="resources/***.png",window.G_IsAlwaysNewPlayer=!1,window.G_OpenID=null,window.G_SessID=null,window.G_Nickname="",window.G_Sex=0,window.G_HeadUrl=""}},Oe=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_Scheduler Instance...");var e={};return{schedule:function(t,i,n,s,o){if(!this._checkKey(t)||!this._checkCallback(i))return!1;if(e[t])return!1;null==s&&(s=n?1:0),null==o&&(o=G_Const.C_SCHEDULE_REPEAT_FOREVER);let r=0===o?i:function(i){let n=e[t];if(n)if(n.invokeTimes+=1,n.invokeTimes>=o){let e=n.cb;this.unschedule(t),e()}else n.cb(i)}.bind(this);return 0===o?n?Laya.timer.frameOnce(s,this,r):Laya.timer.once(s,this,r):(e[t]={invokeTimes:0,cb:i,scheduleCb:r},n?Laya.timer.frameLoop(s,this,r):Laya.timer.loop(s,this,r)),!0},unschedule:function(t){return!!this._checkKey(t)&&!!e[t]&&(Laya.timer.clear(this,e[t].scheduleCb),delete e[t],!0)},isScheduled:function(t){return!!this._checkKey(t)&&!!e[t]},unscheduleAll:function(){for(let t in e)Laya.timer.clear(this,e[t].cb);e={}},_checkKey:function(e){return"string"==typeof e&&""!==e},_checkCallback:function(e){return"function"==typeof e}}}()),e}}}(),Ae=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_Event Instance...");var e={};return{addEventListerner:function(t,i,n=null){if(!this._checkString(t)||!this._checkListerner(i))return"";void 0===e[t]&&(e[t]=[]);let s=G_Utils.generateString(32);return e[t].push({key:s,method:i,caller:n}),s},removeEventListernerByKey:function(t,i){if(this._checkString(t)&&this._checkString(i)&&void 0!==e[t])for(let n=0;n<e[t].length;n++)if(e[t][n].key===i)return void e[t].splice(n,1)},removeEventListerner:function(t,i,n=null){if(this._checkString(t)&&this._checkListerner(i)&&void 0!==e[t])for(let s=0;s<e[t].length;s++){let o=e[t][s];if(o.method===i&&o.caller===n)return void e[t].splice(s,1)}},removeAllEventListerners:function(){e={}},hasEventListerner:function(t){return!!this._checkString(t)&&void 0!==e[t]&&e[t].length>0},dispatchEvent:function(t){if(!this._checkString(t))return;let i=Array.prototype.slice.call(arguments);i.shift(),i.length>0?console.log("dispatch EventName: {0}, Params: {1}".format(t,i.toString())):console.log("dispatch EventName: {0}".format(t));let n=null;for(let s in e[t]){let o=e[t][s],r=!1;void 0===(r=o.method.apply(o.caller,i))&&(r=null),n=n||r}if(null===n&&(n=G_IsGlobalEventPropagation(t)),!n){let e=this._getParentEventName(t);""!==e&&(i.splice(0,0,e),this.dispatchEvent.apply(this,i))}},_checkString:function(e){return void 0!==e&&"string"==typeof e&&""!==e},_checkListerner:function(e){return"function"==typeof e},_getParentEventName:function(e){if(!this._checkString(e))return"";let t=e.split("_"),i="";for(let e=0;e<t.length-1;e++)i+=""===i?t[e]:"_"+t[e];return i}}}()),e}}}(),Ee=function(){var e,t;return{getInstance:function(){return e||(e=function(){console.log("Init G_Utils Instance...");var e=function(e,t,i){var n=e.toString();for(i||(i="0");n.length<t;)n=i+n;return n};return{registerLodash(e){t=e},getLodash:()=>t,HexString2Uint8Array:function(e){if(""===e||e.length%2!=0)return new Uint8Array;let t=[];for(let i=0;i<e.length;i+=2)t[t.length]=parseInt(e[i]+e[i+1],16);return new Uint8Array(t)},Uint8Array2HexString:function(e){let t="";for(let i=0;i<e.length;i++){let n=e[i].toString(16).toUpperCase();t+=1==n.length?"0"+n:n}return t},formatDate:function(t,i,n){var s="",o="";if(i||n||(i=n=!0),i){var r=t.getFullYear(),a=t.getMonth()+1,l=t.getDate();s=2==i?r+"/"+e(a,2)+"/"+e(l,2):r+"年"+a+"月"+l+"日"}if(n){var h=t.getHours(),c=(a=t.getMinutes(),t.getSeconds());o=e(h,2)+":"+e(a,2)+":"+e(c,2)}return i&&n?s+" "+o:i?s:n?o:s+" "+o},clone:function(e){return t?t.clone(e):(G_PlatHelper.isQQPlatform()||console.warn("can not use clone utils before register lodash tools..."),this.deepClone(e))},cloneDeep:function(e){return t?t.cloneDeep(e):(G_PlatHelper.isQQPlatform()||console.warn("can not use cloneDeep utils before register lodash tools..."),this.deepClone(e))},deepClone:function(e){if(!e)return e;var t;if([Number,String,Boolean].forEach(function(i){e instanceof i&&(t=i(e))}),void 0===t){var i=this;if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach(function(e,n,s){t[n]=i.deepClone(e)});else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else for(var n in t={},e)t[n]=i.deepClone(e[n]);else t=e}return t},random:function(e,t){if(e<0||t<=0)return 0;switch(arguments.length){case 1:return Math.floor(Math.random()*e+1);case 2:return Math.floor(Math.random()*(t-e+1)+e);default:return 0}},generateString:function(e){let t="";if("number"==typeof e)for(let i=0;i<e;i++)Math.random()<.5?t+=String.fromCharCode(this.random("0".charCodeAt(),"0".charCodeAt()+9)):t+=String.fromCharCode(this.random("a".charCodeAt(),"a".charCodeAt()+25));return t},cutString:function(e,t){var i=0,n="",s=/[^\x00-\xff]/g,o="",r=e.replace(s,"**").length;if(r>t){for(var a=0;a<r&&(null!=(o=e.charAt(a).toString()).match(s)?i+=2:i++,!(i>t));a++)n+=o;r>t&&(n+="...")}else n=e;return n},bigNumber2StrNumber(e,t){if(e){if("number"==typeof e&&(e=BigNumber(e)),!(e instanceof BigNumber))return"";if(e.e<=4)return e.toFixed();let i="k";if(e.e>=6)for(let t=6;t<=246;t+=3)if(e.e>=t&&e.e<t+3){6===t?i="m":9===t?i="b":12===t?i="t":(i=String.fromCharCode("a".charCodeAt()+(t-15)/3),i+=i);break}"number"!=typeof t&&(t=3);let n=e.toExponential(t-1);return BigNumber(n.substring(0,n.indexOf("e"))).times(Math.pow(10,e.e%3)).toString()+i}return""},convertNumberToChinese:function(e){if("number"!=typeof e)return"一";switch(e){case 1:return"一";case 2:return"二";case 3:return"三";case 4:return"四";case 5:return"五";case 6:return"六";case 7:return"日";default:return"一"}},convertSecondToHourMinute:function(e){if(!G_GameDB.isLoaded())return"";let t=G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_UNIT_HOUR).word,i=G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_UNIT_MINUTE).word;if("number"==typeof e){if(e>=3600){let n=Math.floor(e/3600),s=Math.floor((e-3600*n)/60);return s>0?n.toString()+t+s.toString()+i:n.toString()+t}return e>=60?Math.floor(e/60).toString()+i:e>0?"1"+i:"0"+i}return""},convertSecondToHourMinuteSecond:function(e,t){let i="";if(e>=3600){let t=Math.floor(e/3600);i+=t>=10?t.toString():"0"+t.toString()}else t||(i+="00");""!==i&&(i+=":");let n=Math.floor(e%3600/60);i+=n>0?n>=10?n.toString():"0"+n.toString():"00",i+=":";let s=e%60;return i+=s>0?s>=10?s.toString():"0"+s.toString():"00"},isObject:function(e){return e&&"object"==typeof e},shuffleArray(e){if(Array.isArray(e))for(let t=0;t<e.length;t++){let i=Math.round(Math.random()*(e.length-1-t))+t,n=e[i];e[i]=e[t],e[t]=n}},printExposeAdvInfos(e){let t=e=>{console.log("曝光广告：",{advId:e.adv_id,appId:e.appid,title:e.title,path:e.origin_path?e.origin_path:e.logo_url.origin_path})};Array.isArray(e)?(console.warn("曝光广告"+e.length+"条"),e.forEach(e=>{t(e)})):(console.warn("曝光广告1条"),t(e))}}}()),e}}}(),ke=function(){var e;return{getInstance:function(){return e||(console.log("Init G_UIHelper Instance..."),e={seekNodeByName:function(e,t){if(e.name===t)return e;let i=void 0;return e._children.forEach(e=>{i||(i=this.seekNodeByName(e,t))}),i},getComponentByName:function(e,t){let i=void 0;return e._components.forEach(e=>{!i&&e&&-1!=e.runtime.indexOf(t)&&(i=e)}),i},playBtnTouchAction:function(e,t,i=1,n=1,s=1,o=500){if(e){if(e._lastClickTime&&Date.now()-e._lastClickTime<=o)return;e._lastClickTime=Date.now(),e._touchTween&&(e._touchTween.clear(),e._touchTween=null),e.scaleX=i,e.scaleY=i,e._touchTween=Laya.Tween.to(e,{scaleX:1.1*i*n,scaleY:1.1*i*n},100*s,null,Laya.Handler.create(null,function(){e._touchTween=Laya.Tween.to(e,{scaleX:i,scaleY:i},50*s,null,Laya.Handler.create(null,function(){e._touchTween=null,"function"==typeof t&&t()}),0,!1,!1)}),0,!1,!1)}},playOpenPopupAction:function(e,t){this.playUIScaleAction(e,.8,1,500,t)},playUIScaleAction:function(e,t,i,n,s){e&&(e._scaleTween&&(e._scaleTween.clear(),e._scaleTween=null),e.scaleX=t,e.scaleY=t,e._scaleTween=Laya.Tween.to(e,{scaleX:i,scaleY:i},n,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){e._scaleTween=null,"function"==typeof s&&s()}),0,!1,!1))},playOpenPopupAction_FromLeft:function(e,t){e&&(e._leftPopupTween&&(e._leftPopupTween.clear(),e._leftPopupTween=null),e.x=240,e._leftPopupTween=Laya.Tween.to(e,{x:360},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){e._leftPopupTween=null,"function"==typeof t&&t()}),0,!1,!1))},playOpenPopupAction_FromBottom:function(e,t){e&&(e._bottomPopupTween&&(e._bottomPopupTween.clear(),e._bottomPopupTween=null),e.y=Laya.stage.height/4,e._bottomPopupTween=Laya.Tween.to(e,{y:Laya.stage.height-e.height},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){e._bottomPopupTween=null,"function"==typeof t&&t()}),0,!1,!1))},layoutItemsInContent:function(e,t,i){if(e&&t&&t.length>0&&"number"==typeof i){let n=0;for(let e=0;e<t.length;e++)n+=t[e].width*t[e].scaleX,0!==e&&(n+=i);let s=(e.width-n)/2;for(let e=0;e<t.length;e++)if(0===e)t[e].x=s+t[e].width*t[e].scaleX*(t[e].pivotX/t[e].width);else{let n=t[e-1].x+t[e-1].width*t[e-1].scaleX*(1-t[e-1].pivotX/t[e-1].width)+i;t[e].x=n+t[e].width*t[e].scaleX*(t[e].pivotX/t[e].width)}}},refreshFreeWayOfBtn:function(e,t="comm/video_icon.png",i="comm/share_icon.png"){e&&(G_PlatHelper.isTTPlatform()&&(i=t),e.getWay||(e._way=G_FreeGetWay.FGW_NONE,e.getWay=function(){return e._way}),e.refreshWay||(e.refreshWay=function(){G_FreeGetMgr.getNextFreeGetWay(function(n){console.log("next free get way: "+n),e._way=n;let s=G_UIHelper.seekNodeByName(e,"icon");s&&(n===G_FreeGetWay.FGW_ADV?s.skin=t:s.skin=i),n!==G_FreeGetWay.FGW_NONE||G_Share.isSupport()?e.visible=!0:e.visible=!1})}),e.doTouch||(e.doTouch=function(t,i,n,s=!0,o=!0){G_UIHelper.playBtnTouchAction(e,function(){if(e.getWay()===G_FreeGetWay.FGW_ADV){G_SoundMgr.pauseMusic();let t=function(e,t){G_PlatHelper.showModal(null,G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_ADV_NOT_FINISH_CONTENT).word,!0,function(i){i?"function"==typeof t&&t():"function"==typeof e&&e()},{confirmText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_ADV_NOT_FINISH_CONFIRM_TEXT).word,cancelText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_ADV_NOT_FINISH_CANCEL_TEXT).word})},r=function(e,r){if(G_SoundMgr.resumeMusic(),e)G_PlayerInfo.plusTodayAdvimes(),"function"==typeof i&&i();else{let e=()=>{s&&G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_ADV_FAIL).word),"function"==typeof n&&n()};!o||G_PlatHelper.isVIVOPlatform()?e():G_Switch.isPublishing(function(i){i?e():t(e,r)})}};if(G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()||G_PlatHelper.isHWPlatform()){let e=G_OVAdv.showRandomVideoAd;if(e){let t=()=>{e.call(G_OVAdv,function(e){r(e,t)},function(e){if(G_SoundMgr.resumeMusic(),s)if(-1===e)G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_READY_YET).word);else{let t=G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_FORMAT_OF_VIDEO_NOT_READY_YET).word;G_PlatHelper.showToast(t.format(e.toString()))}"function"==typeof n&&n()})||(G_SoundMgr.resumeMusic(),G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_READY_YET).word),"function"==typeof n&&n())};t()}}else if(G_PlatHelper.isQTTPlatform()){let e=()=>{G_PlatHelper.getPlat().showVideo(t=>{1===t||0===t?r(!0,e):2===t?r(!1,e):(s&&G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_READY_YET).word),"function"==typeof n&&n())})};e()}else if(G_PlatHelper.isNativePlatform()){let t=()=>{G_SoundMgr.resumeMusic(),e.refreshWay(),s&&G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_READY_YET).word),"function"==typeof n&&n()};G_NativeAdvMgr.isRewardVideoLoaded()?G_NativeAdvMgr.showRewardVideo(e=>{r(e,t)},t):t()}else{let t=()=>{G_Adv.createVideoAdv(function(e){r(e,t)},function(){G_SoundMgr.resumeMusic(),e.refreshWay(),"function"==typeof n&&n()})};t()}}else G_PlatHelper.isTTPlatform()&&e.getWay()===G_FreeGetWay.FGW_NONE?(G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_READY_YET).word),"function"==typeof n&&n()):G_Share.share(t,null,!0,function(t){if(t){if(e.getWay()===G_FreeGetWay.FGW_SHARE)return void("function"==typeof i&&i());G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_NO_MORE_REWARD).word)}"function"==typeof n&&n()})},e._originalScale),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}),e._originalScale=e.scaleX,e.refreshWay())},delayShow:function(e,t=3e3){e&&!G_PlatHelper.isOPPOPlatform()?(e.visible=!1,G_Scheduler.schedule("Delay_Show_Of_"+G_Utils.generateString(32),function(){e.visible=!0},!1,t,0)):e.visible=!0},autoMoveWithDefaultConfig(e,t,i){G_Switch.getMoveMistakeConfig(n=>{this.autoMove(e,0,n.hold1,n.hold2,n.move,!0,t,i)})},autoMove:function(e,t,i,n,s,o,r,a){e&&(e._originalPos||(e._originalPos={x:e.x,y:e.y}),e._moveTween&&(e._moveTween.clear(),e._moveTween=null),e._scheduleKey&&(G_Scheduler.unschedule(e._scheduleKey),e._scheduleKey=null),e.visible=!1,e.x=e._originalPos.x+r.x,e.y=e._originalPos.y+r.y,e._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(e._scheduleKey,function(){e._scheduleKey=null,"function"==typeof a&&a("hide_finished"),e.visible=!0,e._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(e._scheduleKey,function(){e._scheduleKey=null,"function"==typeof a&&a("hold_finished_1"),e._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(e._scheduleKey,function(){e._scheduleKey=null,"function"==typeof a&&a("hold_finished_2"),o?e._moveTween=Laya.Tween.to(e,{x:e._originalPos.x,y:e._originalPos.y},s,null,Laya.Handler.create(null,function(){e._moveTween=null,e.x=e._originalPos.x,e.y=e._originalPos.y,"function"==typeof a&&a("move_finished")}),0,!1,!1):(e._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(e._scheduleKey,function(){e._scheduleKey=null,e.x=e._originalPos.x,e.y=e._originalPos.y,"function"==typeof a&&a("move_finished")},!1,s,1))},!1,n,1)},!1,i,1)},!1,t,1))},changeSkin:function(e,t){let i=this.seekNodeByName(e,"mesh");i||(i=e),"string"==typeof t&&t!==i._texturePath&&(i._texturePath=t,Laya.Texture2D.load(t,Laya.Handler.create(null,function(e){i.meshRenderer.sharedMaterial.albedoTexture=e})))},changeColor:function(e,t,i,n){let s=this.seekNodeByName(e,"mesh");s||(s=e),s.meshRenderer.sharedMaterial.albedoColor=new Laya.Vector4(t/255,i/255,n/255,1)},tweenMoveCamera:function(e,t,i,n,s,o,r){if(e){if(e._scheduleKey&&(G_Scheduler.unschedule(e._scheduleKey),e._scheduleKey=""),i){let t=n.position.clone();!0===o.posX&&(t.x=e.transform.localPosition.x),!0===o.posY&&(t.y=e.transform.localPosition.y),!0===o.posZ&&(t.z=e.transform.localPosition.z),e.transform.localPosition=t,e.transform.localRotationEuler=n.rotationEuler.clone()}else{let t=n.position.clone();!0===o.posX&&(t.x=e.transform.position.x),!0===o.posY&&(t.y=e.transform.position.y),!0===o.posZ&&(t.z=e.transform.position.z),e.transform.position=t,e.transform.rotationEuler=n.rotationEuler.clone()}e.fieldOfView=n.fieldOfView,e._scheduleKey="key_of_tween_move_camera",e._passedTime=0,e._totalTime=t,e._isLocal=i,e._start=n,e._end=s,e._disableEffects=o,e._cb=r,G_Scheduler.schedule(e._scheduleKey,function(){e._passedTime+=Laya.timer.delta;let t=e._passedTime/e._totalTime;if(t>1&&(t=1),e._isLocal){let i=this.getMidVec3(e._start.position,e._end.position,t);!0===e._disableEffects.posX&&(i.x=e.transform.localPosition.x),!0===e._disableEffects.posY&&(i.y=e.transform.localPosition.y),!0===e._disableEffects.posZ&&(i.z=e.transform.localPosition.z),e.transform.localPosition=i,e.transform.localRotationEuler=this.getMidVec3(e._start.rotationEuler,e._end.rotationEuler,t)}else{let i=this.getMidVec3(e._start.position,e._end.position,t);!0===e._disableEffects.posX&&(i.x=e.transform.position.x),!0===e._disableEffects.posY&&(i.y=e.transform.position.y),!0===e._disableEffects.posZ&&(i.z=e.transform.position.z),e.transform.position=i,e.transform.rotationEuler=this.getMidVec3(e._start.rotationEuler,e._end.rotationEuler,t)}if(e.fieldOfView=e._start.fieldOfView+(e._end.fieldOfView-e._start.fieldOfView)*t,1===t){G_Scheduler.unschedule(e._scheduleKey),e._scheduleKey="";let t=e._cb;e._cb=null,"function"==typeof t&&t()}}.bind(this),!0)}},getMidVec3:function(e,t,i){let n=new Laya.Vector3;return n.x=e.x+this._caculateMultiply(t.x-e.x,i),n.y=e.y+this._caculateMultiply(t.y-e.y,i),n.z=e.z+this._caculateMultiply(t.z-e.z,i),n},convertToOpenGLPt:function(e){let t=new Laya.Vector2(0,0);if(void 0===e.x||null===e.x||void 0===e.y||null===e.y)return t;let i=G_PlatHelper.getSysInfo();return t.x=e.x/Laya.stage.width*i.screenWidth,t.y=e.y/Laya.stage.height*i.screenHeight,t},convertToOpenGLSize:function(e){let t=new Laya.Size(0,0);if(void 0===e.width||null===e.width||void 0===e.height||null===e.height)return t;let i=G_PlatHelper.getSysInfo();return t._width=e.width/Laya.stage.width*i.screenWidth,t._height=e.height/Laya.stage.height*i.screenHeight,t},convertToWorldPt:function(e){let t=new Laya.Vector2(0,0);if(void 0===e.x||null===e.x||void 0===e.y||null===e.y)return t;let i=G_PlatHelper.getSysInfo();return t.x=e.x/i.screenWidth*Laya.stage.width,t.y=e.y/i.screenHeight*Laya.stage.height,t},convertToWorldSize:function(e){let t=new Laya.Size(0,0);if(void 0===e.width||null===e.width||void 0===e.height||null===e.height)return t;let i=G_PlatHelper.getSysInfo();return t._width=e.width/i.screenWidth*Laya.stage.width,t._width=e.height/i.screenHeight*Laya.stage.height,t},_caculateMultiply:function(e,t){return 1e4*e*(1e4*t)/1e8},_checkString:function(e){return"string"==typeof e&&""!==e}}),e}}}(),Ne=null,Le=function(e){let t=e.lastIndexOf("/")+1,i=e.lastIndexOf(".");return e.substring(t,i)},De=function(){var e;function init(){console.log("Init G_GameDB Instance...");var e=!1,t=[],i={},n=null;return{isLoaded:function(){return e},load(n){Ne=n,window.db=n,window.BaseConfigIDs=n.BaseConfigIDs,window.UIWordIDs=n.UIWordIDs,function(){if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().getFileSystemManager){let n=G_PlatHelper.getPlat().getFileSystemManager(),s=G_Dbs.length,o=0;for(const r in G_Dbs){let a=G_Dbs[r];n.readFile({filePath:a,success:n=>{let r=Le(a),l=n.data;if(""!=r&&l&&Ne[r]){let e=new Ne[r].decode(new Uint8Array(l));e&&(i[r]=e),o+=1}if(o===s){e=!0;for(let e=0;e<t.length;e++)t[e]();t=[]}}})}}else Laya.loader.create(G_Dbs,Laya.Handler.create(this,function(){for(let e=0;e<G_Dbs.length;e++){let t=G_Dbs[e].url,n=Le(t),s=Laya.loader.getRes(t);if(""!=n&&s&&Ne[n]){let e=new Ne[n].decode(new Uint8Array(s));e&&(i[n]=e)}}e=!0;for(let e=0;e<t.length;e++)t[e]();t=[]}),null,Laya.Loader.BUFFER)}()},registerAll:function(e){if(e){n=e;for(let e=0;e<n.length;e++){let t=n[e];if(t&&void 0!==t.key){if(!0===t.getFunc){this["get"+t.key+"ByID"]=function(e){return this.getConfigByID("TB"+t.key,e)}.bind(this)}if(!0===t.getAllFunc){this["getAll"+t.key+"s"]=function(){let e=this.getConfigs("TB"+t.key);return e?e.list:[]}.bind(this)}if(!0===t.getCountFunc){this["getAll"+t.key+"Count"]=function(){let e=this.getConfigs("TB"+t.key);return e?e.list.length:0}.bind(this)}}}}},onLoad:function(e){null!=e&&"function"==typeof e&&(this.isLoaded()?e():t[t.length]=e)},addDB:function(e,t){if(t){var n=this.getConfigs("TB"+e);if(void 0===n&&(i["TB"+e]=new Ne["TB"+e],n=i["TB"+e]),n)n.list.push(t)}},replaceDB:function(e,t,i){if(i){var n=this.getConfigs("TB"+e);if(n)for(var s=n.list,o=0;o<s.length;o++){var r=s[o];r&&r.id===t&&(s[o]=i)}}},printDB:function(e){if(G_PlatHelper.isWin()){var t=this.getConfigs("TB"+e);if(t){let e=t.constructor.encode(t).finish(),i=G_Utils.Uint8Array2HexString(e);console.log(i)}}},getConfigByID:function(e,t){var i=this.getConfigs(e);if(i)for(var n=i.list,s=0;s<n.length;s++){var o=n[s];if(o&&o.id===t)return o}return null},getConfigs:function(e){return null==e||""==e?null:this.isLoaded()?i[e]:null}}}return{getInstance:function(){return e||(e=init()),e}}}(),Be="storage_key_of_openID_And_SessID";class Me{constructor(){console.log("Init G_PlatHelper Instance..."),this._plat=null,this._platType="None",this._platDesc="未定义",this._sysInfo=null,this._recogniseSceneIDs=[],this._isModalOnShow=!1,this._isToastOnShow=!1,this._isLoadingOnShow=!1,this._hideAppTime=0,this._channelID=null}_checkLaunchOptions(e,t){let i=!1;for(let n=0;n<this._recogniseSceneIDs.length;++n){let s=this._recogniseSceneIDs[n];for(let n=0;n<s.sceneIDs.length;++n)if(e===s.sceneIDs[n]){i=!0,G_Event.dispatchEvent(s.eventName,t);break}}G_Event.dispatchEvent(G_EventName.EN_LAUNCH_APP_FROM_EVERYWHERE,e,t),i||G_Event.dispatchEvent(G_EventName.EN_LAUNCH_APP_FROM_UNKNOW,e,t)}init(){if(this._plat){var e=this;if(this._plat.getLaunchOptionsSync){let e=this._plat.getLaunchOptionsSync();this._checkLaunchOptions(e.scene,e.query)}this._plat.onShow&&this._plat.onShow(function(t){G_ServerInfo.reload(function(){0!==e._hideAppTime?(G_Event.dispatchEvent(G_EventName.EN_APP_AFTER_ONSHOW,G_ServerInfo.getServerTime()-e._hideAppTime),e._hideAppTime=0):G_Event.dispatchEvent(G_EventName.EN_APP_AFTER_ONSHOW),e._checkLaunchOptions(t.scene,t.query)})}),this._plat.onHide&&this._plat.onHide(function(t){e._hideAppTime=G_ServerInfo.getServerTime(),G_Event.dispatchEvent(G_EventName.EN_APP_BEFORE_ONHIDE)}),this._plat.onMemoryWarning&&this._plat.onMemoryWarning(function(){console.warn("On Memory Warning Received..."),G_Reportor&&G_Reportor.report(G_ReportEventName.REN_RECEIVED_MEMORY_WARNING)})}}getPlat(){return this._plat}getPlatType(){return this._platType}getPlatDesc(){return this._platDesc}restartApp(){this.exitApp()}exitApp(){this._plat&&this._plat.exitMiniProgram&&this._plat.exitMiniProgram({fail:function(){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})}getLaunchOptions(){return this._plat&&this._plat.getLaunchOptionsSync?this._plat.getLaunchOptionsSync():null}getChannelID(){if(null===this._channelID){this._channelID="";let e=this.getLaunchOptions();if(e)for(let t in e.query||{})if("chid"===t){this._channelID=e.query[t].toString();break}}return this._channelID}isSupportVibratePhone(){return!0}vibratePhone(e){G_PlayerInfo.isMuteEnable()&&(e?this._plat&&this._plat.vibrateLong&&this._plat.vibrateLong():this._plat&&this._plat.vibrateShort&&this._plat.vibrateShort())}installShortcut(e){}showMoreGamesModal(e,t,i){}startRecord(){}pauseRecord(){}resumeRecord(){}stopRecord(){}getSavedVideoPath(){return""}showModal(e,t,i,n,s){if(!this._isModalOnShow)if(this._plat&&this._plat.showModal&&this._checkString(t)){let o={content:t,showCancel:i,success:function(e){this._isModalOnShow=!1,"function"==typeof n&&("boolean"==typeof e?n(e):e.confirm?n(!0):(e.cancel,n(!1)))}.bind(this)};this._checkString(e)&&(o.title=e),s&&(s.cancelText&&(o.cancelText=s.cancelText),s.cancelColor&&(o.cancelColor=s.cancelColor),s.confirmText&&(o.confirmText=s.confirmText),s.confirmColor&&(o.confirmColor=s.confirmColor)),this._isModalOnShow=!0,this._plat.showModal(o)}else"function"==typeof n&&n(!1)}showToast(e,t){if(this._clearToastAndLoading(),this._plat&&this._plat.showToast&&this._checkString(e)){let i={title:e,duration:2e3,success:function(e){this._isToastOnShow=!0,G_Scheduler.schedule("Auto_Reset_Toast_State",function(){this._isToastOnShow=!1}.bind(this),!1,2e3,0)}.bind(this)};i.icon=t||"none",this._plat.showToast(i)}}hideToast(){this._isToastOnShow&&(this._isToastOnShow=!1,this._plat&&this._plat.hideToast&&this._plat.hideToast())}showRandomToast(e){if(e){let t=G_Utils.random(0,e.length-1);this.showToast(e[t])}}showLoading(e){if(this._clearToastAndLoading(),this._plat&&this._plat.showLoading){let t={title:e,mask:!0};this._isLoadingOnShow=!0,this._plat.showLoading(t)}else console.log("show loading: "+e)}hideLoading(){this._isLoadingOnShow&&(this._isLoadingOnShow=!1,this._plat&&this._plat.hideLoading&&this._plat.hideLoading())}_clearToastAndLoading(){this.hideToast(),this.hideLoading()}getSysInfo(){if(null===this._sysInfo)if(this._plat&&this._plat.getSystemInfoSync)try{this._sysInfo=G_Utils.deepClone(this._plat.getSystemInfoSync())}catch(e){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}else this._sysInfo={screenHeight:Math.round(Laya.stage.height),screenWidth:Math.round(Laya.stage.width),windowHeight:Math.round(Laya.stage.height),windowWidth:Math.round(Laya.stage.width),statusBarHeight:0,brand:"microsoft",platform:"window",system:"Window 7",SDKVersion:"0.0.0"};return this._sysInfo}getSDKVersion(){let e=this.getSysInfo();return e&&void 0!==e.SDKVersion?e.SDKVersion:"0.0.0"}isIPhoneX(){let e=this.getSysInfo();if(e){if(e.model&&-1!==e.model.indexOf("iPhone X"))return!0;if(e.SDKVersion>="1.1.0"&&Laya.Browser.onIOS&&e.screenHeight/e.screenWidth>2)return!0}return!1}openCustomerService(e,t){if(this._plat)if(this._plat.openCustomerServiceConversation){let i={sessionFrom:"",showMessageCard:!1,success:function(){"function"==typeof t&&t(!0)},fail:function(){"function"==typeof t&&t(!1)}};if(e){let e=G_Share.getShareInfo(G_ShareScene.SS_CUSTOMER_SERVER);if(e){let t=G_Share.getDoShareCfg(e);t&&(i.showMessageCard=!0,i.sendMessageTitle=t.title,i.sendMessagePath=e.path,i.sendMessageImg=t.img_url)}}this._plat.openCustomerServiceConversation(i)}else G_Event.dispatchEvent(G_EventName.EN_SDK_NOT_SUPPORT);else"function"==typeof t&&t(!1)}setStorage(e,t){if(this._checkString(e))if(this._plat&&this._plat.setStorageSync)try{this._plat.setStorageSync(e,t)}catch(e){console.error("PlatHelper.setStorage Fail, No Support This Kind Of Data: ",t)}else Laya.LocalStorage.setItem(e,t);else console.error("PlatHelper.setStorage Fail, Check Input...")}getStorage(e,t){if(this._checkString(e)){if(!this._plat||!this._plat.getStorageSync)return Laya.LocalStorage.getItem(e);try{return this._plat.getStorageSync(e)}catch(e){return void 0!==t?t:null}}else console.error("PlatHelper.getStorage Fail, Check Input...")}clearStorage(e){if(this._checkString(e))if(this._plat&&this._plat.removeStorageSync)try{this._plat.removeStorageSync(e)}catch(e){}else Laya.LocalStorage.removeItem(e);else console.error("PlatHelper.clearStorage Fail, Check Input...")}canLoginOnline(){return!1}canSaveOnline(){return!1}autoLogin(e){let t=function(t){"function"==typeof e&&e(t)};if(this.canLoginOnline()){let e=this.getStorage(Be);if(e&&""!==e){let i=e.split("&&");if(2==i.length){console.log("Checked Local OpenID And PHP SessID Is Still In Storage...");let e=function(){this.clearStorage(Be),t(null)}.bind(this);this._plat.checkSession({success:function(){console.log("Remote SessionKey Is Still Vailid...");let n=i[0],s=i[1];G_NetHelper.reqCheckLogin(s,function(i){i&&0===i.code?(console.log("Remote Login Status Is Still Vailid..."),console.log("current openID: {0}".format(n)),console.log("current sessID: {0}".format(s)),G_PlayerInfo.load(n,s,function(e){t(e)})):e()})},fail:function(){e()}})}else t(null)}else t(null)}else t(null)}login(e,t){this._login(function(i,n){console.log("current openID: {0}".format(i)),console.log("current sessID: {0}".format(n)),i&&n&&G_PlayerInfo.load(i,n,function(i){e&&(i.nickname=e.nickname||"",i.sex=e.sex||1,i.headUrl=e.headUrl||"",console.log("upload baseInfo to server..."),G_PlayerInfo.save()),"function"==typeof t&&t(i)})})}_login(e){if(this.canLoginOnline())this.__login(e);else{G_IsAlwaysNewPlayer&&(console.log("clear openid and sessid succ..."),this.clearStorage(Be));let t=this.getStorage(Be);if(t&&""!==t){let i=t.split("&&");if(2==i.length){console.log("Checked Local OpenID And PHP SessID Is Still In Storage...");let t=i[0],n=i[1];return void("function"==typeof e&&e(t,n))}}if("function"==typeof e){let t=G_OpenID;t&&""!==t||(t=this._generateOpenID());let i=G_SessID;i&&""!==i||(i=this._generateSessID()),this.setStorage(Be,t+"&&"+i),e(t,i)}}}__login(e){var t=this;this._plat.login({timeout:G_Const.C_TIMEOUT_OF_LOGIN,success:function(i){G_NetHelper.reqLogin(t._toGetLoginCode(i),function(i){if(console.log(i),i&&0===i.code){let n=i.data.openId,s=i.data.javaSessionID;t.setStorage(Be,n+"&&"+s),"function"==typeof e&&e(n,s)}else G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})},fail:function(){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})}_toGetLoginCode(e){return e.code}isWINPlatform(){return null===this._plat}isWXPlatform(){return!(void 0===window.wx||!Laya.MiniAdpter)}isQQPlatform(){return void 0!==window.qq}isOPPOPlatform(){return void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("oppo")>-1}isVIVOPlatform(){return void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("vivo")>-1}isOVPlatform(){return void 0!==window.qg}isTTPlatform(){return void 0!==window.tt}isQTTPlatform(){return void 0!==window.qttGame}isMZPlatform(){return void 0!==window.mz&&window.mz.getProvider().toLowerCase().indexOf("meizu")>-1}isNativePlatform(){return void 0!==window.conch}isAndroidNativePlatform(){return void 0!==window.conch&&"Conch-android"===window.conchConfig.getOS()}isIOSNativePlatform(){return void 0!==window.conch&&"Conch-ios"===window.conchConfig.getOS()}isHWPlatform(){return void 0!==window.hbs}_generateOpenID(){return G_Utils.generateString(32)}_generateSessID(){return G_Utils.generateString(26)}_checkString(e){return"string"==typeof e&&""!==e}}class Re extends Me{constructor(){super(),this._isUseLocalModal=!1,this._isUseLocalToast=!1,this._isUseLocalLoading=!1}init(){super.init(),this._isUseLocalModal&&(Re.prototype.showModal=function(e,t,i,n,s){if(!this._isModalOnShow)if(this._checkString(t)){let o={content:t,showCancel:i,cb:e=>{this._isModalOnShow=!1,"function"==typeof n&&n(e)}};this._checkString(e)&&(o.title=e),s&&(s.cancelText&&(o.cancelText=s.cancelText),s.cancelColor&&(o.cancelColor=s.cancelColor),s.confirmText&&(o.confirmText=s.confirmText),s.confirmColor&&(o.confirmColor=s.confirmColor)),G_Event.dispatchEvent(G_EventName.EN_SHOW_LOCAL_MODAL,o)}else"function"==typeof n&&n(!1)}),this._isUseLocalToast&&(Re.prototype.showToast=function(e,t){this._clearToastAndLoading(),console.log("show toast: "+e),G_Event.dispatchEvent(G_EventName.EN_SHOW_LOCAL_TIPS,e)},Re.prototype.hideToast=function(){G_Event.dispatchEvent(G_EventName.EN_HIDE_LOCAL_TIPS)}),this._isUseLocalToast&&(Re.prototype.showLoading=function(e){this._clearToastAndLoading(),console.log("show loading: "+e),G_Event.dispatchEvent(G_EventName.EN_SHOW_LOCAL_LOADING,e)},Re.prototype.hideLoading=function(){G_Event.dispatchEvent(G_EventName.EN_HIDE_LOCAL_LOADING)})}}class xe extends Re{constructor(){super(),this._platType="WIN",this._platDesc="Windows小游戏平台",this._isUseLocalModal=!0,this._isUseLocalToast=!0,this._isUseLocalToast=!0}canLoginOnline(){return!1}canSaveOnline(){return!1}isSupportVibratePhone(){return!1}}class Ue extends Re{constructor(){super(),this._plat=window.conch,this._platType="Native",this._platDesc="原生小游戏平台",this._bridge=null,this._isUseLocalModal=!0,this._isUseLocalToast=!0,this._isUseLocalToast=!0}init(){super.init(),this._bridge=PlatformClass.createClass(this._fixClassName("JSBridge"))}callStaticMethod(e,t){return this._bridge?void 0!==t?this._bridge.call(this._fixNativeFuncName(e),t):G_PlatHelper.isIOSNativePlatform()?this._bridge.call(this._fixNativeFuncName(e),""):this._bridge.call(this._fixNativeFuncName(e)):null}canLoginOnline(){return!1}canSaveOnline(){return!1}getSysInfo(){if(null===this._sysInfo){let e=this.callStaticMethod("getSysInfo");try{this._sysInfo=JSON.parse(e)}catch(e){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}}return this._sysInfo}vibratePhone(e){G_PlayerInfo.isMuteEnable()&&this.callStaticMethod("vibrate",400)}_fixNativeFuncName(e){return G_PlatHelper.isIOSNativePlatform()?e+":":e}_fixClassName(e){return G_PlatHelper.isAndroidNativePlatform()?"hiillo."+e:e}}class He extends Re{constructor(){super(),this._plat=window.wx,this._platType="WX",this._platDesc="微信小游戏平台",this._recogniseSceneIDs.push({sceneIDs:[1007],eventName:G_EventName.EN_LAUNCH_APP_FROM_SINGLE_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1008],eventName:G_EventName.EN_LAUNCH_APP_FROM_GROUP_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1007,1008],eventName:G_EventName.EN_LAUNCH_APP_FROM_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1089],eventName:G_EventName.EN_LAUNCH_APP_FROM_RECENT}),this._recogniseSceneIDs.push({sceneIDs:[1038],eventName:G_EventName.EN_LAUNCH_APP_BACK_FROM_OTHER_APP}),this._recogniseSceneIDs.push({sceneIDs:[1104],eventName:G_EventName.EN_LAUNCH_APP_FROM_FAVOURITE})}canLoginOnline(){return!0}canSaveOnline(){return!0}}class Ve extends Re{constructor(){super(),this._plat=window.qq,this._platType="QQ",this._platDesc="QQ小游戏平台",this._recogniseSceneIDs.push({sceneIDs:[1007],eventName:G_EventName.EN_LAUNCH_APP_FROM_SINGLE_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1008],eventName:G_EventName.EN_LAUNCH_APP_FROM_GROUP_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1007,1008],eventName:G_EventName.EN_LAUNCH_APP_FROM_SHARE}),this._recogniseSceneIDs.push({sceneIDs:[1038],eventName:G_EventName.EN_LAUNCH_APP_BACK_FROM_OTHER_APP})}canLoginOnline(){return!0}canSaveOnline(){return!0}}class Fe extends Re{constructor(){super(),this._plat=window.qg,this._platType="OPPO",this._platDesc="OPPO小游戏平台",this._isUseLocalToast=!0}exitApp(){this._plat&&this._plat.exitApplication&&this._plat.exitApplication({fail:function(){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})}getSDKVersion(){let e=this.getSysInfo();return e&&void 0!==e.platformVersion?e.platformVersion.toString():"0"}canLoginOnline(){return!1}canSaveOnline(){return!1}vibratePhone(e){G_PlayerInfo.isMuteEnable()&&(e?this._plat&&this._plat.vibrateLong&&this._plat.vibrateLong({success:null,fail:null,complete:null}):this._plat&&this._plat.vibrateShort&&this._plat.vibrateShort({}))}hideLoading(){this._isLoadingOnShow&&(this._isLoadingOnShow=!1,this._plat&&this._plat.hideLoading&&this._plat.hideLoading({success:null,fail:null,complete:null}))}installShortcut(e){this._plat.hasShortcutInstalled({success:t=>{0==t&&this._plat.installShortcut({success:()=>{"function"==typeof e&&e()}})}})}_toGetLoginCode(e){return e.data.token}}class We extends Re{constructor(){super(),this._plat=window.qg,this._platType="VIVO",this._platDesc="VIVO小游戏平台",this._isUseLocalToast=!0}exitApp(){this._plat&&this._plat.exitApplication&&this._plat.exitApplication()}getSDKVersion(){let e=this.getSysInfo();return e&&void 0!==e.platformVersion?e.platformVersion.toString():"0"}canLoginOnline(){return!1}canSaveOnline(){return!1}showModal(e,t,i,n,s){if(!this._isModalOnShow)if(this._plat&&this._plat.showDialog&&this._checkString(t)){let o={message:t,buttons:[{text:"确认"}],success:e=>{this._isModalOnShow=!1,"function"==typeof n&&(0===e.index?n(!0):1===e.index&&n(!1))},cancel:()=>{this._isModalOnShow=!1,"function"==typeof n&&n(!1)},fail:()=>{this._isModalOnShow=!1,"function"==typeof n&&n(!1)}};i&&o.buttons.push({text:"取消"}),s&&(this._checkString(e)&&(o.title=e),s.confirmText&&(o.buttons[0].text=s.confirmText),s.confirmColor&&(o.buttons[0].color=s.confirmColor),i&&(s.cancelText&&(o.buttons[1].text=s.cancelText),s.cancelColor&&(o.buttons[1].color=s.cancelColor))),this._isModalOnShow=!0,this._plat.showDialog(o)}else"function"==typeof n&&n(!1)}installShortcut(e){this._plat.hasShortcutInstalled({success:t=>{0==t&&this._plat.installShortcut({success:()=>{"function"==typeof e&&e()}})}})}setStorage(e,t){this._checkString(e)?Laya.LocalStorage.setItem(e,t):console.error("PlatHelper.setStorage Fail, Check Input...")}getStorage(e,t){if(this._checkString(e))return Laya.LocalStorage.getItem(e);console.error("PlatHelper.getStorage Fail, Check Input...")}clearStorage(e){this._checkString(e)?Laya.LocalStorage.removeItem(e):console.error("PlatHelper.clearStorage Fail, Check Input...")}}class je extends Re{constructor(){super(),this._plat=window.mz,this._platType="MeiZu",this._platDesc="MeiZu小游戏平台",this._isUseLocalModal=!0,this._isUseLocalToast=!0,"undefined"!=typeof qg&&Object.keys(qg).forEach(e=>{mz.hasOwnProperty(e)||(mz[e]=qg[e])})}exitApp(){this._plat&&this._plat.exitGame&&this._plat.exitGame()}getSDKVersion(){let e=this.getSysInfo();return e&&void 0!==e.platformVersion?e.platformVersion.toString():"0"}canLoginOnline(){return!1}canSaveOnline(){return!1}vibratePhone(e){G_PlayerInfo.isMuteEnable()&&(e?this._plat&&this._plat.vibrateLong&&this._plat.vibrateLong({success:null,fail:null,complete:null}):this._plat&&this._plat.vibrateShort&&this._plat.vibrateShort({success:null,fail:null,complete:null}))}setStorage(e,t){this._checkString(e)?Laya.LocalStorage.setItem(e,t):console.error("PlatHelper.setStorage Fail, Check Input...")}getStorage(e,t){if(this._checkString(e))return Laya.LocalStorage.getItem(e);console.error("PlatHelper.getStorage Fail, Check Input...")}clearStorage(e){this._checkString(e)?Laya.LocalStorage.removeItem(e):console.error("PlatHelper.clearStorage Fail, Check Input...")}}class qe extends Re{constructor(){super(),this._plat=window.tt,this._platType="TT",this._platDesc="TT小游戏平台",this._onNavigateSuccCb=null,this._onNavigateFailCb=null,this._onMoreGamesModalCloseCb=null,this._videoRecorder=null,this._shareVideoPath="",this._isUseLocalToast=!0}init(){super.init(),this._plat&&this._plat.onNavigateToMiniProgram&&this._plat.onNavigateToMiniProgram(e=>{0===e.errCode||1===e.errCode?(console.log("跳转成功",e),G_Reportor.report(G_ReportEventName.REN_NAVIGATE_SUCC_ON_TT_PLAT),"function"==typeof this._onNavigateSuccCb&&this._onNavigateSuccCb()):(console.error("跳转失败",e),"function"==typeof this._onNavigateFailCb&&this._onNavigateFailCb())}),this._plat&&this._plat.onMoreGamesModalClose&&this._plat.onMoreGamesModalClose(()=>{this._onNavigateSuccCb=null,this._onNavigateFailCb=null;let e=this._onMoreGamesModalCloseCb;this._onMoreGamesModalCloseCb=null,"function"==typeof e&&e()})}exitApp(){this._plat&&this._plat.exitApplication&&this._plat.exitApplication()}canLoginOnline(){return!1}canSaveOnline(){return!1}showMoreGamesModal(e,t,i){"ios"!==this.getSysInfo().platform?this._plat.showMoreGamesModal&&(this._plat.showMoreGamesModal({appLaunchOptions:[]}),this._onNavigateSuccCb=t,this._onNavigateFailCb=i,this._onMoreGamesModalCloseCb=e):this.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_NOT_SUPPORT_ON_IOS_PLATFORM).word)}startRecord(){this._videoRecorder||(this._videoRecorder=this._plat.getGameRecorderManager(),this._videoRecorder.onStart(e=>{console.log("start record and clear succ..."),this._shareVideoPath=""}),this._videoRecorder.onStop(e=>{console.log("stop record and save succ..."),this._videoRecorder.clipVideo({path:e.videoPath,timeRange:[25,0],success:e=>{this._shareVideoPath=e.videoPath},fail:e=>{console.error("clip video fail: ",e)}})})),this._videoRecorder&&this._videoRecorder.start({duration:60})}pauseRecord(){this._videoRecorder&&this._videoRecorder.pause()}resumeRecord(){this._videoRecorder&&this._videoRecorder.resume()}stopRecord(){this._videoRecorder&&this._videoRecorder.stop()}getSavedVideoPath(){return this._shareVideoPath}_convertStyle(e,t){let i={textColor:"#000000",textAlign:"center",fontSize:0,borderRadius:0,borderWidth:0,borderColor:"#000000"};t&&(void 0!==t.backgroundColor&&(i.backgroundColor=t.backgroundColor),void 0!==t.textColor&&(i.textColor=t.textColor),void 0!==t.textAlign&&(i.textAlign=t.textAlign),void 0!==t.fontSize&&(i.fontSize=t.fontSize),void 0!==t.borderRadius&&(i.borderRadius=t.borderRadius),void 0!==t.borderWidth&&(i.borderWidth=t.borderWidth),void 0!==t.borderColor&&(i.borderColor=t.borderColor));let n=e.localToGlobal(new Laya.Vector2(e.width/2,e.height/2),!0),s=n.x-e.width/2*e.scaleX,o=n.y-e.height/2*e.scaleY,r=G_UIHelper.convertToOpenGLPt({x:s,y:o}),a=G_UIHelper.convertToOpenGLSize({width:e.width*e.scaleX,height:e.height*e.scaleY});return i.left=r.x,i.top=r.y,i.width=a.width,i.height=a.height,i}}class Ke extends Re{constructor(){super(),this._plat=window.qttGame,this._platType="QTT",this._platDesc="趣头条小游戏平台",this._isUseLocalToast=!0,this._isUseLocalModal=!0,this._isUseLocalLoading=!0}canLoginOnline(){return!1}canSaveOnline(){return!0}autoLogin(e){"function"==typeof e&&e(null)}_login(e){this.__login(e)}__login(e){let t=this._getLocationParams(),i={app_id:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str,app_key:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_SECRET).str,platform:t.platform,ticket:t.ticket,time:Date.parse(new Date)/1e3},n=[];for(let e in i)n.push(e);n.sort();let s="";n.forEach(e=>{s+=e,s+=i[e]}),i.sign=hex_md5(s);let o="app_id="+i.app_id+"&platform="+i.platform+"&ticket="+i.ticket+"&time="+i.time+"&sign="+i.sign;G_HttpHelper.getJson("https://newidea4-gamecenter-backend.1sapp.com/x/open/user/ticket?"+o,(t,i)=>{console.log(i),t&&i&&i.data&&i.data.open_id?"function"==typeof e&&e(i.data.open_id,this._generateSessID()):G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})}isSupportVibratePhone(){return!1}_getLocationParams(){let e=window.location.search.substring();if(e){let t=(e=e.substring(e.indexOf("?")+1)).split("&"),i={};return t.forEach(e=>{let t=e.split("=");2===t.length&&(i[t[0]]=t[1])}),i}return{}}}class Xe extends Re{constructor(){super(),this._plat=window.hbs,this._platType="HuaWei",this._platDesc="HuaWei小游戏平台",this._isUseLocalModal=!0}exitApp(){this._plat&&this._plat.exitApplication&&this._plat.exitApplication({success:null,fail:null,complete:null})}getSDKVersion(){let e=this.getSysInfo();return e&&void 0!==e.version?e.version.toString():"0"}canLoginOnline(){return!1}canSaveOnline(){return!1}installShortcut(e){this._plat.hasInstalled({success:t=>{0==t&&this._plat.install({success:()=>{"function"==typeof e&&e()}})}})}}var Ye=null;Ye=void 0!==window.qq?Ve:void 0!==window.tt?qe:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("oppo")>-1?Fe:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("vivo")>-1?We:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("meizu")>-1?je:void 0!==window.qttGame?Ke:void 0!==window.hbs?Xe:void 0!==window.wx?He:void 0!==window.conch?Ue:xe;var ze=function(e){if("function"==typeof e){let t=Array.prototype.slice.call(arguments);return t.shift(),e.apply(null,t)}return null},Qe=function(e,t){if(e)if(G_PlatHelper.isWXPlatform())e.currentTime>0&&e.seek(0),ze(t,e);else{let i=()=>{e.offSeeked(i),ze(t,e)};e.currentTime>0?(e.onSeeked(i),e.seek(0)):ze(t,e)}};class Je{constructor(){this._isInited=!1,this._nativePlayLoopTimes={},this._playingContexts=[],this._backupContexts=[],this._bgAudioContext=null,this._bgMusicUrl="",this._bgMusicLoopState=!0,this._bgMusicRate=1,this._bgNativeAudio=null,this._isBgMusicStoped=!1,this._lastBgMusicPos=-1}init(){this._isInited||(this._isInited=!0,this._isSupportAudioContext()&&(this._bgAudioContext=this._getAudioContext(),this._bgAudioContext&&(this._bgAudioContext._bgSrc="")))}_isSupportAudioContext(){return!0}_isSupportNativeUrl(){return!0}_getAudioContext(){let e=null;return this._isSupportAudioContext()&&(this._backupContexts.length>0?(e=this._backupContexts[0],this._backupContexts.splice(0,1)):(e=G_PlatHelper.getPlat().createInnerAudioContext()).onError(e=>{console.log("play error:",e)})),this._playingContexts.push(e),e}_recycleAudioContext(e){let t=this._playingContexts.indexOf(e);-1!==t&&this._playingContexts.splice(t,1),this._backupContexts.push(e)}loadSound(e,t){if(this.init(),this._checkUrl(e))if(Laya.MiniFileMgr&&void 0!==Laya.MiniFileMgr.fakeObj[e]||e.indexOf("http")<0&&!this._isSupportNativeUrl())ze(t,null);else if(this._isSupportAudioContext()){let i=this._getAudioContext();if(i.src==e)return void Qe(i,t);i.src=e,i.loop=!1,i.autoplay=!1;let n=()=>{i.offCanplay(n),Qe(i,t)};i.onCanplay(n)}else ze(t,null);else ze(t,null)}loadMusic(e,t){if(this.init(),this._checkUrl(e))if(Laya.MiniFileMgr&&void 0!==Laya.MiniFileMgr.fakeObj[e]||e.indexOf("http")<0&&!this._isSupportNativeUrl())ze(t,null);else if(this._isSupportAudioContext()){if(this._bgAudioContext.src==e)return this._bgAudioContext._bgSrc=e,void Qe(this._bgAudioContext,t);this._bgAudioContext.src=e,this._bgAudioContext._bgSrc=e,this._bgAudioContext.autoplay=!1;let i=()=>{this._bgAudioContext.offCanplay(i),Qe(this._bgAudioContext,t)};this._bgAudioContext.onCanplay(i)}else ze(t,null);else ze(t,null)}playSound(e,t=1,i=1){if(this.init(),this._checkUrl(e))if(this.stopSound(e),t=t<=0?99999:t,Laya.MiniFileMgr&&void 0!==Laya.MiniFileMgr.fakeObj[e]||e.indexOf("http")<0&&!this._isSupportNativeUrl())this._playSoundByNative(e,t,i);else if(this._isSupportAudioContext()){let n=G_Utils.generateString(32);this.loadSound(e,s=>{if(s){let o=()=>{void 0!==this._nativePlayLoopTimes[e]&&this._nativePlayLoopTimes[e].identify===n&&this._nativePlayLoopTimes[e].loops>1?(this._nativePlayLoopTimes[e].loops-=1,s.seek(0),s.play()):(void 0!==this._nativePlayLoopTimes[e]&&delete this._nativePlayLoopTimes[e],s._endCb=null,s.offEnded(o),this._recycleAudioContext(s))};t>1&&(this._nativePlayLoopTimes[e]={loops:t,identify:n}),s.loop=!1,s.playbackRate=i,s.seek(0),s.play(),s._endCb=o,s.onEnded(o)}})}else this._playSoundByNative(e,t,i)}_playSoundByNative(e,t=1,i=1){let n=G_Utils.generateString(32);t>1&&(this._nativePlayLoopTimes[e]={loops:t,identify:n});let s=()=>{Laya.SoundManager.playbackRate=i,Laya.SoundManager.playSound(e,1,Laya.Handler.create(null,()=>{void 0!==this._nativePlayLoopTimes[e]&&this._nativePlayLoopTimes[e].identify===n&&(this._nativePlayLoopTimes[e].loops-=1,this._nativePlayLoopTimes[e].loops>0?s():delete this._nativePlayLoopTimes[e])}),0)};s()}stopSound(e){if(this._checkUrl(e))if(Laya.MiniFileMgr&&void 0!==Laya.MiniFileMgr.fakeObj[e]||e.indexOf("http")<0&&!this._isSupportNativeUrl())this._stopSoundByNative(e);else if(this._isSupportAudioContext()){void 0!==this._nativePlayLoopTimes[e]&&delete this._nativePlayLoopTimes[e];for(let t=0;t<this._playingContexts.length;t++){let i=this._playingContexts[t];i.src===e&&(i._endCb&&(i.offEnded(i._endCb),i._endCb=null),i.stop(),this._recycleAudioContext(i))}}else this._stopSoundByNative(e)}_stopSoundByNative(e){Laya.SoundManager.stopSound(e),void 0!==this._nativePlayLoopTimes[e]&&delete this._nativePlayLoopTimes[e]}stopAllSounds(){for(const e in this._nativePlayLoopTimes)this.stopSound(e)}playMusic(e,t,i=!0,n=1){this.init(),this._checkUrl(e)&&this.stopMusic(()=>{if(this._isBgMusicStoped=!1,Laya.MiniFileMgr&&void 0!==Laya.MiniFileMgr.fakeObj[e]||-1===e.indexOf("http")&&!this._isSupportNativeUrl())return this._playMusicByNative(e,i,n),void ze(t);this._isSupportAudioContext()?this.loadMusic(e,e=>{if(!this._isBgMusicStoped&&e){let s=()=>{e.offEnded(s),this._recycleAudioContext(e)};e.loop=i,e.playbackRate=n,e.volume=1,e.seek(0),e.play(),e.onEnded(s),ze(t)}}):(this._playMusicByNative(e,i,n),ze(t))})}_playMusicByNative(e,t,i=1){this._bgMusicUrl=e,this._bgMusicLoopState=t,this._bgMusicRate=i;let n=t?99999:1,s=()=>{Laya.SoundManager.playbackRate=i,this._bgNativeAudio=Laya.SoundManager.playMusic(e,1,Laya.Handler.create(null,()=>{n-=1,""!==this._bgMusicUrl&&n>0&&s()}),0),this._bgNativeAudio&&(this._bgNativeAudio.volume=1)};s()}stopMusic(e){if(this._isBgMusicStoped=!0,this._lastBgMusicPos=-1,""!==this._bgMusicUrl)this._stopMusicByNative(),ze(e);else if(this._bgAudioContext&&""!==this._bgAudioContext._bgSrc){let t=()=>{this._bgAudioContext&&this._bgAudioContext.offStop(t),ze(e)};0!==this._bgAudioContext.volume?(this._bgAudioContext.onStop(t),this._bgAudioContext.stop()):(this._bgAudioContext.stop(),ze(e)),this._bgAudioContext.volume=0,this._bgAudioContext._bgSrc=""}else ze(e)}_stopMusicByNative(){this._bgMusicUrl="",this._bgMusicLoopState=!0,this._bgMusicRate=1,this._bgNativeAudio&&(this._bgNativeAudio.stop(),this._bgNativeAudio.volume=0,this._bgNativeAudio=null)}resumeMusic(){""!==this._bgMusicUrl?this._bgNativeAudio?(this._bgNativeAudio.volume=1,this._bgNativeAudio.resume()):this.playMusic(this._bgMusicUrl,null,this._bgMusicLoopState,this._bgMusicRate):this._bgAudioContext&&""!==this._bgAudioContext._bgSrc&&(this._bgAudioContext.volume=1,-1!=this._lastBgMusicPos&&(this._bgAudioContext.seek(this._lastBgMusicPos),this._lastBgMusicPos=-1),this._bgAudioContext.play())}pauseMusic(){""!==this._bgMusicUrl?this._bgNativeAudio&&(this._bgNativeAudio.volume=0,this._bgNativeAudio.pause()):this._bgAudioContext&&(this._bgAudioContext.pause(),this._lastBgMusicPos=this.getCurMusicTime(),this._bgAudioContext.volume=0)}getCurMusicTime(){if(""!==this._bgMusicUrl){if(this._bgNativeAudio)return this._bgNativeAudio.position}else if(this._bgAudioContext)return this._bgAudioContext.currentTime;return 0}isMusicUrlValid(){return!!(""!==this._bgMusicUrl||this._bgAudioContext&&""!==this._bgAudioContext._bgSrc)}setMusicInfo(e,t=!0,i=1){this._bgAudioContext?(this._bgAudioContext._bgSrc=e,this._bgAudioContext.loop=t,this._bgAudioContext.playbackRate=i):(this._bgMusicUrl=e,this._bgMusicLoopState=t,this._bgMusicRate=i)}_checkUrl(e){return"string"==typeof e&&""!==e}}var Ze=function(e){if("function"==typeof e){let t=Array.prototype.slice.call(arguments);return t.shift(),e.apply(null,t)}return null};class $e extends Je{constructor(){super()}_isSupportAudioContext(){return!G_PlatHelper.isMZPlatform()&&!G_PlatHelper.isNativePlatform()&&G_PlatHelper.getPlat()}_isSupportNativeUrl(){return!0}playMusic(e,t,i=!0,n=1){super.playMusic(e,()=>{G_PlatHelper.getPlat()&&G_Adv.isWatchingVideoAdv()&&(this.pauseMusic(),this._bgNativeAudio._bgSrc=e),Ze(t)},i,n)}}class et extends Je{constructor(){super()}_isSupportAudioContext(){return!0}_isSupportNativeUrl(){return!1}playMusic(e,t,i=!0,n=1){super.playMusic(e,()=>{G_OVAdv.isWatchingVideoAdv()&&(this.pauseMusic(),this._bgNativeAudio._bgSrc=e),Ze(t)},i,n)}}class it extends Je{constructor(){super()}_isSupportAudioContext(){return!0}_isSupportNativeUrl(){return!1}_recycleAudioContext(e){let t=this._playingContexts.indexOf(e);-1!==t&&this._playingContexts.splice(t,1),e&&e.destroy()}playMusic(e,t,i=!0,n=1){super.playMusic(e,()=>{G_OVAdv.isWatchingVideoAdv()&&(this.pauseMusic(),this._bgNativeAudio._bgSrc=e),Ze(t)},i,n)}}var nt=null;nt=void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("oppo")>-1?et:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("vivo")>-1?it:$e;class st{constructor(){console.log("Init G_Share Instance..."),this._cfgs=null,this._initedCbs={},this._inited=!1,this._shareFailTips=null,this._sharingSceneInfo=null,this._minDurationBetweenShare=3e3}init(){this._inited||(this._inited=!0,G_Switch.getMinDurationBetweenShare(function(e){this._minDurationBetweenShare=e}.bind(this)),this.isSupportCallback()||G_Event.addEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,function(){G_Scheduler.schedule("Auto_Share_Callback",function(){if(console.log("Auto_Share_Callback"),this._sharingSceneInfo){let e=this._checkShareResult(this._sharingSceneInfo);"function"==typeof this._sharingSceneInfo.cb&&this._sharingSceneInfo.cb(e),!e&&this._sharingSceneInfo.showFailTips&&G_PlatHelper.showRandomToast(this._getShareFailTips()),this._sharingSceneInfo=null}}.bind(this),!1,10,0)}.bind(this)),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().showShareMenu&&this._getOnMenuShareFunc(e=>{(e=>{e&&(G_PlatHelper.getPlat().showShareMenu({withShareTicket:!0}),e(e=>{let t=this._getDoShareCfg(this._getShareInfo(G_ShareScene.SS_SYSTEM_MENU));return t?this._makeAndSaveShareInfo(G_ShareScene.SS_SYSTEM_MENU,null,t,null,!1,null):{}}))})(e)}))}addCfgs(e){if(e&&this._cfgs)for(let t in e)this._cfgs[t]=e[t]}inited(){for(let e in this._initedCbs)this._doShare(e,this._initedCbs[e].extendParams,this._initedCbs[e].customQueryObj,this._initedCbs[e].showFailTips,this._initedCbs[e].cb);this._initedCbs={}}isSupport(){return!1}isSupportCallback(){return!1}isReady(){return this._cfgs&&Object.keys(this._cfgs).length>0}isSharing(){return null!==this._sharingSceneInfo}share(e,t,i=!0,n=null){this._checkString(e)?this.isSupport()?this.isReady()?this._doShare(e,null,t,i,n):this._initedCbs[e]={customQueryObj:t,showFailTips:i,cb:n}:"function"==typeof n&&n(G_PlatHelper.isWINPlatform()):"function"==typeof n&&n(!1)}shareVideo(e,t,i,n=!0,s=null){}getShareInfo(e){return this._getShareInfo(e)}getDoShareCfg(e){return this._getDoShareCfg(e)}_getShareInfo(e){return this._cfgs&&this._cfgs[e]?this._cfgs[e]:null}_getDoShareCfg(e){if(!e||!e.cfgs)return null;let t=e.cfgs,i=0;for(let e=0;e<t.length;e++)void 0===t[e].weight&&(t[e].weight="10"),i+=parseInt(t[e].weight,10);let n=0;for(;0===n;)n=G_Utils.random(i);let s=0,o=0;for(let e=0;e<t.length;e++)if(s=o,o+=parseInt(t[e].weight,10),n>=s&&n<=o)return t[e];return null}_doShare(e,t,i,n,s){let o=this._getDoShareCfg(this._getShareInfo(e));if(o&&this.isSupport()){let r=this._getShareAppFunc();r&&r(this._makeAndSaveShareInfo(e,t,o,i,n,s))}else"function"==typeof s&&s(!1)}_makeAndSaveShareInfo(e,t,i,n,s,o){if(this._sharingSceneInfo=null,i){this._sharingSceneInfo={scene:e,customQueryObj:n,showFailTips:s,startTime:(new Date).getTime(),cb:o};let a="scene={0}&tag={1}".format(e,i.tag);if(n)for(let e in n)a+="&"+e+"="+n[e];var r=this;return{query:a,success:function(){if(console.log("share success!!!"),r._sharingSceneInfo){let e=r._checkShareResult(r._sharingSceneInfo);!e&&r._sharingSceneInfo.showFailTips&&G_PlatHelper.showRandomToast(r._getShareFailTips()),"function"==typeof r._sharingSceneInfo.cb&&r._sharingSceneInfo.cb(e),r._sharingSceneInfo=null}},fail:function(e){console.log("share fail!!!"),r._sharingSceneInfo&&(r._sharingSceneInfo.showFailTips&&G_PlatHelper.showRandomToast(r._getShareFailTips(t)),"function"==typeof r._sharingSceneInfo.cb&&r._sharingSceneInfo.cb(!1),r._sharingSceneInfo=null)}}}return{}}_checkShareResult(e){return!!(e&&(new Date).getTime()-e.startTime>=this._minDurationBetweenShare)&&(e.scene!==G_ShareScene.SS_SYSTEM_MENU&&e.scene!==G_ShareScene.SS_CUSTOMER_SERVER&&G_PlayerInfo.plusTodayShareTimes(),!0)}_getShareFailTips(){return this._shareFailTips||(this._shareFailTips=[],this._shareFailTips.push(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SHARE_FAIL_TIPS_ONE).word),this._shareFailTips.push(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SHARE_FAIL_TIPS_TWO).word),this._shareFailTips.push(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SHARE_FAIL_TIPS_THREE).word)),this._shareFailTips}_getOnMenuShareFunc(e){"function"==typeof e&&e(null)}_getShareAppFunc(){return null}_checkString(e){return"string"==typeof e&&""!==e}}class ot extends st{constructor(){super()}isSupport(){return!1}}class rt extends st{constructor(){super(),this._cfgs={}}isSupport(){return!0}isSupportCallback(){return!1}_makeAndSaveShareInfo(e,t,i,n,s,o){let r=super._makeAndSaveShareInfo(e,t,i,n,s,o);return i&&(r.title=i.title,r.imageUrl=i.img_url),r}_getOnMenuShareFunc(e){"function"==typeof e&&(G_PlatHelper.getPlat()&&this.isSupport()?G_SDKCfg.isAldReportEnabled(t=>{e(t?G_PlatHelper.getPlat().aldOnShareAppMessage:G_PlatHelper.getPlat().onShareAppMessage)}):e(null))}_getShareAppFunc(){return G_PlatHelper.getPlat()&&this.isSupport()?G_SDKCfg.isAldReportEnabledSync()?G_PlatHelper.getPlat().aldShareAppMessage:G_PlatHelper.getPlat().shareAppMessage:null}}class at extends st{constructor(){super(),this._cfgs={}}isSupport(){return!0}isSupportCallback(){return!0}_makeAndSaveShareInfo(e,t,i,n,s,o){let r=super._makeAndSaveShareInfo(e,t,i,n,s,o);return i&&(r.title=i.title,r.imageUrl=i.img_url),r}_getOnMenuShareFunc(e){"function"==typeof e&&(G_PlatHelper.getPlat()&&this.isSupport()?G_SDKCfg.isAldReportEnabled(t=>{e(t?G_PlatHelper.getPlat().aldOnShareAppMessage:G_PlatHelper.getPlat().onShareAppMessage)}):e(null))}_getShareAppFunc(){return G_PlatHelper.getPlat()&&this.isSupport()?G_SDKCfg.isAldReportEnabledSync()?G_PlatHelper.getPlat().aldShareAppMessage:G_PlatHelper.getPlat().shareAppMessage:null}}class lt extends st{constructor(){super(),this._cfgs={}}isSupport(){return!0}isSupportCallback(){return!0}shareVideo(e,t,i,n=!0,s=null){this._checkString(e)&&this._checkString(t)?this.isSupport()?this.isReady()?this._doShare(e,{videoPath:t},i,n,s):this._initedCbs[e]={extendParams:{videoPath:t},customQueryObj:i,showFailTips:n,cb:s}:"function"==typeof s&&s(!0):"function"==typeof s&&s(!1)}_makeAndSaveShareInfo(e,t,i,n,s,o){let r=super._makeAndSaveShareInfo(e,t,i,n,s,o);r.success=(e=>{if(console.log("share success!!!"),this._sharingSceneInfo){let t=this._checkShareResult(this._sharingSceneInfo);!t&&this._sharingSceneInfo.showFailTips&&G_PlatHelper.showRandomToast(this._getShareFailTips()),"function"==typeof this._sharingSceneInfo.cb&&this._sharingSceneInfo.cb(t,e.videoId),this._sharingSceneInfo=null}}),i&&(r.templateId=i.template_id),t&&void 0!==t.videoPath&&(r.channel="video",r.extra={videoPath:t.videoPath,withVideoId:!0},void 0!==t.videoTopics&&(r.extra.videoTopics=t.videoTopics));let a="",l=G_PlatHelper.getPlat().getLaunchOptionsSync();if(l&&l.query)for(let e in l.query){let t=l.query[e].toString();"sc"===e&&(t=(parseInt(t)+1).toString()),a+=""===a?e+"="+t:"&"+e+"="+t}return""!==a&&(r.query=a),r}_getOnMenuShareFunc(e){"function"==typeof e&&(G_PlatHelper.getPlat()&&this.isSupport()?e(G_PlatHelper.getPlat().onShareAppMessage):e(null))}_getShareAppFunc(){return G_PlatHelper.getPlat()&&this.isSupport()?G_PlatHelper.getPlat().shareAppMessage:null}_getShareFailTips(e){return e&&void 0!==e.videoPath?(this._shareFailTips||(this._shareFailTips=[],this._shareFailTips.push(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SHARE_VIDEO_FAIL_TIPS_ONE).word)),this._shareFailTips):super._makeAndSaveShareInfo()}}var ht=null;ht=void 0!==window.qq?at:void 0!==window.tt?lt:void 0!==window.wx?rt:ot;var ct=3,dt=3;class ut{constructor(){console.log("Init G_Adv Instance..."),this._bannerAdUnitIDIndex=-1,this._bannerAdUnitIDs=[],this._bannerAdObj=null,this._preloadBannerAdObj=null,this._preloadingBannerAd=!1,this._failCountOfCreateBanner=0,this._passedTimeFromLastRefresh=0,this._bannerOnShow=!1,this._videoAdUnitIDIndex=-1,this._videoAdUnitIDs=[],this._videoAdIns=null,this._interstitialAdUnitIDIndex=-1,this._interstitialAdUnitIDs=[],this._interstitialAdObj=null,this._preloadInterstitialAdObj=null,this._preloadingInterstitialAd=!1,this._failCountOfCreateInterstitial=0,this._lastTimeOfShowInterstitialAd=0,this._gapOfEachInterstitialAd=0}_checkString(e){return"string"==typeof e&&""!==e&&"none"!==e}_registerAdUnitIDs(e,t,i){let n=!0;Array.isArray(e)&&e.length>0?(G_Utils.shuffleArray(e),e.forEach(e=>{this._checkString(e)?this._bannerAdUnitIDs.push(e):(n=!1,console.error("Register Banner Ad Unit ID Fail, Check Input!"))})):n=!1,Array.isArray(t)&&1===t.length?t.forEach(e=>{this._checkString(e)?this._videoAdUnitIDs.push(e):(n=!1,console.error("Register Video Ad Unit ID Fail, Check Input!"))}):n=!1,Array.isArray(i)?(G_Utils.shuffleArray(i),i.forEach(e=>{this._checkString(e)?this._interstitialAdUnitIDs.push(e):(n=!1,console.error("Register Interstitial Ad Unit ID Fail, Check Input!"))})):n=!1,n?console.log("Register All Ad Unit IDs Succ!"):G_PlatHelper.isOVPlatform()||console.error("Register Ad Unit IDs Fail!")}init(e){this._registerAdUnitIDs([],[],[]),"function"==typeof e&&e()}isSupportBannerAd(){return this._bannerAdUnitIDs.length>0}_stopSupportBannerAd(){console.log("stop support banner ad..."),this._bannerAdUnitIDs=[],G_Event.dispatchEvent(G_EventName.EN_BANNER_NOT_SUPPORT_RIGHT_NOW)}isSupportVideoAd(){return this._videoAdUnitIDs.length>0}_stopSupportVideoAd(){console.log("stop support video ad..."),this._videoAdUnitIDs=[],G_Event.dispatchEvent(G_EventName.EN_VIDEO_NOT_SUPPORT_RIGHT_NOW)}isSupportInterstitialAd(){return this._interstitialAdUnitIDs.length>0}_stopSupportInterstitialAd(){console.log("stop support interstitial ad..."),this._interstitialAdUnitIDs=[],G_Event.dispatchEvent(G_EventName.EN_INTERSTITIAL_NOT_SUPPORT_RIGHT_NOW)}preload(){this._preloadBannerAd(),this._preloadVideoAd(),this._preloadInterstitialAd(),this._lastTimeOfShowInterstitialAd=G_ServerInfo.getServerTime()}createAutoRefreshBannerAdv(e,t,i,n){let s=function(){this.createBannerAdv(t,function(){G_Scheduler.unschedule("Schedule_Of_Auto_Refresh_Banner"),this._handlerFun(i)}.bind(this),n)}.bind(this),o=function(){this._passedTimeFromLastRefresh+=1,this._passedTimeFromLastRefresh>=e&&!this.isWatchingVideoAdv()&&this._bannerOnShow&&(this._passedTimeFromLastRefresh=0,s())}.bind(this);G_Scheduler.schedule("Schedule_Of_Auto_Refresh_Banner",function(){o()}.bind(this),!1,1e3),this._passedTimeFromLastRefresh=0,s()}destoryAutoRefreshBannerAdv(){this.destroyBannerAdv(),G_Scheduler.unschedule("Schedule_Of_Auto_Refresh_Banner")}createBannerAdv(e,t,i){if(!this.isSupportBannerAd())return G_Event.dispatchEvent(G_EventName.EN_BANNER_NOT_SUPPORT_RIGHT_NOW),this._handlerFun(t),null;if(this._failCountOfCreateBanner=0,this._bannerAdObj){let e=this._bannerAdObj;G_Scheduler.schedule("Destroy_Old_Banner",()=>{console.log("destory old banner..."),this._isSupportDelayDestroyBanner()&&e&&e.destroy()},!1,60,0),this._bannerAdObj=null}return this._bannerAdObj=this._getBannerAdObj(e,t,function(e){this._bannerOnShow||this._hideBannerAdv(),e?this._handlerFun(i):this._handlerFun(t)}.bind(this)),this._bannerOnShow&&this._showBannerAdv(),this._bannerAdObj}_getBannerAdObj(e,t,i){let n=null,s=function(){this._preloadingBannerAd=!0,G_Scheduler.schedule("Delay_Preload_Banner",function(){console.log("Delay preload next banner..."),this._preloadBannerAd(()=>{this._preloadingBannerAd=!1,console.log("Delay preload create banner success")},()=>{this._preloadingBannerAd=!1,console.log("Delay preload create banner fail")})}.bind(this),!1,30,0)}.bind(this);if(null!=this._preloadBannerAdObj?(n=this._preloadBannerAdObj,this._preloadBannerAdObj=null,s()):this._preloadingBannerAd||s(),n){if(e){if(console.log("use preloaded banner obj..."),this._isSupportResizeTwice()){let t=this._convertToPlatformStyle(e);n.style.left=t.left,n.style.top=t.top,n.style.width=t.width}i(n)}}else{let s=this._convertToPlatformStyle(e);n=this._doCreateBannerAdObj(s,i,t),G_PlatHelper.isQQPlatform()&&(n.style.left=s.left,n.style.top=s.top,n.style.width=s.width)}return n}_preloadBannerAd(e,t){this.isSupportBannerAd()&&this._isSupportPreloadBanner()?null===this._preloadBannerAdObj?this._doCreateBannerAdObj(null,t=>{console.log("preload banner finished..."),this._preloadBannerAdObj=t,"function"==typeof e&&e(t)},t):"function"==typeof e&&e(this._preloadBannerAdObj):this._handlerFun(t)}_doCreateBannerAdObj(e,t,i){e||(e=this._getDefaultPlatformStyle()),this._bannerAdUnitIDIndex+=1,this._bannerAdUnitIDIndex>=this._bannerAdUnitIDs.length&&(this._bannerAdUnitIDIndex=0);let n=G_PlatHelper.getPlat().createBannerAd({adUnitId:this._bannerAdUnitIDs[this._bannerAdUnitIDIndex],style:e});"function"==typeof t&&(n.loadCb=t),"function"==typeof i&&(n.errCb=i);var s=this;return n.onLoad(()=>{let e=n.loadCb;n.loadCb=null,e&&e(n)}),n.onError(o=>{console.log("show banner fail...");let r=null;n&&(s._bannerAdObj===n&&(s._bannerAdObj=null),r=n.errCb,G_PlatHelper.isTTPlatform()&&n.destroy(),n=null),s._failCountOfCreateBanner+=1,s._failCountOfCreateBanner>=ct?r&&r():G_Scheduler.schedule("Delay_Recreate_Banner",function(){console.log("retry preload banner..."),s._doCreateBannerAdObj(e,t,i)},!1,200,0)}),n}showBannerAdv(){this._bannerOnShow||(this._bannerOnShow=!0,this._showBannerAdv())}_showBannerAdv(){this._bannerAdObj&&this._bannerAdObj.show()}hideBannerAdv(){this._bannerOnShow&&(this._bannerOnShow=!1,this._hideBannerAdv())}_hideBannerAdv(){this._bannerAdObj&&this._bannerAdObj.hide()}destroyBannerAdv(){this._bannerAdObj&&(this._bannerAdObj.destroy(),this._bannerAdObj=null)}createVideoAdv(e,t){if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().createRewardedVideoAd){if(!this.isSupportVideoAd())return G_Event.dispatchEvent(G_EventName.EN_VIDEO_NOT_SUPPORT_RIGHT_NOW),void("function"==typeof t&&t());if(void 0===t&&(t=null),null!==this._videoAdIns){var i=this;"function"==typeof e&&(this._videoAdIns.closeCb=e),"function"==typeof t&&(this._videoAdIns.errCb=t),this._videoAdIns.show().catch(()=>{this._videoAdIns.load().then(()=>this._videoAdIns.show()).catch(e=>{if(console.log("show videoAd fail..."),i._stopSupportVideoAd(),this._videoAdIns){let e=this._videoAdIns.errCb;e&&e(),this._videoAdIns=null}})})}else this._stopSupportVideoAd(),"function"==typeof t&&t()}else"function"==typeof e&&e(!0)}_preloadVideoAd(e){this.isSupportVideoAd()?null===this._videoAdIns&&(this._videoAdIns=this._doCreateVideoAdObj(function(){console.log("preload video finished...")})):this._handlerFun(e)}_doCreateVideoAdObj(e){if(this._videoAdIns)return this._videoAdIns;if(this._videoAdUnitIDIndex+=1,this._videoAdUnitIDIndex>=this._videoAdUnitIDs.length&&(this._videoAdUnitIDIndex=0),this._videoAdIns=null,G_PlatHelper.getPlat().createRewardedVideoAd&&(this._videoAdIns=G_PlatHelper.getPlat().createRewardedVideoAd({adUnitId:this._videoAdUnitIDs[this._videoAdUnitIDIndex]})),this._videoAdIns){var t=this;this._videoAdIns.onLoad(function(){"function"==typeof e&&e()}),this._videoAdIns.onClose(function(e){if(t._videoAdIns){let i=t._videoAdIns.closeCb;t._videoAdIns.errCb;t._videoAdIns.closeCb=null,t._videoAdIns.errCb=null,!e||e.isEnded?i&&i(!0):i&&i(!1),t._preloadVideoAd()}}),this._videoAdIns.onError(function(e){if(console.log("show videoAd fail...",e),t._stopSupportVideoAd(),t._videoAdIns){let e=t._videoAdIns.errCb;e&&e(),t._videoAdIns=null}})}return this._videoAdIns}isWatchingVideoAdv(){return!(!this._videoAdIns||!this._videoAdIns.closeCb)}createInterstitialAdv(e,t,i){if(!this.isSupportInterstitialAd())return G_Event.dispatchEvent(G_EventName.EN_INTERSTITIAL_NOT_SUPPORT_RIGHT_NOW),void this._handlerFun(i);if(this._canShowInterstitialNow()){if(this._failCountOfCreateInterstitial=0,this._interstitialAdObj){let e=this._interstitialAdObj;this._isSupportDelayDestroyInterstitial()&&G_Scheduler.schedule("Destroy_old_Interstitial",function(){console.log("destory old interstitial..."),e&&e.destroy()}.bind(this),!1,60,0),this._interstitialAdObj=null}this._getInterstitialAdObj(e,function(e){e?this._handlerFun(t):this._handlerFun(i)}.bind(this),i)}else this._handlerFun(i)}_getInterstitialAdObj(e,t,i){let n=null,s=function(){this._preloadingInterstitialAd=!0,G_Scheduler.schedule("Delay_Preload_Interstitial",function(){console.log("Delay preload next interstitial..."),this._preloadInterstitialAd(()=>{this._preloadingInterstitialAd=!1,console.log("Delay preload create interstitial success")},()=>{this._preloadingInterstitialAd=!1,console.log("Delay preload create interstitial fail")})}.bind(this),!1,30,0)}.bind(this);null!=this._preloadInterstitialAdObj?(n=this._preloadInterstitialAdObj,this._preloadInterstitialAdObj=null,s()):this._preloadingInterstitialAd||s(),n?("function"==typeof e&&(n.closeCb=e),this._interstitialAdObj=n,t(n)):this._interstitialAdObj=this._doCreateInterstitialAdObj(e,t,i)}_preloadInterstitialAd(e,t){this.isSupportInterstitialAd()&&this._isSupportPreloadInterstitial()?null===this._preloadInterstitialAdObj?this._doCreateInterstitialAdObj(null,t=>{console.log("preload interstitial finished..."),this._preloadInterstitialAdObj=t,"function"==typeof e&&e(t)},t):"function"==typeof e&&e(this._preloadInterstitialAdObj):this._handlerFun(t)}_doCreateInterstitialAdObj(e,t,i){if(!G_PlatHelper.getPlat().createInterstitialAd)return this._handlerFun(i),void this._stopSupportInterstitialAd();this._interstitialAdUnitIDIndex+=1,this._interstitialAdUnitIDIndex>=this._interstitialAdUnitIDs.length&&(this._interstitialAdUnitIDIndex=0);let n=G_PlatHelper.getPlat().createInterstitialAd({adUnitId:this._interstitialAdUnitIDs[this._interstitialAdUnitIDIndex]});"function"==typeof e&&(n.closeCb=e),"function"==typeof t&&(n.loadCb=t),"function"==typeof i&&(n.errCb=i);var s=this;let o=()=>{n.offClose(o),this._lastTimeOfShowInterstitialAd=G_ServerInfo.getServerTime();let e=n.closeCb;n.closeCb=void 0,e&&e()};n.onClose(o);let r=()=>{n.offLoad(r);let e=n.loadCb;n.loadCb=void 0,e&&e(n)};n.onLoad(r);let a=o=>{n.offError(a),console.log("show interstitial fail...",o);let r=null;n&&(r=n.errCb,n=null),s._failCountOfCreateInterstitial+=1,s._failCountOfCreateInterstitial>=dt?r&&r():G_Scheduler.schedule("Delay_Recreate_Interstitial",function(){console.log("retry preload interstitial..."),s._doCreateInterstitialAdObj(e,t,i)},!1,200,0)};return n.onError(a),n}showInterstitialAdv(){this._interstitialAdObj&&this._interstitialAdObj.show().catch(e=>{console.error(e)})}createBoxAdv(e){return console.error("Not Support On Current Platform..."),"function"==typeof e&&e(),null}addColorSign(){console.error("Not Support On Current Platform...")}createBlockAd(e,t=1,i="landscape",n,s){return console.error("Not Support On Current Platform..."),"function"==typeof s&&s(),null}destoryBlockAd(e){console.error("Not Support On Current Platform...")}destroyAllBlockAds(){console.error("Not Support On Current Platform...")}_convertToPlatformStyle(e){let t=this._getDefaultPlatformStyle();if(e){let i=G_PlatHelper.getSysInfo();this._fixedStyle(e),t.width=e.width;let n=this._caculateRealWidth(e.width);"number"==typeof e.centerX?t.left=(i.screenWidth-n)/2+e.centerX:"number"==typeof e.left?t.left=e.left:"number"==typeof e.right&&(t.left=i.screenWidth-n-e.right);let s=this.getBannerOriginalSize().height/this.getBannerOriginalSize().width*n,o=e.bottom;G_PlatHelper.isIPhoneX()&&"number"==typeof o&&o<this.getMiniGapFromBottom()&&(o=this.getMiniGapFromBottom()),"number"==typeof e.centerY?t.top=(i.screenHeight-s)/2+e.centerY:"number"==typeof e.top?t.top=e.top:"number"==typeof o&&(t.top=i.screenHeight-s-o)}return t}_getDefaultPlatformStyle(){return{}}_caculateRealWidth(e){return e}_fixedStyle(e){}getBannerOriginalSize(){return{width:960,height:334}}getMiniGapFromBottom(){return 0}_isSupportResizeTwice(){return!0}_isSupportPreloadBanner(){return!0}_isSupportDelayDestroyBanner(){return!0}_canShowInterstitialNow(){if(G_ServerInfo.getServerTime()-this._lastTimeOfShowInterstitialAd>this._gapOfEachInterstitialAd)return!0;{let e=this._gapOfEachInterstitialAd/1e3-Math.floor((G_ServerInfo.getServerTime()-this._lastTimeOfShowInterstitialAd)/1e3);return console.warn("插屏广告还未准备好，请{0}秒后重新尝试".format(e.toString())),!1}}_isSupportPreloadInterstitial(){return!0}_isSupportDelayDestroyInterstitial(){return!0}_handlerFun(e){"function"==typeof e&&e()}}var pt="storage_key_of_color_sign_info",_t=3e4;void 0!==window.tt&&(_t=6e4);class gt extends ut{constructor(){super()}}class ft extends ut{constructor(){super(),this._gapOfEachInterstitialAd=_t}_registerAdUnitIDs(e,t,i){0===e.length&&(e=G_advConfigs.bannerAdUnitIDs),0===t.length&&(t=G_advConfigs.videoAdUnitIDs),0===i.length&&(i=G_advConfigs.interstitialAdUnitIDs),super._registerAdUnitIDs(e,t,i)}_doCreateBannerAdObj(e,t,i){return super._doCreateBannerAdObj(e,t,i)}_getDefaultPlatformStyle(){return{left:0,top:0,width:300}}getBannerOriginalSize(){return{width:960,height:334}}getMiniGapFromBottom(){return 40}_fixedStyle(e){e&&("number"!=typeof e.width&&(e.width=300),e.width<300&&(e.width=300))}}class mt extends ut{constructor(){super(),this._boxAdObj=null,this._boxAdUnitIDIndex=-1,this._isShowColorSignBefore=!1,this._blockAdObj=null,this._blockAdUnitIDIndex=-1,this._onShowBlockAdObjs=[]}createBoxAdv(e){if(!G_BoxAdUnitIDs)return null;if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().createAppBox){this._boxAdObj&&(console.log("destory old unclosed box..."),this._boxAdObj.destroy(),this._boxAdObj=null),this._boxAdUnitIDIndex+=1,this._boxAdUnitIDIndex>=G_BoxAdUnitIDs.length&&(this._boxAdUnitIDIndex=0);let t=G_PlatHelper.getPlat().createAppBox({adUnitId:G_BoxAdUnitIDs[this._boxAdUnitIDIndex]});if(t){"function"==typeof e&&(t.closeCb=e);let i=t.load();i.then&&i.then(()=>{t.show()}),t.onClose&&t.onClose(()=>{let e=t.closeCb;t.closeCb=null,this._boxAdObj.destroy(),this._boxAdObj=null,e&&e()}),this._boxAdObj=t}}return this._boxAdObj}addColorSign(){G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().addColorSign&&!this._isShowColorSignBefore&&(this._isShowColorSignBefore=!0,G_PlatHelper.getPlat().addColorSign())}createBlockAd(e,t=1,i="landscape",n,s){if(!G_BlockAdUnitIDs)return null;if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().createBlockAd){this._blockAdUnitIDIndex+=1,this._blockAdUnitIDIndex>=G_BlockAdUnitIDs.length&&(this._blockAdUnitIDIndex=0);let o=G_PlatHelper.getPlat().createBlockAd({adUnitId:G_BlockAdUnitIDs[this._blockAdUnitIDIndex],style:{left:20,top:32},size:t,orientation:i});if(o){console.log("create a block ad..."),o.canOnShow=!0,"function"==typeof n&&(o.loadCb=n),"function"==typeof s&&(o.errCb=s);let t=()=>{console.log("blockAdObj.onLoad..."),o.offLoad(t);let e=o.loadCb;o.loadCb=null,e&&e(),o.canOnShow?(this._onShowBlockAdObjs.push(o),o.show()):this.destoryBlockAd(o)},i=t=>{let i=G_PlatHelper.getPlat().getSystemInfoSync();e&&"left"===e.layout&&"number"==typeof e.top?(o.style.left=20,o.style.top=e.top/Laya.stage.height*i.screenHeight,o.style.top<32&&(o.style.top=32)):e&&"leftCenter"===e.layout?(o.style.left=20,o.style.top=(i.screenHeight-t.height)/2):e&&"right"===e.layout&&"number"==typeof e.top?(o.style.left=i.screenWidth-t.width,o.style.top=e.top/Laya.stage.height*i.screenHeight,o.style.top<32&&(o.style.top=32)):e&&"rightCenter"===e.layout?(o.style.left=i.screenWidth-t.width,o.style.top=(i.screenHeight-t.height)/2):e&&"top"===e.layout?(o.style.left=(i.screenWidth-t.width)/2,o.style.top=32):e&&"bottom"===e.layout?(o.style.left=(i.screenWidth-t.width)/2,o.style.top=i.screenHeight-t.height):e&&"center"===e.layout?(o.style.left=(i.screenWidth-t.width)/2,o.style.top=(i.screenHeight-t.height)/2,"number"==typeof e.hor&&(o.style.left+=e.hor),"number"==typeof e.vel&&(o.style.top+=e.vel)):console.error("align error, check input...",e)},r=e=>{console.error("createBlockAd fail: ",e),o.canOnShow=!1,blockAd.offLoad(t),blockAd.offResize(i),blockAd.offError(r);let n=o.errCb;o._errCb=null,n&&n()};return o.onLoad(t),o.onResize(i),o.onError(r),o}}return null}destoryBlockAd(e){if(e){let t=this._onShowBlockAdObjs.indexOf(e);t>=0?(this._onShowBlockAdObjs.splice(t,1),console.log("destory a block ad..."),e.destroy()):console.err("can not destory a block ad which is not created by func: createBlockAd...")}}destroyAllBlockAds(){[].concat(this._onShowBlockAdObjs).forEach(e=>{this.destoryBlockAd(e)})}_canShowColorSign(){let e=G_PlatHelper.getStorage(pt);if(e&&""!==e){let t=JSON.parse(e);if(void 0!==t.lastSignDay&&t.lastSignDay===G_ServerInfo.getCurServerDayOfYear())return!1}return!0}_markShowColorSign(){let e={lastSignDay:G_ServerInfo.getCurServerDayOfYear()};G_PlatHelper.setStorage(pt,JSON.stringify(e))}_registerAdUnitIDs(e,t,i){0===e.length&&(e=G_advConfigs.bannerAdUnitIDs),0===t.length&&(t=G_advConfigs.videoAdUnitIDs),0===i.length&&(i=G_advConfigs.interstitialAdUnitIDs),super._registerAdUnitIDs(e,t,i)}_doCreateBannerAdObj(e,t,i){return super._doCreateBannerAdObj(e,t,i)}_getDefaultPlatformStyle(){let e=G_PlatHelper.getSysInfo(),t=this.getBannerOriginalSize().height/this.getBannerOriginalSize().width*300,i={left:(e.screenWidth-300)/2,top:e.screenHeight-t,width:300};return G_PlatHelper.isIPhoneX()&&(i.top-=20),i}getBannerOriginalSize(){return{width:960,height:223}}getMiniGapFromBottom(){return 20}_fixedStyle(e){e&&("number"!=typeof e.width&&(e.width=300),e.width<300&&(e.width=300))}_isSupportPreloadBanner(){return!1}_isSupportDelayDestroyBanner(){return!1}}class yt extends ut{constructor(){super(),this._gapOfEachInterstitialAd=_t}_registerAdUnitIDs(e,t,i){0===e.length&&(e=G_advConfigs.bannerAdUnitIDs),0===t.length&&(t=G_advConfigs.videoAdUnitIDs),0===i.length&&(i=G_advConfigs.interstitialAdUnitIDs),super._registerAdUnitIDs(e,t,i)}_doCreateBannerAdObj(e,t,i){let n=super._doCreateBannerAdObj(e,t,i);const{windowWidth:s,windowHeight:o}=G_PlatHelper.getPlat().getSystemInfoSync();let r=e=>{n.style.top=o-e.height,n.style.left=(s-e.width)/2,G_PlatHelper.isIPhoneX()&&(n.style.top-=20),n.offResize(r)};return n.onResize(r),n}_doCreateInterstitialAdObj(e,t,i){let n=super._doCreateInterstitialAdObj(()=>{let t=n;G_Scheduler.schedule("Destroy_Interstitial_Ad",function(){t&&(console.log("destory interstitial ad..."),t.destroy())}.bind(this),!1,60,0),this._interstitialAdObj=null,"function"==typeof e&&e()},t,i);return console.log("start to load interstitial ad..."),n.load(),n}_isSupportPreloadInterstitial(){return!1}_isSupportDelayDestroyInterstitial(){return!1}_getDefaultPlatformStyle(){return{left:0,top:0,width:128}}_caculateRealWidth(e){return e/208*300}getBannerOriginalSize(){return{width:960,height:336}}getMiniGapFromBottom(){return 40}_isSupportResizeTwice(){return!1}_fixedStyle(e){e&&("number"!=typeof e.width&&(e.width=128),e.width<128&&(e.width=128))}}var wt=null;wt=void 0!==window.qq?mt:void 0!==window.tt?yt:void 0!==window.wx?ft:gt;var It=function(){let e=G_PlatHelper.getStorage("subscribe_forever_day_of_player_{0}".format(G_PlayerInfo.getOpenID()));return e&&""!==e?parseInt(e,10):0},vt=function(e){G_PlatHelper.setStorage("subscribe_forever_day_of_player_{0}".format(G_PlayerInfo.getOpenID()),e.toString())};class Pt{constructor(){console.log("Init G_Subscriber Instance..."),this._onceTmplIds={},this._foreverTmplIds={}}addOnceTmplId(e,t){void 0===this._onceTmplIds[e]?this._onceTmplIds[e]=t:console.error("once tmplId: {0} has been added before...".format(e))}addForeverTmplId(e,t){void 0===this._foreverTmplIds[e]?this._foreverTmplIds[e]=t:console.error("forever tmplId: {0} has been added before...".format(e))}isSupportOnce(){return!1}isSupportForever(){return!1}reqSubscribeOnceMsgs(e,t){let i=e=>{"function"==typeof t&&t(e)};if(!this.isSupportOnce())return console.warn("reqSubscribeOnceMsgs fail, not support on this plat..."),void i(!1);let n=[];if("string"==typeof e&&void 0!==this._onceTmplIds[e]?n.push(this._onceTmplIds[e]):Array.isArray(e)&&e.forEach(e=>{void 0!==this._onceTmplIds[e]&&n.length<3&&n.push(this._onceTmplIds[e])}),0===n.length)return console.error("reqSubscribeOnceMsgs fail, check web config..."),void i(!1);this._getSubscribeFunc()(this._fillSubscribeOnceObj(n,i))}reqSubscribeAllForeverMsgs(e){let t=t=>{"function"==typeof e&&e(t)};return this.isSupportForever()?G_ServerInfo.getCurServerDayOfYear()===It()?(console.warn("reqSubscribeAllForeverMsgs fail, has been subscribed today..."),void t(!1)):void this._getSubscribeFunc()(this._fillSubscribeForeverObj(e)):(console.warn("reqSubscribeAllForeverMsgs fail, not support on this plat..."),void t(!1))}_fillSubscribeOnceObj(e,t){return{tmplIds:e,subscribe:!0,success:i=>{let n=!0,s=[];if(e&&e.length>0)for(let t=0;t<e.length;t++){const o=e[t];"reject"===i[o]?n=!1:"accept"===i[o]&&s.push(o)}s.length>0&&G_NetHelper.reqNotifyAllOnceSubscribers(G_PlayerInfo.getSessID(),s,e=>{0===e.code?console.log("notify all once subscribers succ..."):console.log("notify all once subscribers fail...")}),"function"==typeof t&&t(n)},fail:()=>{this._doCheckSetting(e,e=>{e?this._doTryOpenSetting(t):"function"==typeof t&&t(!1)})}}}_fillSubscribeForeverObj(e){return{subscribe:!0,success:()=>{vt(G_ServerInfo.getCurServerDayOfYear()),"function"==typeof e&&e(!0)},fail:()=>{this._doCheckSetting(null,t=>{t?this._doTryOpenSetting(e):"function"==typeof e&&e(!1)})}}}_getSubscribeFunc(){return null}_doCheckSetting(e,t){"function"==typeof t&&t(!1)}_doTryOpenSetting(e){G_PlatHelper.showModal(null,G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SUBSCRIBE_FAIL_CONTENT).word,!0,function(t){t?G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().openSetting&&G_PlatHelper.getPlat().openSetting({complete:()=>{"function"==typeof e&&e(!0)}}):"function"==typeof e&&e(!1)},{confirmText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SUBSCRIBE_FAIL_CONFIRM_TEXT).word,cancelText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SUBSCRIBE_FAIL_CANCEL_TEXT).word})}}class St extends Pt{constructor(){super()}isSupportOnce(){return!1}isSupportForever(){return!1}}class Tt extends Pt{constructor(){super()}isSupportOnce(){return!0}isSupportForever(){return!1}_doCheckSetting(e,t){G_PlatHelper.getPlat().getSetting({withSubscriptions:!0,success:i=>{if("function"==typeof t){if(e&&e.length>0)for(let n=0;n<e.length;n++){const s=e[n];if("reject"===i.subscriptionsSetting[s])return void t(!0)}t(!1)}}})}_getSubscribeFunc(){return G_PlatHelper.getPlat().requestSubscribeMessage}}class Gt extends Pt{constructor(){super()}isSupportOnce(){return!0}isSupportForever(){return!0}_doCheckSetting(e,t){G_PlatHelper.getPlat().getSetting({success:e=>{"function"==typeof t&&(!1===e.authSetting["setting.appMsgSubscribed"]||!1===e.authSetting["scope.appMsgSubscribed"]?t(!0):t(!1))}})}_getSubscribeFunc(){return G_PlatHelper.getPlat().subscribeAppMsg}}var bt=null;bt=void 0!==window.qq?Gt:void 0!==window.wx?Tt:St;var Ct=1e4,Ot=1e4,At=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_NativeAdvMgr Instance...");var e=-1,t=!1,i=-1,n=!1,s=null,o=null,r=null,a=-1,l=!1,h=null,c=null,d=null,u=-1,p=function(){return(i+=1)>=G_advConfigs.bannerAdUnitIDs.length&&(i=0),G_advConfigs.bannerAdUnitIDs[i]},_=function(){return(a+=1)>=G_advConfigs.videoAdUnitIDs.length&&(a=0),G_advConfigs.videoAdUnitIDs[a]},g=function(){return(u+=1)>=G_advConfigs.interstitialAdUnitIDs.length&&(u=0),G_advConfigs.interstitialAdUnitIDs[u]},f=function(e){if("function"==typeof e){let t=Array.prototype.slice.call(arguments);return t.shift(),e.apply(null,t)}return null};return{preload:function(){G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("preloadAllAdvs",JSON.stringify({userID:G_PlayerInfo.getOpenID(),splashID:((e+=1)>=G_advConfigs.splashAdUnitIDs.length&&(e=0),G_advConfigs.splashAdUnitIDs[e]),bannerID:p(),videoID:_(),interactionID:g()}))},getBridge:function(){return this._bridge},isSupportBanner:function(){return G_advConfigs.bannerAdUnitIDs.length>0},showBanner:function(){G_PlatHelper.isNativePlatform()&&(t?G_PlatHelper.callStaticMethod("refreshBannerAdv",p()):(t=!0,G_PlatHelper.callStaticMethod("showBannerAdv")))},hideBanner:function(){t=!1,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("hideBannerAdv",p())},isSupportRewardVideo:function(){return G_advConfigs.videoAdUnitIDs.length>0},isRewardVideoLoaded:function(){return n},showRewardVideo:function(e,t){n?("function"==typeof e&&(o=e),r="function"==typeof t?t:null,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("showRewardVideoAdv")):f(t)},_loadNextRewardVideo:function(e,t){n?f(e):("function"==typeof e&&(s=e),r="function"==typeof t?t:null,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("loadRewardVideoAdv",_()))},onRewardVideoLoaded:function(){n=!0;let e=s;s=null,f(e,!1)},onRewardVideoClosed:function(){n=!1;let e=o;o=null,f(e,!1),this._autoLoadNextRewardVideo()},onRewardVideoFinished:function(){n=!1;let e=o;o=null,f(e,!0),this._autoLoadNextRewardVideo()},onRewardVideoError:function(){n=!1;let e=r;r=null,f(e),this._autoLoadNextRewardVideo()},_autoLoadNextRewardVideo:function(){G_Scheduler.schedule("Auto_Load_Next_Reward_Video",function(){n||this._loadNextRewardVideo()}.bind(this),!1,Ct,0)},isSupportInteraction:function(){return G_advConfigs.interstitialAdUnitIDs.length>0},isInteractionLoaded:function(){return l},showInteraction:function(e,t){l?("function"==typeof e&&(c=e),d="function"==typeof t?t:null,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("showInteractionAdv")):f(t)},_loadNextInteraction:function(e,t){l?f(e):("function"==typeof e&&(h=e),d="function"==typeof t?t:null,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("loadInteractionAdv",g()))},onInteractionLoaded:function(){l=!0;let e=h;h=null,f(e)},onInteractionClosed:function(){l=!1;let e=c;c=null,f(e),this._autoLoadNextInteraction()},onInteractionError:function(){l=!1;let e=d;d=null,f(e),this._autoLoadNextInteraction()},_autoLoadNextInteraction:function(){G_Scheduler.schedule("Auto_Load_Next_Interaction",function(){l||this._loadNextInteraction()}.bind(this),!1,Ot,0)}}}()),e}}}(),Et=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_NativeWXMgr Instance...");var e=null,t=null,i=function(e){if("function"==typeof e){let t=Array.prototype.slice.call(arguments);return t.shift(),e.apply(null,t)}return null};return{init:function(){G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("initWX",JSON.stringify({appID:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NATIVE_MINI_PROGRAM_APP_ID).str,universalLink:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NATIVE_MINI_PROGRAM_UNIVERSAL_LINKS).str}))},isWXAppInstalled:function(){if(G_PlatHelper.isNativePlatform())return G_PlatHelper.callStaticMethod("isWXAppInstalled")},reqLoginToWX:function(t){e="function"==typeof t?t:null,G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("reqLoginToWX")},reqShareText:function(e,i,n){t="function"==typeof n?n:null;let s=e?"session":"timeline";G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("reqShareTextToWX",JSON.stringify({shareScene:s,text:i}))},reqShareImage:function(e,i,n){t="function"==typeof n?n:null;let s=e?"session":"timeline";G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("reqShareImageToWX",JSON.stringify({shareScene:s,imgPath:i}))},reqShareWeb:function(e,i,n,s,o){t="function"==typeof o?o:null;let r=e?"session":"timeline";G_PlatHelper.isNativePlatform()&&G_PlatHelper.callStaticMethod("reqShareWebToWX",JSON.stringify({shareScene:r,title:i,desc:n,link:s}))},onLoginSucc:function(t){let n=e;e=null,i(n,!0,t)},onLoginFail:function(){let t=e;e=null,i(t,!1)},onShareSucc:function(){let e=t;t=null,i(e,!0)},onShareFail:function(){let e=t;t=null,i(e,!1)}}}()),e}}}(),kt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_SDKCfg Instance...");var e=null,t={max_connect_times:3,timeout_of_connect:5e3,max_try_send_times:3},i={timeout_of_request:1e4,max_try_send_times:3},n=null,s=-1,o=-1,r=null,a=[],l=null,h=[];return{init:function(){if(G_Switch.getPercentOfReportToAld(function(e){if(null===r&&(r=G_Utils.random(1,100)<=e),a.length>0){for(let e=0;e<a.length;e++)(0,a[e])(r);a=[]}}),l=!0,h.length>0){for(let e=0;e<h.length;e++)(0,h[e])(l);h=[]}},isOpenDataEnabled:function(){return!0},isNetwordEnabled:function(){return!1},getNetAddr:function(){return this.isNetwordEnabled()?(e||(e=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NET_ADDR).str),e):""},getNetCfgs:function(){return this.isNetwordEnabled()?t:{}},isHttpsEnabled:function(){return!0},getHttpsCfgs:function(){return this.isHttpsEnabled()?i:{}},getBaseWebUrl:function(){return n||(n=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_BASE_WEB_URL).str),n},getAppVersion:function(){return-1===s&&(s=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_APP_VERSION).num),s},getAssetResVersion:function(){return-1===o&&(o=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_ASSET_RES_VERSION).num),o},isAldReportEnabled:function(e){null===r?a.push(e):"function"==typeof e&&e(r)},isAldReportEnabledSync:function(){return null===r?(console.error("Can not call func: isAldReportEnabledSync before func: isAldReportEnabled"),!1):r},isQyReportEnabled:function(e){null===l?h.push(e):"function"==typeof e&&e(l)},isQyReportEnabledSync:function(){return null===l?(console.error("Can not call func: isQyReportEnabledSync before func: isQyReportEnabled"),!1):l}}}()),e}}}(),Nt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_OpenHelper Instance...");var e=!1;return{init:function(){G_PlatHelper.isQQPlatform()?e=!0:G_PlatHelper.isWXPlatform()&&(G_PlatHelper.getSDKVersion()>="1.9.92"?e=!0:(e=!1,G_Event.dispatchEvent(G_EventName.EN_SDK_NOT_SUPPORT,G_PlatHelper.getSDKVersion())))},isSupport:function(){return e},saveSelfInfo:function(t,i){if(e&&0!==Object.keys(t).length&&window.wx&&window.wx.setUserCloudStorage){let e=[];for(let i in t)e.push({key:i,value:t[i].toString()});wx.setUserCloudStorage({KVDataList:e,success:function(){"function"==typeof i&&i()}})}},clearSelfInfo:function(t,i){e&&window.wx&&window.wx.removeUserCloudStorage&&wx.removeUserCloudStorage({KVDataList:t,success:function(){"function"==typeof i&&i()}})},preload:function(t){e&&this._doOperation(G_OpenDataOperation.ODO_PRELOAD,t)},showRank:function(t){e&&this._doOperation(G_OpenDataOperation.ODO_SHOW_RANK,t)},_doOperation:function(e,t){if(window.wx&&window.wx.getOpenDataContext){let i=window.wx.getOpenDataContext(),n={operation:e};null!=t&&(n.params=JSON.stringify(t)),console.log("post message!!!"),console.log(n),i.postMessage(n)}}}}()).init(),e}}}(),Lt=65529,Dt=26333,Bt=256,Mt=65535;class Rt{constructor(){this._cmdID=0,this._msgLen=0}init(e,t){return!(!this._setCmdID(e)||!this._setBodyLen(t))}getCmdID(){return this._cmdID}encode(){let e=[];return e.push(Math.floor(Dt/Bt)),e.push(Dt%Bt),e.push(Math.floor(this._cmdID/Bt)),e.push(this._cmdID%Bt),e.push(Math.floor(this._msgLen/Bt)),e.push(this._msgLen%Bt),e}_setCmdID(e){return e>=0&&e<=Mt&&(this._cmdID=e,!0)}_setBodyLen(e){return e>=0&&e<=Lt&&(this._msgLen=e,!0)}}Rt.prototype.create=function(e,t){let i=new Rt;if(i.init(e,t))return i},Rt.prototype.decode=function(e){if(void 0!==e&&e.byteLength>=6){let t=new Uint8Array(e,0,6);if(t[0]*Bt+t[1]===Dt){let e=t[2]*Bt+t[3],i=t[4]*Bt+t[5];return Rt.create(e,i)}}};class xt{constructor(){this._head=void 0,this._msg=void 0}init(e,t){return void 0!==t&&(this._head=Rt.create(e,t.length),void 0!==this._head)&&(this._msg=t,!0)}setHead(e){this._head=e}setMsg(e){this._msg=e}getCmdID(){return null!=this._head?this._head.getCmdID():0}getMsg(){return this._msg}encode(){let e=this._head.encode();for(let t=0;t<this._msg.length;t++)e.push(this._msg[t]);return new Uint8Array(e).buffer}}xt.prototype.create=function(e,t){let i=new xt;if(i.init(e,t))return i},xt.prototype.decode=function(e){let t=Rt.decode(e);if(void 0!==t){let i=new Uint8Array(e,6);return xt.create(t.getCmdID(),i)}};class Ut{constructor(){this._ws=void 0,this._addr="",this.onConnectOpen=void 0,this.onConnectClose=void 0,this.onConnectError=void 0,this.onGotMessage=void 0}connect(e){!function(e){return!(void 0===e||!e.startsWith("ws://")&&!e.startsWith("wss://"))}(e)?console.log(String.format("Invalid Addr: {0}",e)):(this._clear(),this._addr=e,this._doConnect())}close(){void 0!==this._ws&&this._ws.close()}send(e){this.isConnected()?this._ws.send(e):console.log("Can Not Send Any Data Before Connect.")}isConnected(){return!(!window.WebSocket||void 0===this._ws)&&this._ws.readyState===WebSocket.OPEN}_doConnect(){var e=this;window.WebSocket?(console.log("Start Connect: {0}".format(this._addr)),this._ws=new WebSocket(this._addr),this._ws.onopen=function(t){e._ws.readyState===WebSocket.OPEN&&(console.log("Connect Open..."),e._ws.binaryType="arraybuffer",e._doConnectOpenCb())},this._ws.onmessage=function(t){console.log("Got Message..."),e._doGotMessageCb(t.data)},this._ws.onerror=function(t){console.error("Connect Error..."),e._ws.readyState===WebSocket.OPEN&&e._doConnectErrorCb()},this._ws.onclose=function(t){if(console.log("Connect Close..."),void 0!==e._ws){e._ws=void 0;let t=e.onConnectClose;e._clear(),e._doConnectCloseCb(t)}}):console.log("Do Not Support On Current Platform.")}_clear(){console.log("Reset Connect Environment..."),this._addr="",this.onConnectOpen=void 0,this.onConnectClose=void 0,this.onConnectError=void 0,this.onGotMessage=void 0}_doConnectOpenCb(){"function"==typeof this.onConnectOpen?this.onConnectOpen():console.log("Do Not Register Open Connect Callback.")}_doConnectCloseCb(e){"function"==typeof e?e():console.log("Do Not Register Close Connect Callback.")}_doConnectErrorCb(){"function"==typeof this.onConnectError?this.onConnectError():console.log("Do Not Register Connect Error Callback.")}_doGotMessageCb(e){"function"==typeof this.onGotMessage?this.onGotMessage(e):console.log("Do Not Register Got Message Callback.")}}var Ht="Schedule_Of_WSHelper",Vt="Schedule_Of_Connect_Timeout",Ft="close_timeout_connectin_on_next_frame",Wt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_WSHelper Instance...");var e={},t=void 0,i=[],n=[];return{registerAll:function(e){for(var t=0;t<e.length;t++)this.register(e[t].cmdID,e[t].reqClassName,e[t].rspClassName)},register:function(t,i,n){e[t]={cmdID:t,reqClassName:i,rspClassName:n},this._schedule()},send:function(e,i,n,s){let o=this._makeMsgInfo(e,i,n,s);this._addIntoUnsendList(o),void 0===t&&this._doConnect()},_doSend:function(e){if(this._canRetainIntoSentList(e.cmdID)){let i=this._makeReqBuf(e.cmdID,e.content);if(void 0!==i){let n=xt.create(e.cmdID,i);if(void 0!==n)return t.send(n.encode()),void this._retainIntoSentList(e)}}e.doErrCallback()},_isReadyToSend:function(){return!(void 0===t||!t.isConnected())},_doConnect:function(){var e=this;(t=new Ut).connect(G_SDKCfg.getNetAddr()),this._addTryConnectTimes(),t.onConnectOpen=function(){console.log("Is Ready To Send..."),e._resetTryConnectTimes()},t.onConnectClose=function(){if(e._connect=void 0,e._sentMsgInfos.length>0){e._releaseAllFromSendList();for(let t=e._sentMsgInfos.length-1;t>=0;t--){let i=e._sentMsgInfos[t];i.sendCount>=G_SDKCfg.getNetCfgs().max_try_send_times?(e._sentMsgInfos.splice(t,1),i.doErrCallback()):e._reSendMsgInfos.push(i)}}if(e._tryConnectTimes<G_SDKCfg.getNetCfgs().max_connect_times)e._doConnect();else{if(e._unSendMsgInfos.length>0){for(let t=0;t<e._unSendMsgInfos.length;t++)e._unSendMsgInfos[t].doErrCallback();e._unSendMsgInfos.splice(0,e._unSendMsgInfos.length)}if(e._reSendMsgInfos.length>0){for(let t=0;t<e._reSendMsgInfos.length;t++)e._reSendMsgInfos[t].doErrCallback();e._reSendMsgInfos.splice(0,e._reSendMsgInfos.length)}}},t.onConnectError=function(){if(e._sentMsgInfos.length>0){e._releaseAllFromSendList();for(let t=e._sentMsgInfos.length-1;t>=0;t--){let i=e._sentMsgInfos[t];i.sendCount>=G_SDKCfg.getNetCfgs().max_try_send_times?(e._sentMsgInfos.splice(t,1),i.doErrCallback()):e._doSend(i)}}},t.onGotMessage=function(t){if(e._sentMsgInfos.length>0){let i=xt.decode(t);if(void 0!==i){let t=e._getFromSentList(i.getCmdID()),n=e._makeRspMsg(i.getCmdID(),i.getMsg());void 0!==n?t.doCallback(n.toJSON()):t.doErrCallback(),e._removeFromSentList(i.getCmdID())}}}},_makeMsgInfo:function(e,t,i,n){return void 0!==i&&"function"!=typeof i&&(i=void 0,console.log("Can Not Support Callback Of CmdID: {0}".format(e.toString()))),void 0!==n&&"function"!=typeof n&&(n=void 0,console.log("Can Not Support Error Callback Of CmdID: {0}".format(e.toString()))),{cmdID:e,content:t,cb:i,errCb:n,sendCount:0,isSending:!1,doCallback:function(){if("function"==typeof this.cb){let e=Array.prototype.slice.call(arguments);this.cb.apply(null,e)}},doErrCallback:function(){if("function"==typeof this.errCb){let e=Array.prototype.slice.call(arguments);this.errCb.apply(null,e)}},markSendState:function(){this.sendCount+=1,this.isSending=!0},markUnsendState:function(){this.isSending=!1}}},_makeReqMsg:function(t,i){if(e.hasOwnProperty(t)){let n=e[t].reqClassName;if(""!==n&&db.hasOwnProperty(n))return db[n].create(i)}},_makeReqBuf:function(t,i){let n=this._makeReqMsg(t,i);if(void 0!==n){let i=e[t].reqClassName;return db[i].encode(n).finish()}},_makeRspMsg:function(t,i){if(e.hasOwnProperty(t)){let n=e[t].rspClassName;if(""!==n&&db.hasOwnProperty(n))return db[n].decode(i)}},_addIntoUnsendList:function(e){void 0!==e&&(i.push(e),this._schedule())},_getFromUnsendList:function(e){let t=void 0;return i.length>0&&(t=i[0],e&&i.splice(0,1)),0==i.length&&this._unschedule(),t},_retainIntoSentList:function(e){let t=this._getFromSentList(e.cmdID);void 0===t&&(n.push(e),t=e),t.markSendState()},_releaseAllFromSendList:function(){for(let e=0;e<n.length;e++)n[e].markUnsendState()},_removeFromSentList:function(e){for(let t=0;t<n.length;t++)n[t].cmdID===e&&(n[t].markUnsendState(),n.splice(t,1))},_canRetainIntoSentList:function(e){return this._getRetainCountIntoSendList(e)<G_SDKCfg.getNetCfgs().max_try_send_times},_getRetainCountIntoSendList:function(e){let t=this._getFromSentList(e);return void 0!==t?t.sendCount:0},_getFromSentList:function(e){for(let t=0;t<n.length;t++)if(n[t].cmdID===e)return n[t]},_update:function(){if(this._isReadyToSend()){if(_resendMsgInfos.length>0){for(let e=0;e<_resendMsgInfos.length;e++)this._doSend(_resendMsgInfos[e]);_resendMsgInfos.splice(0,_resendMsgInfos.length)}let e=this._getFromUnsendList();void 0!==e&&0===this._getRetainCountIntoSendList(e.cmdID)&&(this._getFromUnsendList(!0),this._doSend(e))}},_schedule:function(){this._isScheduled()||G_Scheduler.schedule(Ht,function(){this._update()}.bind(this),!0)},_isScheduled:function(){return G_Scheduler.isScheduled(Ht)},_unschedule:function(){G_Scheduler.unschedule(Ht)},_addTryConnectTimes:function(){this._scheduleConnectTimeout()},_resetTryConnectTimes:function(){this._unscheduleConnectTimeout()},_connectTimeout:function(){G_Scheduler.schedule(Ft,function(){void 0!==this._connect&&this._connect.close()}.bind(this),!0,0,0)},_scheduleConnectTimeout:function(){this._unscheduleConnectTimeout(),G_Scheduler.schedule(Vt,function(){this._connectTimeout()}.bind(this),!1,G_SDKCfg.getNetCfgs().timeout_of_connect,0)},_unscheduleConnectTimeout:function(){G_Scheduler.unschedule(Vt)}}}()),e}}}(),jt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_HttpHelper Instance...");var e=null;return{registerGetServerTimeFunc:function(t){"function"==typeof t&&(e=t)},_getServerTime:function(){return e?e():Math.round(new Date/1e3)},getJson:function(e,t){this._doJsonRequest("GET",e,null,null,t)},sendJson:function(e,t,i,n){this._doJsonRequest("POST",e,t,i,n)},sendForm:function(e,t,i,n){this._doFormRequest("POST",e,t,i,n)},_doJsonRequest:function(e,t,i,n,s){let o=this._createRequest(e,t,s);try{if(n){if(o.setRequestHeader("content-type","application/json"),"object"==typeof i)for(let e in i)o.setRequestHeader(e,i[e]);o.send(JSON.stringify(n))}else o.send(null)}catch(e){console.error(e),"function"==typeof s&&s(!1,"未知错误")}},_doFormRequest:function(e,t,i,n,s){let o=this._createRequest(e,t,s);try{if(n){if(o.setRequestHeader("content-type","application/x-www-form-urlencoded"),"object"==typeof i)for(let e in i)o.setRequestHeader(e,i[e]);let e=null,t=[];for(let e in n)t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]));t.length>0&&(e=t.join("&").replace(/%20/g,"+")),o.send(e)}else o.send(null)}catch(e){console.error(e),"function"==typeof s&&s(!1,"未知错误")}},_createRequest:function(e,t,i){return this._createBaseRequest(e,t,function(e,t){"function"==typeof i&&(void 0===e?i(!1,"返回数据格式错误"):"json"===t?i(!0,JSON.parse(e)):i(!1,"返回数据解析错误"))})},sendProto:function(e,t,i,n){if(void 0!==i&&void 0!==i.constructor){let s=this._createProtoDataRequest("POST",e,n);if(void 0!==s){if(s.setRequestHeader("content-type","application/json"),"object"==typeof t)for(let e in t)s.setRequestHeader(e,t[e]);let e=new Object,o=i.constructor.encode(i).finish(),r=G_Utils.Uint8Array2HexString(o);e.data=r;try{s.send(JSON.stringify(e))}catch(e){console.error(e),"function"==typeof n&&n(!1,"请求数据错误")}}else"function"==typeof n&&n(!1,"未知错误")}},getProto:function(e,t){let i=this._createProtoDataRequest("GET",e,t);if(void 0!==i)try{i.send(null)}catch(e){console.error(e),"function"==typeof t&&t(!1,"请求数据错误")}else"function"==typeof t&&t(!1,"未知错误")},_createProtoDataRequest:function(e,t,i){var n=this;return this._createBaseRequest(e,t,function(e,t){"function"==typeof i&&(void 0===e?i(!1,"未知错误"):"json"===t?n._checkProtoResponse(JSON.parse(e),function(e,t){i(!!e,t)}):i(!1,"返回数据格式错误"))})},_createBaseRequest:function(e,t,i){if("GET"===e||"POST"===e){if(void 0!==t&&""!==t){var n=(new Laya.HttpRequest)._http;return-1==t.indexOf("?")&&(t="{0}?timestamp={1}".format(t,this._getServerTime().toString())),n.open(e,t,!0),console.log("req url: {0}".format(t)),n.onload=function(){if("function"==typeof i)if(4===n.readyState)if(n.status>=200&&n.status<300)if("arraybuffer"===n.getResponseHeader("content-type"))i(n.response,"arraybuffer");else if("application/json"===n.getResponseHeader("content-type"))i(n.responseText,"json");else{let e=!1;try{JSON.parse(n.responseText),e=!0,i(n.responseText,"json")}catch(t){console.error(t),e||i(n.responseText,"text")}}else i();else i()},n.timeout=G_SDKCfg.getHttpsCfgs().timeout_of_request,n.ontimeout=function(e){"function"==typeof i&&i()},n.onerror=function(e){console.error(e),"function"==typeof i&&i()},n}console.error("Http Err: url Is Not Right, Url: {0}".format(t))}else console.error("Http Err: Only Support GET or POST Way of Request, Way: {0}".format(e))},_checkProtoResponse:function(e,t){if("function"==typeof t)if(void 0!==e.data){let i=e.data,n=G_Utils.HexString2Uint8Array(i),s=new db.ResponseClient.decode(n);1==s.ret?t(!0,s):t(!1,G_GameDB.getNetErrorByID(s.ret).word)}else t(!1,"返回数据格式错误")}}}()),e}}}(),qt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_NetHelper Instance...");var e={},t=null,i="",n=null,s=[];return{init:function(){if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().onNetworkStatusChange){G_PlatHelper.getPlat().onNetworkStatusChange(function(e){let t=n;n=e.networkType,e.isConnected||(n="none"),"none"===n?G_Event.dispatchEvent(G_EventName.EN_NET_CONNECTION_LOST):"none"===t&&G_Event.dispatchEvent(G_EventName.EN_NET_CONNECTION_RECOVER)});var e=function(){for(let e=0;e<s.length;e++)s[e](n);s=[]};G_PlatHelper.getPlat().getNetworkType&&G_PlatHelper.getPlat().getNetworkType({success:function(t){n=t.networkType,e()},fail:function(t){n="none",e()}})}else n="wifi"},getNetType:function(e){"function"==typeof e&&(null!==n?e(n):s.push(e))},isConnected:function(e){"function"==typeof e&&(null!==n?e("none"!==n):s.push(function(t){e("none"!==t)}))},registerBaseUrl:function(t,i){this._checkString(i)||0===i.indexOf("https://")||0===i.indexOf("http://")?(console.log("Register Base Url Succ!"),e[t]=i):console.error("Register Base Url Fail, Check Input!")},registerOpenID:function(e){this._checkString(e)||console.error("Register OpenID Fail, Check Input!"),console.log("Register OpenID Succ!"),t=e},_getTag:function(){return""===i&&(i=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_SHOT_NAME).str),i},_makeUrl:function(t,i){return void 0!==e[t]?e[t]+i:""},sendJsonOrForm:function(e,t,i,n,s){var o=this;this.isConnected(function(r){r?o._doRequest(o._makeObj(e,t,i,n,s)):"function"==typeof s&&s(null)})},sendProto:function(e,t,i,n){var s=this;this.isConnected(function(o){o?s._doRequest(s._makeObj("sendProto",e,t,i,n)):"function"==typeof n&&n(null)})},reqLogin:function(e,t){let i={code:e};G_PlatHelper.isQQPlatform()?(i.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QQ_MINI_PROGRAM_APP_ID).str,this.sendJsonOrForm("sendForm",this._getTag(),"/qq/login",i,t)):G_PlatHelper.isTTPlatform()?(i.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_TT_MINI_PROGRAM_APP_ID).str,this.sendJsonOrForm("sendForm",this._getTag(),"/tt/login",i,t)):(i.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MINI_PROGRAM_APP_ID).str,this.sendJsonOrForm("sendForm",this._getTag(),"/wx/login",i,t))},reqCheckLogin:function(e,t){let i={JavasessionId:e};this.sendJsonOrForm("sendForm",this._getTag(),"/wx/checkLogin",i,t)},reqLoadPlayerInfo:function(e,t){let i={JavasessionId:e};this.sendJsonOrForm("sendForm",this._getTag(),"/wx/getWxUserInfo",i,t)},reqSavePlayerInfo:function(e,t,i){let n={JavasessionId:e,selfStore:t};this.sendJsonOrForm("sendForm",this._getTag(),"/wx/setWxUserInfo",n,i)},reqLoadPlayerInfo_WithOpenID:function(e,t){let i={openId:e};this.sendJsonOrForm("sendForm",this._getTag(),"/pip/getUserInfo",i,t)},reqSavePlayerInfo_WithOpenID:function(e,t,i){let n={openId:e,selfStore:t};this.sendJsonOrForm("sendForm",this._getTag(),"/pip/setUserInfo",n,i)},reqGetServerTime:function(e){this.sendJsonOrForm("sendForm",this._getTag(),"/wx/getTime",null,e)},reqGetWebConfig:function(e){let t={};G_PlatHelper.isQQPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QQ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isTTPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_TT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isOPPOPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_OPPO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isVIVOPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_VIVO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isQTTPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isMZPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MZ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isHWPlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HW_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isNativePlatform()?t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NATIVE_MINI_PROGRAM_APP_ID).str:t.app_id=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MINI_PROGRAM_APP_ID).str,this.sendJsonOrForm("sendForm",this._getTag(),"/pip/earnGameCfg",t,e)},reqDepositMoney:function(e,t,i,n){let s={JavasessionId:e,money:i},o={depositType:t};s.opts=JSON.stringify(o),this.sendJsonOrForm("sendForm",this._getTag(),"/pip/depositMoney",s,n)},reqWithdrawMoney:function(e,t,i,n,s){let o={JavasessionId:e,money:t},r={advTimesOfToday:i,totalAdvTimes:n};o.opts=JSON.stringify(r),o.sign=hex_md5(e+hex_md5("money={0}&key=withdrawMoney&money={1}&opts={2}".format(t.toString(),t.toString(),o.opts))),this.sendJsonOrForm("sendForm",this._getTag(),"/pip/withdrawMoney",o,s)},reqWithdrawEverydayMoney:function(e,t,i,n,s,o){let r={JavasessionId:e,money:t},a={advTimesOfToday:i,totalAdvTimes:n,recordDayOfEverydayMoney:s};r.opts=JSON.stringify(a),r.sign=hex_md5(e+hex_md5("money={0}&key=withdrawEverydayMoney&money={1}&opts={2}".format(t.toString(),t.toString(),r.opts))),this.sendJsonOrForm("sendForm",this._getTag(),"/pip/withdrawEverydayMoney",r,o)},reqReportMyVideoRankInfos:function(e,t){let i={opts:JSON.stringify(e)};this.sendJsonOrForm("sendForm",this._getTag(),"/pip/rankingReport",i,t)},reqAllVideoRankInfos:function(e){this.sendJsonOrForm("sendForm",this._getTag(),"/pip/rankingSort",{order_field:"digg",order_type:"desc"},e)},reqNotifyAllOnceSubscribers:function(e,t,i){let n={JavasessionId:e,tmplIds:JSON.stringify(t)};this.sendJsonOrForm("sendForm",this._getTag(),"/gmsgcfg/pushBsis",n,i)},_makeObj:function(e,t,i,n,s){return{way:e,key:t,path:i,data:n,cb:s,try_times:0}},_doRequest:function(e){if(e){var t=this;let i=function(i,n){if(i){if("function"==typeof e.cb){let t=e.cb;e.cb=null,t(n)}}else if(console.log("Request {0} Fail, Reason: {1}".format(e.path,n)),e.try_times>=G_SDKCfg.getHttpsCfgs().max_try_send_times){if("function"==typeof e.cb){let t=e.cb;e.cb=null,t(null)}}else t._doRequest(e)};e.try_times+=1;let n={};G_PlatHelper.isQQPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QQ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isTTPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_TT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isOPPOPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_OPPO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isVIVOPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_VIVO_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isQTTPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isMZPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MZ_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isHWPlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HW_MINI_PROGRAM_APP_ID).str:G_PlatHelper.isNativePlatform()?n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NATIVE_MINI_PROGRAM_APP_ID).str:n.appId=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MINI_PROGRAM_APP_ID).str,"sendJson"===e.way?G_HttpHelper.sendJson(this._makeUrl(e.key,e.path),n,e.data,i):"sendForm"===e.way?G_HttpHelper.sendForm(this._makeUrl(e.key,e.path),n,e.data,i):"sendProto"===e.way?G_HttpHelper.sendProto(this._makeUrl(e.key,e.path),n,e.data,i):(console.error("Do Not Support This Kind Of Request Right Now, Way: {0}".format(e.way)),i(!1,null))}},_checkString:function(e){return"string"==typeof e&&""!==e},_makeRequestProto:function(e){let i=new db.RequestServer;return i?(i.reqID=e,t&&(i.openID=t),i):null}}}()).init(),e}}}(),Kt=3,Xt=function(){var e;function init(){console.log("Init G_Recommend Instance...");var e=[],t=0,i=0;return{init:function(){if(G_RecommendAdUnitIDs&&Array.isArray(G_RecommendAdUnitIDs)&&G_RecommendAdUnitIDs.length>0){let t=G_Utils.cloneDeep(G_RecommendAdUnitIDs);G_Utils.shuffleArray(t),function(t){window.wx&&(Array.isArray(t)&&t.forEach(t=>{!function(e){return"string"==typeof e&&""!==e&&"none"!==e}(t)?console.error("Register Recommend Icon Ad Unit ID Fail, Check Input!"):e.push(t)}),console.log("Register All Recommend Ad Unit IDs Succ!"))}(t)}},isSupportGameIconAd:function(){return e.length>0},createGameIcon:function(e,i,n,s){if(this.isSupportGameIconAd())return t=0,this._doCreateGameIcon(this._convertStyles(e,i),n,s);this._doCallback(s)},_doCreateGameIcon(n,s,o){if(console.log("styles: ",n),void 0===window.wx||"function"!=typeof wx.createGameIcon)return this._doCallback(o),null;(i+=1)>=e.length&&(i=0);let r=wx.createGameIcon({adUnitId:e[i],count:n.length,style:n});"function"==typeof s&&(r.loadCb=s),"function"==typeof o&&(r.errCb=o);var a=this;return r.onLoad(function(){let e=r.loadCb;r.loadCb=void 0,e&&e(r)}),r.onError(function(e){let i=null;r&&(i=r.errCb,r=null),(t+=1)>=Kt?i&&i():G_Scheduler.schedule("Delay_Recreate_Recommend_Game_Icon",function(){console.log("retry preload game icon..."),a._doCreateGameIcon(n,s,o)},!1,200,0)}),r},_convertStyles(e,t){let i=[];if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){let s=e[n];if(s){s.visible=!1;let e={appNameHidden:!0,color:"#000000",size:0,borderWidth:0,borderColor:"#000000",left:0,top:0};t&&(void 0!==t.appNameHidden&&(e.appNameHidden=t.appNameHidden),void 0!==t.color&&(e.color=t.color),void 0!==t.borderWidth&&(e.borderWidth=t.borderWidth),void 0!==t.borderColor&&(e.borderColor=t.borderColor));let n=s.localToGlobal(new Laya.Vector2(s.width/2,s.height/2),!0),o=n.x-s.width/2*s.scaleX,r=n.y-s.height/2*s.scaleY,a=G_UIHelper.convertToOpenGLPt({x:o,y:r}),l=G_UIHelper.convertToOpenGLSize({width:s.width*s.scaleX,height:s.height*s.scaleY});e.size=Math.min(l.width,l.height),e.left=a.x,e.top=a.y,i.push(e)}}return i},_doCallback(e){"function"==typeof e&&e()}}}return{getInstance:function(){return e||(e=init()),e}}}(),Yt=3e3,zt=3e3,Qt=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_OVAdv Instance...");var e=!1,t=null,i=null,n=null,s=null,o=null,r=null,a=null,l=[],h="";return{init:function(){if(window.qg&&G_PlatHelper.isOPPOPlatform()&&G_PlatHelper.getPlat().initAdService){let t=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_OPPO_MINI_PROGRAM_APP_ID).str;G_PlatHelper.getPlat().initAdService({appId:t,isDebug:!0,success:function(t){e=!0,console.log("initAdService success")},fail:function(e){console.log("initAdService fail, code: "+e.code+", msg: "+e.msg)},complete:function(e){console.log("initAdService complete")}})}else G_PlatHelper.isVIVOPlatform()?e=!0:G_PlatHelper.isMZPlatform()?e=!0:G_PlatHelper.isHWPlatform()&&(e=!0)},isSupport:function(){return e&&t.length>0},stopSupport:function(){console.log("force stop support all advs..."),e=!1},isSupportBanner:function(){return e&&i.length>0},isSupportVideo:function(){return G_PlatHelper.isHWPlatform()?(o&&console.log("_onShowVideoObj._isLoaded: ",o._isLoaded),e&&s.length>0&&o&&o._isLoaded):e&&s.length>0},isSupportInsert:function(){return e&&r.length>0},isSupportNative:function(){return G_PlatHelper.isHWPlatform()?e&&a.length>0:e&&a.length>0&&l.length>0},preload:function(e){console.log("start preload ov adv...");let t=0,i=0,n=!1,s=!1,o=()=>{(i+=1)===t&&"function"==typeof e&&e(n,s)};G_PlatHelper.isHWPlatform()&&(t+=1,this.loadRandomVideoAd(e=>{e?console.log("preload video ad succ..."):console.log("preload video ad fail..."),n=!0,o()})),G_PlatHelper.isHWPlatform()||(t+=1,this.loadRandomNativeAd(e=>{e?console.log("preload native ad succ..."):console.log("preload native ad fail..."),e&&(s=!0),o()}))},registerAll:function(e){if(e){t=e,i=[],s=[],r=[],a=[];let n=function(e){return"string"==typeof e&&""!==e};for(let e=0;e<t.length;e++){let o=t[e];if(o&&n(o.key)&&n(o.posId)){if("Banner"===o.type){let e="show"+o.key+"BannerAd";this[e]=function(t){return G_PlatHelper.isOVPlatform()||console.log("call {0} func...".format(e)),this._doShowBanner(o.posId,t)}.bind(this),i.push(o)}if("Video"===o.type){let e="show"+o.key+"VideoAd";this[e]=function(t,i){return G_PlatHelper.isWINPlatform()&&console.log("call {0} func...".format(e)),this._doShowVideo(o.posId,t,i)}.bind(this),s.push(o)}if("Insert"===o.type){let e="show"+o.key+"InsertAd";this[e]=function(t){return G_PlatHelper.isWINPlatform()&&console.log("call {0} func...".format(e)),this._doShowInsertAd(o.posId,t)}.bind(this),r.push(o)}if("Native"===o.type){let e="load"+o.key+"NativeAd";this[e]=function(t){return G_PlatHelper.isWINPlatform()&&console.log("call {0} func...".format(e)),this._doLoadNativeAd(o.posId,t)}.bind(this),a.push(o)}}}}},hideOnShowBannerAd:function(){n&&n.hide()},destroyOnShowBannerAd:function(){n&&(n.destroy(),n=null)},showRandomBannerAd:function(e){if(i&&i.length>0){let t=G_Utils.random(0,i.length-1),n=i[t];if(n){let t=this["show"+n.key+"BannerAd"];if(t)return t.call(this,e)}}return null},showRandomVideoAd:function(e,t){if(s&&s.length>0){let i=G_Utils.random(0,s.length-1),n=s[i];if(n){let i=this["show"+n.key+"VideoAd"];if(i)return i.call(this,e,t)}}return null},showRandomInsertAd:function(e){if(r&&r.length>0){let t=G_Utils.random(0,r.length-1),i=r[t];if(i){let t=this["show"+i.key+"InsertAd"];if(t)return t.call(this,e)}}return null},loadRandomNativeAd:function(e){let t=0,i=Math.min(3,a.length),n=(e,t)=>{let i=a[e];if(i){let e=this["load"+i.key+"NativeAd"];e&&e.call(this,e=>{if(e){let t=!1;for(let i=0;i<l.length;i++)if(l[i]._adList[0].adId===e._adList[0].adId){t=!0;break}t||l.push(e)}"function"==typeof t&&t(e)})}},s=o=>{t+=1,n(o,n=>{if(n)"function"==typeof e&&e(n);else if(t<i){let e=o+1;e===a.length&&(e=0),s(e)}else"function"==typeof e&&e(null)})},o=G_Utils.random(0,a.length-1);s(o)},_doShowBanner:function(t,i=null){if(!e)return null;if(console.log("show banner: ",t),n)if(G_PlatHelper.isOPPOPlatform())n.destroy(),n=null;else if(G_ServerInfo.getServerTime()-n._lastCreatedTime>Yt)n.destroy(),n=null;else{let e=Yt/1e3-Math.floor((G_ServerInfo.getServerTime()-n._lastCreatedTime)/1e3);console.log("banner广告还未准备好，请{0}秒后重新尝试".format(e.toString()))}if(null===n){let e=null;if(G_PlatHelper.isOPPOPlatform())e=G_PlatHelper.getPlat().createBannerAd({posId:t});else if(G_PlatHelper.isMZPlatform()){let i=qg.getSystemInfoSync().screenHeight,n=qg.getSystemInfoSync().screenWidth;e=G_PlatHelper.getPlat().createBannerAd({adUnitId:t,style:{left:0,top:i-n/6.7,width:n,height:n/6.7}})}else e=G_PlatHelper.getPlat().createBannerAd({posId:t,style:{}});if("function"==typeof i&&(e._loadCb=i),(G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isMZPlatform())&&e.onLoad(function(){if(e&&e._loadCb){let t=e._loadCb;e._loadCb=null,t(e)}}),e.onError(function(e){console.error(e),(G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isMZPlatform())&&(n=null)}),(G_PlatHelper.isVIVOPlatform()||G_PlatHelper.isMZPlatform())&&e.onClose(function(){n=null}),(n=e)._lastCreatedTime=G_ServerInfo.getServerTime(),G_PlatHelper.isOPPOPlatform())if(e._loadCb){let t=e._loadCb;e._loadCb=null,t(e)}else e.show()}return n},loadRandomVideoAd:function(e){if(s&&s.length>0){let t=G_Utils.random(0,s.length-1),i=s[t];o||(o=this._doCreateVideoObj(i.posId)),G_PlatHelper.isHWPlatform()?o._isLoaded?"function"==typeof e&&e(!0):("function"==typeof e&&(o.loadCb=e),console.log("preload video: ",i.posId),o.load()):"function"==typeof e&&e(!1)}else"function"==typeof e&&e(!1)},_doShowVideo:function(t,i,n){if(!e)return null;if(o&&G_PlatHelper.isOPPOPlatform()&&(o.destroy(),o=null),null===o&&(o=this._doCreateVideoObj(t)),console.log("show video: ",t),"function"==typeof i&&(o.closeCb=i),"function"==typeof n&&(o.errCb=n),G_PlatHelper.isHWPlatform())o._isLoaded?(o._isLoaded=!1,o.show()):o.load();else if(G_PlatHelper.isOPPOPlatform())o.load();else if(o._lastShowedTime)if(console.log(G_ServerInfo.getServerTime(),"-",o._lastShowedTime),G_ServerInfo.getServerTime()-o._lastShowedTime>zt)o.load();else{let e=o.errCb;o.closeCb=null,o.errCb=null,e&&e(-1)}else o.load();return o},_doCreateVideoObj:function(e){let t=null;return(t=G_PlatHelper.isMZPlatform()||G_PlatHelper.isHWPlatform()?G_PlatHelper.getPlat().createRewardedVideoAd({adUnitId:e}):G_PlatHelper.getPlat().createRewardedVideoAd({posId:e})).onLoad(function(){if(G_PlatHelper.isHWPlatform()){if(console.log("load video ad succ..."),t._isLoaded=!0,t.loadCb){let e=t.loadCb;t.loadCb=null,e(!0)}}else t.show()}),t.onClose(function(i){t._lastShowedTime=G_ServerInfo.getServerTime(),G_PlatHelper.isMZPlatform()?console.log("激励视频广告完成，发放奖励"):i.isEnded?console.log("激励视频广告完成，发放奖励"):console.log("激励视频广告取消关闭，不发放奖励");let n=t.closeCb;t.closeCb=null,t.errCb=null,n&&(G_PlatHelper.isMZPlatform()?n(!0):n(i.isEnded)),G_PlatHelper.isHWPlatform()&&(console.log("preload video: ",e),t.load())}),t.onError(function(e){console.error(JSON.stringify(e));let i=t.errCb;t.closeCb=null,t.errCb=null,i&&i(-1)}),t._isLoaded=!1,t},_doShowInsertAd:function(t,i){if(!e)return null;console.log("show insert: ",t);let s=null;return s=G_PlatHelper.isMZPlatform()?G_PlatHelper.getPlat().createInsertAd({adUnitId:t}):G_PlatHelper.getPlat().createInsertAd?G_PlatHelper.getPlat().createInsertAd({posId:t}):G_PlatHelper.getPlat().createInterstitialAd({posId:t}),(G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isMZPlatform())&&s.onLoad(function(){n&&n.hide(),s.show(),console.log("show insert ad succ...")}),s.onClose(function(){"function"==typeof i&&i()}),s.onError(function(e){console.error(e)}),G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isMZPlatform()?(console.log("start to load insert ad..."),s.load()):s.show().then(()=>{console.log("show insert ad succ..."),n&&n.hide()}),s},_doLoadNativeAd:function(t,i){if(!e||G_PlatHelper.isMZPlatform())return null;console.log("load native: ",t);let n=null;n=G_PlatHelper.isHWPlatform()?G_PlatHelper.getPlat().createNativeAd({adUnitId:t}):G_PlatHelper.getPlat().createNativeAd({posId:t});let s=null;s=function(e){n.offLoad(s),n.offError(o),e.adList.length>0&&(e.adList.forEach(e=>{e.localAdID=G_Utils.generateString(32)}),n._adList=e.adList,"function"==typeof i&&i(n))};let o=null;return o=function(e){console.error(JSON.stringify(e)),n.offLoad(s),n.offError(o),"function"==typeof i&&i(null)},n.onLoad(s),n.onError(o),n.load(),n},isWatchingVideoAdv:()=>!(!o||!o.closeCb),getNextNativeAdInfo(){if(l.length>0)for(let e=l.length-1;e>=0;e--)l[e]||l.splice(e,1);if(l.length>0){let e=l;if(console.log("last used ad id: ",h),l.length>1&&""!==h){e=[];for(let t=0;t<l.length;t++)l[t]._adList[l[t]._adList.length-1].localAdID!==h&&e.push(l[t])}let t=e[G_Utils.random(0,e.length-1)],i=t._adList[t._adList.length-1];return h=i.localAdID,console.log("next used ad id: ",h),[t,i]}return this.loadRandomNativeAd(e=>{e?console.log("auto preload next native ad succ..."):console.log("auto preload next native ad fail...")}),null},reportNativeAdShow:function(e,t){console.log("just show native ad..."),e&&e.reportAdShow({adId:t})},reportNativeAdHide:function(){e&&(console.log("just hide native ad..."),G_PlatHelper.isHWPlatform()?l=[]:this.loadRandomNativeAd(e=>{e?console.log("auto preload next native ad succ..."):console.log("auto preload next native ad fail...")}))},reportNativeAdClick:function(e,t){if(console.log("just click native ad..."),e){if(e.reportAdClick({adId:t}),e._adList.pop(),0===e._adList.length)for(let t=0;t<l.length;t++)l[t]===e&&l.splice(t,1);G_PlatHelper.isHWPlatform()||this.reportNativeAdHide()}}}}()).init(),e}}}(),Jt={app_key:"wx9eabaac817e42f0d",company:"quyou"};void 0!==window.qq&&(Jt.app_key="1111111405"),void 0!==window.tt&&(Jt.app_key="tt18fc6e4187c7dfba"),void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("oppo")>-1&&(Jt.app_key="30520965"),void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("vivo")>-1&&(Jt.app_key=""),void 0!==window.mz&&window.mz.getProvider().toLowerCase().indexOf("meizu")>-1&&(Jt.app_key=""),void 0!==window.hbs&&(Jt.app_key="103419481"),void 0===window.conch&&void 0===window.jsb||void 0!==window.qg||(Jt.app_key="");var Zt={},$t=null,ei=!1;if(void 0!==window.qq?$t=window.qq:void 0!==window.tt?$t=window.tt:void 0!==window.mz?$t=window.mz:void 0!==window.hbs?$t=window.hbs:void 0!==window.qg?$t=window.qg:void 0!==window.wx?($t=window.wx,ei=!0):void 0!==window.jsb?$t=window.jsb:void 0!==window.conch&&($t=window.conch),$t){var ti=0;Zt.init=function(){console.log("start to load qy_plat sdk...");var e=function(e){return Object.prototype.toString(e).slice(8,-1).toLowerCase()},t=function(e){return"string"==typeof e&&""!==e},i=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()},n=function(e,i){t(e)?t(i)?"undefined"!=typeof Laya?Laya.LocalStorage.setItem(e,i):"undefined"!=typeof cc&&cc.sys.localStorage.setItem(e,i):console.error("setStorage Fail, only support string data..."):console.error("setStorage Fail, Check Input Key...")},s=function(e,i){if(!t(e))return console.error("getStorage Fail, Check Input Key..."),void 0!==i?i:null;let n=null;return"undefined"!=typeof Laya?n=Laya.LocalStorage.getItem(e):"undefined"!=typeof cc&&(n=cc.sys.localStorage.getItem(e)),null!==n&&""!==n||void 0===i?n:i},o=function(){return void 0!==window.qq||ei?new Promise(function(e,t){$t.login({success:function(t){_=t.code,e("")}})}):new Promise(function(e,t){e("")})},r=function(e,t){if("object"==typeof t){let i=null;if("undefined"!=typeof Laya?i=(new Laya.HttpRequest)._http:"undefined"!=typeof cc&&(i=cc.loader.getXMLHttpRequest()),i){if(i.open("POST",t.url,!0),console.log("req adv url: "+t.url),"function"==typeof t.complete&&(i.onreadystatechange=function(){2===i.readyState&&"function"==typeof t.complete&&t.complete()}),i.onload=function(){if(4===i.readyState){let e=null;if("function"==typeof(e=i.status>=200&&i.status<300?t.success:t.fail))try{e({data:JSON.parse(i.responseText),statusCode:i.status})}catch(t){e({data:i.responseText,statusCode:i.status})}}},i.timeout=1e4,i.ontimeout=function(e){console.error(e),"function"==typeof t.fail&&t.fail({data:null,statusCode:i.status})},i.onerror=function(e){console.error(e),"function"==typeof t.fail&&t.fail({data:null,statusCode:i.status})},i.setRequestHeader("au",Jt.company),"object"==typeof t.header)for(let e in t.header)i.setRequestHeader(e,t.header[e]);"form"===e?i.setRequestHeader("content-type","application/x-www-form-urlencoded"):i.setRequestHeader("content-type","application/json"),t.data?"form"===e?i.send(t.data):i.send(JSON.stringify(t.data)):i.send(null)}}},a=function(e){let t=s("qy_unsend_dict");if("string"==typeof t&&""!==t){let i=JSON.parse(t),s=!1;for(let t in i)if(t===e){s=!0,delete i[t];break}s&&n("qy_unsend_dict",JSON.stringify(i))}},l=function(){let e=null,i=s("qy_unsend_adv_infos");var n;"string"==typeof i&&""!==i&&(e=JSON.parse(i)),null!==e&&($t.h_SendEvent("expose",e),t(n="qy_unsend_adv_infos")?"undefined"!=typeof Laya?Laya.LocalStorage.removeItem(n):"undefined"!=typeof cc&&cc.sys.localStorage.removeItem(n):console.error("clearStorage Fail, Check Input Key..."))},h=function(e,i,n,s){if(!t(e)||e.length>255)return void console.error("上报事件名称必须为String类型且不能超过255个字符");let o="";"string"==typeof i?o=i:"object"==typeof i&&(o=JSON.stringify(i));let a={ak:Jt.app_key,uu:d,oid:"",cd:_,ev:"event",tp:e,ct:o,v:c,st:Date.now(),wsr:p};!function(e){if(e&&$t.getSystemInfoSync){let t=$t.getSystemInfoSync();t&&(e.br=t.brand,e.md=t.model,e.pr=t.pixelRatio,e.sw=t.screenWidth,e.sh=t.screenHeight,e.ww=t.windowWidth,e.wh=t.windowHeight,e.lang=t.language,e.wv=t.COREVersion,e.sv=t.system||"",e.wvv=t.platform||"",e.wsdk=t.platformVersion||"",e.fs=t.fontSizeSetting||"",e.bh=t.benchmarkLevel||"",e.bt=t.battery||"",e.wf=t.wifiSignal||"",e.lng="",e.lat="",e.nt=g,e.spd="",e.ufo="")}}(a),r("json",{url:u+"/NewReport/report.html",data:a,success:function(e){200===e.data.Status?(console.log("report to server succ..."),"function"==typeof n&&n()):(console.log("report to server fail..."),"function"==typeof s&&s())},fail:function(e){console.log("report to server fail..."),"function"==typeof s&&s()}})};t(Jt.app_key)||console.error("请在配置文件(qy-plat-config.js)中填写您的app_key"),Jt.app_key=Jt.app_key.replace(/\s/g,"");var c="1.0.0",d=function(){let e=s("qy_plat_uuid");return null!==e&&""!==e||(e=i(),n("qy_plat_uuid",e)),e}(),u="https://appapi.game.hnquyou.com/api";ei&&(u="https://api.game.hnquyou.com/api");var p={},_="",g="";$t.getLaunchOptionsSync&&(p=$t.getLaunchOptionsSync(),console.log("g_launchOpts: ",p)),console.log("g_uuid: ",d);var f=["h_GetAdvListPlat","h_ShowAdvs","h_ToMinProgram","h_SendEvent","h_JudgeRegion"],m={h_GetAdvListPlat:function(t){var i=Date.now(),n="object"===e(t)?t:{},s=n.adv_key?n.adv_key:"";r("form",{url:u+"/api/Sw/getAllAdvByIndexPlat.html",header:{appid:Jt.app_key},data:"key="+s+"&timelog="+i+"&platform=1&sign="+hex_md5("key:"+s+"platform:1timelog:"+i),success:function(e){"function"==typeof n.success&&n.success(e.data)},fail:function(e){"function"==typeof n.fail&&n.fail(e)},complete:function(){"function"==typeof n.complete&&n.complete()}})},h_ShowAdvs:function(e){!function(e){let t=null,i=s("qy_unsend_adv_infos");if("string"==typeof i&&""!==i&&(t=JSON.parse(i)),null===t&&(t={advs:[],timelog:Date.now()}),Array.isArray(e))e.forEach(e=>{t.advs.push({adv_id:e.adv_id,appid:e.appid,origin_path:e.origin_path?e.origin_path:e.logo_url.origin_path})});else if("object"==typeof e){let i=e;t.advs.push({adv_id:i.adv_id,appid:i.appid,origin_path:i.origin_path?i.origin_path:i.logo_url.origin_path})}n("qy_unsend_adv_infos",JSON.stringify(t))}(e)},h_ToMinProgram:function(i){var n="object"===e(i)?i:{},s=i.success,o=i.fail,r=Date.now();!t(n.pkgName)&&t(n.appid)&&(n.pkgName=n.appid),t(n.path)||(n.path=void 0);var a=function(e){$t.h_SendEvent("clickad",{adv_id:n.adv_id,origin_path:n.origin_path,timelog:r,type:e})};n.success=function(e){a(1),"function"==typeof s&&s(e)},n.fail=function(e){a(2),"function"==typeof o&&o(e)};let l=null;$t&&($t.navigateToMiniGame?l=$t.navigateToMiniGame:$t.navigateToMiniProgram&&(l=$t.navigateToMiniProgram)),l&&(a(0),l(n))},h_SendEvent:function(e,r){o().then(()=>{h(e,r,function(){!function(){if(ti>0)return;let e=s("qy_unsend_dict");if("string"==typeof e&&""!==e){let t=JSON.parse(e);for(let e in t){if(ti>=9)break;++ti;let i=t[e].event,n=t[e].data;o().then(()=>{h(i,n,function(){--ti,a(e)},function(){--ti})})}}}()},function(){!function(e,o){if(!t(Jt.app_key))return;let r=s("qy_unsend_dict"),a={};"string"==typeof r&&""!==r&&(a=JSON.parse(r)),a[i()]={event:e,data:o},n("qy_unsend_dict",JSON.stringify(a))}(e,r)})})},h_JudgeRegion:function(t){var i="object"===e(t)?t:{scene:1001};void 0===i.scene&&(i.scene=1001),r("form",{url:u+"/Product/judgeRegion.html",data:"appid="+Jt.app_key+"&scene="+i.scene.toString(),success:function(e){"function"==typeof i.success&&i.success(e.data)},fail:function(e){"function"==typeof i.fail&&i.fail(e)},complete:function(){"function"==typeof i.complete&&i.complete()}})}};for(let e=0;e<f.length;e++){let t=f[e],i=m[t];Object.defineProperty($t,t,{value:i,writable:!1,enumerable:!0,configurable:!0})}if($t.h_SendEvent){let e="qy_sdk_inited";ei&&(e="init"),($t.getNetworkType?new Promise(function(e,t){$t.getNetworkType({success:function(t){g=t.networkType?t.networkType:"",e("")},fail:function(){e("")}})}):new Promise(function(e,t){e("")})).then(()=>{$t.h_SendEvent(e),l(),setInterval(()=>{l()},6e4)})}}}else Zt.init=function(){console.log("qy_plat sdk not support on windows platform....")};var ii="4aa99dcc3a8db71d8f9aa280124f84ba",ni=!1,si=!0,oi="key_of_qy_ald_open_id",ri={};window.wx?ri.init=function(){function t(){var e="";try{e=wx.getStorageSync("aldstat_op")}catch(t){e=wx.getStorageSync("aldstat_op")}if(""===e){if(""===s)return"";try{_=e=wx.getStorageSync(s),e&&wx.setStorageSync("aldstat_op",e)}catch(t){_=e=wx.getStorageSync(s),e&&wx.setStorageSync("aldstat_op",e)}}return e}function u(e){var t={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,i){t["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==typeof e||"function"==typeof e?t[function(e){return Object.prototype.toString.call(e)}.call(e)]||"object":typeof e}function d(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function f(e,s){function r(){return new Promise(function(t,i){wx.request({url:"https://"+n+".aldwx.com/d.html",data:e,header:{se:p||"",op:_||"",img:G||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})}si&&t(),y++,e.as=P,e.at=v,e.rq_c=y,e.ifo=a,e.ak=ii,e.uu=l,e.v=i,e.st=Date.now(),e.ev=s,e.te=o,e.wsr=w,""!==function(e){if(void 0===e||""===e)return"";var t={};for(var i in e)"rawData"!=i&&"errMsg"!=i&&(t[i]=e[i]);return t}(e.ufo)&&(e.ufo=e.ufo),e.ec=m,si?""===_?L.push(r):(wx.Queue.push(r),L.concat()):wx.Queue.push(r)}function g(e){var t={};for(var i in e)t[i]=e[i];return t}function h(e){for(var t="",i=0;i<e.length;i++)e[i].length>t.length&&(t=e[i]);return t}console.log("start to load ald sdk...");var i="3.2.0",n="glog";""===ii&&console.error("请在配置文件(ald-game-config.js)中填写您的app_key"),si&&console.warn("提示：开启了useOpen配置后，如果不上传用户opendId则不会上报数据。"),ii=ii.replace(/\s/g,"");var s=oi,o="wg";wx.request({url:"https://"+n+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version>i&&console.warn("您的SDK不是最新版本，请尽快升级！"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var a="",l=function(){var e="";try{e=wx.getStorageSync("aldstat_uuid"),wx.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)a=!1;else{e=d(),a=!0;try{wx.setStorageSync("aldstat_uuid",e)}catch(e){wx.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),c={},p="",_=t(),m=0,y="",w=wx.getLaunchOptionsSync(),I=Date.now(),v=""+Date.now()+Math.floor(1e7*Math.random()),P=""+Date.now()+Math.floor(1e7*Math.random()),S=0,T="",G="",b=!0,C=!1,O=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],A=["payStart","paySuccess","payFail","die","revive","tools","award"],E=["complete","fail"],k=wx.getStorageSync("ald_level_time")||0,N=wx.getStorageSync("ald_level_session")||"";void 0===wx.Queue&&(wx.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(i,n){var s=function(){e.activeCount++,t().then(function(e){i(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?s():e.queue.push(s)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},wx.Queue.all());var L=new function(){this.request=[],this.push=function(e){this.request.length>=18?(this.request.shift(),this.request.push(e)):this.request.push(e)},this.concat=function(){this.request.map(function(e){wx.Queue.push(e)}),this.request=[]}};Promise.all([new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){G=h(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){ni?wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}):wx.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(wx.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(c.lat=e[2].latitude||"",c.lng=e[2].longitude||"",c.spd=e[2].speed||""):(c.lat="",c.lng="",c.spd=""),""!==e[1]?c.nt=e[1].networkType||"":c.nt="";var t=g(c);""!==e[0]&&(t.ufo=e[0],T=e[0]),f(t,"init")}),wx.onShow(function(e){if(w=e,S=Date.now(),!b&&!C){v=""+Date.now()+Math.floor(1e7*Math.random()),a=!1;try{wx.setStorageSync("ald_ifo",!1)}catch(e){}}b=!1,C=!1;var t=g(c),i=g(c);t.sm=S-I,e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(i.tp="ald_share_click",new Promise(function(e,t){"1044"==w.scene?wx.getShareInfo({shareTicket:w.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){i.ct=e,f(i,"event")})):e.query.ald_share_src&&(i.tp="ald_share_click",i.ct="1",f(i,"event")),f(t,"show")}),wx.onHide(function(){wx.setStorageSync("ald_level_session","");var e=g(c);e.dr=Date.now()-S,""===T?wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(t){e.ufo=t,T=t,G=h(t.userInfo.avatarUrl.split("/")),f(e,"hide")}}):f(e,"hide")}}):f(e,"hide")}),wx.onError(function(e){var t=g(c);t.tp="ald_error_message",t.ct=e,m++,f(t,"event")});var D={aldSendEvent:function(e,t){var i=g(c);if(""!==e&&"string"==typeof e&&e.length<=255)if(i.tp=e,"string"==typeof t&&t.length<=255)i.ct=String(t),f(i,"event");else if("object"==typeof t){if(JSON.stringify(t).length>=255)return void console.error("自定义事件参数不能超过255个字符");if(function(e){for(var t in e)if("object"==typeof e[t]&&null!==e[t])return!0;return!1}(t))return void console.error("事件参数，参数内部只支持Number,String等类型，请参考接入文档");for(var n in t)"number"==typeof t[n]&&(t[n]=t[n]+"s##");i.ct=JSON.stringify(t),f(i,"event")}else void 0===t||""===t?f(i,"event"):console.error("事件参数必须为String,Object类型,且参数长度不能超过255个字符");else console.error("事件名称必须为String类型且不能超过255个字符")},aldOnShareAppMessage:function(e){wx.onShareAppMessage(function(){C=!0;var t=e(),i="";i=void 0!==w.query.ald_share_src?void 0!==t.query?(w.query.ald_share_src.indexOf(l),t.query+"&ald_share_src="+w.query.ald_share_src+","+l):(w.query.ald_share_src.indexOf(l),"ald_share_src="+w.query.ald_share_src+","+l):void 0!==t.query?t.query+"&ald_share_src="+l:"ald_share_src="+l,"undefined"!=u(t.ald_desc)&&(i+="&ald_desc="+t.ald_desc),t.query=i;var n=g(c);return n.ct=t,n.ct.sho=1,n.tp="ald_share_chain",f(n,"event"),t})},aldShareAppMessage:function(e){C=!0;var t=e,i="";i=void 0!==w.query.ald_share_src?void 0!==t.query?(w.query.ald_share_src.indexOf(l),t.query+"&ald_share_src="+w.query.ald_share_src+","+l):(w.query.ald_share_src.indexOf(l),"ald_share_src="+w.query.ald_share_src+","+l):void 0!==t.query?t.query+"&ald_share_src="+l:"ald_share_src="+l;var n=g(c);"undefined"!=u(t.ald_desc)&&(i+="&ald_desc="+t.ald_desc),t.query=i,n.ct=t,n.tp="ald_share_chain",f(n,"event"),wx.shareAppMessage(t)},aldSendSession:function(e){if(""!==e&&e){var t=g(c);t.tp="session",t.ct="session",p=e,""===T?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){t.ufo=e,f(t,"event")}}):f(t,"event")}}):(t.ufo=T,""!==T&&(t.gid=""),f(t,"event"))}else console.error("请传入从后台获取的session_key")},aldSendOpenid:function(e){if(""!==e&&e){_=e,wx.setStorageSync("aldstat_op","openid");var t=g(c);t.tp="openid",t.ct="openid",f(t,"event")}else console.error("openID不能为空")}};wx.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32||isNaN(Number(e.stageId))?(console.warn("关卡stageId必须符合传参规则,请参考文档。"),!1):!("string"!==u(e.stageName)||e.stageName.length>32)||(console.warn("关卡名称为必传字段,且长度小于32个字符,请参考文档"),!1)}var t="",i="",n=0;this.onStart=function(s){if(e(s)){var o={};n=Date.now(),o.sid=s.stageId,o.snm=s.stageName,("string"===u(s.userId)&&s.userId)<32?o.uid=s.userId:o.uid="",o.state="start",i=d(),t=o,this.request()}},this.onRunning=function(i){if(e(i)){var n={params:{}};if(("string"===u(i.userId)&&i.userId)<32?n.uid=i.userId:n.uid="","string"!==u(i.event)&&-1===A.join(",").indexOf(i.event+","))return void console.warn("关卡running状态中仅支持"+A.join(",")+"事件类型，且为必传字段，详情请参考文档。");if(n.event=i.event,"object"!==u(i.params))return void console.warn("关卡running状态中params为必传字段，且该字段需为Object类型，详情请参考文档。");if("string"!==u(i.params.itemName)||i.params.itemName.length>32)return void console.warn("道具/商品名称为必传字段，且长度小于32个字符，详情请参考文档");n.params.itnm=i.params.itemName,"string"===u(i.params.itemId)&&i.params.itemId.length<32&&(n.params.itid=i.params.itemId),"number"===u(i.params.itemCount)&&toString(i.params.itemCount).length<32?n.params.itco=i.params.itemCount:n.params.itco=1,-1!==i.event.indexOf("pay")&&("number"===u(i.params.itemMoney)&&toString(i.params.itemMoney).length<32?n.params.money=i.params.itemMoney:n.params.money=0),"string"===u(i.params.desc)&&i.params.desc.length<64&&(n.params.desc=i.params.desc),n.state="running",n.sid=i.stageId,n.snm=i.stageName,t=n,this.request()}},this.onEnd=function(i){if(e(i)){var s={state:"end"};if(("string"===u(i.userId)&&i.userId)<32?s.uid=i.userId:s.uid="",!u(i.event)&&-1!==E.join(",").indexOf(i.event+","))return void E.join(",");s.sid=i.stageId,s.snm=i.stageName,s.event=i.event,s.sdr=0!==n?Date.now()-n:"",s.params={},"object"===u(i.params)&&"string"===u(i.params.desc)&&i.params.desc.length<64&&(s.params.desc=i.params.desc),t=s,this.request()}},this.request=function(){var e=g(c);t.ss=i,e.ct=t,f(e,"screen")}},wx.aldLevel=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.levelId)||e.levelId.length>32||isNaN(Number(e.levelId))?(console.warn("levelId必须符合传参规则,请参考文档。"),!1):!("string"!==u(e.levelName)||e.levelName.length>32)||(console.warn("levelName为必传字段,且长度小于32个字符,请参考文档"),!1)}var t="",i="",n=0;this.onInitLevel=function(n){if(e(n)){var s={};""==N?(i=d(),wx.setStorageSync("ald_level_session",i)):i=N,s.lid=n.levelId,s.lnm=n.levelName,("string"===u(n.userId)&&n.userId)<32?s.uid=n.userId:s.uid="",s.un=n.userName,s.state="init",t=s,this.request()}},this.onSetLevel=function(s){if(e(s)){var o={};i=d(),wx.setStorageSync("ald_level_session",i),o.lid=s.levelId,o.lnm=s.levelName,("string"===u(s.userId)&&s.userId)<32?o.uid=s.userId:o.uid="",o.un=s.userName,o.state="set",o.tmr=0!==k?Date.now()-k:"",n=Date.now(),wx.setStorageSync("ald_level_time",n),t=o,this.request()}},this.onPaySuccess=function(i){if(e(i)){var n={params:{}};if("object"!==u(i.params))return void console.warn("关卡paySuccess状态中params为必传字段，且该字段需为Object类型，详情请参考文档。");"number"===u(i.params.amount)&&toString(i.params.amount).length<32?n.params.am=i.params.amount:n.params.am=0,"string"===u(i.params.desc)&&i.params.desc.length<64&&(n.params.desc=i.params.desc),n.lid=i.levelId,n.lnm=i.levelName,("string"===u(i.userId)&&i.userId)<32?n.uid=i.userId:n.uid="",n.un=i.userName,n.state="paySuccess",t=n,this.request()}},this.onPayFail=function(i){if(e(i)){var n={params:{}};if("object"!==u(i.params))return void console.warn("关卡payFile状态中params为必传字段，且该字段需为Object类型，详情请参考文档。");"number"===u(i.params.amount)&&toString(i.params.amount).length<32?n.params.am=i.params.amount:n.params.am=0,"string"===u(i.params.desc)&&i.params.desc.length<64&&(n.params.desc=i.params.desc),n.lid=i.levelId,n.lnm=i.levelName,("string"===u(i.userId)&&i.userId)<32?n.uid=i.userId:n.uid="",n.un=i.userName,n.state="payFail",t=n,this.request()}},this.request=function(){var e=g(c);t.ls=i,e.ct=t,f(e,"level")}};for(var B=0;B<O.length;B++)!function(e,t){Object.defineProperty(wx,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(O[B],D[O[B]]);try{var M=wx.getSystemInfoSync();c.br=M.brand||"",c.md=M.model,c.pr=M.pixelRatio,c.sw=M.screenWidth,c.sh=M.screenHeight,c.ww=M.windowWidth,c.wh=M.windowHeight,c.lang=M.language,c.wv=M.version,c.sv=M.system,c.wvv=M.platform,c.fs=M.fontSizeSetting,c.wsdk=M.SDKVersion,c.bh=M.benchmarkLevel||"",c.bt=M.battery||"",c.wf=M.wifiSignal||"",c.lng="",c.lat="",c.nt="",c.spd="",c.ufo=""}catch(e){}}:ri.init=function(){console.log("ald sdk not support on windows platform....")};var ai="",li=!1,hi=!0,ci="key_of_qy_ald_open_id",di={};window.qq?di.init=function(){function t(){var e="";try{e=qq.getStorageSync("aldstat_op")}catch(t){e=qq.getStorageSync("aldstat_op")}if(""===e){if(""===a)return"";try{_=e=qq.getStorageSync(a),e&&qq.setStorageSync("aldstat_op",e)}catch(t){_=e=qq.getStorageSync(a),e&&qq.setStorageSync("aldstat_op",e)}}return e}function i(e){var t={};return"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e,i){t["[object "+e+"]"]=e.toLowerCase()}),null==e?e:"object"==typeof e||"function"==typeof e?t[function(e){return Object.prototype.toString.call(e)}.call(e)]||"object":typeof e}function c(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function f(e,i){function r(){return new Promise(function(t,i){qq.request({url:"https://"+s+".aldwx.com/d.html",data:e,header:{se:p||"",op:_||"",img:T||""},method:"GET",fail:function(){t("")},success:function(e){t(200==e.statusCode?"":"status error")}})})}hi&&t(),m++,e.as=v,e.at=I,e.rq_c=m,e.ifo=l,e.ak=ai,e.uu=d,e.v=n,e.st=Date.now(),e.ev=i,e.wsr=JSON.stringify(y),e.te=o,""!==function(e){if(void 0===e||""===e)return"";var t={};for(var i in e)"rawData"!=i&&"errMsg"!=i&&(t[i]=e[i]);return t}(e.ufo)&&(e.ufo=e.ufo),e.ec=g,hi?""===_?E.push(r):(qq.Queue.push(r),E.concat()):qq.Queue.push(r)}function h(e){var t={};for(var i in e)t[i]=e[i];return t}function q(e){for(var t="",i=0;i<e.length;i++)e[i].length>t.length&&(t=e[i]);return t}console.log("start to load ald qq sdk...");var n="2.0.0",s="qg.log",o="qg";qq,o="qg",wx=qq,""===ai&&console.error("请在配置文件(ald-qq-game-config.js)中填写您的app_key"),hi&&console.warn("提示：开启了useOpen配置后，如果不上传用户opendId则不会上报数据。"),ai=ai.replace(/\s/g,"");var a=ci;qq.request({url:"https://"+s+".aldwx.com/config/app.json",method:"GET",success:function(e){200===e.statusCode&&(e.data.version!=n&&console.warn("您的SDK不是最新版本，请尽快升级！"),e.data.warn&&console.warn(e.data.warn),e.data.error&&console.error(e.data.error))}});var l="",d=function(){var e="";try{e=qq.getStorageSync("aldstat_uuid"),qq.setStorageSync("ald_ifo",!0)}catch(t){e="uuid_getstoragesync"}if(e)l=!1;else{e=c(),l=!0;try{qq.setStorageSync("aldstat_uuid",e)}catch(e){qq.setStorageSync("aldstat_uuid","uuid_getstoragesync")}}return e}(),u={},p="",_=t(),g=0,m="",y=qq.getLaunchOptionsSync(),w=Date.now(),I=""+Date.now()+Math.floor(1e7*Math.random()),v=""+Date.now()+Math.floor(1e7*Math.random()),P=0,S="",T="",G=!0,b=!1,C=["aldSendEvent","aldOnShareAppMessage","aldShareAppMessage","aldSendSession","aldSendOpenid","aldLevelEvent"],O=["payStart","paySuccess","payFail","die","revive","tools","award"],A=["complete","fail"];void 0===qq.Queue&&(qq.Queue=new function(){this.concurrency=4,this.queue=[],this.tasks=[],this.activeCount=0;var e=this;this.push=function(t){this.tasks.push(new Promise(function(i,n){var s=function(){e.activeCount++,t().then(function(e){i(e)}).then(function(){e.next()})};e.activeCount<e.concurrency?s():e.queue.push(s)}))},this.all=function(){return Promise.all(this.tasks)},this.next=function(){e.activeCount--,e.queue.length>0&&e.queue.shift()()}},qq.Queue.all());var E=new function(){this.request=[],this.push=function(e){this.request.length>=18?(this.request.shift(),this.request.push(e)):this.request.push(e)},this.concat=function(){this.request.map(function(e){qq.Queue.push(e)}),this.request=[]}};Promise.all([new Promise(function(e,t){qq.getSetting({success:function(t){t.authSetting["scope.userInfo"]?qq.getUserInfo({success:function(t){T=q(t.userInfo.avatarUrl.split("/")),e(t)},fail:function(){e("")}}):e("")},fail:function(){e("")}})}),new Promise(function(e,t){qq.getNetworkType({success:function(t){e(t)},fail:function(){e("")}})}),new Promise(function(e,t){li?qq.getLocation({success:function(t){e(t)},fail:function(){e("")}}):qq.getSetting({success:function(t){t.authSetting["scope.userLocation"]?(qq.getLocation({success:function(t){e(t)},fail:function(){e("")}}),e("")):e("")},fail:function(){e("")}})})]).then(function(e){""!==e[2]?(u.lat=e[2].latitude||"",u.lng=e[2].longitude||"",u.spd=e[2].speed||""):(u.lat="",u.lng="",u.spd=""),""!==e[1]?u.nt=e[1].networkType||"":u.nt="";var t=h(u);""!==e[0]&&(t.ufo=e[0],S=e[0]),f(t,"init")}),qq.onShow(function(e){if((y=e).scene,e.scene,P=Date.now(),!G&&!b){I=""+Date.now()+Math.floor(1e7*Math.random()),l=!1;try{qq.setStorageSync("ald_ifo",!1)}catch(e){}}G=!1,b=!1;var t=h(u),i=h(u);t.sm=P-w,void 0!==e.query&&void 0!==e.query.ald_share_src&&e.shareTicket&&"1044"===e.scene?(i.tp="ald_share_click",new Promise(function(e,t){"1044"==y.scene?qq.getShareInfo({shareTicket:y.shareTicket,success:function(t){e(t)},fail:function(){e("")}}):e("")}).then(function(e){i.ct=e,f(i,"event")})):void 0!==e.query&&void 0!==e.query.ald_share_src&&(i.tp="ald_share_click",i.ct="1",f(i,"event")),""===S&&qq.getSetting({success:function(e){e.authSetting["scope.userInfo"]&&qq.getUserInfo({success:function(e){var t=h(u);t.ufo=JSON.stringify(e),S=e,T=q(e.userInfo.avatarUrl.split("/")),f(t,"ald_ufo")}})}}),f(t,"show")}),qq.onHide(function(){var e=h(u);e.dr=Date.now()-P,f(e,"hide")}),qq.onError(function(e){var t=h(u);t.tp="ald_error_message",t.ct=e,g++,f(t,"event")});var k={aldSendEvent:function(e,t){var i=h(u);if(""!==e&&"string"==typeof e&&e.length<=255)if(i.tp=e,"string"==typeof t&&t.length<=255)i.ct=String(t),f(i,"event");else if("object"==typeof t){if(JSON.stringify(t).length>=255)return void console.error("自定义事件参数不能超过255个字符");if(function(e){for(var t in e)if("object"==typeof e[t]&&null!==e[t])return!0;return!1}(t))return void console.error("事件参数，参数内部只支持Number,String等类型，请参考接入文档");for(var n in t)"number"==typeof t[n]&&(t[n]=t[n]+"s##");i.ct=JSON.stringify(t),f(i,"event")}else void 0===t||""===t?f(i,"event"):console.error("事件参数必须为String,Object类型,且参数长度不能超过255个字符");else console.error("事件名称必须为String类型且不能超过255个字符")},aldOnShareAppMessage:function(e){qq.onShareAppMessage(function(){b=!0;var t=e(),n="";n=void 0!==y.query&&void 0!==y.query.ald_share_src?void 0!==t.query?(y.query.ald_share_src.indexOf(d),t.query+"&ald_share_src="+y.query.ald_share_src+","+d):(y.query.ald_share_src.indexOf(d),"ald_share_src="+y.query.ald_share_src+","+d):void 0!==t.query?t.query+"&ald_share_src="+d:"ald_share_src="+d,"undefined"!=i(t.ald_desc)&&(n+="&ald_desc="+t.ald_desc),t.query=n;var s=h(u);return s.ct=t,s.ct.sho=1,s.tp="ald_share_chain",f(s,"event"),t})},aldShareAppMessage:function(e){b=!0;var t=e,n="";n=void 0!==y.query&&void 0!==y.query.ald_share_src?void 0!==t.query?(y.query.ald_share_src.indexOf(d),t.query+"&ald_share_src="+y.query.ald_share_src+","+d):(y.query.ald_share_src.indexOf(d),"ald_share_src="+y.query.ald_share_src+","+d):void 0!==t.query?t.query+"&ald_share_src="+d:"ald_share_src="+d;var s=h(u);"undefined"!=i(t.ald_desc)&&(n+="&ald_desc="+t.ald_desc),t.query=n,s.ct=t,s.tp="ald_share_chain",f(s,"event"),qq.shareAppMessage(t)},aldSendSession:function(e){if(""!==e&&e){var t=h(u);t.tp="session",t.ct="session",p=e,""===S?qq.getSetting({success:function(e){e.authSetting["scope.userInfo"]?qq.getUserInfo({success:function(e){t.ufo=e,f(t,"event")}}):f(t,"event")}}):(t.ufo=S,""!==S&&(t.gid=""),f(t,"event"))}else console.error("请传入从后台获取的session_key")},aldSendOpenid:function(e){if(!e||28!=e.length&&32!=e.length)console.error("openID不符合规则");else{_=e,qq.setStorageSync("aldstat_op",e);var t=h(u);t.tp="openid",t.ct="openid",f(t,"event")}}};qq.aldStage=new function(){function e(e){return!/^\d+(.\d+)*$/.test(e.stageId)||e.stageId.length>32?(console.warn("关卡stageId必须符合传参规则,请参考文档。"),!1):!("string"!==i(e.stageName)||e.stageName.length>32)||(console.warn("关卡名称为必传字段,且长度小于32个字符,请参考文档"),!1)}var t="",n="",s=0;this.onStart=function(o){if(e(o)){var r={};s=Date.now(),r.sid=o.stageId,r.snm=o.stageName,r.state="start",n=c(),t=r,("string"===i(o.userId)&&o.userId)<32&&(this.uid=o.uid),this.request()}},this.onRunning=function(n){if(e(n)){var s={params:{}};if(("string"===i(n.userId)&&n.userId)<32&&(this.uid=n.uid),O.join(",").indexOf(n.event+","),"string"!==i(n.event)||-1===O.join(",").indexOf(n.event+","))return void console.warn("关卡running状态中仅支持"+O.join(",")+"事件类型，且为必传字段，详情请参考文档。");if(s.event=n.event,"object"!==i(n.params))return void console.warn("关卡running状态中params为必传字段，且该字段需为Object类型，详情请参考文档。");if("string"!==i(n.params.itemName)||n.params.itemName.length>32)return void console.warn("道具/商品名称为必传字段，且长度小于32个字符，详情请参考文档");s.params.itnm=n.params.itemName,"string"===i(n.params.itemId)&&n.params.itemId.length<32&&(s.params.itid=n.params.itemId),"number"===i(n.params.itemCount)&&n.params.itemCount.length<32?s.params.itco=n.params.itemCount:s.params.itco=1,-1!==n.event.indexOf("pay")&&("number"===i(n.params.itemMoney)&&n.params.itemMoney.length<32?s.params.money=n.params.itemMoney:s.params.money=0),"string"===i(n.params.desc)&&n.params.desc.length<64&&(s.params.desc=n.params.desc),s.state="running",s.sid=n.stageId,s.snm=n.stageName,t=s,this.request()}},this.onEnd=function(n){if(e(n)){var o={state:"end"};if(("string"===i(n.userId)&&n.userId)<32&&(this.uid=n.uid),!i(n.event)&&-1!==A.join(",").indexOf(n.event+","))return void A.join(",");o.sid=n.stageId,o.snm=n.stageName,o.event=n.event,o.sdr=0!==s?Date.now()-s:"",o.params={},"object"===i(n.params)&&"string"===i(n.params.desc)&&n.params.desc.length<64&&(o.params.desc=n.params.desc),t=o,this.request()}},this.request=function(){var e=h(u);t.ss=n,e.ct=t,f(e,"screen")}};for(var N=0;N<C.length;N++)!function(e,t){Object.defineProperty(qq,e,{value:t,writable:!1,enumerable:!0,configurable:!0})}(C[N],k[C[N]]);try{var L=qq.getSystemInfoSync();u.br=L.brand||"",u.md=L.model,u.pr=L.pixelRatio,u.sw=L.screenWidth,u.sh=L.screenHeight,u.ww=L.windowWidth,u.wh=L.windowHeight,u.lang=L.language,u.wv=L.version,u.sv=L.system,u.wvv=L.platform,u.fs=L.fontSizeSetting,u.wsdk=L.SDKVersion,u.bh=L.benchmarkLevel||"",u.bt=L.battery||"",u.wf=L.wifiSignal||"",u.lng="",u.lat="",u.nt="",u.spd="",u.ufo=""}catch(e){}}:di.init=function(){console.log("ald qq sdk not support on windows platform....")};var ui=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_Reportor Instance...");var e={},t=[];return{registerAllEvents:function(t){t&&G_Utils.isObject(t)&&(e=t)},init:function(e){var t=this;G_SDKCfg.isAldReportEnabled(function(i){console.log("G_SDKCfg.isAldReportEnabled: ",i),i&&(t.enable("ald"),G_PlatHelper.getPlat()&&"function"==typeof G_PlatHelper.getPlat().aldSendOpenid&&G_PlatHelper.getPlat().aldSendOpenid(e))}),G_SDKCfg.isQyReportEnabled(function(e){console.log("G_SDKCfg.isQyReportEnabled: ",e),e&&t.enable("qy")})},enable:function(e){"ald"===e?G_PlatHelper.getPlat()&&(G_PlatHelper.getPlat().aldSendEvent||(G_PlatHelper.isQQPlatform()?di.init():G_PlatHelper.isWXPlatform()&&ri.init()),G_PlatHelper.getPlat().aldSendEvent&&t.push({type:e,sender:G_PlatHelper.getPlat().aldSendEvent})):"qy"===e&&G_PlatHelper.getPlat()&&(G_PlatHelper.getPlat().h_SendEvent||Zt.init(),G_PlatHelper.getPlat().h_SendEvent&&t.push({type:e,sender:G_PlatHelper.getPlat().h_SendEvent}))},report:function(e,t){this._checkEventName(e)&&(!t||t instanceof Object?(t||(t=void 0),this._doReport(e,t)):console.error("A Valid Param Must Be A Type Of Json Object."))},beginLevel:function(e){this._doReport("level",{level_id:e,type:0})},endLevel:function(e){this._doReport("level",{level_id:e,type:1})},failLevel:function(e){this._doReport("level",{level_id:e,type:2})},_doReport(e,i){for(let n=0;n<t.length;n++){let s=t[n];"function"==typeof s.sender&&s.sender(e,i)}console.log("Report Event {0} Succ!".format(e))},_checkEventName:function(t){for(let i in e){if("string"==typeof e[i]&&e[i]===t)return!0;if("object"==typeof e[i]&&0===t.indexOf(e[i].base))return!0}return t?console.error("Do Not Support Event Which Is Not Defined In Register EventNames, Event Name: {0}.".format(t)):console.error("Do Not Support Event Which Is Not Defined In Register EventNames, Event Name: undefined."),!1}}}()),e}}}(),pi={};pi.init=function(){console.log("开始初始化 QYSDK..."),window.G_Scheduler=Oe.getInstance(),window.G_Event=Ae.getInstance(),window.G_Utils=Ee.getInstance(),window.G_UIHelper=ke.getInstance(),window.G_PlatHelper=new Ye,G_PlatHelper.init(),console.log("当前平台为："+G_PlatHelper.getPlatDesc()),window.G_WXHelper=G_PlatHelper,window.G_AudioHelper=new nt,window.G_GameDB=De.getInstance(),G_GameDB.onLoad(function(){console.log("GameDB 初始化完成..."),window.G_SDKCfg=kt.getInstance(),G_SDKCfg.init(),G_SDKCfg.isOpenDataEnabled()&&(window.G_OpenHelper=Nt.getInstance()),G_SDKCfg.isNetwordEnabled()&&(window.G_WSHelper=Wt.getInstance()),G_SDKCfg.isHttpsEnabled()&&(window.G_HttpHelper=jt.getInstance()),window.G_NetHelper=qt.getInstance();let e=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HTTP_ADDR_OF_SERVER).str.split("||");G_NetHelper.registerBaseUrl(e[0],e[1]),window.G_Share=new ht,window.G_Adv=new wt,window.G_Subscriber=new bt,window.G_Recommend=Xt.getInstance(),window.G_OVAdv=Qt.getInstance(),window.G_NativeAdvMgr=At.getInstance(),window.G_NativeWXMgr=Et.getInstance(),window.G_Reportor=ui.getInstance()})},console.log("开始预先初始化 QYSDK..."),Ce.init();var _i={init:function(){let e={EN_FIRST_OPEN_MAIN_SCENE:"EN_FIRST_OPEN_MAIN_SCENE",EN_FIRST_START_GAME:"EN_FIRST_START_GAME",EN_SHOW_BANNER_AD:"EN_SHOW_BANNER_AD",EN_HIDE_BANNER_AD:"EN_HIDE_BANNER_AD",EN_MOVE_BANNER_AD:"EN_MOVE_BANNER_AD",EN_SHOW_OWN_BANNER_AD:"EN_SHOW_OWN_BANNER_AD",EN_HIDE_OWN_BANNER_AD:"EN_HIDE_OWN_BANNER_AD",EN_SHOW_INSERT_AD:"EN_SHOW_INSERT_AD",EN_SHOW_OWN_INSERT_AD:"EN_SHOW_OWN_INSERT_AD",EN_REFRESH_VIDEO_AD:"EN_REFRESH_VIDEO_AD",EN_REFRESH_FLOW_AD:"EN_REFRESH_FLOW_AD",EN_REFRESH_ONSHOW_FLOW_AD:"EN_REFRESH_ONSHOW_FLOW_AD",EN_CANCEL_NAVIGATION_FROM_AD:"EN_CANCEL_NAVIGATION_FROM_AD",EN_GOT_NAVIGATION_REDPACKAGE:"EN_GOT_NAVIGATION_REDPACKAGE"};for(let t in e)void 0===G_EventName[t]?G_EventName[t]=e[t]:console.error("Event Name: {0} Conflicted, It's Used By SDK...".format(t));let t={};for(let e in t)void 0===G_NotPropagationEventName[e]?G_NotPropagationEventName[e]=t[e]:console.error("Event Name: {0} Conflicted, It's Used By SDK...".format(e));window.G_FreeGetWay={FGW_NONE:"none",FGW_SHARE:"share",FGW_ADV:"adv"};let i={REN_NAVIGATE_SUCC_ON_TT_PLAT:"navigate_succ_on_tt_plat"};for(let e in i)void 0===G_ReportEventName[e]?G_ReportEventName[e]=i[e]:console.error("Report Name: {0} Conflicted, It's Used By SDK...".format(e));["res/conf/db/TBBaseConfig.txt","res/conf/db/TBUIWord.txt","res/conf/db/TBNetError.txt"].forEach(function(e){G_Dbs.push(e)});window.G_GameDBConfigs=[{key:"BaseConfig",getFunc:!0,getAllFunc:!0,getCountFunc:!1},{key:"UIWord",getFunc:!0,getAllFunc:!0,getCountFunc:!1},{key:"NetError",getFunc:!0,getAllFunc:!0,getCountFunc:!1}];window.G_advConfigs={splashAdUnitIDs:null,bannerAdUnitIDs:null,videoAdUnitIDs:null,interstitialAdUnitIDs:null};window.G_OVAdvConfigs=[],window.G_RecommendAdUnitIDs=null,window.G_BoxAdUnitIDs=null,window.G_BlockAdUnitIDs=null;window.G_ADCfg={Popup:"",Flow:"",Banner:"",Scroll:"",FullScene:"",FullSceneScroll:"",Exit:"",Finish:""},window.G_SupportMistakeTypes=null;window.G_PreDownloadAssets=[];window.G_PreloadAssets=[];window.G_SwitchName={SN_REWARD_TIMES_OF_EACH_DAY:"reward_times_of_each_day",SN_ADV_TIMES_BEFORE_SHARE:"adv_times_before_share",SN_RATE_OF_SHARE:"rate_of_share",SN_MIN_DURATION_BETWEEN_SHARE:"min_duration_between_share",SN_PERCENT_OF_REPORT_TO_ALD:"percent_of_report_to_ald",SN_DISABLE_EXPORT_ADV_CHIDS:"disable_export_adv_chids",SN_IS_PUBLISHING:"is_publishing",SN_COMMIT_VERSION:"commitVersion",SN_FORMAT_OF_OV_STATUS:"onlineMistakeStatusOf{0}",SN_FORMAT_OF_CV_STATUS:"commitMistakeStatusOf{0}",SN_TODAY_MAX_MISTAKE_COUNTS:"todayMaxMistakeCounts",SN_INVOKE_MISTAKE_RATE:"invokeMistakeRate",SN_INTERVAL_OF_MISTAKES:"intervalOfMistakes",SN_FORMAT_OF_INTERVAL_OF_MISTAKES:"intervalOf{0}Mistakes",SN_MOVE_MISTAKE_CFG:"moveMistakeCfg",SN_EXPORT_MOVE_MISTAKE_CFG:"exportMoveMistakeCfg",SN_CLICK_MISTAKE_CFG:"clickMistakeCfg",SN_BTN_MISTAKE_CFG:"btnMistakeCfg",SN_GAMING_BANNER_STATE_CFG:"gamingBannerCfg",SN_FAKE_LOADING_CFG:"fakeLoadingCfg",SN_GET_AUTO_RANDOM_NAV_PAGE_CFG:"autoRandomNavPagesCfg",SN_IS_EXPORT_AUTO_OPEN:"isExportAutoOpen",SN_IS_SIGN_AUTO_OPEN:"isSignAutoOpen",SN_IS_TRY_SKIN_AUTO_OPEN:"isTrySkinOpen",SN_WHEN_MORE_GAME_AUTO_OPEN_CFG:"isMoreGameOpen",SN_IS_NEW_GAME:"isNewGame"};window.G_ShareScene={SS_SYSTEM_MENU:"SystemMenu",SS_SHARE_APP:"ShareApp",SS_CUSTOMER_SERVER:"CustomerServer"};window.G_SoundName={SN_CLICK:"res/sounds/click.mp3"},window.G_BaseUrlPath="",window.G_AppNativefiles=["res/atlas/","res/conf/","ad/"],window.G_IsAllowLoginOffline=!0,window.G_IsUseOwnInsertAd=!1,void 0!==window.qg&&(G_IsUseOwnInsertAd=!0)}};class gi{constructor(){this.notLimitOpenLv=5,this.driverOpenLevel=5}static getIns(){return this.instance||(this.instance=new gi,this.instance.init()),this.instance}init(){}isOpen(){return!!G_PlatHelper.isWINPlatform()}isOpenNotLimit(){return!!this.isOpen()||we.getPlayerInfo().getShowLevelCount()>=this.notLimitOpenLv}getNotLimitOpenTips(){return"通关第{0}关开启!".format(this.notLimitOpenLv)}isOpenDriver(){return!!this.isOpen()||we.getPlayerInfo().getShowLevelCount()>=this.driverOpenLevel}getDriverOpenTips(){return"通关第{0}关开启!".format(this.driverOpenLevel)}}var fi={init:function(){_i.init();let e={EN_DIAM_CHANGE:"EN_DIAM_CHANGE",EN_COIN_CHANGED:"EN_COIN_CHANGED",EN_LACK_OF_COIN:"EN_LACK_OF_COIN",GAMESTART:"GAMESTART",END_CHECK_OVER:"END_CHECK_OVER",EN_GAME_REBORN:"EN_GAME_REBORN",EN_GAMEGOLD_CHANGE:"EN_GAMEGOLD_CHANGE",EN_CHANGE_STAR:"EN_CHANGE_STAR",EN_POWER_CHANGED:"EN_POWER_CHANGED",EN_CLOSEALLSTORE:"EN_CLOSEALLSTORE",EN_BEESPEEDUP:"EN_BEESPEEDUP",ENUPCONTAIN:"ENUPCONTAIN",EN_UPHURT:"EN_UPHURT",EN_SPEEDUPCHANGE:"EN_SPEEDUPCHANGE",EN_STRONGE_CHANGE:"EN_STRONGE_CHANGE",EN_REFERSH_POPBAR:"EN_REFERSH_POPBAR"};for(let t in e)void 0===G_EventName[t]?G_EventName[t]=e[t]:console.error("Event Name: {0} Conflicted, It's Used By SDK...".format(t));let t={};for(let e in t)void 0===G_NotPropagationEventName[e]?G_NotPropagationEventName[e]=t[e]:console.error("Event Name: {0} Conflicted, It's Used By SDK...".format(e));let i={EN_REBORN_AD:"EN_REBORN_AD",EN_SGIN_AD:"EN_SGIN_AD",EN_GAMESTART:"EN_GAMESTART",EN_GAMEEND:"EN_GAMEEND"};for(let e in i)void 0===G_ReportEventName[e]?G_ReportEventName[e]=i[e]:console.error("Report Name: {0} Conflicted, It's Used By SDK...".format(e));["res/conf/db/TBLevelConfig.txt","res/conf/db/TBPlayerConfig.txt","res/conf/db/TBSginConfig.txt","res/conf/db/TBQuality.txt","res/conf/db/TBTeach.txt","res/conf/db/TBDailyTask.txt","res/conf/db/TBBee.txt","res/conf/db/TBFlower.txt","res/conf/db/TBGrowUp.txt"].forEach(function(e){G_Dbs.push(e)});[{key:"LevelConfig",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"PlayerConfig",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"SginConfig",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"Quality",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"Teach",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"DailyTask",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"Bee",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"Flower",getFunc:!0,getAllFunc:!0,getCountFunc:!0},{key:"GrowUp",getFunc:!0,getAllFunc:!0,getCountFunc:!0}].forEach(function(e){G_GameDBConfigs.push(e)});let n={SN_BG:"res/online/GAudio/gameBg.mp3",SN_FAIL:"res/online/GAudio/fail.mp3",SN_SUCC:"res/online/GAudio/cheer.mp3",SN_Mp3:"res/online/GAudio/{0}.mp3"};for(let e in n)void 0===G_SoundName[e]?G_SoundName[e]=n[e]:console.error("Sound Name: {0} Conflicted, It's Used By SDK...".format(e));window.G_ResPath={resPath:"res/online/Sprites/Conventional/{0}.lh",itemPath:"prefab/item/{0}.json",skinPath:"res/online/Skin/icon/{0}.png",peoplePath:"res/online/Skin/people/{0}.png",scenePath:"res/online/Sprites/Conventional/GameScene.ls",trainTitle:"game/trainView/t{0}.png",trainIcon:"game/trainView/icon/icon{0}.png",minMapPoint:"game/gameView/{0}.png",skinChip:"res/online/Skin/skinChip/{0}.png",rareBoxPath:"game/rareBox/{0}.png",starPath:"game/skin/star/x{0}.png",scenePart:"res/online/Sprites/Conventional/{0}.ls"};[].forEach(function(e){G_PreloadAssets.push(e)});let s={SN_FORCEUPDATE:"ForceUpdate",SN_MISTAKE_DATA:"mistake_data",SN_INSERT_TYPE:"insert_type",SN_INSERT_INTERVAL:"insert_interval",SN_ISOPENAD:"isOpenAd",SN_INSERTADSHOWCOUNT:"insertAdShowCount",SN_EXITVIEW_SHOW:"exitview_show",SN_MOVE_DATA:"move_data",SN_FORECE_SELECT:"forece_select",SN_DELAYSHOWBTN:"delayShowBtn"};for(let e in s)void 0===G_SwitchName[e]?G_SwitchName[e]=s[e]:console.error("Switch Name: {0} Conflicted, It's Used By SDK...".format(e));let o={SS_GET_COIN:"SS_GET_COIN",SS_DOUBLE_COIN:"SS_DOUBLE_COIN",SS_REVIVE_BACK:"SS_REVIVE_BACK",SS_FREE_TRY:"SS_FREE_TRY"};for(let e in o)void 0===G_ShareScene[e]?G_ShareScene[e]=o[e]:console.error("Share Name: {0} Conflicted, It's Used By SDK...".format(e));G_BaseUrlPath="https://image.game.hnquyou.com/upload/LittleBee/v22/";["res/Scenes","game/","prefab/","loading/","sub/","sounds/","res/sounds/","res/tempConf/"].forEach(function(e){G_AppNativefiles.push(e)}),G_IsAllowLoginOffline=!1,G_IsUseOwnInsertAd=!1,G_LoginBtnPath="resources/***.png",G_IsAlwaysNewPlayer=!0,G_OpenID=null,G_SessID=null,G_Nickname="",G_Sex=0,G_HeadUrl="",void 0===window.hbs&&void 0===window.wx&&void 0===window.qq&&void 0===window.qg&&void 0===window.tt||(G_IsAlwaysNewPlayer=!1,G_OpenID=null,G_SessID=null,G_Nickname="",G_Sex=0,G_HeadUrl=""),void 0!==window.qg&&(G_IsUseOwnInsertAd=!0),window.G_levelID=0,window.G_BtnDoShowTime=25,window.G_IsShowTeach=!1,window.G_BtnDelayTime=2,window.G_BrnMoveTimer=.05,window.G_SkinId=1,window.G_InitDailyTaskId=1,window.G_CurDailySgin=1,window.G_InitMoney="0.00",window.G_ColGroup={player:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2,ray:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER6,item:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER1,enemy:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER4,enemyEye:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER7,playerLeg:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER3,enemyLeg:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER5,ob:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER8,wall:Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER9,all:Laya.Physics3DUtils.COLLISIONFILTERGROUP_ALLFILTER},window.G_AutoRecordVideo=!0,window.G_GameLayer={hint:9,ShowModel:10,player:11},window.GG_SoundName=G_SoundName,window.GG_EventName=G_EventName,window.G_IsInViewAd=!1,window.G_BannerCenterX=0,window.PropKey={hurt:"hurt",hp:"hp",def:"def",speed:"speed",defRate:"defRate",bounceHurt:"bounceHurt"},window.G_MaxStar=20}};let mi=function(){let e;function init(){let e={},t=0,i={},n=["Count"],s=function(e){return"string"==typeof e&&""!==e},o=function(e){return!!e&&"object"===Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},r=function(t){let i=null;return t in e&&(i=e[t]),i},a=function(t,i){for(let s=0;s<n.length;s++){let r=n[s];e[r]&&(o(t[r])?t[r][i]=e[r][i]:(t[r]={},t[r][i]=e[r][i]))}},l=function(e){let t=[];return e.forEach(e=>{if(s(e)){let i={};i[e]=e,t.push(i)}else o(e)&&t.push(e)}),t},h=function(e,t,n){let s=i[e];if(s){let o=null;s.cbs&&(o=s.cbs),delete i[e],o&&o.forEach(e=>{t&&n?(n.ret=!0,e(n)):e({ret:!1})})}},c=function(t,s,r){let a=i[t];if(a){if(a.tryTimes+=1,a.tryTimes>3)return void h(t,!1);G_PlatHelper.getPlat()&&"function"==typeof G_PlatHelper.getPlat().h_GetAdvListPlat?G_PlatHelper.getPlat().h_GetAdvListPlat({adv_key:t,success:i=>{200===i.Status?(!function(t,i,s){let r=t.Result.Info;for(let t=s.length-1;t>=0;t--){let n=s.splice(t,1)[0],o=Object.keys(n)[0],a=r[n[o]];Array.isArray(a)&&(e[o]=a,i[o]=a)}i.Status=200;let a=n.length;for(let s=0;s<a;s++){const r=n[s];let a=t.Result[r];if(!a)continue;let l=i[r];l=o(l)?l:{};let h=e[r];h=o(h)?h:{},Object.assign&&Object.assign(h,a),Object.assign&&Object.assign(l,a),e[r]=h,i[r]=l}}(i,s,r),h(t,!0,s)):(console.warn("广告数据请求失败",i),s.Status=i.Status,s.Result=i.Result,h(t,!1))},fail:e=>{console.warn("广告数据请求失败",e),s.Status=413,s.msg="请求服务器失败",c(t,s,r)}}):(console.warn("wx(qg).h_GetAdvListPlat 方法不存在，请检查 qy(-ov).js"),h(t,!1))}};return{getIconButtons(e,i){t=1,this.getEasyButtons(e,i)},getEasyButtons(e,t){let h=function(e){let t={};if(Array.isArray(e)){let i="";for(let t=0;t<e.length;t++){const s=e[t];if(!o(s))continue;let r=Object.keys(s)[0];-1!=n.indexOf(r)&&(i+=r+",")}""!=i?(t.Status=412,t.msg="广告位置 key 按对象方式传递时不能使用下列键名："+i):t.Status=200}else s(e)?t.Status=200:(t.Status=411,t.msg="广告位置 key 参数类型错误:"+e);return t}(e);if(200!==h.Status)return void("function"==typeof t&&t(h));let d=function(e){if(s(e)){let t=e.split(",");return l(t)}return Array.isArray(e)?l(e):[]}(e),u=function(e){let t={};for(let i=e.length-1;i>=0;i--){let n=e[i],s=Object.keys(n)[0];t[s]=r(s),a(t,n[s]),t[s]&&e.splice(i,1)}return t}(d);d.length>0?function(e,t,n){let s=n.map(e=>e[Object.keys(e)[0]]).join(),o=!1;void 0===i[s]&&(i[s]={tryTimes:0,cbs:[]},o=!0),"function"==typeof e&&i[s].cbs.push(e),o&&c(s,t,n)}(t,u,d):(u.Status=200,u.ret=!0,"function"==typeof t&&t(u))},getAllAdvData:()=>e}}return{getInstance:function(){return e||(e=init()),e}}}();window.G_ADVMgr=mi.getInstance();class yi{constructor(){this._cfgs=null,this._initedCbs={},this._isAdvStateNormal=null,this._isExportAdvEnabled=null,console.log("Init G_Switch Instance...")}__add(e,t){this._cfgs||(this._cfgs={}),void 0===this._cfgs[e]?this._cfgs[e]=t:console.error("G_Switch.addCfg: key: {0} has registered before...".format(e))}_add(e){if(e)for(let t in e)this.__add(t,e[t])}_checkString(e){return"string"==typeof e&&""!==e}_getCfgByKey(e,t){"function"==typeof t&&(this._checkString(e)||t(!1,""),this._cfgs?void 0!==this._cfgs[e]?t(!0,this._cfgs[e]):t(!1,""):this._initedCbs[e]=t)}addCfgs(e){this._add(e)}addCfg(e,t){this.__add(e,t)}inited(){for(let e in this._initedCbs)this._initedCbs[e](!0,this._cfgs[e]);this._initedCbs={},"function"==typeof this.onInited&&this.onInited()}getCommitVersion(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_COMMIT_VERSION,function(t,i){e(t?parseInt(i,10):0)})}getRewardTimesOfEachDay(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_REWARD_TIMES_OF_EACH_DAY,function(t,i){e(t?parseInt(i,10):G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_ADV_TIMES_OF_ONE_DAY).num)})}getRateOfShare(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_RATE_OF_SHARE,function(t,i){e(t?parseInt(i,10):100)})}getAdvTimesBeforeShare(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_ADV_TIMES_BEFORE_SHARE,function(t,i){e(t?parseInt(i,10):0)})}getPercentOfReportToAld(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_PERCENT_OF_REPORT_TO_ALD,function(t,i){e(t?parseInt(i,10):100)})}getMinDurationBetweenShare(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_MIN_DURATION_BETWEEN_SHARE,function(t,i){e(t?parseInt(i,10):3e3)})}isPublishing(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_IS_PUBLISHING,function(t,i){e(!!t&&1===parseInt(i,10))})}isNewGame(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_IS_NEW_GAME,function(t,i){e(!!t&&1===parseInt(i,10))})}isExportAdvEnabled(e,t){if("function"!=typeof t)return;let i=!1;"string"==typeof G_ADCfg[e]&&""!==G_ADCfg[e]&&(i=!0),G_PlatHelper.isWXPlatform()?null===this._isExportAdvEnabled?this._getCfgByKey(G_SwitchName.SN_DISABLE_EXPORT_ADV_CHIDS,function(e,n){if(e){let e=G_PlatHelper.getChannelID();if(""!==e){console.log("current channelID: ",e);let t=n.split("||");if(Array.isArray(t))for(let i=0;i<t.length;i++)if(t[i].toString()===e){this._isExportAdvEnabled=!1;break}null===this._isExportAdvEnabled&&(this._isExportAdvEnabled=!0)}else this._isExportAdvEnabled=!0}else this._isExportAdvEnabled=!0;t(this._isExportAdvEnabled&&i)}.bind(this)):t(this._isExportAdvEnabled&&i):G_PlatHelper.isWINPlatform()||G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isTTPlatform()?t(i):t(!1)}isAdvStateNormal(e,t){if("function"==typeof t)if(G_PlatHelper.getPlat()&&"function"==typeof G_PlatHelper.getPlat().h_JudgeRegion)if(e&&(this._isAdvStateNormal=null),null===this._isAdvStateNormal){var i=this;let e=void 0;G_PlatHelper.isOVPlatform()||G_PlatHelper.isNativePlatform()||(e=G_PlatHelper.getLaunchOptions().scene),G_PlatHelper.getPlat().h_JudgeRegion({scene:e,success:function(e){200===e.Status?(i._isAdvStateNormal=0===e.Result.Status,t(i._isAdvStateNormal)):t(!1)}})}else t(this._isAdvStateNormal);else console.warn("plat.h_JudgeRegion 方法不存在，请检查 qy(-plat).js"),t(!0)}isAdvStateNormalSync(){return!!G_PlatHelper.isWINPlatform()||null!==this._isAdvStateNormal&&this._isAdvStateNormal}isMistakeEnabled(e,t){if("function"!=typeof t)return;let i=!1;G_SupportMistakeTypes.forEach(t=>{e===t&&(i=!0)}),i||t(!1),this.getCommitVersion(function(i){i===G_SDKCfg.getAppVersion()?this._getCfgByKey(G_SwitchName.SN_FORMAT_OF_CV_STATUS.format(e.charAt(0).toUpperCase()+e.slice(1)),function(e,i){t(!!e&&1===parseInt(i,10))}):this._getCfgByKey(G_SwitchName.SN_FORMAT_OF_OV_STATUS.format(e.charAt(0).toUpperCase()+e.slice(1)),function(e,i){t(!!e&&1===parseInt(i,10))})}.bind(this))}getTodayMaxMistakeCounts(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_TODAY_MAX_MISTAKE_COUNTS,function(t,i){e(t?i:9999)})}getInvokeMistakeRate(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_INVOKE_MISTAKE_RATE,function(t,i){e(t?parseInt(i,10):100)})}getIntervalOfMistakes(e,t){if("function"!=typeof t)return;let i=function(e){this._getCfgByKey(G_SwitchName.SN_INTERVAL_OF_MISTAKES,function(t,i){e(t?parseInt(i,10):0)})}.bind(this),n=!1;G_SupportMistakeTypes.forEach(t=>{e===t&&(n=!0)}),n?this._getCfgByKey(G_SwitchName.SN_FORMAT_OF_INTERVAL_OF_MISTAKES.format(e.charAt(0).toUpperCase()+e.slice(1)),function(e,n){e?t(parseInt(n,10)):i(t)}):i(t)}getMoveMistakeConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_MOVE_MISTAKE_CFG,function(t,i){if(t){let t=i.split("||");e({hold1:1e3*parseFloat(t[0]),hold2:1e3*parseFloat(t[1]),move:1e3*parseFloat(t[2])})}else e({hold1:1500,hold2:2e3,move:300})})}getExportMoveMistakeConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_EXPORT_MOVE_MISTAKE_CFG,function(t,i){if(t){let t=i.split("||");e({delay:1e3*parseFloat(t[0]),stay:1e3*parseFloat(t[1])})}else e({delay:1500,stay:500})})}getClickMistakeConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_CLICK_MISTAKE_CFG,function(t,i){if(t){let t=i.split("||");4===t.length?e({gap:100,miniMinus:parseFloat(t[0]),maxMinus:parseFloat(t[0]),add:parseFloat(t[1]),target:parseFloat(t[2]),miniClick:parseInt(t[3].split("-")[0]),maxClick:parseInt(t[3].split("-")[1]),rate:30,duration:1500,firstShow:!1}):8===t.length?e({gap:parseInt(t[0]),miniMinus:parseFloat(t[1]),maxMinus:parseFloat(t[2]),add:parseFloat(t[3]),target:parseFloat(t[4]),miniClick:parseInt(t[5].split("-")[0]),maxClick:parseInt(t[5].split("-")[1]),rate:parseInt(100*t[6]),duration:parseInt(1e3*t[7]),firstShow:!1}):9===t.length&&e({gap:parseInt(t[0]),miniMinus:parseFloat(t[1]),maxMinus:parseFloat(t[2]),add:parseFloat(t[3]),target:parseFloat(t[4]),miniClick:parseInt(t[5].split("-")[0]),maxClick:parseInt(t[5].split("-")[1]),rate:parseInt(100*t[6]),duration:parseInt(1e3*t[7]),firstShow:1===parseInt(t[8])})}else e({gap:100,miniMinus:.06,maxMinus:.06,add:.2,target:.5,miniClick:1,maxClick:3,rate:30,duration:1500,firstShow:!1})})}getBtnMistakeConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_BTN_MISTAKE_CFG,function(t,i){if(t){let t=i.split("||");e({delay:1e3*parseFloat(t[0]),delay2:1e3*parseFloat(t[1]),stay:1e3*parseFloat(t[2])})}else e({delay:3e3,delay2:700,stay:2e3})})}getGamingBannerConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_GAMING_BANNER_STATE_CFG,function(t,i){if(t){let t=i.split("||");e({gap:1e3*parseFloat(t[0]),show:1e3*parseFloat(t[1])})}else e({gap:5e3,show:2e3})})}getFakeLoadingConfig(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_FAKE_LOADING_CFG,function(t,i){if(t){let t=i.split("||");e({time:1e3*parseFloat(t[0])})}else e({time:4e3})})}getAutoRandomNavPagesCfg(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_GET_AUTO_RANDOM_NAV_PAGE_CFG,function(t,i){if(t){let t=i.split("||");e(t)}else e([])})}isExportAutoOpen(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_IS_EXPORT_AUTO_OPEN,function(t,i){e(!!t&&1===parseInt(i,10))})}isSignAutoOpen(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_IS_SIGN_AUTO_OPEN,function(t,i){e(!!t&&1===parseInt(i,10))})}isTrySkinOpen(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_IS_TRY_SKIN_AUTO_OPEN,function(t,i){e(!!t&&1===parseInt(i,10))})}getMoreGameOpenCfg(e){"function"==typeof e&&this._getCfgByKey(G_SwitchName.SN_WHEN_MORE_GAME_AUTO_OPEN_CFG,function(t,i){e(t?parseInt(i,10):0)})}getConfigByKey(e){return this._cfgs&&void 0!==this._cfgs[e]?this._cfgs[e]:null}}window.G_Switch=new class extends yi{constructor(){super()}onInited(){}};var wi=function(){var e;return{getInstance:function(){return e||(console.log("Init G_FreeGetMgr Instance..."),e={getNextFreeGetWay:function(e){"function"==typeof e&&(G_PlatHelper.isOVPlatform()||G_PlatHelper.isHWPlatform()?G_OVAdv.isSupportVideo()?e(G_FreeGetWay.FGW_ADV):e(G_FreeGetWay.FGW_NONE):G_PlatHelper.isTTPlatform()?G_Adv.isSupportVideoAd()?e(G_FreeGetWay.FGW_ADV):e(G_FreeGetWay.FGW_NONE):G_PlatHelper.isQTTPlatform()?e(G_FreeGetWay.FGW_ADV):G_PlatHelper.isMZPlatform()?e(G_FreeGetWay.FGW_ADV):G_PlatHelper.isNativePlatform()?e(G_FreeGetWay.FGW_ADV):G_PlayerInfo.isNoMoreAdvTimesToday(function(t){t?e(G_FreeGetWay.FGW_NONE):G_Switch.isPublishing(function(t){t?G_Adv.isSupportVideoAd()?e(G_FreeGetWay.FGW_ADV):e(G_FreeGetWay.FGW_NONE):G_Switch.getAdvTimesBeforeShare(function(t){G_PlayerInfo.getTodayAdvTimes()<t?G_Adv.isSupportVideoAd()?e(G_FreeGetWay.FGW_ADV):e(G_FreeGetWay.FGW_SHARE):G_Adv.isSupportVideoAd()?G_Switch.getRateOfShare(function(t){G_Utils.random(1,100)<=t?e(G_FreeGetWay.FGW_SHARE):e(G_FreeGetWay.FGW_ADV)}):e(G_FreeGetWay.FGW_SHARE)})})}))}}),e}}}();window.G_FreeGetMgr=wi.getInstance();var Ii=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_NodePoolMgr Instance...");var e={},t=[],i={},n={},s=0,o=[];return{preload(e,t){let i=0,n=e.length,s=()=>{++i==n&&t&&t()};for(let t=0;t<e.length;t++)this.getAsset[e[t]]?s():this.loadAsset(e[t],s)},getNode(e){let t=this.getRecycleNode(e);if(t)t.active=!0;else{let i=this.getAsset(e);if(!i)return console.error("没有预加载该对象:",e),null;t=Laya.Sprite3D.instantiate(i,null,!1)}return t},loadAsset(i,n){if(this.hasInLoad(i))this.addInLoadFun(i,n);else{if(s>=6)return this.addInReady(i),void this.addInLoadFun(i,n);t.push(i),this.addInLoadFun(i,n),s++,Laya.Sprite3D.load(i,Laya.Handler.create(null,t=>{e[i]=t,this.removeInLoadAsset(i),s--,this.checkLoad()}))}},addInReady(e){o.indexOf(e)<0&&o.push(e)},checkLoad(){if(!(s>=6)&&0!=o.length)for(let e=0;e<o.length;e++){if(s>=6)return;this.loadAsset(o.shift())}},hasInLoad:e=>t.indexOf(e)>=0,addInLoadFun(e,t){t&&(i[e]||(i[e]=[]),i[e].push(t))},removeInLoadAsset(e){if(i[e]){let t=i[e];for(let e=0;e<t.length;e++)t[e]();i[e]=null}let n=t.indexOf(e);n>=0&&t.splice(n,1)},getAsset:t=>e[t],recycleNode(e,t){if(!t)return;n[e]||(n[e]=[]),t.active=!1;let i=n[e];i.indexOf(t)<0&&i.push(t)},getRecycleNode:e=>n[e]&&0!=n[e].length?n[e].shift():null,canRecycle(e){},printAssets(){console.log(e)}}}()),e}}}();window.G_NodePoolMgr=Ii.getInstance();var vi="Server_Time_Tick",Pi=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_ServerInfo Instance...");var e=!1,t=0,i=0,n=0,s=0;return{load:function(t){e=!1,G_PlatHelper.canLoginOnline()&&G_NetHelper?G_NetHelper.reqGetServerTime(function(i){i&&0===i.code?(e=!0,this._registerServerTime(parseInt(i.time,10)),"function"==typeof t&&t()):G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}.bind(this)):(this._registerServerTime(Math.round(new Date/1e3)),"function"==typeof t&&t())},passedOneDay:function(){s+=1,console.log("have passed {0} days".format(s.toString()))},reload:function(e){this._unregisterServerTime(),this.load(function(){"function"==typeof e&&e()})},_registerServerTime:function(s){console.log("server time: ",s),i=Date.now(),n=t=1e3*s,G_Scheduler.schedule(vi,function(){e&&(t=n+Date.now()-i)},!0)},_unregisterServerTime:function(){e&&(e=!1,t=0,i=0,n=0,G_Scheduler.unschedule(vi))},getServerTime:function(){return e?t:Date.now()},getServerDate:function(){return e?new Date(t):new Date},getCurServerDayOfWeek:function(){let e=this.getServerDate().getDay();return 0===e&&(e=7),e},getCurServerDayOfMonth:function(){return this.getServerDate().getDate()},getCurServerDayOfYear:function(){let e=this.getServerDate(),t=new Date(e.getFullYear(),0,0),i=e-t+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)+s},getCurServerWeekOfYear:function(){var e=this.getServerDate(),t=new Date(e.valueOf()),i=(e.getDay()+6)%7;t.setDate(t.getDate()-i+3);var n=t.valueOf();return t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t)/6048e5)}}}()),e}}}();window.G_ServerInfo=Pi.getInstance();var Si=function(){var e;return{getInstance:function(){return e||(console.log("Init G_SoundMgr Instance..."),e={loadSound:function(e,t){G_AudioHelper.loadSound(e,t)},playSound:function(e,t=1){G_PlayerInfo.isSoundEnable()&&(e=this._fixSoundUrl(e),G_AudioHelper.playSound(e,t))},playSoundWithRate:function(e,t=1,i=1){G_PlayerInfo.isSoundEnable()&&(e=this._fixSoundUrl(e),G_AudioHelper.playSound(e,t,i))},stopSound:function(e){e=this._fixSoundUrl(e),G_AudioHelper.stopSound(e)},stopAllSounds:function(){G_AudioHelper.stopAllSounds()},loadMusic:function(e,t){G_AudioHelper.loadMusic(e,t)},playMusic:function(e,t,i){e=this._fixSoundUrl(e),G_PlayerInfo.isSoundEnable()?G_AudioHelper.playMusic(e,t,i):G_AudioHelper.setMusicInfo(e,i)},playMusicWithRate:function(e,t,i,n){e=this._fixSoundUrl(e),G_PlayerInfo.isSoundEnable()?G_AudioHelper.playMusic(e,i,n,t):G_AudioHelper.setMusicInfo(e,n,t)},stopMusic:function(e){G_AudioHelper.stopMusic(e)},pauseMusic:function(){G_AudioHelper.pauseMusic()},resumeMusic:function(){G_PlayerInfo.isSoundEnable()&&G_AudioHelper.resumeMusic()},getCurMusicTime:()=>G_AudioHelper.getCurMusicTime(),setSoundEnable:function(e){G_PlayerInfo.isSoundEnable()!==e&&(G_PlayerInfo.setSoundEnable(e),e&&G_AudioHelper.isMusicUrlValid()?G_AudioHelper.resumeMusic():!e&&G_AudioHelper.isMusicUrlValid()&&G_AudioHelper.pauseMusic())},isSoundEnable:function(){return G_PlayerInfo.isSoundEnable()},_fixSoundUrl(e){if(G_PlatHelper.getPlat()&&""!==G_BaseUrlPath){let t=!1;if(G_AppNativefiles.length>0)for(let i=0;i<G_AppNativefiles.length;i++){let n=G_AppNativefiles[i];if(-1!==e.indexOf(n)){t=!0;break}}t||(e=G_BaseUrlPath+e)}return G_PlatHelper.isNativePlatform()&&-1!==e.indexOf(".mp3")&&(e=e.substring(0,e.indexOf(".mp3"))+".wav"),e}}),e}}}();window.G_SoundMgr=Si.getInstance();const Ti="storage_key_of_mistake_info";var Gi=function(){var e;function init(){console.log("Init G_MistakeMgr Instance...");var e=!1,t={},i={},n={},s={},o=0,r={};return{init:function(a){G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(e=>{t[e]=0,i[e]=0,n[e]=!1,s[e]=0,r[e]=0}),G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(s=>{let o="is"+s.charAt(0).toUpperCase()+s.slice(1)+"MistakeEnabledAsync";this[o]=(()=>{if(!e)return!1;if(!n[s])return!1;t[s]+=1;let o=this._checkMaxkInvokeCount(s)&&this._checkInvokeRate()&&this._checkInvokeInterval(s);return o&&(i[s]+=1),function(){let e={saveDay:G_ServerInfo.getCurServerDayOfYear()};G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(n=>{e["checkedCount_{0}".format(n)]=t[n],e["invokedCount_{0}".format(n)]=i[n]}),G_PlatHelper.setStorage(Ti,JSON.stringify(e))}(),o}),this["is"+s.charAt(0).toUpperCase()+s.slice(1)+"MistakeEnabled"]=(e=>{if("function"!=typeof e)return;e(this[o]())})}),function(){let e=G_PlatHelper.getStorage(Ti),n=!1;if(e&&""!==e){let s=JSON.parse(e),o=function(e,t=0){return void 0!==s[e]?s[e]:t};o("saveDay")===G_ServerInfo.getCurServerDayOfYear()&&G_SupportMistakeTypes.length>0&&(G_SupportMistakeTypes.forEach(e=>{t[e]=o("checkedCount_{0}".format(e)),i[e]=o("invokedCount_{0}".format(e))}),n=!0)}n||G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(e=>{t[e]=0,i[e]=0})}(),G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(e=>{console.log("{0} checked count: ".format(e),t[e]),console.log("{0} invoked count: ".format(e),i[e])});let l=[];l.push(new Promise(function(t,i){G_Switch.isAdvStateNormal(!1,function(i){console.log("is in enable area:",i),e=i,t(i)})})),G_SupportMistakeTypes.length>0&&(G_SupportMistakeTypes.forEach(e=>{let t=G_Switch.isMistakeEnabled;t&&l.push(new Promise(function(i,s){t.call(G_Switch,e,t=>{console.log("is {0} eanbled:".format(e),t),n[e]=t,i(t)})}))}),l.push(new Promise(function(e,t){G_Switch.getTodayMaxMistakeCounts(function(t){if("string"==typeof t&&-1!==t.indexOf("||")){G_SupportMistakeTypes.forEach(e=>{s[e]=999});let e=t.split("||");for(let t=0;t<e.length;t++){let i=e[t].split(":")[0],n=!1;G_SupportMistakeTypes.forEach(e=>{i===e&&(n=!0)}),n&&(s[i]=parseInt(e[t].split(":")[1],10),console.log("today max invoke count of {0}:".format(i),s[i]))}}else G_SupportMistakeTypes.forEach(e=>{s[e]=parseInt(t,10)}),console.log("today max invoke count:",parseInt(t,10));e(t)})}))),l.push(new Promise(function(e,t){G_Switch.getInvokeMistakeRate(function(t){console.log("invoke rate:",t),o=t,e(t)})})),G_SupportMistakeTypes.length>0&&G_SupportMistakeTypes.forEach(e=>{l.push(new Promise(function(t,i){G_Switch.getIntervalOfMistakes(e,function(i){console.log("{0} invoke inverval:".format(e),i),r[e]=i,t(i)})}))}),Promise.all(l).then(function(){console.log("init mistake mgr state succ..."),"function"==typeof a&&a()}).catch(function(e){console.error(e),G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})},_checkMaxkInvokeCount:function(e){return void 0!==i[e]&&void 0!==s[e]&&i[e]<s[e]},_checkInvokeRate:function(){return G_Utils.random(1,100)<=o},_checkInvokeInterval:function(e){if(void 0!==r[e]&&void 0!==t[e]){let i=r[e],n=t[e];return 0===i||n%(i+1)==1}return!1}}}return{getInstance:function(){return e||(e=init()),e}}}();window.G_MistakeMgr=Gi.getInstance();class bi extends Laya.Script{constructor(){super(),this._rootNode=void 0,this._callbacks={},this._openType="none",this._closeType="none"}showUI(){this.owner.visible=!0,arguments.length>0?this._onInit(...arguments):this._onInit(),"scale"===this._openType?this._runScaleOpenAction(()=>{this._onShow()}):"fromLeft"===this._openType?this._runFromLeftOpenAction(()=>{this._onShow()}):"fromBottom"===this._openType?this._runFromBottomOpenAction(()=>{this._onShow()}):"opacity"===this._openType?this._runOpacityOpenAction(()=>{this._onShow()}):this._onShow()}hideUI(){"scale"===this._closeType?this._runScaleCloseAction(()=>{this._onHide()}):"opacity"===this._closeType?this._runOpacityCloseAction(()=>{this._onHide()}):this._onHide()}isOnShow(){let e=t=>!(!t||!t.visible)&&(t.parent?e(t.parent):t===Laya.stage);return e(this.owner)}_onInit(){this._rootNode&&(this._rootNode.pivotX=this._rootNode.width/2,this._rootNode.pivotY=this._rootNode.height/2,this._rootNode.parent?(this._rootNode.x=this._rootNode.parent.width/2,this._rootNode.y=this._rootNode.parent.height/2):(this._rootNode.x=Laya.stage.width/2,this._rootNode.y=Laya.stage.height/2),this._rootNode.alpha=1),"function"==typeof this.onInit&&(arguments.length>0?this.onInit(...arguments):this.onInit())}_onShow(){this._rootNode&&this._rootNode._baseTween&&(this._rootNode._baseTween.clear(),this._rootNode._baseTween=null),"function"==typeof this.onShow&&this.onShow()}_onHide(){"function"==typeof this.onHide&&this.onHide(),this.owner.visible=!1,this.invokeCallback("close")}_runScaleOpenAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.scaleX=.8,t.scaleY=.8,t._baseTween=Laya.Tween.to(t,{scaleX:1,scaleY:1},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}_runFromLeftOpenAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.x=Laya.stage.width/3,t._baseTween=Laya.Tween.to(t,{x:Laya.stage.width/2},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}_runFromBottomOpenAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.y=Laya.stage.height/4,t._baseTween=Laya.Tween.to(t,{y:Laya.stage.height-t.height},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}_runOpacityOpenAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.alpha=0,t._baseTween=Laya.Tween.to(t,{alpha:1},400,null,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}_runScaleCloseAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.scaleX=1,t.scaleY=1,t._baseTween=Laya.Tween.to(t,{scaleX:.1,scaleY:.1},500,Laya.Ease.elasticOut,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}_runOpacityCloseAction(e){if(this._rootNode){let t=this._rootNode;t._baseTween&&(t._baseTween.clear(),t._baseTween=null),t.alpha=1,t._baseTween=Laya.Tween.to(t,{alpha:0},400,null,Laya.Handler.create(null,function(){t._baseTween=null,"function"==typeof e&&e()}))}}registerCallback(e,t){this._checkString(e)&&(void 0===this._callbacks[e]&&(this._callbacks[e]=[]),this._callbacks[e].push(t))}unregisterCallback(e,t){if(this._checkString(e)&&void 0!==this._callbacks[e])if(t){let i=this._callbacks[e],n=i.indexOf(t);n>-1&&i.splice(n,1)}else this._callbacks[e]=[]}invokeCallback(e){if(this._checkString(e)&&void 0!==this._callbacks[e]){let t=[].concat(this._callbacks[e]),i=Array.prototype.slice.call(arguments);i.shift();for(let e=0;e<t.length;e++){t[e].apply(null,i)}}}_checkString(e){return"string"==typeof e&&""!==e}}class Ci extends bi{constructor(){super(),this._bg=null,this._content=null,this._maxContendWidth=.8*Laya.stage.width}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI(),this._doClean()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"bg");e&&(this._bg=e);let t=G_UIHelper.seekNodeByName(this.owner,"content");t&&(this._content=t)}onInit(e){this._doClean(),this._content.x=15,this._content.y=15,this._content.width=0,this._content.wordWrap=!1,this._content.text=e,this._content.width>this._maxContendWidth&&(this._content.width=this._maxContendWidth,this._content.wordWrap=!0),this._bg.width=this._content.width+30,this._bg.height=this._content.height+30,this._bg.pivotX=this._bg.width/2,this._bg.pivotY=this._bg.height/2,this._bg.x=this.owner.width/2,this._bg.y=this.owner.height/2,this._bg._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(this._bg._scheduleKey,()=>{this._bg._scheduleKey=null,G_UIManager.hideUI("tips")},!1,2e3,1)}onHide(){this._doClean()}_doClean(){this._bg._scheduleKey&&(G_Scheduler.unschedule(this._bg._scheduleKey),this._bg._scheduleKey="")}}class Oi extends bi{constructor(){super(),this._bg=null,this._title=null,this._content=null,this._cancelBtn=null,this._confirmBtn=null,this._singleConfirmBtn=null,this._cb=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"bg");e&&(this._bg=e);let t=G_UIHelper.seekNodeByName(this.owner,"title");t&&(this._title=t);let i=G_UIHelper.seekNodeByName(this.owner,"content");i&&(this._content=i);let n=G_UIHelper.seekNodeByName(this.owner,"cancelBtn");n&&(n.on("click",null,function(){this.onCancelTouched(n)}.bind(this)),this._cancelBtn=n);let s=G_UIHelper.seekNodeByName(this.owner,"confirmBtn");s&&(s.on("click",null,function(){this.onConfirmTouched(s)}.bind(this)),this._confirmBtn=s);let o=G_UIHelper.seekNodeByName(this.owner,"singleConfirmBtn");o&&(o.on("click",null,function(){this.onConfirmTouched(o)}.bind(this)),this._singleConfirmBtn=o)}onInit(e){this._cb=e.cb,this._title&&(e.title?(this._title.visible=!0,this._title.text=e.title,this._bg&&(this._bg.height=266)):(this._title.visible=!1,this._bg&&(this._bg.height=226))),this._content&&e.content&&(this._content.text=e.content),this._cancelBtn&&(e.cancelText?this._cancelBtn.label=e.cancelText:this._cancelBtn.label="取消",e.cancelColor?this._cancelBtn.labelColors=e.cancelColor+","+e.cancelColor+","+e.cancelColor:this._cancelBtn.labelColors="#000000,#000000,#000000"),[this._confirmBtn,this._singleConfirmBtn].forEach(t=>{e.confirmText?t.label=e.confirmText:t.label="确定",e.confirmColor?t.labelColors=e.confirmColor+","+e.confirmColor+","+e.confirmColor:t.labelColors="#576B95,#576B95,#576B95"}),e.showCancel?(this._cancelBtn.visible=this._confirmBtn.visible=!0,this._singleConfirmBtn.visible=!1):(this._cancelBtn.visible=this._confirmBtn.visible=!1,this._singleConfirmBtn.visible=!0)}onCancelTouched(){G_UIManager.hideUI("modal"),"function"==typeof this._cb&&this._cb(!1)}onConfirmTouched(){G_UIManager.hideUI("modal"),"function"==typeof this._cb&&this._cb(!0)}}var Ai=14;class Ei extends bi{constructor(){super(),this._bg=null,this._icon=null,this._content=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"bg");e&&(this._bg=e);let t=G_UIHelper.seekNodeByName(this.owner,"icon");t&&(t.rotateForever=function(){t._isRotating||(t._isRotating=!0,G_Scheduler.schedule("Rotate_Of_Loading_Icon",()=>{t.rotation=(t.rotation-45)%360},!1,100))},t.stopRotate=function(){t._isRotating&&(t._isRotating=!1,t.rotation=0,G_Scheduler.unschedule("Rotate_Of_Loading_Icon"))},t._isRotating=!1,this._icon=t);let i=G_UIHelper.seekNodeByName(this.owner,"content");i&&(this._content=i)}onShow(){this._icon&&this._icon.rotateForever()}onInit(e){this._content&&(this._content.text=G_Utils.cutString(e,Ai))}onHide(){this._icon&&this._icon.stopRotate()}}class ki extends bi{constructor(){super(),this._inited=!1,this._sp=null,this._savedCaptureFilePath=""}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){if(this._initUI(),G_PlatHelper.getPlat()){let e=this._getCaptureSaveRootDir();if(G_PlatHelper.isNativePlatform())this._inited=!0;else{let t=G_PlatHelper.getPlat().getFileSystemManager();try{t.accessSync(e),this._inited=!0}catch(i){try{t.mkdirSync(e,!0),this._inited=!0}catch(e){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}}}}}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"sp");e&&(e.on("click",null,()=>{G_UIManager.hideUI("capture")}),this._sp=e)}onInit(e){let t=1;G_PlatHelper.isQQPlatform()&&(t=1.5),this._sp&&(this._sp.visible=!1,this._sp.width=Laya.stage.width*t,this._sp.height=Laya.stage.height*t,this._sp.pivotX=this._sp.width,this._sp.pivotY=.75*this._sp.height,this._sp.x=Laya.stage.width,this._sp.y=.75*Laya.stage.height);let i="",n=!1,s=()=>{""!==i&&n&&"function"==typeof e&&e(i)},o=Laya.stage.drawToCanvas(Laya.stage.width*t,Laya.stage.height*t,0,0),r=o.getTexture();if(this._sp&&(this._sp.visible=!0,this._sp.graphics.clear(!0),this._sp.graphics.drawImage(r),this._sp._scaleTween&&(this._sp._scaleTween.clear(),this._sp._scaleTween=null),this._sp.scaleX=1/t,this._sp.scaleY=1/t,this._sp._scaleTween=Laya.Tween.to(this._sp,{scaleX:.3/t,scaleY:.3/t},1e3,Laya.Ease.sineOut,Laya.Handler.create(null,()=>{this._sp._scaleTween=null,n=!0,s()}),0,!1,!1)),G_PlatHelper.getPlat()){let e=this._getCaptureSaveRootDir()+"/"+G_Utils.generateString(16)+".jpg";if(G_PlatHelper.isNativePlatform())G_PlatHelper.getPlat().captureScreen((t,n,o)=>{G_PlatHelper.getPlat().saveAsJpeg(t,n,o,e),i=e,s()});else{let t=G_PlatHelper.getPlat().getFileSystemManager(),n=o.toBase64("image/jpg");t.writeFile({filePath:e,data:n.substring(n.indexOf(",")+1),encoding:"base64",success:()=>{i=e,s()},fail:e=>{console.error("save error: ",e.errMsg),G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})}}}onHide(){this._sp&&this._sp._scaleTween&&(this._sp._scaleTween.clear(),this._sp._scaleTween=null)}_getCaptureSaveRootDir(){return G_PlatHelper.getPlat()?G_PlatHelper.isNativePlatform()?G_PlatHelper.getPlat().getCachePath():G_PlatHelper.getPlat().env.USER_DATA_PATH+"/capture":""}}class Ni extends bi{constructor(){super(),this._finger=null,this._release=null,this._press=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"finger");e&&(this._finger=e);let t=G_UIHelper.seekNodeByName(this.owner,"release");t&&(this._release=t);let i=G_UIHelper.seekNodeByName(this.owner,"press");i&&(this._press=i)}onInit(e,t=2e3){this._release.visible=!0,this._press.visible=!1,this._finger.x=e.x,this._finger.y=e.y,G_Scheduler.schedule("Auto_Change_Fingers",()=>{this._release.visible=!this._release.visible,this._press.visible=!this._press.visible},!1,200),t>0&&G_Scheduler.schedule("Auto_Close_Finger",()=>{G_UIManager.hideUI("finger")},!1,t,1)}onHide(){G_Scheduler.unschedule("Auto_Change_Fingers"),G_Scheduler.unschedule("Auto_Close_Finger")}}class Li extends bi{constructor(){super()}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&e.on("click",null,function(){this.onCloseTouched(e)}.bind(this));let t=G_UIHelper.seekNodeByName(this.owner,"shareAppBtn");t&&(t.on("click",null,function(){this.onShareTouched(t)}.bind(this)),t.visible=G_Share.isSupport(),G_PlatHelper.isTTPlatform()&&(t.visible=!1));let i=G_UIHelper.seekNodeByName(this.owner,"soundSwitchBtn");i&&(i.on("click",null,function(){this.onSoundSwitchTouched(i)}.bind(this)),this._initSwitchBtn(i),i.setWitchState(G_SoundMgr.isSoundEnable()));let n=G_UIHelper.seekNodeByName(this.owner,"muteSwitchBtn");n&&(n.on("click",null,function(){this.onMuteSwitchTouched(n)}.bind(this)),this._initSwitchBtn(n),n.setWitchState(G_PlayerInfo.isMuteEnable()),G_UIHelper.seekNodeByName(this.owner,"muteIcon").visible=G_PlatHelper.isSupportVibratePhone(),G_UIHelper.seekNodeByName(this.owner,"muteText").visible=G_PlatHelper.isSupportVibratePhone(),G_UIHelper.seekNodeByName(this.owner,"muteSwitchBtn").visible=G_PlatHelper.isSupportVibratePhone())}_initSwitchBtn(e){e.setWitchState=function(t){e._isOn!==t&&(e._isOn=t,e.skin=t?"game/popup/setting/on_btn.png":"game/popup/setting/off_btn.png")},e.getWitchState=function(){return e._isOn},e.setWitchState(!1)}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,function(){G_UIManager.hideUI("setting")}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}onShareTouched(e){G_UIHelper.playBtnTouchAction(e),G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_Share.share(G_ShareScene.SS_SHARE_APP,null,!1,function(e){e&&console.log("share app succ...")})}onSoundSwitchTouched(e){G_UIHelper.playBtnTouchAction(e),G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_SoundMgr.isSoundEnable()?G_SoundMgr.setSoundEnable(!1):G_SoundMgr.setSoundEnable(!0),e.setWitchState(G_SoundMgr.isSoundEnable())}onMuteSwitchTouched(e){G_UIHelper.playBtnTouchAction(e),G_SoundMgr.playSound(G_SoundName.SN_CLICK),G_PlayerInfo.isMuteEnable()?G_PlayerInfo.setMuteEnable(!1):G_PlayerInfo.setMuteEnable(!0),e.setWitchState(G_PlayerInfo.isMuteEnable())}}var Di="New",Bi="Hot";class Mi extends Laya.Box{constructor(e,t,i){super(),this._index=e,this._advID=0,this._advImgUrls="",this._advTitle="",this._advPath="",this._effectType="0",this._flagType="0",this._itemCfg=i,this._advImg=null,this._advFrame=null,this._advName=null,this.size(t.width,t.height),this._initUI(t.width,t.height)}_initUI(e,t){let i=null;i=this._itemCfg.imgWidth>0&&this._itemCfg.imgHeight>0?{width:this._itemCfg.imgWidth,height:this._itemCfg.imgHeight,iconNeedPos:this._itemCfg.iconNeedPos,iconPos:this._itemCfg.iconPos}:{width:e,height:t,iconNeedPos:this._itemCfg.iconNeedPos,iconPos:this._itemCfg.iconPos};let n=new Pe(i);if(n&&(n.onSizeChanged(function(){if(!n.destroyed)if(i.iconNeedPos){let e=i.iconPos.split("|");n.pivotX=0,n.pivotY=0,n.x=Number.parseInt(e[0]),n.y=Number.parseInt(e[1]),n.scaleX=i.width/n.width,n.scaleY=i.height/n.height}else n.pivotX=n.width/2,n.pivotY=n.height/2,n.x=i.width/2,n.y=i.height/2,n.scaleX=i.width/n.width,n.scaleY=i.height/n.height}),this.addChild(n),this._advImg=n,this._addTagIntoImg(Di),this._addTagIntoImg(Bi)),"string"==typeof this._itemCfg.framePath&&""!==this._itemCfg.framePath){if(this._advFrame=new Laya.Image,this._itemCfg.framePathCount>1){let e=this._index%this._itemCfg.framePathCount;0===e&&(e=this._itemCfg.framePathCount),this._advFrame.skin=this._itemCfg.framePath.format(e.toString())}else this._advFrame.skin=this._itemCfg.framePath;this._advFrame.width=e,this._advFrame.height=t,this._advFrame.pivotX=this._advFrame.width/2,this._advFrame.pivotY=this._advFrame.height/2,this._advFrame.x=this._advFrame.width/2,this._advFrame.y=this._advFrame.height/2,this.addChild(this._advFrame)}if(this._itemCfg.needMask&&Laya.loader.load("ad/ad_mask.png",Laya.Handler.create(null,function(){let e=new Laya.Image;e.skin="ad/ad_mask.png",e.sizeGrid="30,30,30,30",e.width=this._advImg.width+2,e.height=this._advImg.height+2,e.pivotX=e.width/2,e.pivotY=e.height/2,e.x=e.width/2,e.y=e.height/2,this._advImg.mask=e}.bind(this))),""!==this._itemCfg.nameCfg){let t=this._itemCfg.nameCfg.split("||");if(this._advName=new Laya.Text,this._advName.fontSize=parseInt(t[0],10),t.length>=3?this._advName.color="#"+t[2]:this._advName.color="#ffffff",this._advName.valign="top",this._advName.height=parseInt(t[0],10),this._itemCfg.nameNeedPos&&""!==this._itemCfg.namePos){let t=this._itemCfg.namePos.split("|"),i=Number.parseFloat(t[2]);this._advName.align=.5==i?"center":1==i?"right":"left",this._advName.width=e,this._advName.pivotX=this._advName.width*i,this._advName.pivotY=0,this._advName.x=parseInt(t[0],10),this._advName.y=parseInt(t[1],10)}else this._advName.align="center",this._advName.width=e,this._advName.pivotX=this._advName.width/2,this._advName.pivotY=0,this._advName.x=e/2,this._advName.y=this._advImg.height+parseInt(t[1],10);this.addChild(this._advName)}}_addTagIntoImg(e){let t=this._advImg;t&&(t["set"+e+"TagStatu"]=function(i){t["_is"+e+"TagOnShow"]=i;let n="_"+e+"Tag";if(i){if(!t[n]){let i=new Laya.Image;i.skin=e===Di?this._itemCfg.newTagPath:this._itemCfg.hotTagPath,t.getChildByName("tag")?(i.pivotX=0,i.pivotY=0,i.x=0,i.y=0,t.getChildByName("tag").addChild(i)):(-1!==i.skin.indexOf("2")?(i.pivotX=0,i.pivotY=0,i.x=1.5,i.y=1.5):(i.pivotX=i.width,i.pivotY=0,i.x=t.width-1.5,i.y=1.5),t.addChild(i)),t[n]=i}t[n].visible=!0}else t[n]&&(t[n].visible=!1)}.bind(this),t["get"+e+"TagStatu"]=function(){return t["_is"+e+"TagOnShow"]},t["set"+e+"TagStatu"](!1))}_setSweepEffectStatu(e){let t=this._advImg;if(t)if(e){if(!t._sweepImg){let e=new Laya.Image;e.skin=this._itemCfg.sweepEffectPath,e.scaleY=(t.height-2)/e.height,e.scaleX=e.scaleY,e.pivotX=0,e.pivotY=e.height/2,e.y=t.height/2,t.addChild(e),t._sweepImg=e}if(t._sweepImg.visible=!0,!t._tween){let e=function(i){t._sweepImg.x=0-t._sweepImg.width*t._sweepImg.scaleX,t._tween=Laya.Tween.to(t._sweepImg,{x:t.width},1e3,null,Laya.Handler.create(null,function(){t._tween=null,e(2e3)}),i)};e(0)}t.mask||Laya.loader.load("ad/ad_mask.png",Laya.Handler.create(null,function(){let e=new Laya.Image;e.skin="ad/ad_mask.png",e.sizeGrid="30,30,30,30",e.width=t.width+2,e.height=t.height+2,e.pivotX=e.width/2,e.pivotY=e.height/2,e.x=e.width/2,e.y=e.height/2,t.mask=e}.bind(this)))}else t._sweepImg&&(t._sweepImg.visible=!1),t._tween&&(t._tween.clear(),t._tween=null),t.mask&&!this._itemCfg.needMask&&(t.mask=null)}setAdvInfo(e,t,i,n,s,o){this._advID===e&&this._advImgUrls===t&&this._advTitle===i&&this._advPath===n&&this._effectType===s&&this._flagType===o||(this._advID=e,this._advImgUrls=t,this._advTitle=i,this._advPath=n,this._effectType=s,this._flagType=o,this._advImg.setImageData(this._advImgUrls),this._advName&&(this._advName.text=this._advTitle),this._advImg["set"+Di+"TagStatu"]("1"===this._flagType),this._advImg["set"+Bi+"TagStatu"]("2"===this._flagType),this._setSweepEffectStatu("1"===this._effectType))}}class Ri extends Laya.Script{constructor(){super(),this._inited=!1,this._touchCb=null,this._selectCb=null,this._isHorizontal=!1,this._cellSize=null}onEnable(){this._initUI()}_initUI(){this.owner.selectEnable=!0,this.owner.selectHandler=new Laya.Handler(this,this.onSelect),this.owner.renderHandler=new Laya.Handler(this,this.updateItem),this.owner.mouseHandler=new Laya.Handler(this,this.onTouch)}updateItem(e,t){let i=e.dataSource;e.setAdvInfo(i.adv_id,i.logo_url,i.title,i.path,i.effect_type,i.flag_type)}onSelect(e){G_SoundMgr.playSound(G_SoundName.SN_CLICK);let t=this.owner.selection.dataSource;this._doSelectCallback(t,function(e){e&&this.owner.setItem(this.owner.selectedIndex,e)}.bind(this))}onTouch(e){e&&("mousedown"===e.type?(console.log("tween stoped..."),this._doTouchCallback("down")):"mouseup"===e.type||"mouseout"===e.type?this._doTouchCallback("up"):"click"===e.type&&this._doTouchCallback("click"))}getAllExposedAdvInfos(){let e=[];return this.owner.cells.forEach(t=>{if(t&&t.dataSource){let i=t.localToGlobal(new Laya.Vector2(0,0),!0);if(i.x>=0&&i.y>=0){let i=t.localToGlobal(new Laya.Vector2(t.width,t.height),!0);i.x<=Laya.stage.width&&i.y<=Laya.stage.height&&e.push({index:t._index,info:t.dataSource,centerPt:t.localToGlobal(new Laya.Vector2(t.width/2,t.height/2),!0)})}}}),e}registerTouchCallback(e){"function"==typeof e&&(this._touchCb=e)}_doTouchCallback(e){this._touchCb&&this._touchCb(e)}registerSelectCallback(e){"function"==typeof e&&(this._selectCb=e)}_doSelectCallback(e,t){this._selectCb&&this._selectCb(e,t)}setList(e,t,i,n){if(!this._inited&&(this._inited=!0,this._isHorizontal=e,this._cellSize=t,Array.isArray(n)&&n.length>0)){let e=0;this.owner.itemRender=function(){return new Mi(e+=1,t,i)},this._isHorizontal?(this.owner.repeatX=Math.ceil(n.length/this.owner.repeatY),this.owner.hScrollBarSkin=""):(this.owner.repeatY=Math.ceil(n.length/this.owner.repeatX),this.owner.vScrollBarSkin="")}this.owner.array=n}}var xi="New",Ui="Hot",Hi=function(){let e=G_PlatHelper.getStorage("navagated_appids_of_player_{0}".format(G_PlayerInfo.getOpenID()));if(e&&""!==e){let t=JSON.parse(e);if(void 0!==t.ids&&G_ServerInfo.getCurServerDayOfYear()===t.saveDay&&void 0!==t.ids)return t.ids}return[]},Vi=function(e){if(Array.isArray(e)&&e.length>0){let t={ids:e,saveDay:G_ServerInfo.getCurServerDayOfYear()};G_PlatHelper.setStorage("navagated_appids_of_player_{0}".format(G_PlayerInfo.getOpenID()),JSON.stringify(t))}};class Fi extends Laya.Script{constructor(){super(),this.advType="btn",this.newTagPath="ad/new_tag.png",this.hotTagPath="ad/hot_tag.png",this.sweepEffectPath="ad/sweep_effect.png",this.needMask=!1,this.nameCfg="",this.framePath="",this.framePathCount=1,this.isHorizontal=!1,this.maxOnShowCells=0,this.cellWidth=0,this.cellHeight=0,this.imgWidth=0,this.imgHeight=0,this.isTween=!1,this.tweenSpeed=1e3,this.autoExtend=!1,this.advCount=0,this.isCanDynamicChange=!0,this.delayToLoad=0,this.advKey="",this.nameNeedPos=!1,this.namePos="0|0|0",this.iconNeedPos=!1,this.iconPos="0|0",this._advList=null,this._advBtns=[],this._originalAdvInfos=null,this._advInfos=null,this._onShowAdvImgs=[],this._getAdvInfosCb=null}onAwake(){"list"===this.advType&&this._initUI()}onEnable(){"btn"===this.advType&&this._initUI(),G_Scheduler.schedule("Delay_To_Load_Ad_"+this.advKey,function(){let e=G_ADCfg[this.advKey];if("string"!=typeof e||""===e)return void console.error("fail to load ad, tag:",this.advKey);console.log("start load ad, key:",e);let t=function(t){if(t&&t.ret&&t[e]){let i=t[e];if("list"===this.advType&&this.isCanDynamicChange&&void 0!==t.Count&&0!==t.Count[e]&&(this.advCount=parseInt(t.Count[e],10)),console.log("adv: ",this.advKey,", count: ",this.advCount),this._originalAdvInfos=i,this._refreshAdv(),this.isTween&&this._advList&&this._advList.length>0&&G_Scheduler.schedule("Auto_Start_Tween_Show_Of_Ad_"+this.advKey,function(){this._autoTweenList()}.bind(this),!1,500,1),this._getAdvInfosCb){let e=this._getAdvInfosCb;this._getAdvInfosCb=null,e(this._advInfos)}}}.bind(this);if(G_PlatHelper.isWINPlatform())e="ee2a98b3ba79d62950534db9641ee913",G_HttpHelper.getJson("https://image.game.hnquyou.com/upload/opId10.txt",function(e,i){e&&t(i)});else{let i=[e];G_ADVMgr.getIconButtons(i,function(e){console.log(e),t(e)}.bind(this))}}.bind(this),!1,this.delayToLoad,0)}_initUI(){if("btn"===this.advType)for(let e=1;e<=this.advCount;e++){let t="adv_"+e.toString(),i=G_UIHelper.seekNodeByName(this.owner,t);if(i){let e=null,t=G_UIHelper.seekNodeByName(i,"icon");e=t?{width:t.width,height:t.height}:{width:i.width,height:i.height};let n=new Pe(e);n&&(n.onSizeChanged(function(){n.destroyed||(n.pivotX=n.width/2,n.pivotY=n.height/2,n.x=e.width/2,n.y=e.height/2,n.scaleX=e.width/n.width,n.scaleY=e.height/n.height)}),t?t.addChild(n):i.addChild(n),i._advImg=n),this._addTagIntoBtn(i,xi),this._addTagIntoBtn(i,Ui),this.needMask&&Laya.loader.load("ad/ad_mask.png",Laya.Handler.create(null,function(){let e=new Laya.Image;e.skin="ad/ad_mask.png",e.sizeGrid="30,30,30,30",e.width=i.width,e.height=i.height,i.mask=e})),i.offAll("click"),i.on("click",null,function(){this.onAdvTouched(i)}.bind(this)),i.registerAdvInfo=function(e){if(!i.destroyed&&e){i._advInfo=e,i._advImg&&i._advImg.setImageData(e.logo_url);let t=G_UIHelper.seekNodeByName(i,"name");t&&(t.text=e.title),i["set"+xi+"TagStatu"]("1"===e.flag_type),i["set"+Ui+"TagStatu"]("2"===e.flag_type),this._setSweepEffectStatu(i,"1"===e.effect_type)}}.bind(this),i._advInfo=null,this._advBtns.push(i)}}else if("list"===this.advType){let e=0,t=Laya.stage.designHeight;this.autoExtend&&!this.isHorizontal&&(Laya.stage.height-t>0&&(e=Math.ceil((Laya.stage.height-t)/this.cellHeight)),console.log("extendTimes: ",e));let i=G_UIHelper.seekNodeByName(this.owner,"list");if(i){this._advList=i,e>0&&(this.maxOnShowCells+=i.repeatX*e,this.advCount+=i.repeatX*e,this.owner.height+=Laya.stage.height-t,i.height+=Laya.stage.height-t);let n=i.addComponent(Ri);n.registerTouchCallback(e=>{this.isTween&&(G_Scheduler.unschedule("Next_Tween_of_Ad_"+this.advKey),"up"===e?i.scrollBar?i.scrollBar.once(Laya.Event.END,null,()=>{G_Scheduler.schedule("Next_Tween_of_Ad_"+this.advKey,()=>{this._autoTweenList()},!1,1e3,1)}):G_Scheduler.schedule("Next_Tween_of_Ad_"+this.advKey,()=>{this._autoTweenList()},!1,3e3,1):"click"===e&&G_Scheduler.schedule("Next_Tween_of_Ad_"+this.advKey,()=>{this._autoTweenList()},!1,2e3,1))}),n.registerSelectCallback(function(e,t){e&&this._toMiniProgram(e,function(i){let n=this._getNextAdvInfo(e.adv_id);null!==n&&(this._removeOnShowAdvImg(e.logo_url),this._addOnShowAdvImg(n.logo_url),G_PlatHelper.isWINPlatform()&&G_Utils.printExposeAdvInfos(n),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ShowAdvs&&G_PlatHelper.getPlat().h_ShowAdvs(n)),"function"==typeof t&&t(n),i||G_Event.dispatchEvent(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,this.advKey)}.bind(this))}.bind(this))}}}_autoTweenList(){if("list"===this.advType&&this.isTween&&this._advList&&this._advList.length>0){if(this._advList.destroyed)return;let e=this._advList.startIndex,t=this._getMaxScrollIndex(),i=t,n=i,s=0;e<t?(i=t,n=this.isHorizontal?i+this._advList.repeatY:i+this._advList.repeatX):(i=0,n=0),s=this.isHorizontal?this._getScrollDuration(Math.floor(e/this._advList.repeatY),Math.floor(i/this._advList.repeatY)):this._getScrollDuration(Math.floor(e/this._advList.repeatX),Math.floor(i/this._advList.repeatX)),this._advList.tweenTo(n,s),G_Scheduler.unschedule("Next_Tween_of_Ad_"+this.advKey),G_Scheduler.schedule("Next_Tween_of_Ad_"+this.advKey,()=>{this._autoTweenList()},!1,s+2e3,1)}}refreshAdv(){console.log("refresh adv: ",this.advKey),"list"===this.advType&&(this._advList&&this._advList.scrollTo(0),this.isTween&&this._advList&&this._advList.length>0&&G_Scheduler.schedule("Auto_Start_Tween_Show_Of_Ad_"+this.advKey,function(){this._autoTweenList()}.bind(this),!1,500,1)),this._refreshAdv()}hideAdv(){console.log("hide adv: ",this.advKey),"list"===this.advType&&this.isTween&&(G_Scheduler.unschedule("Auto_Start_Tween_Show_Of_Ad_"+this.advKey),G_Scheduler.unschedule("Check_Until_All_Advs_Exposed_"+this.advKey),G_Scheduler.unschedule("Next_Tween_of_Ad_"+this.advKey))}randomNavigate(e){let t=()=>{let t=G_Utils.random(0,this._advInfos.length-1),i=this._advInfos[t];this._toMiniProgram(i,t=>{"function"==typeof e&&e(!0,t)})};this._advInfos?t():this.getAdvInfos(t)}navagate(e,t){this._toMiniProgram(e,e=>{"function"==typeof t&&t(e)})}getAdvInfos(e){"function"==typeof e&&(this._advInfos?e(this._advInfos):this._getAdvInfosCb=e)}getAllExposedAdvInfos(){if("list"===this.advType){let e=this._advList.getComponent(Ri);return e?e.getAllExposedAdvInfos():[]}return[]}_refreshAdv(){if(this._originalAdvInfos&&(this._onShowAdvImgs=[],this._advInfos=this._convertToLocalAdvInfos(this._originalAdvInfos),Array.isArray(this._advInfos)))if("btn"===this.advType)for(let e=0;e<this._advInfos.length&&!(e>=this.advCount);e++){let t=this._advInfos[e],i=this._advBtns[e];this._addOnShowAdvImg(t.logo_url),i&&i.registerAdvInfo&&i.registerAdvInfo(t),G_PlatHelper.isWINPlatform()&&G_Utils.printExposeAdvInfos(t),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ShowAdvs&&G_PlatHelper.getPlat().h_ShowAdvs(t)}else if("list"===this.advType){let e=this._advList.getComponent(Ri);if(e){let t=[];for(let e=0;e<this._advInfos.length&&!(e>=this.advCount);e++)this._addOnShowAdvImg(this._advInfos[e].logo_url),t.push(this._advInfos[e]);if(e.setList(this.isHorizontal,{width:this.cellWidth,height:this.cellHeight},{imgWidth:this.imgWidth,imgHeight:this.imgHeight,nameCfg:this.nameCfg,needMask:this.needMask,newTagPath:this.newTagPath,hotTagPath:this.hotTagPath,sweepEffectPath:this.sweepEffectPath,framePath:this.framePath,framePathCount:this.framePathCount,nameNeedPos:this.nameNeedPos,namePos:this.namePos,iconNeedPos:this.iconNeedPos,iconPos:this.iconPos},t),this.isTween){if(G_Scheduler.unschedule("Check_Until_All_Advs_Exposed_"+this.advKey),t.length>0){let i=[];for(let e=0;e<t.length;e++)i.push(!1);let n=()=>{if(!e.owner)return void G_Scheduler.unschedule("Check_Until_All_Advs_Exposed_"+this.advKey);let n=e.getAllExposedAdvInfos();if(n.length>0){let e=[];for(let t=0;t<n.length;t++){let s=n[t];i[s.index-1]||(i[s.index-1]=!0,e.push(s.info))}if(e.length>0){G_PlatHelper.isWINPlatform()&&G_Utils.printExposeAdvInfos(e),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ShowAdvs&&G_PlatHelper.getPlat().h_ShowAdvs(e);let n=0;i.forEach(e=>{e&&n++}),n===t.length&&G_Scheduler.unschedule("Check_Until_All_Advs_Exposed_"+this.advKey)}}};G_Scheduler.schedule("Check_Until_All_Advs_Exposed_"+this.advKey,()=>{n()},!1,200),G_Scheduler.schedule("First_Check_Exposed_Advs_"+this.advKey,()=>{n()},!1,10,0)}}else G_PlatHelper.isWINPlatform()&&G_Utils.printExposeAdvInfos(t),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ShowAdvs&&G_PlatHelper.getPlat().h_ShowAdvs(t)}}}onAdvTouched(e){if(e._advInfo){let t=function(t){let i=this._getNextAdvInfo(e._advInfo.adv_id);null!==i&&(this._removeOnShowAdvImg(e._advInfo.logo_url),this._addOnShowAdvImg(i.logo_url),e.registerAdvInfo(i),G_PlatHelper.isWINPlatform()&&G_Utils.printExposeAdvInfos(i),G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ShowAdvs&&G_PlatHelper.getPlat().h_ShowAdvs(i)),t||G_Event.dispatchEvent(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,this.advKey)}.bind(this);this._toMiniProgram(e._advInfo,t)}else G_Event.dispatchEvent(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,this.advKey)}_toMiniProgram(e,t){if(G_PlatHelper.getPlat()){if(e){G_Reportor.report(G_ReportEventName.REN_NAVIGATION_TO_MINIPROGRAM);let i=this._getWillNavagatedAdvInfo(e),n={adv_id:i.adv_id,origin_path:i.logo_url.origin_path,appId:i.appid,pkgName:i.appid,path:i.path};n.success=(()=>{if(G_PlatHelper.isWXPlatform()){let e=Hi();e.push(n.appId),Vi(e)}G_Reportor.report(G_ReportEventName.REN_NAVIGATION_TO_MINIPROGRAM_SUCCESS),"function"==typeof t&&t(!0)}),n.fail=(e=>{e&&-1!==e.errMsg.indexOf("fail cancel")?G_Reportor.report(G_ReportEventName.REN_NAVIGATION_TO_MINIPROGRAM_CANCEL):G_Reportor.report(G_ReportEventName.REN_NAVIGATION_TO_MINIPROGRAM_ERROR),"function"==typeof t&&t(!1)}),G_PlatHelper.isTTPlatform()?G_PlatHelper.showMoreGamesModal():G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().h_ToMinProgram&&G_PlatHelper.getPlat().h_ToMinProgram(n)}}else"function"==typeof t&&t(!1)}_getWillNavagatedAdvInfo(e){if(!G_PlatHelper.isWXPlatform()||!G_Switch.isAdvStateNormalSync())return e;let t=!1,i=Hi();for(let n=0;n<i.length;n++)if(i[n]===e.appid){t=!0;break}if(t){let t=[];for(let e=0;e<this._advInfos.length;e++)t.push(this._advInfos[e].appid);t=G_Utils.getLodash().uniq(t);let n=G_Utils.getLodash().xorBy(t,i);if(n&&n.length>0){let e=n[G_Utils.random(0,n.length-1)];for(let t=0;t<this._advInfos.length;t++)if(this._advInfos[t].appid===e)return this._advInfos[t]}return e}return e}_getMaxScrollIndex(){if(this._advList){let e=this._advList.length;return this.isHorizontal?(e=Math.ceil(this._advList.length/this._advList.repeatY)-Math.ceil(this.maxOnShowCells/this._advList.repeatY),e*=this._advList.repeatY):(e=Math.ceil(this._advList.length/this._advList.repeatX)-Math.ceil(this.maxOnShowCells/this._advList.repeatX),e*=this._advList.repeatX),e}return 0}_getScrollDuration(e,t){return Math.abs(t-e)*this.tweenSpeed}_getNextAdvInfo(e){if(this._advInfos&&this._advInfos.length>this.advCount){let e=[];for(let t=0;t<this._advInfos.length;t++){let i=this._advInfos[t].logo_url;-1===this._onShowAdvImgs.indexOf(i)&&e.push(this._advInfos[t])}if(e.length>0){return e[G_Utils.random(0,e.length-1)]}console.error(this._onShowAdvImgs),console.error(this._advInfos)}return null}_addOnShowAdvImg(e){-1===this._onShowAdvImgs.indexOf(e)&&this._onShowAdvImgs.push(e)}_removeOnShowAdvImg(e){let t=this._onShowAdvImgs.indexOf(e);-1!==t&&this._onShowAdvImgs.splice(t,1)}_convertToLocalAdvInfos(e){let t=[],i=[];if(Array.isArray(e))for(let n=0;n<e.length;n++){let s=e[n];if(Array.isArray(s.logo_attr)){let e=G_Utils.random(0,s.logo_attr.length-1);for(let n=0;n<s.logo_attr.length;n++){let o=G_Utils.cloneDeep(s),r=s.logo_attr[n];o.logo_url=r&&"object"==typeof r?G_Utils.cloneDeep(r):r,n===e?t.push(o):i.push(o)}}else if("string"==typeof s.logo_url)t.push(s);else if(Array.isArray(s.logo_url)){let e=G_Utils.random(0,s.logo_url.length-1);for(let n=0;n<s.logo_url.length;n++){let o=G_Utils.cloneDeep(s),r=s.logo_url[n];o.logo_url=r&&"object"==typeof r?G_Utils.cloneDeep(r):r,n===e?t.push(o):i.push(o)}}}return G_Utils.shuffleArray(t),i.length>0&&(G_Utils.shuffleArray(i),t=t.concat(i)),t}_addTagIntoBtn(e,t){e&&(e["set"+t+"TagStatu"]=function(i){e["_is"+t+"TagOnShow"]=i;let n="_"+t+"Tag";if(i){if(!e[n]){let i=new Laya.Image;i.skin=t===xi?this.newTagPath:this.hotTagPath,e.getChildByName("tag")?(i.pivotX=0,i.pivotY=0,i.x=0,i.y=0,e.getChildByName("tag").addChild(i)):(-1!==i.skin.indexOf("2")?(i.pivotX=0,i.pivotY=0,i.x=1.5,i.y=1.5):(i.pivotX=i.width,i.pivotY=0,i.x=e.width-1.5,i.y=1.5),e.addChild(i)),e[n]=i}e[n].visible=!0}else e[n]&&(e[n].visible=!1)}.bind(this),e["get"+t+"TagStatu"]=function(){return e["_is"+t+"TagOnShow"]}.bind(this),e["set"+t+"TagStatu"](!1))}_setSweepEffectStatu(e,t){if(e)if(t){if(!e._sweepImg){let t=new Laya.Image;t.skin=this.sweepEffectPath,t.scaleY=e.height/t.height,t.scaleX=t.scaleY,t.pivotX=0,t.pivotY=0,e.addChild(t),e._sweepImg=t}if(e._sweepImg.visible=!0,!e._tween){let t=function(i){e._sweepImg.x=0-e._sweepImg.width*e._sweepImg.scaleX,e._tween=Laya.Tween.to(e._sweepImg,{x:e.width},1e3,null,Laya.Handler.create(null,function(){e._tween=null,t(2e3)}),i)};t(0)}e.mask||Laya.loader.load("ad/ad_mask.png",Laya.Handler.create(null,function(){let t=new Laya.Image;t.skin="ad/ad_mask.png",t.sizeGrid="30,30,30,30",t.width=e.width,t.height=e.height,e.mask=t}.bind(this)))}else e._sweepImg&&(e._sweepImg.visible=!1),e._tween&&(e._tween.clear(),e._tween=null),e.mask&&!this.needMask&&(e.mask=null)}}class Wi extends bi{constructor(){super(),this._closeBtn=null,this._advLoadMgr=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"adLoader");t&&(this._advLoadMgr=t.getComponent(Fi))}onInit(){this._closeBtn&&G_UIHelper.delayShow(this._closeBtn),this._advLoadMgr&&this._advLoadMgr.refreshAdv()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,function(){G_UIManager.hideUI("moreGameAd")}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}}class ji extends bi{constructor(){super(),this._closeBtn=null,this._advLoadMgrs=[],this._isMistakeEnabled=!1,this._isCanClose=!1,this._scheduleKey=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(e._isTouching=!1,this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"scrollAdvLoader");t&&this._advLoadMgrs.push(t.getComponent(Fi));let i=G_UIHelper.seekNodeByName(this.owner,"bannerAdvLoader");i&&this._advLoadMgrs.push(i.getComponent(Fi))}onInit(){this._isMistakeEnabled=!1;let e=G_MistakeMgr.isMoveMistakeEnabled;"function"==typeof G_MistakeMgr.isExportMistakeEnabled?(e=G_MistakeMgr.isExportMistakeEnabled,console.log("Use Export Mistake...")):console.log("Use Move Mistake..."),e(e=>{this._isMistakeEnabled=e,e?(this._isCanClose=!1,G_Switch.getExportMoveMistakeConfig(e=>{this._scheduleKey&&(G_Scheduler.unschedule(this._scheduleKey),this._scheduleKey=null),this._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(this._scheduleKey,()=>{this._scheduleKey=null,G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD),this._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(this._scheduleKey,()=>{this._scheduleKey=null,G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),this._isCanClose=!0},!1,e.stay,1)},!1,e.delay,1)})):(this._isCanClose=!0,G_UIHelper.delayShow(this._closeBtn))}),this._advLoadMgrs.length>0&&this._advLoadMgrs.forEach(e=>{e.refreshAdv()}),G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),G_Switch.getAutoRandomNavPagesCfg(e=>{e.forEach(e=>{"export"===e.toLowerCase()&&this._advLoadMgrs&&this._advLoadMgrs[0].randomNavigate()})})}onHide(){this._advLoadMgrs.length>0&&this._advLoadMgrs.forEach(e=>{e.hideAdv()})}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,()=>{this._isCanClose&&G_UIManager.hideUI("fullSceneAd")}),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}}class qi extends bi{constructor(){super(),this._list=null,this._listContent=null,this._closeBtn=null,this._advLoadMgrs=[],this._isMistakeEnabled=!1,this._isCanClose=!1,this._isTouching=!1,this._fromTopToBottom=!0,this._isFirstOpen=!0}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(e._isTouching=!1,e._originalPos={x:e.x,y:Laya.stage.height-e.height/2-e.bottom},this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"list");t&&(this._list=t,window.testList=t,Laya.loader.create("prefab/ad/wx/newFullSceneAdContent.json",Laya.Handler.create(null,e=>{let i=new Laya.Prefab;i.json=e,t.vScrollBarSkin="";var n=this;t.itemRender=function(){let e=i.create();n._advLoadMgrs=[];let t=G_UIHelper.seekNodeByName(e,"staticAdvLoader");t&&n._advLoadMgrs.push(t.getComponent(Fi));let s=G_UIHelper.seekNodeByName(e,"scrollAdvLoader");s&&n._advLoadMgrs.push(s.getComponent(Fi));let o=G_UIHelper.seekNodeByName(e,"listAdvLoader");return o&&n._advLoadMgrs.push(o.getComponent(Fi)),e},t.array=["content"]})))}_doTotalScroll(){this._list&&!this._list.destroyed&&this._list.scrollBar&&!this._isTouching&&(this._fromTopToBottom?(this._list.scrollBar.value+=.5,this._list.scrollBar.value>=this._list.scrollBar.max&&(this._list.scrollBar.value=this._list.scrollBar.max,this._fromTopToBottom=!1)):(this._list.scrollBar.value-=.5,this._list.scrollBar.value<=0&&(this._list.scrollBar.value=0,this._fromTopToBottom=!0)))}_enableTotalScroll(){this._isTouching=!1}_disableTotalScroll(){this._isTouching=!0}onInit(){this._isMistakeEnabled=!1;let e=G_MistakeMgr.isMoveMistakeEnabled;"function"==typeof G_MistakeMgr.isExportMistakeEnabled?(e=G_MistakeMgr.isExportMistakeEnabled,console.log("Use Export Mistake...")):console.log("Use Move Mistake..."),e(e=>{this._isMistakeEnabled=e,e?this._isCanClose=!1:(this._isCanClose=!0,G_UIHelper.delayShow(this._closeBtn))}),this._closeBtn.x=this._closeBtn._originalPos.x,this._closeBtn.y=this._closeBtn._originalPos.y,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this._disableTotalScroll),Laya.stage.on(Laya.Event.MOUSE_UP,this,this._enableTotalScroll),Laya.stage.on(Laya.Event.MOUSE_OVER,this,this._enableTotalScroll),G_Scheduler.schedule("Auto_Do_Total_Scroll_Of_NewFullSceneAd",()=>{this._doTotalScroll()},!0);let t=()=>{let e=this._advLoadMgrs[2].getAllExposedAdvInfos(),t=null;if(e.length>6){t=e[G_Utils.random(0,5)]}else if(e.length>0){t=e[G_Utils.random(0,e.length-1)]}G_UIManager.hideUI("finger"),t&&G_UIManager.showUI("finger",null,new Laya.Vector2(t.centerPt.x,t.centerPt.y-50))};G_Scheduler.schedule("Auto_Show_Finger_Of_NewFullSceneAd",()=>{t()},!1,2e3),G_Scheduler.schedule("First_Show_Finger_Of_NewFullSceneAd",()=>{t()},!1,500,0),this._advLoadMgrs.length>0&&(this._isFirstOpen?this._isFirstOpen=!1:this._advLoadMgrs.forEach(e=>{e.refreshAdv()})),G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD)}onHide(){this._advLoadMgrs.length>0&&this._advLoadMgrs.forEach(e=>{e.hideAdv()}),Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this._disableTotalScroll),Laya.stage.off(Laya.Event.MOUSE_UP,this,this._enableTotalScroll),Laya.stage.off(Laya.Event.MOUSE_OVER,this,this._enableTotalScroll),G_Scheduler.unschedule("Auto_Do_Total_Scroll_Of_NewFullSceneAd"),G_Scheduler.unschedule("Auto_Show_Finger_Of_NewFullSceneAd"),G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD)}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,()=>{if(this._isCanClose)return G_UIManager.hideUI("finger"),void G_UIManager.hideUI("newFullSceneAd");e._isTouching||(this._isMistakeEnabled?(e._isTouching=!0,G_UIHelper.autoMove(e,0,0,2e3,1e3,!1,new Laya.Vector2(0,0),t=>{"hold_finished_1"===t&&G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD),"hold_finished_2"===t?e._moveTween=Laya.Tween.to(e,{x:e._originalPos.x,y:e._originalPos.y-250},1e3,null,Laya.Handler.create(null,function(){e._moveTween=null}),0,!1,!1):"move_finished"===t&&(e._isTouching=!1,this._isCanClose=!0,e.x=e._originalPos.x,e.y=e._originalPos.y-250)})):(G_UIManager.hideUI("finger"),G_UIManager.hideUI("newFullSceneAd")))}),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}}class Ki extends bi{constructor(){super(),this._startBtn=null,this._advLoadMgrs=[],this._isFirstTouch=!1,this._progress=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"startBtn");e&&(e._isTouching=!1,this._startBtn=e,e.on("click",null,function(){this.onStartTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"btnAdvLoader");t&&this._advLoadMgrs.push(t.getComponent(Fi));let i=G_UIHelper.seekNodeByName(this.owner,"listAdvLoader");if(i){let e=i.getComponent(Fi);this._advLoadMgrs.push(e),Laya.loader.create("prefab/ad/wx/fakeListItem.json",Laya.Handler.create(null,t=>{let n=new Laya.Prefab;n.json=t,e.getAdvInfos(()=>{let e=G_UIHelper.seekNodeByName(i,"list"),t=3;e.cells.forEach(e=>{if(e&&!e._advFrameExt){t+=1;let i=n.create();i.pivotX=i.width/2,i.pivotY=i.height/2,i.x=i.width/2,i.y=i.height/2,G_UIHelper.seekNodeByName(i,"rank").text=t.toString();let s=G_UIHelper.seekNodeByName(i,"tips");this._setRankTips(s,t),e._advFrameExt=i,e.addChild(i)}})})}))}let n=G_UIHelper.seekNodeByName(this.owner,"progressTips"),s=G_UIHelper.seekNodeByName(this.owner,"progress");s.setFakeProgress=(e=>{e=e>1?1:e,s.value=e,n.text="游戏资源加载中...{0}%".format(Math.floor(100*e).toString())}),this._progress=s}onInit(){this._isFirstTouch=!0,G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),this._startBtn.visible=!1,this._progress.setFakeProgress(0);let e=G_ServerInfo.getServerTime();G_Switch.getFakeLoadingConfig(t=>{G_Scheduler.schedule("Fake_Loading_Progress",()=>{let i=(G_ServerInfo.getServerTime()-e)/t.time;this._progress.setFakeProgress(i),i>=1&&(this._startBtn.visible=!0,G_Scheduler.unschedule("Fake_Loading_Progress"))},!0)});for(let e=1;e<=3;e++){let t="static_tips_"+e.toString(),i=G_UIHelper.seekNodeByName(this.owner,t);this._setRankTips(i,e)}}onHide(){this._advLoadMgrs.length>0&&this._advLoadMgrs.forEach(e=>{e.hideAdv()})}onStartTouched(e){G_UIHelper.playBtnTouchAction(e,()=>{this._isFirstTouch?(this._isFirstTouch=!1,this._advLoadMgrs&&this._advLoadMgrs[0].randomNavigate()):G_UIManager.hideUI("fakeLoadingAd")}),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}_setRankTips(e,t){e&&(e.text=t<=20?G_Utils.random(8*(20-t),8*(20-t+1)).toString()+"万人在玩":"新游立即玩")}}class Xi extends bi{constructor(){super(),this._title=null,this._desc=null,this._advBtn=null,this._closeBtn=null,this._clickBtn=null,this._insertAdObj=null,this._insertAdInfo=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"title");e&&(this._title=e);let t=G_UIHelper.seekNodeByName(this.owner,"desc");t&&(this._desc=t,G_PlatHelper.isHWPlatform()&&(t.visible=!1));let i=G_UIHelper.seekNodeByName(this.owner,"adv");i&&(this._advBtn=i,i.on("click",null,function(){this.onAdvTouched(i)}.bind(this)));let n=G_UIHelper.seekNodeByName(this.owner,"closeBtn");n&&(this._closeBtn=n,n.on("click",null,function(){this.onCloseTouched(n)}.bind(this)));let s=G_UIHelper.seekNodeByName(this.owner,"clickBtn");s&&(this._clickBtn=s,s.on("click",null,function(){this.onClickTouched(s)}.bind(this)))}onInit(){let e=G_OVAdv.getNextNativeAdInfo();if(e){let t=e[0],i=e[1];t&&i&&(this._insertAdObj=t,this._insertAdInfo=i,this._title&&(this._title.text=i.title),this._advBtn&&i.imgUrlList.length>0&&(this._advBtn.skin=i.imgUrlList[0]),this._desc&&(this._desc.text=i.desc),G_OVAdv.reportNativeAdShow(t,i.adId)),G_MistakeMgr.isBtnMistakeEnabled(e=>{this._clickBtn.skin=e?"ad/ov/insert_ad_check_btn.png":"ad/ov/insert_ad_shutdown_btn.png"})}}onHide(){}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,function(){G_OVAdv.reportNativeAdHide(),G_UIManager.hideUI("insertAd")}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}onClickTouched(e){G_UIHelper.playBtnTouchAction(e,function(){"ad/ov/insert_ad_check_btn.png"===e.skin?this._clickAdv():G_OVAdv.reportNativeAdHide(),G_UIManager.hideUI("insertAd")}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}onAdvTouched(e){this._clickAdv(),G_UIManager.hideUI("insertAd"),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}_clickAdv(){this._insertAdObj&&this._insertAdInfo&&G_OVAdv.reportNativeAdClick(this._insertAdObj,this._insertAdInfo.adId,this._insertAdInfo.localAdID)}}class Yi extends bi{constructor(){super(),this._advLoadMgr=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"bannerAdLoader");e&&(this._advLoadMgr=e.getComponent(Fi))}onInit(){this._advLoadMgr&&this._advLoadMgr.refreshAdv()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}}class zi extends bi{constructor(){super(),this._advLoadMgr=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"adLoader");e&&(this._advLoadMgr=e.getComponent(Fi))}onInit(){this._advLoadMgr&&this._advLoadMgr.refreshAdv()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}}class Qi extends bi{constructor(){super(),this._closeBtn=null,this._advLoadMgr=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=this.owner.getComponent(Fi);t&&(this._advLoadMgr=t)}onInit(){this._closeBtn&&G_UIHelper.delayShow(this._closeBtn),this._advLoadMgr&&this._advLoadMgr.refreshAdv()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,function(){G_OVAdv.reportNativeAdHide(),G_UIManager.hideUI("exitAd")}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}}class Ji extends bi{constructor(){super(),this._advLoadMgr=null,this._exitBtn=null}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"adLoader");if(e){if(G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().getMenuButtonBoundingClientRect()){let t=G_PlatHelper.getPlat().getMenuButtonBoundingClientRect(),i=G_UIHelper.convertToWorldPt({x:t.left,y:t.top}),n=G_UIHelper.convertToWorldSize({width:t.width,height:t.height});e.x=i.x,e.y=i.y+n.height+10,e.width=n.width,e.height=n.height}this._advLoadMgr=e.getComponent(Fi)}let t=G_UIHelper.seekNodeByName(this.owner,"exitBtn");t&&(this._exitBtn=t,t.on("click",null,function(){this.onExitTouched(t)}.bind(this)))}onExitTouched(){this._advLoadMgr&&this._advLoadMgr.randomNavigate()}}class Zi extends bi{constructor(){super(),this._closeBtn=null,this._advLoadMgr=null,this._isMistakeEnabled=!1,this._isCanClose=!1}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(e._isTouching=!1,this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"advLoader");t&&(this._advLoadMgr=t.getComponent(Fi))}onInit(){this._isMistakeEnabled=!1;let e=G_MistakeMgr.isMoveMistakeEnabled;"function"==typeof G_MistakeMgr.isExitMistakeEnabled?(e=G_MistakeMgr.isExitMistakeEnabled,console.log("Use Exit Mistake...")):console.log("Use Move Mistake..."),e(e=>{this._isMistakeEnabled=e,e?this._isCanClose=!1:(this._isCanClose=!0,G_UIHelper.delayShow(this._closeBtn))}),this._advLoadMgr&&this._advLoadMgr.refreshAdv(),G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),G_Switch.getAutoRandomNavPagesCfg(e=>{e.forEach(e=>{"exit"===e.toLowerCase()&&this._advLoadMgr&&this._advLoadMgr.randomNavigate()})})}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,()=>{this._isCanClose?G_UIManager.hideUI("newGameExitAd"):e._isTouching||(this._isMistakeEnabled?(e._isTouching=!0,G_UIHelper.autoMoveWithDefaultConfig(e,new Laya.Vector2(0,0),t=>{"hold_finished_1"===t?G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD):"move_finished"===t&&(e._isTouching=!1,this._isCanClose=!0,G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD))})):G_UIManager.hideUI("newGameExitAd"))}),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}}class $i extends bi{constructor(){super(),this._minusGap=100,this._miniMinusValue=.06,this._maxMinusValue=.06,this._addValue=.175,this._targetValue=.5,this._miniClickTimes=1,this._maxClickTimes=3,this._needClickTimes=0,this._curClickTimes=0,this._maxValue=1,this._miniValue=0,this._clickInvokeRate=30,this._showBannerDuration=1500,this._isFirstShow=!1,this._clickProgress=null,this._clickBtn=null,this._scheduleKey="",this._isMistakeEnabled=!1,this._isAdvShowed=!1,this._isAdvClicked=!1}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI(),G_Switch.getClickMistakeConfig(e=>{this._minusGap=e.gap,this._miniMinusValue=e.miniMinus,this._maxMinusValue=e.maxMinus,this._addValue=e.add,this._targetValue=e.target,this._miniClickTimes=e.miniClick,this._maxClickTimes=e.maxClick,this._clickInvokeRate=e.rate,this._showBannerDuration=e.duration,this._isFirstShow=e.firstShow})}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"clickProgress");e&&(this._clickProgress=e,this._clickProgress.value=0);let t=G_UIHelper.seekNodeByName(this.owner,"clickBtn");t&&(this._clickBtn=t,t._originalBottom=this._clickBtn.bottom,t.on("click",null,()=>{G_UIHelper.playBtnTouchAction(t),G_SoundMgr.playSound(G_SoundName.SN_CLICK),this.onAddclickProgress()})),this._finger=G_UIHelper.seekNodeByName(this.owner,"finger"),this._finger._originalBottom=this._finger.bottom,this._tips=G_UIHelper.seekNodeByName(this.owner,"tips"),this._tips._originalBottom=this._tips.bottom}onShow(){this._initEvent()}onHide(){this._unschedule(),G_Scheduler.unschedule("Delay_Hide_Mistake_Banner"),this._unInitEvent()}onInit(){G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),this._isMistakeEnabled=G_MistakeMgr.isClickMistakeEnabledAsync(),this._isAdvShowed=!1,this._isAdvClicked=!1,this._needClickTimes=G_Utils.random(this._miniClickTimes,this._maxClickTimes),this._curClickTimes=0,this._clickProgress&&(this._clickProgress.value=0),this._isFirstShow&&(G_PlatHelper.isWXPlatform()?(this._clickBtn.bottom=this._clickBtn._originalBottom+300,this._finger.bottom=this._finger._originalBottom+300,this._tips.bottom=this._tips._originalBottom+300):(this._clickBtn.bottom=this._clickBtn._originalBottom+200,this._finger.bottom=this._finger._originalBottom+200,this._tips.bottom=this._tips._originalBottom+200),G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD)),this._schedule()}onAddclickProgress(){this._clickProgress.value+=this._addValue,this._clickProgress.value>=this._maxValue&&(this._clickProgress.value=this._maxValue,this._tryToHide()),this._isMistakeEnabled&&this._clickProgress.value>this._targetValue&&(this._curClickTimes+=1,this._curClickTimes===this._needClickTimes&&this._tryShowAdv())}onMimusclickProgress(){if(this._clickProgress.value>this._miniValue){let e=G_Utils.random(100*this._miniMinusValue,100*this._maxMinusValue);this._clickProgress.value-=e/100,this._clickProgress.value<this._miniValue&&(this._clickProgress.value=this._miniValue)}}_initEvent(){G_Event.addEventListerner(G_EventName.EN_APP_BEFORE_ONHIDE,this._onAdvTouched,this),G_Event.addEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this._onBackFromTouchAdv,this)}_unInitEvent(){G_Event.removeEventListerner(G_EventName.EN_APP_BEFORE_ONHIDE,this._onAdvTouched,this),G_Event.removeEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,this._onBackFromTouchAdv,this)}_onAdvTouched(){"banner"===this.invokeType&&G_Scheduler.unschedule("Delay_Hide_Mistake_Banner")}_onBackFromTouchAdv(){"banner"===this.invokeType&&this._isAdvShowed&&(this._isAdvClicked=!0,this._clickProgress.value=this._maxValue,this._tryToHide(1500))}_tryShowAdv(){this._isAdvShowed||(this._isAdvShowed||(this._isAdvShowed=!0),"banner"===this.invokeType?(this._isFirstShow?G_Event.dispatchEvent(G_EventName.EN_MOVE_BANNER_AD,{top:200}):G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD),G_Scheduler.schedule("Delay_Hide_Mistake_Banner",()=>{this._isFirstShow?G_Event.dispatchEvent(G_EventName.EN_MOVE_BANNER_AD,{bottom:200}):G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),this._isAdvShowed=!1,this._needClickTimes=G_Utils.random(this._miniClickTimes,this._maxClickTimes),this._curClickTimes=0},!1,this._showBannerDuration,1)):"appBox"===this.invokeType&&G_Adv.createBoxAdv(()=>{this._clickProgress.value=this._maxValue,this._tryToHide()}))}_tryToInvoke(){"banner"===this.invokeType?G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD):"appBox"===this.invokeType&&G_Adv.createBoxAdv(()=>{this._tryToHide()})}_tryToHide(e=1e3){if(this._isAdvClicked||this._clickProgress.value>=this._maxValue){if(G_Scheduler.isScheduled("Delay_Hide_Click_Mistake_Popup"))return;this._unschedule(),G_Scheduler.schedule("Delay_Hide_Click_Mistake_Popup",()=>{"banner"===this.invokeType?(G_UIManager.hideUI("clickBtnMistake"),G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD)):"appBox"===this.invokeType&&G_UIManager.hideUI("clickBoxMistake")},!1,e,1)}}_schedule(){this._unschedule(),this._scheduleKey=G_Utils.generateString(32),G_Scheduler.schedule(this._scheduleKey,()=>{this.onMimusclickProgress()},!1,this._minusGap)}_unschedule(){""!==this._scheduleKey&&(G_Scheduler.unschedule(this._scheduleKey),this._scheduleKey="")}}class en extends bi{constructor(){super(),this._bg=null,this._title=null,this._content=null,this._icon=null,this._cancelBtn=null,this._confirmBtn=null,this._cb=null,this._onShowAdvInfo=null,this._canGotReward=!1}onAwake(){this._rootNode=this.rootNode,this._openType=this.openType,this._closeType=this.closeType}onEnable(){this._initUI()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"bg");e&&(this._bg=e);let t=G_UIHelper.seekNodeByName(this.owner,"title");t&&(this._title=t);let i=G_UIHelper.seekNodeByName(this.owner,"content");i&&(this._content=i);let n=G_UIHelper.seekNodeByName(this.owner,"icon");n&&(n.getAdvLoadMgr=function(){return n._advLoadMgr},n._advLoadMgr=n.getComponent(Fi),this._icon=n);let s=G_UIHelper.seekNodeByName(this.owner,"cancelBtn");s&&(s.on("click",null,function(){this.onCancelTouched(s)}.bind(this)),this._cancelBtn=s);let o=G_UIHelper.seekNodeByName(this.owner,"confirmBtn");o&&(o.on("click",null,function(){this.onConfirmTouched(o)}.bind(this)),this._confirmBtn=o)}_initEvent(){G_Event.addEventListerner(G_EventName.EN_LAUNCH_APP_BACK_FROM_OTHER_APP,this._onGotReward,this)}_unInitEvent(){G_Event.removeEventListerner(G_EventName.EN_LAUNCH_APP_BACK_FROM_OTHER_APP,this._onGotReward,this)}_onGotReward(){this._canGotReward&&(this._canGotReward=!1,G_UIManager.hideUI("rewardNavAd"),G_Event.dispatchEvent(G_EventName.EN_GOT_NAVIGATION_REDPACKAGE))}onShow(){this._initEvent()}onHide(){this._unInitEvent()}onInit(){this._canGotReward=!1,this._icon.getAdvLoadMgr().refreshAdv(),this._icon.getAdvLoadMgr().getAdvInfos(e=>{if(e.length>0){let t=e[0];this._onShowAdvInfo=t,this._content.text="进入"+t.title+"领取红包"}else this.hideUI()})}onCancelTouched(){G_UIManager.hideUI("rewardNavAd"),G_Event.dispatchEvent(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,this._icon.getAdvLoadMgr().advKey)}onConfirmTouched(){this._onShowAdvInfo&&this._icon.getAdvLoadMgr().navagate(this._onShowAdvInfo,e=>{e?this._canGotReward=!0:(G_UIManager.hideUI("rewardNavAd"),G_Event.dispatchEvent(G_EventName.EN_CANCEL_NAVIGATION_FROM_AD,this._icon.getAdvLoadMgr().advKey))})}}class tn extends bi{constructor(){super(),this._closeBtn=null,this._clickBtn=null,this._checkBtn=null,this._insertAdObj=null,this._insertAdInfo=null}onEnable(){this._initUI(),this._initEvent()}onDisable(){this._unInitEvent()}_initUI(){let e=G_UIHelper.seekNodeByName(this.owner,"closeBtn");e&&(this._closeBtn=e,e.on("click",null,function(){this.onCloseTouched(e)}.bind(this)));let t=G_UIHelper.seekNodeByName(this.owner,"clickBtn");t&&(this._clickBtn=t,t.on("click",null,function(){this.onClickTouched(t)}.bind(this)));let i=G_UIHelper.seekNodeByName(this.owner,"checkBtn");i&&(this._checkBtn=i,i.on("click",null,function(){this.onClickTouched(i)}.bind(this)))}_initEvent(){G_Event.addEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_unInitEvent(){G_Event.removeEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_initOnShowEvent(){G_Event.addEventListerner(G_EventName.EN_REFRESH_ONSHOW_FLOW_AD,this._refreshNativeAd,this)}_unInitOnShowEvent(){G_Event.removeEventListerner(G_EventName.EN_REFRESH_ONSHOW_FLOW_AD,this._refreshNativeAd,this)}_doShowAndRefreshAd(){this.showUI()}onShow(){this._initOnShowEvent()}onInit(){this._refreshNativeAd()}onHide(){this._unInitOnShowEvent()}onCloseTouched(e){G_UIHelper.playBtnTouchAction(e,function(){G_OVAdv.reportNativeAdHide(),this.hideUI()}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}onClickTouched(e){let t=()=>{this._insertAdObj&&this._insertAdInfo&&G_OVAdv.reportNativeAdClick(this._insertAdObj,this._insertAdInfo.adId,this._insertAdInfo.localAdID),this.hideUI()};e===this._clickBtn?t():G_UIHelper.playBtnTouchAction(e,function(){t()}.bind(this)),G_SoundMgr.playSound(G_SoundName.SN_CLICK)}_refreshNativeAd(){if(!this.isOnShow())return;if(!G_PlatHelper.isOVPlatform()&&!G_PlatHelper.isHWPlatform())return void this.hideUI();let e=function(e){if(!this.destroyed){if(e){let e=G_OVAdv.getNextNativeAdInfo();if(e){let t=e[0],i=e[1];if(t&&i&&(this._insertAdObj=t,this._insertAdInfo=i,this._clickBtn)){let e="";return i.imgUrlList.length>0?e=i.imgUrlList[0]:i.iconUrlList.length>0&&(e=i.iconUrlList[0]),void(G_PlatHelper.isHWPlatform()?(this._clickBtn.skin="",Laya.loader.load(e,Laya.Handler.create(this,function(){this.destroyed||(this.owner.visible=!0,this._clickBtn.skin=e,G_OVAdv.reportNativeAdShow(t,i.adId))}))):(this.owner.visible=!0,this._clickBtn.skin=e,G_OVAdv.reportNativeAdShow(t,i.adId)))}}}this.hideUI()}}.bind(this);this.owner.visible=!1,G_PlatHelper.isHWPlatform()?(G_OVAdv.reportNativeAdHide(),G_OVAdv.loadRandomNativeAd(e)):e()}}let nn={key:"clickBtnMistake",zOrder:99,isAutoDestory:!1,cls:$i,prefab:"prefab/mistake/clickButton.json"},sn={key:"clickBoxMistake",zOrder:99,isAutoDestory:!1,cls:$i,prefab:"prefab/mistake/clickBox.json"},on={key:"setting",zOrder:101,isAutoDestory:!1,cls:Li,prefab:"prefab/settingView.json"},rn={key:"moreGameAd",zOrder:102,isAutoDestory:!1,cls:Wi,prefab:"prefab/ad/wx/moreGameAd.json"},an={key:"moreGameAd",zOrder:102,isAutoDestory:!1,cls:Wi,prefab:"prefab/ad/oppo/moreGameAd.json"},ln={key:"scrollAd",zOrder:885,isAutoDestory:!1,cls:zi,prefab:"prefab/ad/wx/scrollAd.json"},hn={key:"scrollAdWithName",zOrder:885,isAutoDestory:!1,cls:zi,prefab:"prefab/ad/wx/scrollAd_WithName.json"},cn={key:"bannerAd",zOrder:886,isAutoDestory:!1,cls:Yi,prefab:"prefab/ad/bannerAd.json"},dn={key:"hwBannerAd",zOrder:886,isAutoDestory:!1,cls:tn,prefab:"prefab/ad/hw/nativeBannerAd.json"},un={key:"insertAd",zOrder:887,isAutoDestory:!1,cls:Xi,prefab:"prefab/ad/ov/insertAd.json"},pn={key:"fullSceneAd",zOrder:888,isAutoDestory:!1,cls:ji,prefab:"prefab/ad/wx/fullSceneAd.json"},_n={key:"newFullSceneAd",zOrder:888,isAutoDestory:!1,cls:qi,prefab:"prefab/ad/wx/newFullSceneAd.json"},gn={key:"fakeLoadingAd",zOrder:888,isAutoDestory:!1,cls:Ki,prefab:"prefab/ad/wx/fakeLoadingAd.json"},fn={key:"exitAd",zOrder:889,isAutoDestory:!1,cls:Qi,prefab:"prefab/ad/wx/exitAd.json"},mn={key:"newGameExitAd",zOrder:889,isAutoDestory:!1,cls:Zi,prefab:"prefab/ad/wx/newGameExitAd.json"},yn={key:"exitBtnAd",zOrder:890,isAutoDestory:!1,cls:Ji,prefab:"prefab/ad/wx/exitBtnAd.json"},wn={key:"rewardNavAd",zOrder:891,isAutoDestory:!1,cls:en,prefab:"prefab/ad/wx/rewardNavAd.json"},In={key:"finger",zOrder:990,isAutoDestory:!1,cls:Ni,prefab:"prefab/fingerView.json"},vn={key:"modal",zOrder:996,isAutoDestory:!1,cls:Oi,prefab:"prefab/modalView.json"},Pn={key:"capture",zIndex:997,isAutoDestory:!1,cls:ki,prefab:"prefab/captureView.json"},Sn={key:"loading",zOrder:998,isAutoDestory:!1,cls:Ei,prefab:"prefab/loadingView.json"},Tn={key:"tips",zOrder:999,isAutoDestory:!1,cls:Ci,prefab:"prefab/tipsView.json"};var Gn=null;Gn=void 0!==window.qq?[In,Pn,nn,sn,on]:void 0!==window.tt?[In,Pn,Tn,on]:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("oppo")>-1?[In,Tn,on,an,un]:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("vivo")>-1?[In,Tn,on,un]:void 0!==window.qg&&window.qg.getProvider().toLowerCase().indexOf("meizu")>-1?[In,vn,Sn,Tn,on]:void 0!==window.hbs?[In,vn,on,un,dn]:void 0!==window.qttGame?[In,vn,Tn,Sn,on]:void 0!==window.wx?[In,Pn,nn,on,rn,ln,hn,cn,pn,_n,gn,fn,mn,yn,wn]:[In,Pn,nn,sn,vn,Sn,Tn,on,rn,ln,hn,cn,dn,pn,_n,gn,fn,mn,yn,wn];[].forEach(function(e){Gn.push(e)});var bn=function(){var e;return{getInstance:function(){return e||(e=function(){console.log("Init G_UIManager Instance...");var e={},t=null,i=function(e){return"string"==typeof e&&""!==e};return{registerUIRoot(e){t=e},unregisterUIRoot(){t=null},registerAllUIs(){Gn.forEach(e=>{this.registerUI(e.key,e.zOrder,e.isAutoDestory,e.cls,e.prefab)})},registerUI(t,n,s,o,r){i(t)?void 0===e[t]?i(r)&&r.lastIndexOf(".json")===r.length-5?(e[t]={key:t,zOrder:n,isAutoDestory:s,cls:o,prefab:r,prefabObj:null,node:null,clsObj:null,closeCb:null},Laya.loader.create(r,Laya.Handler.create(null,i=>{e[t].prefabObj=i})),console.log("UIManager.registerUI: {0} UI has registered successful...".format(t))):console.error("UIManager.registerUI: prefab must be a type of string and not empty and end with '.json'..."):console.error("UIManager.registerUI: {0} has registered before...".format(t)):console.error("UIManager.registerUI: key must be a type of string and not empty...")},unregisterUI(t){this._doCheck(t,"unregisterUI")&&(delete e[t],console.log("UIManager.unregisterUI: {0} UI has unregistered successful...".format(t)))},showUI(e,i){let n=this._doCheck(e,"showUI");if(n){if(!n.node){let e=new Laya.Prefab;e.json=n.prefabObj,n.node=e.create(),n.node&&("string"==typeof n.cls?n.clsObj=G_UIHelper.getComponentByName(n.node,n.cls):n.clsObj=n.node.getComponent(n.cls),n.node.zOrder=n.zOrder,t.addChild(n.node))}if(n.closeCb=i,arguments.length>2){let e=Array.prototype.slice.call(arguments);e.shift(),e.shift(),n.clsObj.showUI.apply(n.clsObj,e)}else n.clsObj.showUI.apply(n.clsObj,[]);return[n.node,n.clsObj]}return null},hideUI(e){let t=this._doCheck(e,"hideUI");if(t&&t.node){let e=null;e=function(){t.clsObj.unregisterCallback("close",e),"function"==typeof t.closeCb&&(t.closeCb(),t.closeCb=null),t.isAutoDestory&&this._destroyUI(t)}.bind(this),t.clsObj.registerCallback("close",e),t.clsObj.hideUI()}},getUI(e){let t=this._doCheck(e,"getUI");return t?[t.node,t.clsObj]:null},preloadUI(e,t){let i=[];if("string"==typeof e){let t=e;i.push(this._doPreloadUI(t))}else if(Array.isArray(e))for(let t=0;t<e.length;t++){let n=e[t];i.push(this._doPreloadUI(n))}G_Scheduler.schedule("UIManager_Preload_UI",function(){for(let e=0;e<i.length;e++){let t=i[e];t.visible=!1,t.opacity=255}"function"==typeof t&&t()}.bind(this),!1,100,0)},_doPreloadUI(e){if(this._doCheck(e,"preloadUI")){let t=this.showUI(e),i=null;if(t&&(i=t[0]),i)return i.opacity=0,i}return null},_doCheck(t,n){if(!i(t))return console.error("UIManager.{0}: key must be a type of string and not empty...".format(n)),null;let s=e[t];return void 0===s?(console.error("UIManager.{0}: {1} has not registered before...".format(n,t)),null):s},_destroyUI(e){e&&e.node&&(e.node.destroy(),e.node=null)}}}()),e}}}();window.G_UIManager=bn.getInstance();const Cn=1;var On=function(){var e;function init(){console.log("Init G_RedPackageMgr Instance...");var e=null;return{iniCfgs(t){console.log("init red package config: ",t),e=t},depositMoney(t){if("function"!=typeof t)return;if(!e)return console.error("depositMoney fail, check web config..."),void t(!1,"未检查到相应红包网络配置");let i=(()=>{if(e&&e.redPack.length>0){let t=G_PlayerInfo.getTotalGotRedPackageCount()+1,i=-1,n=-1;for(let s=0;s<e.redPack.length;s++){const o=e.redPack[s];o.redPackStartNum<=t&&o.redPackEndNum>=t&&(i=o.redPackMinMoney,n=o.redPackMaxMoney)}if(-1===i){let t=e.redPack[e.redPack.length-1];i=t.redPackMinMoney,n=t.redPackMaxMoney}return console.log("{0} time to deposit money, min: {1}, max: {2}".format(t.toString(),i.toString(),n.toString())),G_Utils.random(i,n)}return 0})();if(0===i)return console.error("depositMoney fail, check web config..."),void t(!1,"未检查到相应红包网络配置");G_NetHelper.reqDepositMoney(G_PlayerInfo.getSessID(),Cn,i,e=>{e&&0===e.code?(G_PlayerInfo.depositMoney(i),G_PlayerInfo.addTotalGotRedPackageCount(),t(!0,i)):t(!1,"当前网络异常，请稍后重试")})},withdrawMoney(t,i){if("function"!=typeof i)return;if(!e)return console.error("withdrawMoney fail, check web config..."),void i(!1,"未检查到相应提取网络配置");if("number"!=typeof t)return console.error("withdrawMoney fail, check input...",t),void i(!1,"提取金额错误");if(G_PlayerInfo.getMoney()<t)return console.warn("withdrawMoney fail, not enough money..."),void i(!1,"余额不足");G_NetHelper.reqWithdrawMoney(G_PlayerInfo.getSessID(),t,G_PlayerInfo.getTodayAdvTimes(),G_PlayerInfo.getTotalAdvTimes(),e=>{e&&0===e.code?(G_PlayerInfo.withdrawMoney(t),i(!0,t)):i(!1,"当前提取人数过多，请稍后尝试")})},withdrawEverydayMoney(t){if("function"!=typeof t)return;if(!e)return console.error("withdrawEverydayMoney fail, check web config..."),void t(!1,"未检查到相应提取网络配置");if(G_PlayerInfo.isWithdrawEverydayMoneyToday())return console.warn("withdrawEverydayMoney fail, withdrawed before..."),void t(!1,"您今天已经提取过了");if(G_PlayerInfo.getTodayAdvTimes()<e.everydayWithdraw.currentDayVideoNum)return console.warn("withdrawEverydayMoney fail, need more adv times..."),void t(!1,"当前广告观看次数不够");let i=(()=>e&&e.everydayWithdraw.minMoney<=e.everydayWithdraw.maxMoney?G_Utils.random(e.everydayWithdraw.minMoney,e.everydayWithdraw.maxMoney):0)();if(0===i)return console.error("withdrawEverydayMoney fail, check web config..."),void t(!1,"未检查到相应提取网络配置");G_NetHelper.reqWithdrawEverydayMoney(G_PlayerInfo.getSessID(),i,G_PlayerInfo.getTodayAdvTimes(),G_PlayerInfo.getTotalAdvTimes(),G_ServerInfo.getCurServerDayOfYear(),e=>{e&&0===e.code?(G_PlayerInfo.withdrawEverydayMoney(i),t(!0,i)):t(!1,"当前提取人数过多，请稍后尝试")})},getMoney:()=>G_PlayerInfo.getMoney(),getTotalWithdrawMoney:()=>G_PlayerInfo.getTotalWithdrawMoney(),getTotalWithdrawMoneyTimes:()=>G_PlayerInfo.getTotalWithdrawMoneyTimes(),isWithdrawEverydayMoneyToday:()=>G_PlayerInfo.isWithdrawEverydayMoneyToday(),getNeedAdvTimesOfEverydayMoney:()=>e?e.everydayWithdraw.currentDayVideoNum:0,getAllDepositOptions(){let t=[];if(e&&e.withdraw.length>0)for(let i=0;i<e.withdraw.length;i++){const n=e.withdraw[i];t.push(n.withdrawMoney)}return t.length>0&&(t.sort((e,t)=>e-t),(this.getTotalWithdrawMoney()>0||this.getTotalWithdrawMoneyTimes()>0)&&t.splice(0,1)),t}}}return{getInstance:function(){return e||(e=init()),e}}}();window.G_RedPackageMgr=On.getInstance();var An=function(){var e,t=function(){let e=G_PlatHelper.getStorage("my_video_ids_of_player_{0}".format(G_PlayerInfo.getOpenID()));if(e&&""!==e){return JSON.parse(e)}return[]},i=function(e){let t=G_PlatHelper.getStorage("my_video_ids_of_player_{0}".format(G_PlayerInfo.getOpenID())),i=null;(i=t&&""!==t?JSON.parse(t):[]).push(e),G_PlatHelper.setStorage("my_video_ids_of_player_{0}".format(G_PlayerInfo.getOpenID()),JSON.stringify(i))};return{getInstance:function(){return e||(console.log("Init G_VideoRankMgr Instance..."),e={refreshAndReport(){if(!G_PlatHelper.isTTPlatform())return;let e=t();e.length>0&&G_PlatHelper.getPlat().request({url:"https://gate.snssdk.com/developer/api/get_video_info",method:"POST",data:{alias_ids:e},success:e=>{if(e.data&&e.data.data&&e.data.data.length>0){let t=[];e.data.data.forEach(e=>{t.push({videoId:e.alias_id,digg:e.video_info.digg_count,coverUrl:e.video_info.cover_url})}),G_NetHelper.reqReportMyVideoRankInfos(t,e=>{0===e.code?console.log("report my video infos succ..."):console.log("report my video infos fail...")})}}})},recordMyNewVideoId(e){G_PlatHelper.isTTPlatform()&&(i(e),this.refreshAndReport())},getAllVideoRankInfo(e){G_PlatHelper.isTTPlatform()&&"function"==typeof e&&G_NetHelper.reqAllVideoRankInfos(t=>{0===t.code?e(t.data):e([])})}}),e}}}();window.G_VideoRankMgr=An.getInstance();var En="storage_key_of_local_asset_version",kn="zip_info.json",Nn=function(){var e;function init(){console.log("Init G_AssetMgr Instance...");var e=!1,t=null,i={},n=function(e){let t=G_PlatHelper.getStorage(En);if(t&&""!==t){let i=JSON.parse(t);if(void 0!==i[e])return i[e].version}return 0},s=function(){return G_PlatHelper.getPlat()?G_PlatHelper.getPlat().getFileSystemManager():null},o=function(e,t=!1){if(G_PlatHelper.getPlat()){let i=s();if(G_PlatHelper.isVIVOPlatform()){let n=e;if("/"!==n[n.length-1]&&(n+="/"),!i.accessSync(n))return t&&i.mkdirSync(n),!1}else try{i.accessSync(e)}catch(n){try{return t&&i.mkdirSync(e,!0),!1}catch(e){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}}return!0}return!0},r=function(e,t){if(G_PlatHelper.getPlat()){let i=s(),n=i.readdirSync(e+(G_PlatHelper.isVIVOPlatform()?"/":""));G_PlatHelper.isVIVOPlatform()&&(n=n.files),Array.isArray(n)&&n.length>0&&n.forEach(n=>{let s=e+"/"+n,o=i.statSync(s);G_PlatHelper.isVIVOPlatform()&&(o=o.stats),o.isFile()?t.push(s):r(s,t)})}},a=function(){if(G_PlatHelper.getPlat()){let e=G_PlatHelper.getPlat().env.USER_DATA_PATH+"/layaairGame";return o(e,!0),e}return""},l=function(e){if("function"==typeof e){let t=Array.prototype.slice.call(arguments);return t.shift(),e.apply(null,t)}return null};return{init:function(i){if(G_PlatHelper.getPlat()){if(G_PlatHelper.isNativePlatform())return console.warn("Do Not Support On Current Platform..."),void l(i);G_HttpHelper.getJson(this._getAssetVersionWebPath(),(s,o)=>{if(s&&o){t=o;for(let e in t){let i=n(e);i===t[e].version&&this._isAssetDownloaded(e)||(console.log("asset "+e+" need update: "+i+" => "+t[e].version),this._deleteTargetAssetCache(e))}e=!0,l(i)}else G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})}else l(i)},isAssetDownloaded:function(t){return!e||this._isAssetDownloaded(t)},download:function(n,s,o){if(!e)return l(s,1),void l(o);let r=[],a=e=>!(!G_PlatHelper.getPlat()||void 0===t[e]||this._isAssetDownloaded(e)||void 0!==i[e]);if(Array.isArray(n))n.forEach(e=>{a(e)&&r.push(e)});else{let e=n;a(e)&&r.push(e)}if(r.length>0){let e=0;r.forEach(t=>{this._downloadAsset(t,()=>{l(s,(e+=1)/r.length),e===r.length&&l(o)})})}else l(s,1),l(o)},_downloadAsset:function(e,t){void 0===i[e]?(i[e]=[],this._deleteTargetAssetCache(e),this._doDownloadAndParseAsset(e,n=>{i[e].length>0&&(i[e].forEach(e=>{l(e,n)}),delete i[e]),l(t,n)})):i[e].push(t)},_doDownloadAndParseAsset:function(e,i){let n=Date.now(),s=this._getAssetWebPath(e,t[e].version);this._doDownloadAsset(s,(s,o)=>{let r=Date.now();console.log("cost time(ms) of download asset: {0}".format(e),r-n);let a=Laya.URL.getPath(this._getAssetCacheDir(e));"/"===a[a.length-1]&&(a=a.substr(0,a.length-1)),this._unzipAsset(s,a,()=>{let s=Date.now();console.log("cost time(ms) of unzip asset: {0}".format(e),s-r),this._parseAsset(e,a+"/"+e,()=>{let o=Date.now();console.log("cost time(ms) of parse asset: {0}".format(e),o-s),console.log("cost total time(ms) of asset: {0}".format(e),o-n),function(e,t){let i=G_PlatHelper.getStorage(En),n=null;void 0!==(n=i&&""!==i?JSON.parse(i):{})[e]?n[e].version=t:n[e]={version:t},G_PlatHelper.setStorage(En,JSON.stringify(n))}(e,t[e].version),l(i,a)})})})},_doDownloadAsset:function(e,t){G_PlatHelper.getPlat().downloadFile({url:e,success:e=>{200===e.statusCode?l(t,e.tempFilePath):G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)},fail:()=>{G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})},_unzipAsset:function(e,t,i){s().unzip({zipFilePath:e,targetPath:t,success:()=>{l(i)},fail:()=>{G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)}})},_parseAsset:function(e,t,i){let n=[];if(r(t,n),n.length>0){let s=[],o=()=>{s.length===n.length&&(Laya.MiniFileMgr.onSaveZipFiles(s),l(i))};for(let i=0;i<n.length;i++){let r=n[i],a="."+Laya.Utils.getFileExtension(r),l=r.replace(t,e),h=G_BaseUrlPath+l;".lmat"===a||".lh"===a||".ls"===a||".json"===a?(s.push({readyUrl:h,md5Name:l,encoding:"utf8",fileSize:0}),o()):(s.push({readyUrl:h,md5Name:l,encoding:"",fileSize:0}),o())}}},_isAssetDownloaded:function(e){if(!G_PlatHelper.getPlat())return!0;let t=this._getAssetCacheDir(e);if(o(t)&&function(e){if(G_PlatHelper.getPlat()){let t=s();if(G_PlatHelper.isVIVOPlatform()){if(!t.accessSync(e))return!1}else try{t.accessSync(e)}catch(e){return!1}return!0}return!0}(t+"/"+kn)){let i=s().readFileSync(t+"/"+kn,"utf-8");if("string"==typeof i&&""!==i){let t=JSON.parse(i);for(let i=0;i<t.files.length;i++){let n=t.files[i],s=G_BaseUrlPath+e+"/"+n;if(void 0===Laya.MiniFileMgr.fakeObj[s])return console.warn("check webUrl: {0}, state: false, need re-download...".format(s)),!1}return!0}return!1}return!1},_getAssetCacheDir:function(e){return G_PlatHelper.getPlat()?a()+"/"+e:e},_deleteTargetAssetCache:function(e){if(!G_PlatHelper.getPlat())return;!function(e){if(G_PlatHelper.getPlat()){let t=s(),i=e=>{let n=t.readdirSync(e+(G_PlatHelper.isVIVOPlatform()?"/":""));G_PlatHelper.isVIVOPlatform()&&(n=n.files),Array.isArray(n)&&n.length>0&&n.forEach(n=>{let s=e+"/"+n,o=t.statSync(s);G_PlatHelper.isVIVOPlatform()&&(o=o.stats),o.isFile()?t.unlinkSync(s):i(s)}),t.rmdirSync(e)};try{i(e),console.log("remove dir: "+e+" succ...")}catch(e){}}}(a()+"/"+e),function(e){let t=G_PlatHelper.getStorage(En);if(t&&""!==t){let i=JSON.parse(t);void 0!==i[e]&&(delete i[e],G_PlatHelper.setStorage(En,JSON.stringify(i)))}}(e)},_getAssetWebPath:function(e,t){return this._fillPlatType(G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HTTP_ADDR_OF_ASSET_ROOT).str)+"/"+e+"/"+t+".zip"},_getAssetVersionWebPath:function(){return this._fillPlatType(G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HTTP_ADDR_OF_ASSET_VERSION).str)},_fillPlatType:function(e){return e.format(G_PlatHelper.getPlatType(),G_SDKCfg.getAssetResVersion().toString())}}}return{getInstance:function(){return e||(e=init()),e}}}();window.G_AssetMgr=Nn.getInstance();var Ln=protobuf,Dn=Ln.Reader,Bn=Ln.Writer,Mn=Ln.util,Rn=Ln.roots.default||(Ln.roots.default={});Rn.roitescape=function(){var e,t,i={};return i.BaseConfigIDs=(e={},(t=Object.create(e))[e[1]="BC_NET_ADDR"]=1,t[e[2]="BC_SHOT_NAME"]=2,t[e[3]="BC_HTTP_ADDR_OF_SERVER"]=3,t[e[4]="BC_HTTP_ADDR_OF_PATCH_PACKAGE"]=4,t[e[5]="BC_HTTP_ADDR_OF_ASSET_VERSION"]=5,t[e[6]="BC_HTTP_ADDR_OF_ASSET_ROOT"]=6,t[e[7]="BC_APP_VERSION"]=7,t[e[8]="BC_PATCH_VERSION"]=8,t[e[9]="BC_MINI_PROGRAM_ID"]=9,t[e[10]="BC_MINI_PROGRAM_APP_ID"]=10,t[e[11]="BC_MINI_PROGRAM_APP_SECRET"]=11,t[e[12]="BC_QQ_MINI_PROGRAM_APP_ID"]=12,t[e[13]="BC_QQ_MINI_PROGRAM_APP_SECRET"]=13,t[e[14]="BC_OPPO_MINI_PROGRAM_APP_ID"]=14,t[e[15]="BC_OPPO_MINI_PROGRAM_APP_SECRET"]=15,t[e[16]="BC_VIVO_MINI_PROGRAM_APP_ID"]=16,t[e[17]="BC_VIVO_MINI_PROGRAM_APP_SECRET"]=17,t[e[18]="BC_TT_MINI_PROGRAM_APP_ID"]=18,t[e[19]="BC_TT_MINI_PROGRAM_APP_SECRET"]=19,t[e[20]="BC_QTT_MINI_PROGRAM_APP_ID"]=20,t[e[21]="BC_QTT_MINI_PROGRAM_APP_SECRET"]=21,t[e[22]="BC_QTT_MINI_PROGRAM_APP_NAME"]=22,t[e[23]="BC_MZ_MINI_PROGRAM_APP_ID"]=23,t[e[24]="BC_HW_MINI_PROGRAM_APP_ID"]=24,t[e[25]="BC_NATIVE_MINI_PROGRAM_APP_ID"]=25,t[e[26]="BC_NATIVE_MINI_PROGRAM_UNIVERSAL_LINKS"]=26,t[e[27]="BC_MAX_ADV_TIMES_OF_ONE_DAY"]=27,t[e[101]="BC_BORN_COIN_NUM"]=101,t[e[102]="BC_MAX_POWER_NUM"]=102,t[e[103]="BC_BORN_POWER_NUM"]=103,t[e[104]="BC_NEED_TIME_TO_RESTORE_POWER"]=104,t[e[105]="BC_OPENCAPTER_USE_POWER"]=105,t[e[106]="BC_SEE_AD_ADD_POWER"]=106,t[e[107]="BC_WANTED_POWER_NUM"]=107,t[e[108]="BC_SHOW_AD_GET_GOLD"]=108,t[e[109]="BC_CONTINUE_OVER_LEVEL_GET_GOLD"]=109,t),i.UIWordIDs=function(){var e={},t=Object.create(e);return t[e[1]="UIWORD_ID_APP_NAME"]=1,t[e[2]="UIWORD_ID_SYSTEM_ERROR_TITLE"]=2,t[e[3]="UIWORD_ID_SYSTEM_ERROR_CONTENT"]=3,t[e[4]="UIWORD_ID_SYSTEM_ERROR_RELOAD_GAME"]=4,t[e[5]="UIWORD_ID_SYSTEM_ERROR_EXIT_GAME"]=5,t[e[6]="UIWORD_ID_QQ_PLATFORM_NAME"]=6,t[e[7]="UIWORD_ID_WX_PLATFORM_NAME"]=7,t[e[8]="UIWORD_ID_SDK_NOT_SUPPORT_FORMAT"]=8,t[e[9]="UIWORD_ID_NOT_FINISHED_YET"]=9,t[e[10]="UIWORD_ID_PLAYER_BLOCKED_TITLE"]=10,t[e[11]="UIWORD_ID_PLAYER_BLOCKED_CONTENT"]=11,t[e[12]="UIWORD_ID_VIDEO_NOT_SUPPORT"]=12,t[e[13]="UIWORD_ID_SHARE_SUCCESS"]=13,t[e[14]="UIWORD_ID_ADV_SUCCESS"]=14,t[e[15]="UIWORD_ID_ADV_FAIL"]=15,t[e[16]="UIWORD_ID_ADV_NOT_FINISH_CONTENT"]=16,t[e[17]="UIWORD_ID_ADV_NOT_FINISH_CANCEL_TEXT"]=17,t[e[18]="UIWORD_ID_ADV_NOT_FINISH_CONFIRM_TEXT"]=18,t[e[19]="UIWORD_ID_SUBSCRIBE_FAIL_CONTENT"]=19,t[e[20]="UIWORD_ID_SUBSCRIBE_FAIL_CANCEL_TEXT"]=20,t[e[21]="UIWORD_ID_SUBSCRIBE_FAIL_CONFIRM_TEXT"]=21,t[e[22]="UIWORD_ID_NO_MORE_REWARD"]=22,t[e[23]="UIWORD_ID_UNIT_DAY"]=23,t[e[24]="UIWORD_ID_UNIT_WEEK"]=24,t[e[25]="UIWORD_ID_UNIT_HOUR"]=25,t[e[26]="UIWORD_ID_UNIT_MINUTE"]=26,t[e[27]="UIWORD_ID_VIDEO_NOT_READY_YET"]=27,t[e[28]="UIWORD_ID_FORMAT_OF_VIDEO_NOT_READY_YET"]=28,t[e[29]="UIWORD_ID_INSTALL_SHORTCUT_SUCCESS"]=29,t[e[30]="UIWORD_ID_NOT_SUPPORT_ON_IOS_PLATFORM"]=30,t[e[1001]="UIWORD_ID_SHARE_FAIL_TIPS_ONE"]=1001,t[e[1002]="UIWORD_ID_SHARE_FAIL_TIPS_TWO"]=1002,t[e[1003]="UIWORD_ID_SHARE_FAIL_TIPS_THREE"]=1003,t[e[1004]="UIWORD_ID_SHARE_VIDEO_FAIL_TIPS_ONE"]=1004,t[e[101]="UIWORD_ID_LACK_OF_COIN"]=101,t[e[1e4]="UIWORD_ID_POWER_TITLE_PATTAN"]=1e4,t[e[10001]="UIWORD_ID_HAS_SGIN"]=10001,t[e[10002]="UIWORD_ID_NOT_REACH_DAY"]=10002,t[e[10003]="UIWORD_ID_GET_GOLD_WANTED"]=10003,t[e[10004]="UIWORD_ID_DIAM_TITLE_PATTAN"]=10004,t[e[10005]="UIWORD_ID_GET_SKIN_PATTAN"]=10005,t[e[10006]="UIWORD_ID_SGIN_DAY_PATTAN"]=10006,t[e[10007]="UIWORD_UNLOCK_LEVEL_SUCCESS"]=10007,t[e[10008]="UIWORD_UNLOCK_LEVEL_FAIL"]=10008,t[e[10009]="UIWORD_PLASE_UNLOCK_BEFORE_LEVEL"]=10009,t[e[10010]="UIWORD_UNLOCK_LEVEL_USE_DIAM_PATTAN"]=10010,t[e[10011]="UIWORD_GET_GOLD_TIPS"]=10011,t[e[10012]="UIWORD_CONTINE_THROUGHT_LEVEL_TIPS"]=10012,t[e[10013]="UIWORD_LEVEL_INDEX_PATTAN"]=10013,t[e[10014]="UIWORD_OPEN_BOX_TIPS01"]=10014,t[e[10015]="UIWORD_SKIN_NOT_OPEN"]=10015,t}(),i.BaseConfig=function(){function BaseConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return BaseConfig.prototype.id=0,BaseConfig.prototype.num=0,BaseConfig.prototype.decimal=0,BaseConfig.prototype.str="",BaseConfig.create=function(e){return new BaseConfig(e)},BaseConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),null!=e.num&&e.hasOwnProperty("num")&&t.uint32(16).uint32(e.num),null!=e.decimal&&e.hasOwnProperty("decimal")&&t.uint32(24).uint32(e.decimal),null!=e.str&&e.hasOwnProperty("str")&&t.uint32(34).string(e.str),t},BaseConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},BaseConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.BaseConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.num=e.uint32();break;case 3:n.decimal=e.uint32();break;case 4:n.str=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});return n},BaseConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},BaseConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?null!=e.num&&e.hasOwnProperty("num")&&!Mn.isInteger(e.num)?"num: integer expected":null!=e.decimal&&e.hasOwnProperty("decimal")&&!Mn.isInteger(e.decimal)?"decimal: integer expected":null!=e.str&&e.hasOwnProperty("str")&&!Mn.isString(e.str)?"str: string expected":null:"id: integer expected"},BaseConfig.fromObject=function(e){if(e instanceof Rn.roitescape.BaseConfig)return e;var t=new Rn.roitescape.BaseConfig;return null!=e.id&&(t.id=e.id>>>0),null!=e.num&&(t.num=e.num>>>0),null!=e.decimal&&(t.decimal=e.decimal>>>0),null!=e.str&&(t.str=String(e.str)),t},BaseConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.num=0,i.decimal=0,i.str=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.num&&e.hasOwnProperty("num")&&(i.num=e.num),null!=e.decimal&&e.hasOwnProperty("decimal")&&(i.decimal=e.decimal),null!=e.str&&e.hasOwnProperty("str")&&(i.str=e.str),i},BaseConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},BaseConfig}(),i.TBBaseConfig=function(){function TBBaseConfig(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBBaseConfig.prototype.list=Mn.emptyArray,TBBaseConfig.create=function(e){return new TBBaseConfig(e)},TBBaseConfig.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.BaseConfig.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBBaseConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBBaseConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBBaseConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.BaseConfig.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBBaseConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBBaseConfig.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.BaseConfig.verify(e.list[t]);if(i)return"list."+i}}return null},TBBaseConfig.fromObject=function(e){if(e instanceof Rn.roitescape.TBBaseConfig)return e;var t=new Rn.roitescape.TBBaseConfig;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBBaseConfig.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBBaseConfig.list: object expected");t.list[i]=Rn.roitescape.BaseConfig.fromObject(e.list[i])}}return t},TBBaseConfig.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.BaseConfig.toObject(e.list[n],t)}return i},TBBaseConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBBaseConfig}(),i.UIWord=function(){function UIWord(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return UIWord.prototype.id=0,UIWord.prototype.word="",UIWord.create=function(e){return new UIWord(e)},UIWord.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.word),t},UIWord.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},UIWord.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.UIWord;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.word=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("word"))throw Mn.ProtocolError("missing required 'word'",{instance:n});return n},UIWord.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},UIWord.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.word)?null:"word: string expected":"id: integer expected"},UIWord.fromObject=function(e){if(e instanceof Rn.roitescape.UIWord)return e;var t=new Rn.roitescape.UIWord;return null!=e.id&&(t.id=e.id>>>0),null!=e.word&&(t.word=String(e.word)),t},UIWord.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.word=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.word&&e.hasOwnProperty("word")&&(i.word=e.word),i},UIWord.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},UIWord}(),i.TBUIWord=function(){function TBUIWord(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBUIWord.prototype.list=Mn.emptyArray,TBUIWord.create=function(e){return new TBUIWord(e)},TBUIWord.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.UIWord.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBUIWord.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBUIWord.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBUIWord;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.UIWord.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBUIWord.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBUIWord.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.UIWord.verify(e.list[t]);if(i)return"list."+i}}return null},TBUIWord.fromObject=function(e){if(e instanceof Rn.roitescape.TBUIWord)return e;var t=new Rn.roitescape.TBUIWord;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBUIWord.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBUIWord.list: object expected");t.list[i]=Rn.roitescape.UIWord.fromObject(e.list[i])}}return t},TBUIWord.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.UIWord.toObject(e.list[n],t)}return i},TBUIWord.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBUIWord}(),i.NetError=function(){function NetError(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return NetError.prototype.id=0,NetError.prototype.word="",NetError.create=function(e){return new NetError(e)},NetError.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.word),t},NetError.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},NetError.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.NetError;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.word=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("word"))throw Mn.ProtocolError("missing required 'word'",{instance:n});return n},NetError.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},NetError.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.word)?null:"word: string expected":"id: integer expected"},NetError.fromObject=function(e){if(e instanceof Rn.roitescape.NetError)return e;var t=new Rn.roitescape.NetError;return null!=e.id&&(t.id=e.id>>>0),null!=e.word&&(t.word=String(e.word)),t},NetError.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.word=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.word&&e.hasOwnProperty("word")&&(i.word=e.word),i},NetError.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},NetError}(),i.TBNetError=function(){function TBNetError(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBNetError.prototype.list=Mn.emptyArray,TBNetError.create=function(e){return new TBNetError(e)},TBNetError.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.NetError.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBNetError.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBNetError.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBNetError;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.NetError.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBNetError.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBNetError.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.NetError.verify(e.list[t]);if(i)return"list."+i}}return null},TBNetError.fromObject=function(e){if(e instanceof Rn.roitescape.TBNetError)return e;var t=new Rn.roitescape.TBNetError;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBNetError.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBNetError.list: object expected");t.list[i]=Rn.roitescape.NetError.fromObject(e.list[i])}}return t},TBNetError.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.NetError.toObject(e.list[n],t)}return i},TBNetError.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBNetError}(),i.SettingConfig=function(){function SettingConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return SettingConfig.prototype.isSoundOn=!1,SettingConfig.prototype.isMuteOn=!1,SettingConfig.create=function(e){return new SettingConfig(e)},SettingConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).bool(e.isSoundOn),t.uint32(16).bool(e.isMuteOn),t},SettingConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},SettingConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.SettingConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.isSoundOn=e.bool();break;case 2:n.isMuteOn=e.bool();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("isSoundOn"))throw Mn.ProtocolError("missing required 'isSoundOn'",{instance:n});if(!n.hasOwnProperty("isMuteOn"))throw Mn.ProtocolError("missing required 'isMuteOn'",{instance:n});return n},SettingConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},SettingConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":"boolean"!=typeof e.isSoundOn?"isSoundOn: boolean expected":"boolean"!=typeof e.isMuteOn?"isMuteOn: boolean expected":null},SettingConfig.fromObject=function(e){if(e instanceof Rn.roitescape.SettingConfig)return e;var t=new Rn.roitescape.SettingConfig;return null!=e.isSoundOn&&(t.isSoundOn=Boolean(e.isSoundOn)),null!=e.isMuteOn&&(t.isMuteOn=Boolean(e.isMuteOn)),t},SettingConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.isSoundOn=!1,i.isMuteOn=!1),null!=e.isSoundOn&&e.hasOwnProperty("isSoundOn")&&(i.isSoundOn=e.isSoundOn),null!=e.isMuteOn&&e.hasOwnProperty("isMuteOn")&&(i.isMuteOn=e.isMuteOn),i},SettingConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},SettingConfig}(),i.RedGiftConfig=function(){function RedGiftConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return RedGiftConfig.prototype.money=0,RedGiftConfig.prototype.totalWithdrawMoney=0,RedGiftConfig.prototype.totalWithdrawMoneyTimes=0,RedGiftConfig.prototype.totalGotRedPackageCount=0,RedGiftConfig.prototype.isWithdrawEverydayMoneyToday=!1,RedGiftConfig.prototype.recordDayOfEverydayMoney=0,RedGiftConfig.prototype.totalWithdrawEverydayMoney=0,RedGiftConfig.create=function(e){return new RedGiftConfig(e)},RedGiftConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.money),t.uint32(16).uint32(e.totalWithdrawMoney),t.uint32(24).uint32(e.totalWithdrawMoneyTimes),t.uint32(32).uint32(e.totalGotRedPackageCount),t.uint32(40).bool(e.isWithdrawEverydayMoneyToday),t.uint32(48).uint32(e.recordDayOfEverydayMoney),t.uint32(56).uint32(e.totalWithdrawEverydayMoney),t},RedGiftConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},RedGiftConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.RedGiftConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.money=e.uint32();break;case 2:n.totalWithdrawMoney=e.uint32();break;case 3:n.totalWithdrawMoneyTimes=e.uint32();break;case 4:n.totalGotRedPackageCount=e.uint32();break;case 5:n.isWithdrawEverydayMoneyToday=e.bool();break;case 6:n.recordDayOfEverydayMoney=e.uint32();break;case 7:n.totalWithdrawEverydayMoney=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("money"))throw Mn.ProtocolError("missing required 'money'",{instance:n});if(!n.hasOwnProperty("totalWithdrawMoney"))throw Mn.ProtocolError("missing required 'totalWithdrawMoney'",{instance:n});if(!n.hasOwnProperty("totalWithdrawMoneyTimes"))throw Mn.ProtocolError("missing required 'totalWithdrawMoneyTimes'",{instance:n});if(!n.hasOwnProperty("totalGotRedPackageCount"))throw Mn.ProtocolError("missing required 'totalGotRedPackageCount'",{instance:n});if(!n.hasOwnProperty("isWithdrawEverydayMoneyToday"))throw Mn.ProtocolError("missing required 'isWithdrawEverydayMoneyToday'",{instance:n});if(!n.hasOwnProperty("recordDayOfEverydayMoney"))throw Mn.ProtocolError("missing required 'recordDayOfEverydayMoney'",{instance:n});if(!n.hasOwnProperty("totalWithdrawEverydayMoney"))throw Mn.ProtocolError("missing required 'totalWithdrawEverydayMoney'",{instance:n});return n},RedGiftConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},RedGiftConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.money)?Mn.isInteger(e.totalWithdrawMoney)?Mn.isInteger(e.totalWithdrawMoneyTimes)?Mn.isInteger(e.totalGotRedPackageCount)?"boolean"!=typeof e.isWithdrawEverydayMoneyToday?"isWithdrawEverydayMoneyToday: boolean expected":Mn.isInteger(e.recordDayOfEverydayMoney)?Mn.isInteger(e.totalWithdrawEverydayMoney)?null:"totalWithdrawEverydayMoney: integer expected":"recordDayOfEverydayMoney: integer expected":"totalGotRedPackageCount: integer expected":"totalWithdrawMoneyTimes: integer expected":"totalWithdrawMoney: integer expected":"money: integer expected"},RedGiftConfig.fromObject=function(e){if(e instanceof Rn.roitescape.RedGiftConfig)return e;var t=new Rn.roitescape.RedGiftConfig;return null!=e.money&&(t.money=e.money>>>0),null!=e.totalWithdrawMoney&&(t.totalWithdrawMoney=e.totalWithdrawMoney>>>0),null!=e.totalWithdrawMoneyTimes&&(t.totalWithdrawMoneyTimes=e.totalWithdrawMoneyTimes>>>0),null!=e.totalGotRedPackageCount&&(t.totalGotRedPackageCount=e.totalGotRedPackageCount>>>0),null!=e.isWithdrawEverydayMoneyToday&&(t.isWithdrawEverydayMoneyToday=Boolean(e.isWithdrawEverydayMoneyToday)),null!=e.recordDayOfEverydayMoney&&(t.recordDayOfEverydayMoney=e.recordDayOfEverydayMoney>>>0),null!=e.totalWithdrawEverydayMoney&&(t.totalWithdrawEverydayMoney=e.totalWithdrawEverydayMoney>>>0),t},RedGiftConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.money=0,i.totalWithdrawMoney=0,i.totalWithdrawMoneyTimes=0,i.totalGotRedPackageCount=0,i.isWithdrawEverydayMoneyToday=!1,i.recordDayOfEverydayMoney=0,i.totalWithdrawEverydayMoney=0),null!=e.money&&e.hasOwnProperty("money")&&(i.money=e.money),null!=e.totalWithdrawMoney&&e.hasOwnProperty("totalWithdrawMoney")&&(i.totalWithdrawMoney=e.totalWithdrawMoney),null!=e.totalWithdrawMoneyTimes&&e.hasOwnProperty("totalWithdrawMoneyTimes")&&(i.totalWithdrawMoneyTimes=e.totalWithdrawMoneyTimes),null!=e.totalGotRedPackageCount&&e.hasOwnProperty("totalGotRedPackageCount")&&(i.totalGotRedPackageCount=e.totalGotRedPackageCount),null!=e.isWithdrawEverydayMoneyToday&&e.hasOwnProperty("isWithdrawEverydayMoneyToday")&&(i.isWithdrawEverydayMoneyToday=e.isWithdrawEverydayMoneyToday),null!=e.recordDayOfEverydayMoney&&e.hasOwnProperty("recordDayOfEverydayMoney")&&(i.recordDayOfEverydayMoney=e.recordDayOfEverydayMoney),null!=e.totalWithdrawEverydayMoney&&e.hasOwnProperty("totalWithdrawEverydayMoney")&&(i.totalWithdrawEverydayMoney=e.totalWithdrawEverydayMoney),i},RedGiftConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},RedGiftConfig}(),i.LevelConfig=function(){function LevelConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return LevelConfig.prototype.id=0,LevelConfig.prototype.cameraStartPos="",LevelConfig.prototype.cameraStartRot="",LevelConfig.prototype.config="",LevelConfig.prototype.goldReward=0,LevelConfig.prototype.lvType=0,LevelConfig.prototype.floorId=0,LevelConfig.prototype.hurtPoint="",LevelConfig.prototype.fallHoney="",LevelConfig.create=function(e){return new LevelConfig(e)},LevelConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.cameraStartPos),t.uint32(26).string(e.cameraStartRot),t.uint32(34).string(e.config),t.uint32(40).uint32(e.goldReward),t.uint32(48).uint32(e.lvType),t.uint32(56).uint32(e.floorId),t.uint32(66).string(e.hurtPoint),t.uint32(74).string(e.fallHoney),t},LevelConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},LevelConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.LevelConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.cameraStartPos=e.string();break;case 3:n.cameraStartRot=e.string();break;case 4:n.config=e.string();break;case 5:n.goldReward=e.uint32();break;case 6:n.lvType=e.uint32();break;case 7:n.floorId=e.uint32();break;case 8:n.hurtPoint=e.string();break;case 9:n.fallHoney=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("cameraStartPos"))throw Mn.ProtocolError("missing required 'cameraStartPos'",{instance:n});if(!n.hasOwnProperty("cameraStartRot"))throw Mn.ProtocolError("missing required 'cameraStartRot'",{instance:n});if(!n.hasOwnProperty("config"))throw Mn.ProtocolError("missing required 'config'",{instance:n});if(!n.hasOwnProperty("goldReward"))throw Mn.ProtocolError("missing required 'goldReward'",{instance:n});if(!n.hasOwnProperty("lvType"))throw Mn.ProtocolError("missing required 'lvType'",{instance:n});if(!n.hasOwnProperty("floorId"))throw Mn.ProtocolError("missing required 'floorId'",{instance:n});if(!n.hasOwnProperty("hurtPoint"))throw Mn.ProtocolError("missing required 'hurtPoint'",{instance:n});if(!n.hasOwnProperty("fallHoney"))throw Mn.ProtocolError("missing required 'fallHoney'",{instance:n});return n},LevelConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},LevelConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.cameraStartPos)?Mn.isString(e.cameraStartRot)?Mn.isString(e.config)?Mn.isInteger(e.goldReward)?Mn.isInteger(e.lvType)?Mn.isInteger(e.floorId)?Mn.isString(e.hurtPoint)?Mn.isString(e.fallHoney)?null:"fallHoney: string expected":"hurtPoint: string expected":"floorId: integer expected":"lvType: integer expected":"goldReward: integer expected":"config: string expected":"cameraStartRot: string expected":"cameraStartPos: string expected":"id: integer expected"},LevelConfig.fromObject=function(e){if(e instanceof Rn.roitescape.LevelConfig)return e;var t=new Rn.roitescape.LevelConfig;return null!=e.id&&(t.id=e.id>>>0),null!=e.cameraStartPos&&(t.cameraStartPos=String(e.cameraStartPos)),null!=e.cameraStartRot&&(t.cameraStartRot=String(e.cameraStartRot)),null!=e.config&&(t.config=String(e.config)),null!=e.goldReward&&(t.goldReward=e.goldReward>>>0),null!=e.lvType&&(t.lvType=e.lvType>>>0),null!=e.floorId&&(t.floorId=e.floorId>>>0),null!=e.hurtPoint&&(t.hurtPoint=String(e.hurtPoint)),null!=e.fallHoney&&(t.fallHoney=String(e.fallHoney)),t},LevelConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.cameraStartPos="",i.cameraStartRot="",i.config="",i.goldReward=0,i.lvType=0,i.floorId=0,i.hurtPoint="",i.fallHoney=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.cameraStartPos&&e.hasOwnProperty("cameraStartPos")&&(i.cameraStartPos=e.cameraStartPos),null!=e.cameraStartRot&&e.hasOwnProperty("cameraStartRot")&&(i.cameraStartRot=e.cameraStartRot),null!=e.config&&e.hasOwnProperty("config")&&(i.config=e.config),null!=e.goldReward&&e.hasOwnProperty("goldReward")&&(i.goldReward=e.goldReward),null!=e.lvType&&e.hasOwnProperty("lvType")&&(i.lvType=e.lvType),null!=e.floorId&&e.hasOwnProperty("floorId")&&(i.floorId=e.floorId),null!=e.hurtPoint&&e.hasOwnProperty("hurtPoint")&&(i.hurtPoint=e.hurtPoint),null!=e.fallHoney&&e.hasOwnProperty("fallHoney")&&(i.fallHoney=e.fallHoney),i},LevelConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},LevelConfig}(),i.TBLevelConfig=function(){function TBLevelConfig(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBLevelConfig.prototype.list=Mn.emptyArray,TBLevelConfig.create=function(e){return new TBLevelConfig(e)},TBLevelConfig.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.LevelConfig.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBLevelConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBLevelConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBLevelConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.LevelConfig.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBLevelConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBLevelConfig.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.LevelConfig.verify(e.list[t]);if(i)return"list."+i}}return null},TBLevelConfig.fromObject=function(e){if(e instanceof Rn.roitescape.TBLevelConfig)return e;var t=new Rn.roitescape.TBLevelConfig;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBLevelConfig.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBLevelConfig.list: object expected");t.list[i]=Rn.roitescape.LevelConfig.fromObject(e.list[i])}}return t},TBLevelConfig.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.LevelConfig.toObject(e.list[n],t)}return i},TBLevelConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBLevelConfig}(),i.PlayerConfig=function(){function PlayerConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return PlayerConfig.prototype.id=0,PlayerConfig.prototype.model="",PlayerConfig.prototype.mass=0,PlayerConfig.prototype.quality=0,PlayerConfig.prototype.icon="",PlayerConfig.prototype.name="",PlayerConfig.prototype.unLockCount="",PlayerConfig.prototype.isNew=0,PlayerConfig.prototype.sellPrice=0,PlayerConfig.prototype.isOpen=0,PlayerConfig.prototype.recomedRate=0,PlayerConfig.prototype.killGold=0,PlayerConfig.prototype.maxLv=0,PlayerConfig.prototype.combineChip=0,PlayerConfig.create=function(e){return new PlayerConfig(e)},PlayerConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.model),t.uint32(24).uint32(e.mass),t.uint32(32).uint32(e.quality),t.uint32(42).string(e.icon),t.uint32(50).string(e.name),t.uint32(58).string(e.unLockCount),t.uint32(64).uint32(e.isNew),t.uint32(72).uint32(e.sellPrice),t.uint32(80).uint32(e.isOpen),t.uint32(88).uint32(e.recomedRate),t.uint32(96).uint32(e.killGold),t.uint32(104).uint32(e.maxLv),t.uint32(112).uint32(e.combineChip),t},PlayerConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},PlayerConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.PlayerConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.model=e.string();break;case 3:n.mass=e.uint32();break;case 4:n.quality=e.uint32();break;case 5:n.icon=e.string();break;case 6:n.name=e.string();break;case 7:n.unLockCount=e.string();break;case 8:n.isNew=e.uint32();break;case 9:n.sellPrice=e.uint32();break;case 10:n.isOpen=e.uint32();break;case 11:n.recomedRate=e.uint32();break;case 12:n.killGold=e.uint32();break;case 13:n.maxLv=e.uint32();break;case 14:n.combineChip=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("model"))throw Mn.ProtocolError("missing required 'model'",{instance:n});if(!n.hasOwnProperty("mass"))throw Mn.ProtocolError("missing required 'mass'",{instance:n});if(!n.hasOwnProperty("quality"))throw Mn.ProtocolError("missing required 'quality'",{instance:n});if(!n.hasOwnProperty("icon"))throw Mn.ProtocolError("missing required 'icon'",{instance:n});if(!n.hasOwnProperty("name"))throw Mn.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("unLockCount"))throw Mn.ProtocolError("missing required 'unLockCount'",{instance:n});if(!n.hasOwnProperty("isNew"))throw Mn.ProtocolError("missing required 'isNew'",{instance:n});if(!n.hasOwnProperty("sellPrice"))throw Mn.ProtocolError("missing required 'sellPrice'",{instance:n});if(!n.hasOwnProperty("isOpen"))throw Mn.ProtocolError("missing required 'isOpen'",{instance:n});if(!n.hasOwnProperty("recomedRate"))throw Mn.ProtocolError("missing required 'recomedRate'",{instance:n});if(!n.hasOwnProperty("killGold"))throw Mn.ProtocolError("missing required 'killGold'",{instance:n});if(!n.hasOwnProperty("maxLv"))throw Mn.ProtocolError("missing required 'maxLv'",{instance:n});if(!n.hasOwnProperty("combineChip"))throw Mn.ProtocolError("missing required 'combineChip'",{instance:n});return n},PlayerConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},PlayerConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.model)?Mn.isInteger(e.mass)?Mn.isInteger(e.quality)?Mn.isString(e.icon)?Mn.isString(e.name)?Mn.isString(e.unLockCount)?Mn.isInteger(e.isNew)?Mn.isInteger(e.sellPrice)?Mn.isInteger(e.isOpen)?Mn.isInteger(e.recomedRate)?Mn.isInteger(e.killGold)?Mn.isInteger(e.maxLv)?Mn.isInteger(e.combineChip)?null:"combineChip: integer expected":"maxLv: integer expected":"killGold: integer expected":"recomedRate: integer expected":"isOpen: integer expected":"sellPrice: integer expected":"isNew: integer expected":"unLockCount: string expected":"name: string expected":"icon: string expected":"quality: integer expected":"mass: integer expected":"model: string expected":"id: integer expected"},PlayerConfig.fromObject=function(e){if(e instanceof Rn.roitescape.PlayerConfig)return e;var t=new Rn.roitescape.PlayerConfig;return null!=e.id&&(t.id=e.id>>>0),null!=e.model&&(t.model=String(e.model)),null!=e.mass&&(t.mass=e.mass>>>0),null!=e.quality&&(t.quality=e.quality>>>0),null!=e.icon&&(t.icon=String(e.icon)),null!=e.name&&(t.name=String(e.name)),null!=e.unLockCount&&(t.unLockCount=String(e.unLockCount)),null!=e.isNew&&(t.isNew=e.isNew>>>0),null!=e.sellPrice&&(t.sellPrice=e.sellPrice>>>0),null!=e.isOpen&&(t.isOpen=e.isOpen>>>0),null!=e.recomedRate&&(t.recomedRate=e.recomedRate>>>0),null!=e.killGold&&(t.killGold=e.killGold>>>0),null!=e.maxLv&&(t.maxLv=e.maxLv>>>0),null!=e.combineChip&&(t.combineChip=e.combineChip>>>0),t},PlayerConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.model="",i.mass=0,i.quality=0,i.icon="",i.name="",i.unLockCount="",i.isNew=0,i.sellPrice=0,i.isOpen=0,i.recomedRate=0,i.killGold=0,i.maxLv=0,i.combineChip=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.model&&e.hasOwnProperty("model")&&(i.model=e.model),null!=e.mass&&e.hasOwnProperty("mass")&&(i.mass=e.mass),null!=e.quality&&e.hasOwnProperty("quality")&&(i.quality=e.quality),null!=e.icon&&e.hasOwnProperty("icon")&&(i.icon=e.icon),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.unLockCount&&e.hasOwnProperty("unLockCount")&&(i.unLockCount=e.unLockCount),null!=e.isNew&&e.hasOwnProperty("isNew")&&(i.isNew=e.isNew),null!=e.sellPrice&&e.hasOwnProperty("sellPrice")&&(i.sellPrice=e.sellPrice),null!=e.isOpen&&e.hasOwnProperty("isOpen")&&(i.isOpen=e.isOpen),null!=e.recomedRate&&e.hasOwnProperty("recomedRate")&&(i.recomedRate=e.recomedRate),null!=e.killGold&&e.hasOwnProperty("killGold")&&(i.killGold=e.killGold),null!=e.maxLv&&e.hasOwnProperty("maxLv")&&(i.maxLv=e.maxLv),null!=e.combineChip&&e.hasOwnProperty("combineChip")&&(i.combineChip=e.combineChip),i},PlayerConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},PlayerConfig}(),i.TBPlayerConfig=function(){function TBPlayerConfig(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBPlayerConfig.prototype.list=Mn.emptyArray,TBPlayerConfig.create=function(e){return new TBPlayerConfig(e)},TBPlayerConfig.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.PlayerConfig.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBPlayerConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBPlayerConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBPlayerConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.PlayerConfig.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBPlayerConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBPlayerConfig.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.PlayerConfig.verify(e.list[t]);if(i)return"list."+i}}return null},TBPlayerConfig.fromObject=function(e){if(e instanceof Rn.roitescape.TBPlayerConfig)return e;var t=new Rn.roitescape.TBPlayerConfig;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBPlayerConfig.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBPlayerConfig.list: object expected");t.list[i]=Rn.roitescape.PlayerConfig.fromObject(e.list[i])}}return t},TBPlayerConfig.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.PlayerConfig.toObject(e.list[n],t)}return i},TBPlayerConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBPlayerConfig}(),i.Quality=function(){function Quality(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return Quality.prototype.id=0,Quality.prototype.hpRate="",Quality.prototype.hurtRate="",Quality.prototype.defRate="",Quality.prototype.name="",Quality.prototype.speedRate="",Quality.prototype.rareBg="",Quality.create=function(e){return new Quality(e)},Quality.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.hpRate),t.uint32(26).string(e.hurtRate),t.uint32(34).string(e.defRate),t.uint32(42).string(e.name),t.uint32(50).string(e.speedRate),t.uint32(58).string(e.rareBg),t},Quality.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Quality.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.Quality;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.hpRate=e.string();break;case 3:n.hurtRate=e.string();break;case 4:n.defRate=e.string();break;case 5:n.name=e.string();break;case 6:n.speedRate=e.string();break;case 7:n.rareBg=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("hpRate"))throw Mn.ProtocolError("missing required 'hpRate'",{instance:n});if(!n.hasOwnProperty("hurtRate"))throw Mn.ProtocolError("missing required 'hurtRate'",{instance:n});if(!n.hasOwnProperty("defRate"))throw Mn.ProtocolError("missing required 'defRate'",{instance:n});if(!n.hasOwnProperty("name"))throw Mn.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("speedRate"))throw Mn.ProtocolError("missing required 'speedRate'",{instance:n});if(!n.hasOwnProperty("rareBg"))throw Mn.ProtocolError("missing required 'rareBg'",{instance:n});return n},Quality.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},Quality.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.hpRate)?Mn.isString(e.hurtRate)?Mn.isString(e.defRate)?Mn.isString(e.name)?Mn.isString(e.speedRate)?Mn.isString(e.rareBg)?null:"rareBg: string expected":"speedRate: string expected":"name: string expected":"defRate: string expected":"hurtRate: string expected":"hpRate: string expected":"id: integer expected"},Quality.fromObject=function(e){if(e instanceof Rn.roitescape.Quality)return e;var t=new Rn.roitescape.Quality;return null!=e.id&&(t.id=e.id>>>0),null!=e.hpRate&&(t.hpRate=String(e.hpRate)),null!=e.hurtRate&&(t.hurtRate=String(e.hurtRate)),null!=e.defRate&&(t.defRate=String(e.defRate)),null!=e.name&&(t.name=String(e.name)),null!=e.speedRate&&(t.speedRate=String(e.speedRate)),null!=e.rareBg&&(t.rareBg=String(e.rareBg)),t},Quality.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.hpRate="",i.hurtRate="",i.defRate="",i.name="",i.speedRate="",i.rareBg=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.hpRate&&e.hasOwnProperty("hpRate")&&(i.hpRate=e.hpRate),null!=e.hurtRate&&e.hasOwnProperty("hurtRate")&&(i.hurtRate=e.hurtRate),null!=e.defRate&&e.hasOwnProperty("defRate")&&(i.defRate=e.defRate),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.speedRate&&e.hasOwnProperty("speedRate")&&(i.speedRate=e.speedRate),null!=e.rareBg&&e.hasOwnProperty("rareBg")&&(i.rareBg=e.rareBg),i},Quality.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},Quality}(),i.TBQuality=function(){function TBQuality(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBQuality.prototype.list=Mn.emptyArray,TBQuality.create=function(e){return new TBQuality(e)},TBQuality.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.Quality.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBQuality.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBQuality.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBQuality;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.Quality.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBQuality.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBQuality.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.Quality.verify(e.list[t]);if(i)return"list."+i}}return null},TBQuality.fromObject=function(e){if(e instanceof Rn.roitescape.TBQuality)return e;var t=new Rn.roitescape.TBQuality;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBQuality.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBQuality.list: object expected");t.list[i]=Rn.roitescape.Quality.fromObject(e.list[i])}}return t},TBQuality.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.Quality.toObject(e.list[n],t)}return i},TBQuality.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBQuality}(),i.SginConfig=function(){function SginConfig(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return SginConfig.prototype.id=0,SginConfig.prototype.type="",SginConfig.prototype.count="",SginConfig.prototype.isDouble="",SginConfig.prototype.param1="",SginConfig.prototype.name="",SginConfig.create=function(e){return new SginConfig(e)},SginConfig.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.type),t.uint32(26).string(e.count),t.uint32(34).string(e.isDouble),t.uint32(42).string(e.param1),t.uint32(50).string(e.name),t},SginConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},SginConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.SginConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.type=e.string();break;case 3:n.count=e.string();break;case 4:n.isDouble=e.string();break;case 5:n.param1=e.string();break;case 6:n.name=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("type"))throw Mn.ProtocolError("missing required 'type'",{instance:n});if(!n.hasOwnProperty("count"))throw Mn.ProtocolError("missing required 'count'",{instance:n});if(!n.hasOwnProperty("isDouble"))throw Mn.ProtocolError("missing required 'isDouble'",{instance:n});if(!n.hasOwnProperty("param1"))throw Mn.ProtocolError("missing required 'param1'",{instance:n});if(!n.hasOwnProperty("name"))throw Mn.ProtocolError("missing required 'name'",{instance:n});return n},SginConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},SginConfig.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.type)?Mn.isString(e.count)?Mn.isString(e.isDouble)?Mn.isString(e.param1)?Mn.isString(e.name)?null:"name: string expected":"param1: string expected":"isDouble: string expected":"count: string expected":"type: string expected":"id: integer expected"},SginConfig.fromObject=function(e){if(e instanceof Rn.roitescape.SginConfig)return e;var t=new Rn.roitescape.SginConfig;return null!=e.id&&(t.id=e.id>>>0),null!=e.type&&(t.type=String(e.type)),null!=e.count&&(t.count=String(e.count)),null!=e.isDouble&&(t.isDouble=String(e.isDouble)),null!=e.param1&&(t.param1=String(e.param1)),null!=e.name&&(t.name=String(e.name)),t},SginConfig.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.type="",i.count="",i.isDouble="",i.param1="",i.name=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.type&&e.hasOwnProperty("type")&&(i.type=e.type),null!=e.count&&e.hasOwnProperty("count")&&(i.count=e.count),null!=e.isDouble&&e.hasOwnProperty("isDouble")&&(i.isDouble=e.isDouble),null!=e.param1&&e.hasOwnProperty("param1")&&(i.param1=e.param1),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),i},SginConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},SginConfig}(),i.TBSginConfig=function(){function TBSginConfig(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBSginConfig.prototype.list=Mn.emptyArray,TBSginConfig.create=function(e){return new TBSginConfig(e)},TBSginConfig.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.SginConfig.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBSginConfig.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBSginConfig.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBSginConfig;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.SginConfig.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBSginConfig.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBSginConfig.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.SginConfig.verify(e.list[t]);if(i)return"list."+i}}return null},TBSginConfig.fromObject=function(e){if(e instanceof Rn.roitescape.TBSginConfig)return e;var t=new Rn.roitescape.TBSginConfig;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBSginConfig.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBSginConfig.list: object expected");t.list[i]=Rn.roitescape.SginConfig.fromObject(e.list[i])}}return t},TBSginConfig.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.SginConfig.toObject(e.list[n],t)}return i},TBSginConfig.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBSginConfig}(),i.PlayerProp=function(){function PlayerProp(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return PlayerProp.prototype.hpLv=0,PlayerProp.prototype.defLv=0,PlayerProp.prototype.hurtLv=0,PlayerProp.prototype.speedLv=0,PlayerProp.create=function(e){return new PlayerProp(e)},PlayerProp.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.hpLv),t.uint32(16).uint32(e.defLv),t.uint32(24).uint32(e.hurtLv),t.uint32(32).uint32(e.speedLv),t},PlayerProp.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},PlayerProp.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.PlayerProp;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.hpLv=e.uint32();break;case 2:n.defLv=e.uint32();break;case 3:n.hurtLv=e.uint32();break;case 4:n.speedLv=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("hpLv"))throw Mn.ProtocolError("missing required 'hpLv'",{instance:n});if(!n.hasOwnProperty("defLv"))throw Mn.ProtocolError("missing required 'defLv'",{instance:n});if(!n.hasOwnProperty("hurtLv"))throw Mn.ProtocolError("missing required 'hurtLv'",{instance:n});if(!n.hasOwnProperty("speedLv"))throw Mn.ProtocolError("missing required 'speedLv'",{instance:n});return n},PlayerProp.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},PlayerProp.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.hpLv)?Mn.isInteger(e.defLv)?Mn.isInteger(e.hurtLv)?Mn.isInteger(e.speedLv)?null:"speedLv: integer expected":"hurtLv: integer expected":"defLv: integer expected":"hpLv: integer expected"},PlayerProp.fromObject=function(e){if(e instanceof Rn.roitescape.PlayerProp)return e;var t=new Rn.roitescape.PlayerProp;return null!=e.hpLv&&(t.hpLv=e.hpLv>>>0),null!=e.defLv&&(t.defLv=e.defLv>>>0),null!=e.hurtLv&&(t.hurtLv=e.hurtLv>>>0),null!=e.speedLv&&(t.speedLv=e.speedLv>>>0),t},PlayerProp.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.hpLv=0,i.defLv=0,i.hurtLv=0,i.speedLv=0),null!=e.hpLv&&e.hasOwnProperty("hpLv")&&(i.hpLv=e.hpLv),null!=e.defLv&&e.hasOwnProperty("defLv")&&(i.defLv=e.defLv),null!=e.hurtLv&&e.hasOwnProperty("hurtLv")&&(i.hurtLv=e.hurtLv),null!=e.speedLv&&e.hasOwnProperty("speedLv")&&(i.speedLv=e.speedLv),i},PlayerProp.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},PlayerProp}(),i.SkinData=function(){function SkinData(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return SkinData.prototype.id=0,SkinData.prototype.viewAdTimes=0,SkinData.prototype.isOwner=0,SkinData.prototype.playerProp=null,SkinData.prototype.skinChip=0,SkinData.prototype.star=0,SkinData.create=function(e){return new SkinData(e)},SkinData.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(16).uint32(e.viewAdTimes),t.uint32(24).uint32(e.isOwner),Rn.roitescape.PlayerProp.encode(e.playerProp,t.uint32(34).fork()).ldelim(),null!=e.skinChip&&e.hasOwnProperty("skinChip")&&t.uint32(40).uint32(e.skinChip),null!=e.star&&e.hasOwnProperty("star")&&t.uint32(48).uint32(e.star),t},SkinData.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},SkinData.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.SkinData;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.viewAdTimes=e.uint32();break;case 3:n.isOwner=e.uint32();break;case 4:n.playerProp=Rn.roitescape.PlayerProp.decode(e,e.uint32());break;case 5:n.skinChip=e.uint32();break;case 6:n.star=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("viewAdTimes"))throw Mn.ProtocolError("missing required 'viewAdTimes'",{instance:n});if(!n.hasOwnProperty("isOwner"))throw Mn.ProtocolError("missing required 'isOwner'",{instance:n});if(!n.hasOwnProperty("playerProp"))throw Mn.ProtocolError("missing required 'playerProp'",{instance:n});return n},SkinData.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},SkinData.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Mn.isInteger(e.id))return"id: integer expected";if(!Mn.isInteger(e.viewAdTimes))return"viewAdTimes: integer expected";if(!Mn.isInteger(e.isOwner))return"isOwner: integer expected";var t=Rn.roitescape.PlayerProp.verify(e.playerProp);return t?"playerProp."+t:null!=e.skinChip&&e.hasOwnProperty("skinChip")&&!Mn.isInteger(e.skinChip)?"skinChip: integer expected":null!=e.star&&e.hasOwnProperty("star")&&!Mn.isInteger(e.star)?"star: integer expected":null},SkinData.fromObject=function(e){if(e instanceof Rn.roitescape.SkinData)return e;var t=new Rn.roitescape.SkinData;if(null!=e.id&&(t.id=e.id>>>0),null!=e.viewAdTimes&&(t.viewAdTimes=e.viewAdTimes>>>0),null!=e.isOwner&&(t.isOwner=e.isOwner>>>0),null!=e.playerProp){if("object"!=typeof e.playerProp)throw TypeError(".roitescape.SkinData.playerProp: object expected");t.playerProp=Rn.roitescape.PlayerProp.fromObject(e.playerProp)}return null!=e.skinChip&&(t.skinChip=e.skinChip>>>0),null!=e.star&&(t.star=e.star>>>0),t},SkinData.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.viewAdTimes=0,i.isOwner=0,i.playerProp=null,i.skinChip=0,i.star=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.viewAdTimes&&e.hasOwnProperty("viewAdTimes")&&(i.viewAdTimes=e.viewAdTimes),null!=e.isOwner&&e.hasOwnProperty("isOwner")&&(i.isOwner=e.isOwner),null!=e.playerProp&&e.hasOwnProperty("playerProp")&&(i.playerProp=Rn.roitescape.PlayerProp.toObject(e.playerProp,t)),null!=e.skinChip&&e.hasOwnProperty("skinChip")&&(i.skinChip=e.skinChip),null!=e.star&&e.hasOwnProperty("star")&&(i.star=e.star),i},SkinData.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},SkinData}(),i.LevelData=function(){function LevelData(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return LevelData.prototype.id=0,LevelData.prototype.playTimes=0,LevelData.prototype.passTimes=0,LevelData.prototype.failTimes=0,LevelData.prototype.activeExitTimes=0,LevelData.prototype.rebornTimes=0,LevelData.create=function(e){return new LevelData(e)},LevelData.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(16).uint32(e.playTimes),t.uint32(24).uint32(e.passTimes),t.uint32(32).uint32(e.failTimes),t.uint32(40).uint32(e.activeExitTimes),t.uint32(48).uint32(e.rebornTimes),t},LevelData.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},LevelData.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.LevelData;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.playTimes=e.uint32();break;case 3:n.passTimes=e.uint32();break;case 4:n.failTimes=e.uint32();break;case 5:n.activeExitTimes=e.uint32();break;case 6:n.rebornTimes=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("playTimes"))throw Mn.ProtocolError("missing required 'playTimes'",{instance:n});if(!n.hasOwnProperty("passTimes"))throw Mn.ProtocolError("missing required 'passTimes'",{instance:n});if(!n.hasOwnProperty("failTimes"))throw Mn.ProtocolError("missing required 'failTimes'",{instance:n});if(!n.hasOwnProperty("activeExitTimes"))throw Mn.ProtocolError("missing required 'activeExitTimes'",{instance:n});if(!n.hasOwnProperty("rebornTimes"))throw Mn.ProtocolError("missing required 'rebornTimes'",{instance:n});return n},LevelData.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},LevelData.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isInteger(e.playTimes)?Mn.isInteger(e.passTimes)?Mn.isInteger(e.failTimes)?Mn.isInteger(e.activeExitTimes)?Mn.isInteger(e.rebornTimes)?null:"rebornTimes: integer expected":"activeExitTimes: integer expected":"failTimes: integer expected":"passTimes: integer expected":"playTimes: integer expected":"id: integer expected"},LevelData.fromObject=function(e){if(e instanceof Rn.roitescape.LevelData)return e;var t=new Rn.roitescape.LevelData;return null!=e.id&&(t.id=e.id>>>0),null!=e.playTimes&&(t.playTimes=e.playTimes>>>0),null!=e.passTimes&&(t.passTimes=e.passTimes>>>0),null!=e.failTimes&&(t.failTimes=e.failTimes>>>0),null!=e.activeExitTimes&&(t.activeExitTimes=e.activeExitTimes>>>0),null!=e.rebornTimes&&(t.rebornTimes=e.rebornTimes>>>0),t},LevelData.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.playTimes=0,i.passTimes=0,i.failTimes=0,i.activeExitTimes=0,i.rebornTimes=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.playTimes&&e.hasOwnProperty("playTimes")&&(i.playTimes=e.playTimes),null!=e.passTimes&&e.hasOwnProperty("passTimes")&&(i.passTimes=e.passTimes),null!=e.failTimes&&e.hasOwnProperty("failTimes")&&(i.failTimes=e.failTimes),null!=e.activeExitTimes&&e.hasOwnProperty("activeExitTimes")&&(i.activeExitTimes=e.activeExitTimes),null!=e.rebornTimes&&e.hasOwnProperty("rebornTimes")&&(i.rebornTimes=e.rebornTimes),i},LevelData.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},LevelData}(),i.Teach=function(){function Teach(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return Teach.prototype.id=0,Teach.prototype.isForce=0,Teach.prototype.isMask=0,Teach.prototype.isFinger=0,Teach.prototype.tips="",Teach.prototype.btnKey="",Teach.prototype.enableClick=0,Teach.prototype.nextId=0,Teach.prototype.tipsPos="",Teach.prototype.fingerRot=0,Teach.prototype.fingerOffect="",Teach.prototype.clickMaskToNext=0,Teach.prototype.isPause=0,Teach.prototype.needTipsBg=0,Teach.prototype.clickHintMask=0,Teach.prototype.otherKey="",Teach.prototype.bgForward=0,Teach.create=function(e){return new Teach(e)},Teach.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(16).uint32(e.isForce),t.uint32(24).uint32(e.isMask),t.uint32(32).uint32(e.isFinger),t.uint32(42).string(e.tips),t.uint32(50).string(e.btnKey),t.uint32(56).uint32(e.enableClick),t.uint32(64).int32(e.nextId),t.uint32(74).string(e.tipsPos),t.uint32(80).uint32(e.fingerRot),t.uint32(90).string(e.fingerOffect),t.uint32(96).uint32(e.clickMaskToNext),t.uint32(104).uint32(e.isPause),t.uint32(112).uint32(e.needTipsBg),t.uint32(120).uint32(e.clickHintMask),t.uint32(130).string(e.otherKey),t.uint32(136).uint32(e.bgForward),t},Teach.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Teach.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.Teach;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.isForce=e.uint32();break;case 3:n.isMask=e.uint32();break;case 4:n.isFinger=e.uint32();break;case 5:n.tips=e.string();break;case 6:n.btnKey=e.string();break;case 7:n.enableClick=e.uint32();break;case 8:n.nextId=e.int32();break;case 9:n.tipsPos=e.string();break;case 10:n.fingerRot=e.uint32();break;case 11:n.fingerOffect=e.string();break;case 12:n.clickMaskToNext=e.uint32();break;case 13:n.isPause=e.uint32();break;case 14:n.needTipsBg=e.uint32();break;case 15:n.clickHintMask=e.uint32();break;case 16:n.otherKey=e.string();break;case 17:n.bgForward=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("isForce"))throw Mn.ProtocolError("missing required 'isForce'",{instance:n});if(!n.hasOwnProperty("isMask"))throw Mn.ProtocolError("missing required 'isMask'",{instance:n});if(!n.hasOwnProperty("isFinger"))throw Mn.ProtocolError("missing required 'isFinger'",{instance:n});if(!n.hasOwnProperty("tips"))throw Mn.ProtocolError("missing required 'tips'",{instance:n});if(!n.hasOwnProperty("btnKey"))throw Mn.ProtocolError("missing required 'btnKey'",{instance:n});if(!n.hasOwnProperty("enableClick"))throw Mn.ProtocolError("missing required 'enableClick'",{instance:n});if(!n.hasOwnProperty("nextId"))throw Mn.ProtocolError("missing required 'nextId'",{instance:n});if(!n.hasOwnProperty("tipsPos"))throw Mn.ProtocolError("missing required 'tipsPos'",{instance:n});if(!n.hasOwnProperty("fingerRot"))throw Mn.ProtocolError("missing required 'fingerRot'",{instance:n});if(!n.hasOwnProperty("fingerOffect"))throw Mn.ProtocolError("missing required 'fingerOffect'",{instance:n});if(!n.hasOwnProperty("clickMaskToNext"))throw Mn.ProtocolError("missing required 'clickMaskToNext'",{instance:n});if(!n.hasOwnProperty("isPause"))throw Mn.ProtocolError("missing required 'isPause'",{instance:n});if(!n.hasOwnProperty("needTipsBg"))throw Mn.ProtocolError("missing required 'needTipsBg'",{instance:n});if(!n.hasOwnProperty("clickHintMask"))throw Mn.ProtocolError("missing required 'clickHintMask'",{instance:n});if(!n.hasOwnProperty("otherKey"))throw Mn.ProtocolError("missing required 'otherKey'",{instance:n});if(!n.hasOwnProperty("bgForward"))throw Mn.ProtocolError("missing required 'bgForward'",{instance:n});return n},Teach.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},Teach.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isInteger(e.isForce)?Mn.isInteger(e.isMask)?Mn.isInteger(e.isFinger)?Mn.isString(e.tips)?Mn.isString(e.btnKey)?Mn.isInteger(e.enableClick)?Mn.isInteger(e.nextId)?Mn.isString(e.tipsPos)?Mn.isInteger(e.fingerRot)?Mn.isString(e.fingerOffect)?Mn.isInteger(e.clickMaskToNext)?Mn.isInteger(e.isPause)?Mn.isInteger(e.needTipsBg)?Mn.isInteger(e.clickHintMask)?Mn.isString(e.otherKey)?Mn.isInteger(e.bgForward)?null:"bgForward: integer expected":"otherKey: string expected":"clickHintMask: integer expected":"needTipsBg: integer expected":"isPause: integer expected":"clickMaskToNext: integer expected":"fingerOffect: string expected":"fingerRot: integer expected":"tipsPos: string expected":"nextId: integer expected":"enableClick: integer expected":"btnKey: string expected":"tips: string expected":"isFinger: integer expected":"isMask: integer expected":"isForce: integer expected":"id: integer expected"},Teach.fromObject=function(e){if(e instanceof Rn.roitescape.Teach)return e;var t=new Rn.roitescape.Teach;return null!=e.id&&(t.id=e.id>>>0),null!=e.isForce&&(t.isForce=e.isForce>>>0),null!=e.isMask&&(t.isMask=e.isMask>>>0),null!=e.isFinger&&(t.isFinger=e.isFinger>>>0),null!=e.tips&&(t.tips=String(e.tips)),null!=e.btnKey&&(t.btnKey=String(e.btnKey)),null!=e.enableClick&&(t.enableClick=e.enableClick>>>0),null!=e.nextId&&(t.nextId=0|e.nextId),null!=e.tipsPos&&(t.tipsPos=String(e.tipsPos)),null!=e.fingerRot&&(t.fingerRot=e.fingerRot>>>0),null!=e.fingerOffect&&(t.fingerOffect=String(e.fingerOffect)),null!=e.clickMaskToNext&&(t.clickMaskToNext=e.clickMaskToNext>>>0),null!=e.isPause&&(t.isPause=e.isPause>>>0),null!=e.needTipsBg&&(t.needTipsBg=e.needTipsBg>>>0),null!=e.clickHintMask&&(t.clickHintMask=e.clickHintMask>>>0),null!=e.otherKey&&(t.otherKey=String(e.otherKey)),null!=e.bgForward&&(t.bgForward=e.bgForward>>>0),t},Teach.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.isForce=0,i.isMask=0,i.isFinger=0,i.tips="",i.btnKey="",i.enableClick=0,i.nextId=0,i.tipsPos="",i.fingerRot=0,i.fingerOffect="",i.clickMaskToNext=0,i.isPause=0,i.needTipsBg=0,i.clickHintMask=0,i.otherKey="",i.bgForward=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.isForce&&e.hasOwnProperty("isForce")&&(i.isForce=e.isForce),null!=e.isMask&&e.hasOwnProperty("isMask")&&(i.isMask=e.isMask),null!=e.isFinger&&e.hasOwnProperty("isFinger")&&(i.isFinger=e.isFinger),null!=e.tips&&e.hasOwnProperty("tips")&&(i.tips=e.tips),null!=e.btnKey&&e.hasOwnProperty("btnKey")&&(i.btnKey=e.btnKey),null!=e.enableClick&&e.hasOwnProperty("enableClick")&&(i.enableClick=e.enableClick),null!=e.nextId&&e.hasOwnProperty("nextId")&&(i.nextId=e.nextId),null!=e.tipsPos&&e.hasOwnProperty("tipsPos")&&(i.tipsPos=e.tipsPos),null!=e.fingerRot&&e.hasOwnProperty("fingerRot")&&(i.fingerRot=e.fingerRot),null!=e.fingerOffect&&e.hasOwnProperty("fingerOffect")&&(i.fingerOffect=e.fingerOffect),null!=e.clickMaskToNext&&e.hasOwnProperty("clickMaskToNext")&&(i.clickMaskToNext=e.clickMaskToNext),null!=e.isPause&&e.hasOwnProperty("isPause")&&(i.isPause=e.isPause),null!=e.needTipsBg&&e.hasOwnProperty("needTipsBg")&&(i.needTipsBg=e.needTipsBg),null!=e.clickHintMask&&e.hasOwnProperty("clickHintMask")&&(i.clickHintMask=e.clickHintMask),null!=e.otherKey&&e.hasOwnProperty("otherKey")&&(i.otherKey=e.otherKey),null!=e.bgForward&&e.hasOwnProperty("bgForward")&&(i.bgForward=e.bgForward),i},Teach.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},Teach}(),i.TBTeach=function(){function TBTeach(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBTeach.prototype.list=Mn.emptyArray,TBTeach.create=function(e){return new TBTeach(e)},TBTeach.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.Teach.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBTeach.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBTeach.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBTeach;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.Teach.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBTeach.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBTeach.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.Teach.verify(e.list[t]);if(i)return"list."+i}}return null},TBTeach.fromObject=function(e){if(e instanceof Rn.roitescape.TBTeach)return e;var t=new Rn.roitescape.TBTeach;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBTeach.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBTeach.list: object expected");t.list[i]=Rn.roitescape.Teach.fromObject(e.list[i])}}return t},TBTeach.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.Teach.toObject(e.list[n],t)}return i},TBTeach.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBTeach}(),i.TaskData=function(){function TaskData(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TaskData.prototype.id=0,TaskData.prototype.state=0,TaskData.prototype.task=0,TaskData.prototype.killCount=0,TaskData.prototype.taskTime=0,TaskData.create=function(e){return new TaskData(e)},TaskData.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(16).uint32(e.state),t.uint32(24).int32(e.task),t.uint32(32).int32(e.killCount),t.uint32(40).int32(e.taskTime),t},TaskData.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TaskData.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TaskData;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.state=e.uint32();break;case 3:n.task=e.int32();break;case 4:n.killCount=e.int32();break;case 5:n.taskTime=e.int32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("state"))throw Mn.ProtocolError("missing required 'state'",{instance:n});if(!n.hasOwnProperty("task"))throw Mn.ProtocolError("missing required 'task'",{instance:n});if(!n.hasOwnProperty("killCount"))throw Mn.ProtocolError("missing required 'killCount'",{instance:n});if(!n.hasOwnProperty("taskTime"))throw Mn.ProtocolError("missing required 'taskTime'",{instance:n});return n},TaskData.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TaskData.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isInteger(e.state)?Mn.isInteger(e.task)?Mn.isInteger(e.killCount)?Mn.isInteger(e.taskTime)?null:"taskTime: integer expected":"killCount: integer expected":"task: integer expected":"state: integer expected":"id: integer expected"},TaskData.fromObject=function(e){if(e instanceof Rn.roitescape.TaskData)return e;var t=new Rn.roitescape.TaskData;return null!=e.id&&(t.id=e.id>>>0),null!=e.state&&(t.state=e.state>>>0),null!=e.task&&(t.task=0|e.task),null!=e.killCount&&(t.killCount=0|e.killCount),null!=e.taskTime&&(t.taskTime=0|e.taskTime),t},TaskData.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.state=0,i.task=0,i.killCount=0,i.taskTime=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.state&&e.hasOwnProperty("state")&&(i.state=e.state),null!=e.task&&e.hasOwnProperty("task")&&(i.task=e.task),null!=e.killCount&&e.hasOwnProperty("killCount")&&(i.killCount=e.killCount),null!=e.taskTime&&e.hasOwnProperty("taskTime")&&(i.taskTime=e.taskTime),i},TaskData.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TaskData}(),i.DailyTask=function(){function DailyTask(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return DailyTask.prototype.id=0,DailyTask.prototype.taskName="",DailyTask.prototype.taskDecs="",DailyTask.prototype.para1=0,DailyTask.prototype.para2="",DailyTask.prototype.taskReward="",DailyTask.prototype.taskTime=0,DailyTask.prototype.nextTask="",DailyTask.create=function(e){return new DailyTask(e)},DailyTask.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.taskName),t.uint32(26).string(e.taskDecs),t.uint32(32).int32(e.para1),t.uint32(42).string(e.para2),t.uint32(50).string(e.taskReward),t.uint32(56).int32(e.taskTime),t.uint32(66).string(e.nextTask),t},DailyTask.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},DailyTask.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.DailyTask;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.taskName=e.string();break;case 3:n.taskDecs=e.string();break;case 4:n.para1=e.int32();break;case 5:n.para2=e.string();break;case 6:n.taskReward=e.string();break;case 7:n.taskTime=e.int32();break;case 8:n.nextTask=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("taskName"))throw Mn.ProtocolError("missing required 'taskName'",{instance:n});if(!n.hasOwnProperty("taskDecs"))throw Mn.ProtocolError("missing required 'taskDecs'",{instance:n});if(!n.hasOwnProperty("para1"))throw Mn.ProtocolError("missing required 'para1'",{instance:n});if(!n.hasOwnProperty("para2"))throw Mn.ProtocolError("missing required 'para2'",{instance:n});if(!n.hasOwnProperty("taskReward"))throw Mn.ProtocolError("missing required 'taskReward'",{instance:n});if(!n.hasOwnProperty("taskTime"))throw Mn.ProtocolError("missing required 'taskTime'",{instance:n});if(!n.hasOwnProperty("nextTask"))throw Mn.ProtocolError("missing required 'nextTask'",{instance:n});return n},DailyTask.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},DailyTask.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.taskName)?Mn.isString(e.taskDecs)?Mn.isInteger(e.para1)?Mn.isString(e.para2)?Mn.isString(e.taskReward)?Mn.isInteger(e.taskTime)?Mn.isString(e.nextTask)?null:"nextTask: string expected":"taskTime: integer expected":"taskReward: string expected":"para2: string expected":"para1: integer expected":"taskDecs: string expected":"taskName: string expected":"id: integer expected"},DailyTask.fromObject=function(e){if(e instanceof Rn.roitescape.DailyTask)return e;var t=new Rn.roitescape.DailyTask;return null!=e.id&&(t.id=e.id>>>0),null!=e.taskName&&(t.taskName=String(e.taskName)),null!=e.taskDecs&&(t.taskDecs=String(e.taskDecs)),null!=e.para1&&(t.para1=0|e.para1),null!=e.para2&&(t.para2=String(e.para2)),null!=e.taskReward&&(t.taskReward=String(e.taskReward)),null!=e.taskTime&&(t.taskTime=0|e.taskTime),null!=e.nextTask&&(t.nextTask=String(e.nextTask)),t},DailyTask.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.taskName="",i.taskDecs="",i.para1=0,i.para2="",i.taskReward="",i.taskTime=0,i.nextTask=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.taskName&&e.hasOwnProperty("taskName")&&(i.taskName=e.taskName),null!=e.taskDecs&&e.hasOwnProperty("taskDecs")&&(i.taskDecs=e.taskDecs),null!=e.para1&&e.hasOwnProperty("para1")&&(i.para1=e.para1),null!=e.para2&&e.hasOwnProperty("para2")&&(i.para2=e.para2),null!=e.taskReward&&e.hasOwnProperty("taskReward")&&(i.taskReward=e.taskReward),null!=e.taskTime&&e.hasOwnProperty("taskTime")&&(i.taskTime=e.taskTime),null!=e.nextTask&&e.hasOwnProperty("nextTask")&&(i.nextTask=e.nextTask),i},DailyTask.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},DailyTask}(),i.TBDailyTask=function(){function TBDailyTask(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBDailyTask.prototype.list=Mn.emptyArray,TBDailyTask.create=function(e){return new TBDailyTask(e)},TBDailyTask.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.DailyTask.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBDailyTask.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBDailyTask.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBDailyTask;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.DailyTask.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBDailyTask.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBDailyTask.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.DailyTask.verify(e.list[t]);if(i)return"list."+i}}return null},TBDailyTask.fromObject=function(e){if(e instanceof Rn.roitescape.TBDailyTask)return e;var t=new Rn.roitescape.TBDailyTask;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBDailyTask.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBDailyTask.list: object expected");t.list[i]=Rn.roitescape.DailyTask.fromObject(e.list[i])}}return t},TBDailyTask.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.DailyTask.toObject(e.list[n],t)}return i},TBDailyTask.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBDailyTask}(),i.BeeData=function(){function BeeData(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return BeeData.prototype.id=0,BeeData.create=function(e){return new BeeData(e)},BeeData.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t},BeeData.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},BeeData.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.BeeData;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});return n},BeeData.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},BeeData.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?null:"id: integer expected"},BeeData.fromObject=function(e){if(e instanceof Rn.roitescape.BeeData)return e;var t=new Rn.roitescape.BeeData;return null!=e.id&&(t.id=e.id>>>0),t},BeeData.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),i},BeeData.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},BeeData}(),i.Bee=function(){function Bee(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return Bee.prototype.id=0,Bee.prototype.model="",Bee.prototype.name="",Bee.prototype.icon="",Bee.prototype.collectSpeed="",Bee.prototype.collectContain=0,Bee.prototype.evoCount=0,Bee.prototype.evoId=0,Bee.create=function(e){return new Bee(e)},Bee.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.model),t.uint32(26).string(e.name),t.uint32(34).string(e.icon),t.uint32(42).string(e.collectSpeed),t.uint32(48).uint32(e.collectContain),t.uint32(56).int32(e.evoCount),t.uint32(64).int32(e.evoId),t},Bee.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Bee.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.Bee;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.model=e.string();break;case 3:n.name=e.string();break;case 4:n.icon=e.string();break;case 5:n.collectSpeed=e.string();break;case 6:n.collectContain=e.uint32();break;case 7:n.evoCount=e.int32();break;case 8:n.evoId=e.int32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("model"))throw Mn.ProtocolError("missing required 'model'",{instance:n});if(!n.hasOwnProperty("name"))throw Mn.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("icon"))throw Mn.ProtocolError("missing required 'icon'",{instance:n});if(!n.hasOwnProperty("collectSpeed"))throw Mn.ProtocolError("missing required 'collectSpeed'",{instance:n});if(!n.hasOwnProperty("collectContain"))throw Mn.ProtocolError("missing required 'collectContain'",{instance:n});if(!n.hasOwnProperty("evoCount"))throw Mn.ProtocolError("missing required 'evoCount'",{instance:n});if(!n.hasOwnProperty("evoId"))throw Mn.ProtocolError("missing required 'evoId'",{instance:n});return n},Bee.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},Bee.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.model)?Mn.isString(e.name)?Mn.isString(e.icon)?Mn.isString(e.collectSpeed)?Mn.isInteger(e.collectContain)?Mn.isInteger(e.evoCount)?Mn.isInteger(e.evoId)?null:"evoId: integer expected":"evoCount: integer expected":"collectContain: integer expected":"collectSpeed: string expected":"icon: string expected":"name: string expected":"model: string expected":"id: integer expected"},Bee.fromObject=function(e){if(e instanceof Rn.roitescape.Bee)return e;var t=new Rn.roitescape.Bee;return null!=e.id&&(t.id=e.id>>>0),null!=e.model&&(t.model=String(e.model)),null!=e.name&&(t.name=String(e.name)),null!=e.icon&&(t.icon=String(e.icon)),null!=e.collectSpeed&&(t.collectSpeed=String(e.collectSpeed)),null!=e.collectContain&&(t.collectContain=e.collectContain>>>0),null!=e.evoCount&&(t.evoCount=0|e.evoCount),null!=e.evoId&&(t.evoId=0|e.evoId),t},Bee.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.model="",i.name="",i.icon="",i.collectSpeed="",i.collectContain=0,i.evoCount=0,i.evoId=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.model&&e.hasOwnProperty("model")&&(i.model=e.model),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.icon&&e.hasOwnProperty("icon")&&(i.icon=e.icon),null!=e.collectSpeed&&e.hasOwnProperty("collectSpeed")&&(i.collectSpeed=e.collectSpeed),null!=e.collectContain&&e.hasOwnProperty("collectContain")&&(i.collectContain=e.collectContain),null!=e.evoCount&&e.hasOwnProperty("evoCount")&&(i.evoCount=e.evoCount),null!=e.evoId&&e.hasOwnProperty("evoId")&&(i.evoId=e.evoId),i},Bee.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},Bee}(),i.TBBee=function(){function TBBee(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBBee.prototype.list=Mn.emptyArray,TBBee.create=function(e){return new TBBee(e)},TBBee.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.Bee.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBBee.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBBee.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBBee;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.Bee.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBBee.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBBee.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.Bee.verify(e.list[t]);if(i)return"list."+i}}return null},TBBee.fromObject=function(e){if(e instanceof Rn.roitescape.TBBee)return e;var t=new Rn.roitescape.TBBee;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBBee.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBBee.list: object expected");t.list[i]=Rn.roitescape.Bee.fromObject(e.list[i])}}return t},TBBee.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.Bee.toObject(e.list[n],t)}return i},TBBee.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBBee}(),i.Flower=function(){function Flower(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return Flower.prototype.id=0,Flower.prototype.model="",Flower.prototype.name="",Flower.prototype.icon="",Flower.prototype.hp=0,Flower.prototype.dropHoney="",Flower.prototype.honeyContain=0,Flower.prototype.reBornTime=0,Flower.create=function(e){return new Flower(e)},Flower.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.model),t.uint32(26).string(e.name),t.uint32(34).string(e.icon),t.uint32(40).uint32(e.hp),t.uint32(50).string(e.dropHoney),t.uint32(56).int32(e.honeyContain),t.uint32(64).int32(e.reBornTime),t},Flower.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},Flower.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.Flower;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.model=e.string();break;case 3:n.name=e.string();break;case 4:n.icon=e.string();break;case 5:n.hp=e.uint32();break;case 6:n.dropHoney=e.string();break;case 7:n.honeyContain=e.int32();break;case 8:n.reBornTime=e.int32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("model"))throw Mn.ProtocolError("missing required 'model'",{instance:n});if(!n.hasOwnProperty("name"))throw Mn.ProtocolError("missing required 'name'",{instance:n});if(!n.hasOwnProperty("icon"))throw Mn.ProtocolError("missing required 'icon'",{instance:n});if(!n.hasOwnProperty("hp"))throw Mn.ProtocolError("missing required 'hp'",{instance:n});if(!n.hasOwnProperty("dropHoney"))throw Mn.ProtocolError("missing required 'dropHoney'",{instance:n});if(!n.hasOwnProperty("honeyContain"))throw Mn.ProtocolError("missing required 'honeyContain'",{instance:n});if(!n.hasOwnProperty("reBornTime"))throw Mn.ProtocolError("missing required 'reBornTime'",{instance:n});return n},Flower.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},Flower.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.model)?Mn.isString(e.name)?Mn.isString(e.icon)?Mn.isInteger(e.hp)?Mn.isString(e.dropHoney)?Mn.isInteger(e.honeyContain)?Mn.isInteger(e.reBornTime)?null:"reBornTime: integer expected":"honeyContain: integer expected":"dropHoney: string expected":"hp: integer expected":"icon: string expected":"name: string expected":"model: string expected":"id: integer expected"},Flower.fromObject=function(e){if(e instanceof Rn.roitescape.Flower)return e;var t=new Rn.roitescape.Flower;return null!=e.id&&(t.id=e.id>>>0),null!=e.model&&(t.model=String(e.model)),null!=e.name&&(t.name=String(e.name)),null!=e.icon&&(t.icon=String(e.icon)),null!=e.hp&&(t.hp=e.hp>>>0),null!=e.dropHoney&&(t.dropHoney=String(e.dropHoney)),null!=e.honeyContain&&(t.honeyContain=0|e.honeyContain),null!=e.reBornTime&&(t.reBornTime=0|e.reBornTime),t},Flower.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.model="",i.name="",i.icon="",i.hp=0,i.dropHoney="",i.honeyContain=0,i.reBornTime=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.model&&e.hasOwnProperty("model")&&(i.model=e.model),null!=e.name&&e.hasOwnProperty("name")&&(i.name=e.name),null!=e.icon&&e.hasOwnProperty("icon")&&(i.icon=e.icon),null!=e.hp&&e.hasOwnProperty("hp")&&(i.hp=e.hp),null!=e.dropHoney&&e.hasOwnProperty("dropHoney")&&(i.dropHoney=e.dropHoney),null!=e.honeyContain&&e.hasOwnProperty("honeyContain")&&(i.honeyContain=e.honeyContain),null!=e.reBornTime&&e.hasOwnProperty("reBornTime")&&(i.reBornTime=e.reBornTime),i},Flower.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},Flower}(),i.TBFlower=function(){function TBFlower(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBFlower.prototype.list=Mn.emptyArray,TBFlower.create=function(e){return new TBFlower(e)},TBFlower.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.Flower.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBFlower.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBFlower.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBFlower;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.Flower.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBFlower.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBFlower.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.Flower.verify(e.list[t]);if(i)return"list."+i}}return null},TBFlower.fromObject=function(e){if(e instanceof Rn.roitescape.TBFlower)return e;var t=new Rn.roitescape.TBFlower;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBFlower.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBFlower.list: object expected");t.list[i]=Rn.roitescape.Flower.fromObject(e.list[i])}}return t},TBFlower.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.Flower.toObject(e.list[n],t)}return i},TBFlower.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBFlower}(),i.GrowUp=function(){function GrowUp(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return GrowUp.prototype.id=0,GrowUp.prototype.pHurt="",GrowUp.prototype.pHurtGold="",GrowUp.prototype.pCapacity="",GrowUp.prototype.pCapacityGold="",GrowUp.prototype.beeSpeedCut="",GrowUp.prototype.beeSpeedCutGold="",GrowUp.prototype.beeBuy="",GrowUp.prototype.toNextLvGold="",GrowUp.create=function(e){return new GrowUp(e)},GrowUp.encode=function(e,t){return t||(t=Bn.create()),t.uint32(8).uint32(e.id),t.uint32(18).string(e.pHurt),t.uint32(26).string(e.pHurtGold),t.uint32(34).string(e.pCapacity),t.uint32(42).string(e.pCapacityGold),t.uint32(50).string(e.beeSpeedCut),t.uint32(58).string(e.beeSpeedCutGold),t.uint32(66).string(e.beeBuy),t.uint32(74).string(e.toNextLvGold),t},GrowUp.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},GrowUp.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.GrowUp;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.pHurt=e.string();break;case 3:n.pHurtGold=e.string();break;case 4:n.pCapacity=e.string();break;case 5:n.pCapacityGold=e.string();break;case 6:n.beeSpeedCut=e.string();break;case 7:n.beeSpeedCutGold=e.string();break;case 8:n.beeBuy=e.string();break;case 9:n.toNextLvGold=e.string();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("id"))throw Mn.ProtocolError("missing required 'id'",{instance:n});if(!n.hasOwnProperty("pHurt"))throw Mn.ProtocolError("missing required 'pHurt'",{instance:n});if(!n.hasOwnProperty("pHurtGold"))throw Mn.ProtocolError("missing required 'pHurtGold'",{instance:n});if(!n.hasOwnProperty("pCapacity"))throw Mn.ProtocolError("missing required 'pCapacity'",{instance:n});if(!n.hasOwnProperty("pCapacityGold"))throw Mn.ProtocolError("missing required 'pCapacityGold'",{instance:n});if(!n.hasOwnProperty("beeSpeedCut"))throw Mn.ProtocolError("missing required 'beeSpeedCut'",{instance:n});if(!n.hasOwnProperty("beeSpeedCutGold"))throw Mn.ProtocolError("missing required 'beeSpeedCutGold'",{instance:n});if(!n.hasOwnProperty("beeBuy"))throw Mn.ProtocolError("missing required 'beeBuy'",{instance:n});if(!n.hasOwnProperty("toNextLvGold"))throw Mn.ProtocolError("missing required 'toNextLvGold'",{instance:n});return n},GrowUp.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},GrowUp.verify=function(e){return"object"!=typeof e||null===e?"object expected":Mn.isInteger(e.id)?Mn.isString(e.pHurt)?Mn.isString(e.pHurtGold)?Mn.isString(e.pCapacity)?Mn.isString(e.pCapacityGold)?Mn.isString(e.beeSpeedCut)?Mn.isString(e.beeSpeedCutGold)?Mn.isString(e.beeBuy)?Mn.isString(e.toNextLvGold)?null:"toNextLvGold: string expected":"beeBuy: string expected":"beeSpeedCutGold: string expected":"beeSpeedCut: string expected":"pCapacityGold: string expected":"pCapacity: string expected":"pHurtGold: string expected":"pHurt: string expected":"id: integer expected"},GrowUp.fromObject=function(e){if(e instanceof Rn.roitescape.GrowUp)return e;var t=new Rn.roitescape.GrowUp;return null!=e.id&&(t.id=e.id>>>0),null!=e.pHurt&&(t.pHurt=String(e.pHurt)),null!=e.pHurtGold&&(t.pHurtGold=String(e.pHurtGold)),null!=e.pCapacity&&(t.pCapacity=String(e.pCapacity)),null!=e.pCapacityGold&&(t.pCapacityGold=String(e.pCapacityGold)),null!=e.beeSpeedCut&&(t.beeSpeedCut=String(e.beeSpeedCut)),null!=e.beeSpeedCutGold&&(t.beeSpeedCutGold=String(e.beeSpeedCutGold)),null!=e.beeBuy&&(t.beeBuy=String(e.beeBuy)),null!=e.toNextLvGold&&(t.toNextLvGold=String(e.toNextLvGold)),t},GrowUp.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.pHurt="",i.pHurtGold="",i.pCapacity="",i.pCapacityGold="",i.beeSpeedCut="",i.beeSpeedCutGold="",i.beeBuy="",i.toNextLvGold=""),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.pHurt&&e.hasOwnProperty("pHurt")&&(i.pHurt=e.pHurt),null!=e.pHurtGold&&e.hasOwnProperty("pHurtGold")&&(i.pHurtGold=e.pHurtGold),null!=e.pCapacity&&e.hasOwnProperty("pCapacity")&&(i.pCapacity=e.pCapacity),null!=e.pCapacityGold&&e.hasOwnProperty("pCapacityGold")&&(i.pCapacityGold=e.pCapacityGold),null!=e.beeSpeedCut&&e.hasOwnProperty("beeSpeedCut")&&(i.beeSpeedCut=e.beeSpeedCut),null!=e.beeSpeedCutGold&&e.hasOwnProperty("beeSpeedCutGold")&&(i.beeSpeedCutGold=e.beeSpeedCutGold),null!=e.beeBuy&&e.hasOwnProperty("beeBuy")&&(i.beeBuy=e.beeBuy),null!=e.toNextLvGold&&e.hasOwnProperty("toNextLvGold")&&(i.toNextLvGold=e.toNextLvGold),i},GrowUp.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},GrowUp}(),i.TBGrowUp=function(){function TBGrowUp(e){if(this.list=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return TBGrowUp.prototype.list=Mn.emptyArray,TBGrowUp.create=function(e){return new TBGrowUp(e)},TBGrowUp.encode=function(e,t){if(t||(t=Bn.create()),null!=e.list&&e.list.length)for(var i=0;i<e.list.length;++i)Rn.roitescape.GrowUp.encode(e.list[i],t.uint32(10).fork()).ldelim();return t},TBGrowUp.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},TBGrowUp.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.TBGrowUp;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.list&&n.list.length||(n.list=[]),n.list.push(Rn.roitescape.GrowUp.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return n},TBGrowUp.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},TBGrowUp.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.list&&e.hasOwnProperty("list")){if(!Array.isArray(e.list))return"list: array expected";for(var t=0;t<e.list.length;++t){var i=Rn.roitescape.GrowUp.verify(e.list[t]);if(i)return"list."+i}}return null},TBGrowUp.fromObject=function(e){if(e instanceof Rn.roitescape.TBGrowUp)return e;var t=new Rn.roitescape.TBGrowUp;if(e.list){if(!Array.isArray(e.list))throw TypeError(".roitescape.TBGrowUp.list: array expected");t.list=[];for(var i=0;i<e.list.length;++i){if("object"!=typeof e.list[i])throw TypeError(".roitescape.TBGrowUp.list: object expected");t.list[i]=Rn.roitescape.GrowUp.fromObject(e.list[i])}}return t},TBGrowUp.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.list=[]),e.list&&e.list.length){i.list=[];for(var n=0;n<e.list.length;++n)i.list[n]=Rn.roitescape.GrowUp.toObject(e.list[n],t)}return i},TBGrowUp.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},TBGrowUp}(),i.PlayerSkillData=function(){function PlayerSkillData(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return PlayerSkillData.prototype.id=0,PlayerSkillData.prototype.toTime=0,PlayerSkillData.prototype.count=0,PlayerSkillData.create=function(e){return new PlayerSkillData(e)},PlayerSkillData.encode=function(e,t){return t||(t=Bn.create()),null!=e.id&&e.hasOwnProperty("id")&&t.uint32(8).uint32(e.id),null!=e.toTime&&e.hasOwnProperty("toTime")&&t.uint32(16).int32(e.toTime),null!=e.count&&e.hasOwnProperty("count")&&t.uint32(24).int32(e.count),t},PlayerSkillData.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},PlayerSkillData.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.PlayerSkillData;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.id=e.uint32();break;case 2:n.toTime=e.int32();break;case 3:n.count=e.int32();break;default:e.skipType(7&s)}}return n},PlayerSkillData.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},PlayerSkillData.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!Mn.isInteger(e.id)?"id: integer expected":null!=e.toTime&&e.hasOwnProperty("toTime")&&!Mn.isInteger(e.toTime)?"toTime: integer expected":null!=e.count&&e.hasOwnProperty("count")&&!Mn.isInteger(e.count)?"count: integer expected":null},PlayerSkillData.fromObject=function(e){if(e instanceof Rn.roitescape.PlayerSkillData)return e;var t=new Rn.roitescape.PlayerSkillData;return null!=e.id&&(t.id=e.id>>>0),null!=e.toTime&&(t.toTime=0|e.toTime),null!=e.count&&(t.count=0|e.count),t},PlayerSkillData.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.id=0,i.toTime=0,i.count=0),null!=e.id&&e.hasOwnProperty("id")&&(i.id=e.id),null!=e.toTime&&e.hasOwnProperty("toTime")&&(i.toTime=e.toTime),null!=e.count&&e.hasOwnProperty("count")&&(i.count=e.count),i},PlayerSkillData.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},PlayerSkillData}(),i.PlayerInfo=function(){function PlayerInfo(e){if(this.ownSkinDetail=[],this.taskDatas=[],this.taskLine=[],this.levelDatas=[],this.beeDatas=[],this.playerSkillDatas=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return PlayerInfo.prototype.openID="",PlayerInfo.prototype.sessID="",PlayerInfo.prototype.userID="",PlayerInfo.prototype.lastSaveTime=0,PlayerInfo.prototype.nickname="",PlayerInfo.prototype.sex=0,PlayerInfo.prototype.headUrl="",PlayerInfo.prototype.shareTimesOfToday=0,PlayerInfo.prototype.recordDayOfShareTimes=0,PlayerInfo.prototype.advTimesOfToday=0,PlayerInfo.prototype.recordDayOfAdvTimes=0,PlayerInfo.prototype.setting=null,PlayerInfo.prototype.totalShareTimes=0,PlayerInfo.prototype.totalAdvTimes=0,PlayerInfo.prototype.redGift=null,PlayerInfo.prototype.coin="",PlayerInfo.prototype.totalCoin="",PlayerInfo.prototype.levelID=0,PlayerInfo.prototype.totalLevelCount=0,PlayerInfo.prototype.continueLevel=0,PlayerInfo.prototype.skinId=0,PlayerInfo.prototype.ownSkinDetail=Mn.emptyArray,PlayerInfo.prototype.diam="",PlayerInfo.prototype.curSginDay=0,PlayerInfo.prototype.curSginWeekCount=0,PlayerInfo.prototype.lastSginYear="",PlayerInfo.prototype.lastGetPowerTime=0,PlayerInfo.prototype.power=0,PlayerInfo.prototype.lastViewAdGetPowerTime=0,PlayerInfo.prototype.todayViewAdGetPowerTimes=0,PlayerInfo.prototype.todayTurntableTimes=0,PlayerInfo.prototype.isShowSubscribeApp=0,PlayerInfo.prototype.curDailyTaskId=0,PlayerInfo.prototype.dailTaskSgin=0,PlayerInfo.prototype.dailTaskTLevel=0,PlayerInfo.prototype.curMoney="",PlayerInfo.prototype.loginDays=0,PlayerInfo.prototype.lastGetRedTimers=0,PlayerInfo.prototype.curGetRedTimers=0,PlayerInfo.prototype.dailyTaskBeginTime=0,PlayerInfo.prototype.todayDiamGetPowerTimes=0,PlayerInfo.prototype.todayShowInsertAdCount=0,PlayerInfo.prototype.isShowTeach=0,PlayerInfo.prototype.extraPowerCount=0,PlayerInfo.prototype.getAdGoldTimes=0,PlayerInfo.prototype.teachId=0,PlayerInfo.prototype.taskDatas=Mn.emptyArray,PlayerInfo.prototype.curTaskId=0,PlayerInfo.prototype.taskLine=Mn.emptyArray,PlayerInfo.prototype.levelDatas=Mn.emptyArray,PlayerInfo.prototype.lastPlayerPos="",PlayerInfo.prototype.lastLevelId=0,PlayerInfo.prototype.beeDatas=Mn.emptyArray,PlayerInfo.prototype.beeSpeedLv=0,PlayerInfo.prototype.containLv=0,PlayerInfo.prototype.hurtLv=0,PlayerInfo.prototype.buyBeeTimes=0,PlayerInfo.prototype.playerSkillDatas=Mn.emptyArray,PlayerInfo.prototype.speedUpOpen=0,PlayerInfo.prototype.strongeUpOpen=0,PlayerInfo.prototype.backHomeOpen=0,PlayerInfo.create=function(e){return new PlayerInfo(e)},PlayerInfo.encode=function(e,t){if(t||(t=Bn.create()),t.uint32(10).string(e.openID),t.uint32(18).string(e.sessID),t.uint32(26).string(e.userID),t.uint32(32).uint32(e.lastSaveTime),t.uint32(42).string(e.nickname),t.uint32(48).uint32(e.sex),t.uint32(58).string(e.headUrl),t.uint32(64).uint32(e.shareTimesOfToday),t.uint32(72).uint32(e.recordDayOfShareTimes),t.uint32(80).uint32(e.advTimesOfToday),t.uint32(88).uint32(e.recordDayOfAdvTimes),Rn.roitescape.SettingConfig.encode(e.setting,t.uint32(98).fork()).ldelim(),null!=e.totalShareTimes&&e.hasOwnProperty("totalShareTimes")&&t.uint32(104).uint32(e.totalShareTimes),null!=e.totalAdvTimes&&e.hasOwnProperty("totalAdvTimes")&&t.uint32(112).uint32(e.totalAdvTimes),null!=e.redGift&&e.hasOwnProperty("redGift")&&Rn.roitescape.RedGiftConfig.encode(e.redGift,t.uint32(122).fork()).ldelim(),t.uint32(130).string(e.coin),t.uint32(138).string(e.totalCoin),null!=e.levelID&&e.hasOwnProperty("levelID")&&t.uint32(144).uint32(e.levelID),null!=e.totalLevelCount&&e.hasOwnProperty("totalLevelCount")&&t.uint32(152).uint32(e.totalLevelCount),null!=e.continueLevel&&e.hasOwnProperty("continueLevel")&&t.uint32(160).uint32(e.continueLevel),null!=e.skinId&&e.hasOwnProperty("skinId")&&t.uint32(168).uint32(e.skinId),null!=e.ownSkinDetail&&e.ownSkinDetail.length)for(var i=0;i<e.ownSkinDetail.length;++i)Rn.roitescape.SkinData.encode(e.ownSkinDetail[i],t.uint32(178).fork()).ldelim();if(null!=e.diam&&e.hasOwnProperty("diam")&&t.uint32(186).string(e.diam),null!=e.curSginDay&&e.hasOwnProperty("curSginDay")&&t.uint32(192).uint32(e.curSginDay),null!=e.curSginWeekCount&&e.hasOwnProperty("curSginWeekCount")&&t.uint32(200).uint32(e.curSginWeekCount),null!=e.lastSginYear&&e.hasOwnProperty("lastSginYear")&&t.uint32(210).string(e.lastSginYear),null!=e.lastGetPowerTime&&e.hasOwnProperty("lastGetPowerTime")&&t.uint32(216).uint32(e.lastGetPowerTime),null!=e.power&&e.hasOwnProperty("power")&&t.uint32(224).uint32(e.power),null!=e.lastViewAdGetPowerTime&&e.hasOwnProperty("lastViewAdGetPowerTime")&&t.uint32(232).uint32(e.lastViewAdGetPowerTime),null!=e.todayViewAdGetPowerTimes&&e.hasOwnProperty("todayViewAdGetPowerTimes")&&t.uint32(240).uint32(e.todayViewAdGetPowerTimes),null!=e.todayTurntableTimes&&e.hasOwnProperty("todayTurntableTimes")&&t.uint32(248).uint32(e.todayTurntableTimes),null!=e.isShowSubscribeApp&&e.hasOwnProperty("isShowSubscribeApp")&&t.uint32(256).uint32(e.isShowSubscribeApp),null!=e.curDailyTaskId&&e.hasOwnProperty("curDailyTaskId")&&t.uint32(264).uint32(e.curDailyTaskId),null!=e.dailTaskSgin&&e.hasOwnProperty("dailTaskSgin")&&t.uint32(272).uint32(e.dailTaskSgin),null!=e.dailTaskTLevel&&e.hasOwnProperty("dailTaskTLevel")&&t.uint32(280).uint32(e.dailTaskTLevel),null!=e.curMoney&&e.hasOwnProperty("curMoney")&&t.uint32(290).string(e.curMoney),null!=e.loginDays&&e.hasOwnProperty("loginDays")&&t.uint32(296).uint32(e.loginDays),null!=e.lastGetRedTimers&&e.hasOwnProperty("lastGetRedTimers")&&t.uint32(304).uint32(e.lastGetRedTimers),null!=e.curGetRedTimers&&e.hasOwnProperty("curGetRedTimers")&&t.uint32(312).uint32(e.curGetRedTimers),null!=e.dailyTaskBeginTime&&e.hasOwnProperty("dailyTaskBeginTime")&&t.uint32(320).uint32(e.dailyTaskBeginTime),null!=e.todayDiamGetPowerTimes&&e.hasOwnProperty("todayDiamGetPowerTimes")&&t.uint32(328).uint32(e.todayDiamGetPowerTimes),null!=e.todayShowInsertAdCount&&e.hasOwnProperty("todayShowInsertAdCount")&&t.uint32(336).uint32(e.todayShowInsertAdCount),null!=e.isShowTeach&&e.hasOwnProperty("isShowTeach")&&t.uint32(344).uint32(e.isShowTeach),null!=e.extraPowerCount&&e.hasOwnProperty("extraPowerCount")&&t.uint32(352).uint32(e.extraPowerCount),null!=e.getAdGoldTimes&&e.hasOwnProperty("getAdGoldTimes")&&t.uint32(360).uint32(e.getAdGoldTimes),null!=e.teachId&&e.hasOwnProperty("teachId")&&t.uint32(368).uint32(e.teachId),null!=e.taskDatas&&e.taskDatas.length)for(i=0;i<e.taskDatas.length;++i)Rn.roitescape.TaskData.encode(e.taskDatas[i],t.uint32(378).fork()).ldelim();if(null!=e.curTaskId&&e.hasOwnProperty("curTaskId")&&t.uint32(384).uint32(e.curTaskId),null!=e.taskLine&&e.taskLine.length)for(i=0;i<e.taskLine.length;++i)t.uint32(392).uint32(e.taskLine[i]);if(null!=e.levelDatas&&e.levelDatas.length)for(i=0;i<e.levelDatas.length;++i)Rn.roitescape.LevelData.encode(e.levelDatas[i],t.uint32(402).fork()).ldelim();if(null!=e.lastPlayerPos&&e.hasOwnProperty("lastPlayerPos")&&t.uint32(410).string(e.lastPlayerPos),null!=e.lastLevelId&&e.hasOwnProperty("lastLevelId")&&t.uint32(416).uint32(e.lastLevelId),null!=e.beeDatas&&e.beeDatas.length)for(i=0;i<e.beeDatas.length;++i)Rn.roitescape.BeeData.encode(e.beeDatas[i],t.uint32(426).fork()).ldelim();if(null!=e.beeSpeedLv&&e.hasOwnProperty("beeSpeedLv")&&t.uint32(432).uint32(e.beeSpeedLv),null!=e.containLv&&e.hasOwnProperty("containLv")&&t.uint32(440).uint32(e.containLv),null!=e.hurtLv&&e.hasOwnProperty("hurtLv")&&t.uint32(448).uint32(e.hurtLv),null!=e.buyBeeTimes&&e.hasOwnProperty("buyBeeTimes")&&t.uint32(456).uint32(e.buyBeeTimes),null!=e.playerSkillDatas&&e.playerSkillDatas.length)for(i=0;i<e.playerSkillDatas.length;++i)Rn.roitescape.PlayerSkillData.encode(e.playerSkillDatas[i],t.uint32(466).fork()).ldelim();return null!=e.speedUpOpen&&e.hasOwnProperty("speedUpOpen")&&t.uint32(472).uint32(e.speedUpOpen),null!=e.strongeUpOpen&&e.hasOwnProperty("strongeUpOpen")&&t.uint32(480).uint32(e.strongeUpOpen),null!=e.backHomeOpen&&e.hasOwnProperty("backHomeOpen")&&t.uint32(488).uint32(e.backHomeOpen),t},PlayerInfo.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},PlayerInfo.decode=function(e,t){e instanceof Dn||(e=Dn.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new Rn.roitescape.PlayerInfo;e.pos<i;){var s=e.uint32();switch(s>>>3){case 1:n.openID=e.string();break;case 2:n.sessID=e.string();break;case 3:n.userID=e.string();break;case 4:n.lastSaveTime=e.uint32();break;case 5:n.nickname=e.string();break;case 6:n.sex=e.uint32();break;case 7:n.headUrl=e.string();break;case 8:n.shareTimesOfToday=e.uint32();break;case 9:n.recordDayOfShareTimes=e.uint32();break;case 10:n.advTimesOfToday=e.uint32();break;case 11:n.recordDayOfAdvTimes=e.uint32();break;case 12:n.setting=Rn.roitescape.SettingConfig.decode(e,e.uint32());break;case 13:n.totalShareTimes=e.uint32();break;case 14:n.totalAdvTimes=e.uint32();break;case 15:n.redGift=Rn.roitescape.RedGiftConfig.decode(e,e.uint32());break;case 16:n.coin=e.string();break;case 17:n.totalCoin=e.string();break;case 18:n.levelID=e.uint32();break;case 19:n.totalLevelCount=e.uint32();break;case 20:n.continueLevel=e.uint32();break;case 21:n.skinId=e.uint32();break;case 22:n.ownSkinDetail&&n.ownSkinDetail.length||(n.ownSkinDetail=[]),n.ownSkinDetail.push(Rn.roitescape.SkinData.decode(e,e.uint32()));break;case 23:n.diam=e.string();break;case 24:n.curSginDay=e.uint32();break;case 25:n.curSginWeekCount=e.uint32();break;case 26:n.lastSginYear=e.string();break;case 27:n.lastGetPowerTime=e.uint32();break;case 28:n.power=e.uint32();break;case 29:n.lastViewAdGetPowerTime=e.uint32();break;case 30:n.todayViewAdGetPowerTimes=e.uint32();break;case 31:n.todayTurntableTimes=e.uint32();break;case 32:n.isShowSubscribeApp=e.uint32();break;case 33:n.curDailyTaskId=e.uint32();break;case 34:n.dailTaskSgin=e.uint32();break;case 35:n.dailTaskTLevel=e.uint32();break;case 36:n.curMoney=e.string();break;case 37:n.loginDays=e.uint32();break;case 38:n.lastGetRedTimers=e.uint32();break;case 39:n.curGetRedTimers=e.uint32();break;case 40:n.dailyTaskBeginTime=e.uint32();break;case 41:n.todayDiamGetPowerTimes=e.uint32();break;case 42:n.todayShowInsertAdCount=e.uint32();break;case 43:n.isShowTeach=e.uint32();break;case 44:n.extraPowerCount=e.uint32();break;case 45:n.getAdGoldTimes=e.uint32();break;case 46:n.teachId=e.uint32();break;case 47:n.taskDatas&&n.taskDatas.length||(n.taskDatas=[]),n.taskDatas.push(Rn.roitescape.TaskData.decode(e,e.uint32()));break;case 48:n.curTaskId=e.uint32();break;case 49:if(n.taskLine&&n.taskLine.length||(n.taskLine=[]),2==(7&s))for(var o=e.uint32()+e.pos;e.pos<o;)n.taskLine.push(e.uint32());else n.taskLine.push(e.uint32());break;case 50:n.levelDatas&&n.levelDatas.length||(n.levelDatas=[]),n.levelDatas.push(Rn.roitescape.LevelData.decode(e,e.uint32()));break;case 51:n.lastPlayerPos=e.string();break;case 52:n.lastLevelId=e.uint32();break;case 53:n.beeDatas&&n.beeDatas.length||(n.beeDatas=[]),n.beeDatas.push(Rn.roitescape.BeeData.decode(e,e.uint32()));break;case 54:n.beeSpeedLv=e.uint32();break;case 55:n.containLv=e.uint32();break;case 56:n.hurtLv=e.uint32();break;case 57:n.buyBeeTimes=e.uint32();break;case 58:n.playerSkillDatas&&n.playerSkillDatas.length||(n.playerSkillDatas=[]),n.playerSkillDatas.push(Rn.roitescape.PlayerSkillData.decode(e,e.uint32()));break;case 59:n.speedUpOpen=e.uint32();break;case 60:n.strongeUpOpen=e.uint32();break;case 61:n.backHomeOpen=e.uint32();break;default:e.skipType(7&s)}}if(!n.hasOwnProperty("openID"))throw Mn.ProtocolError("missing required 'openID'",{instance:n});if(!n.hasOwnProperty("sessID"))throw Mn.ProtocolError("missing required 'sessID'",{instance:n});if(!n.hasOwnProperty("userID"))throw Mn.ProtocolError("missing required 'userID'",{instance:n});if(!n.hasOwnProperty("lastSaveTime"))throw Mn.ProtocolError("missing required 'lastSaveTime'",{instance:n});if(!n.hasOwnProperty("nickname"))throw Mn.ProtocolError("missing required 'nickname'",{instance:n});if(!n.hasOwnProperty("sex"))throw Mn.ProtocolError("missing required 'sex'",{instance:n});if(!n.hasOwnProperty("headUrl"))throw Mn.ProtocolError("missing required 'headUrl'",{instance:n});if(!n.hasOwnProperty("shareTimesOfToday"))throw Mn.ProtocolError("missing required 'shareTimesOfToday'",{instance:n});if(!n.hasOwnProperty("recordDayOfShareTimes"))throw Mn.ProtocolError("missing required 'recordDayOfShareTimes'",{instance:n});if(!n.hasOwnProperty("advTimesOfToday"))throw Mn.ProtocolError("missing required 'advTimesOfToday'",{instance:n});if(!n.hasOwnProperty("recordDayOfAdvTimes"))throw Mn.ProtocolError("missing required 'recordDayOfAdvTimes'",{instance:n});if(!n.hasOwnProperty("setting"))throw Mn.ProtocolError("missing required 'setting'",{instance:n});if(!n.hasOwnProperty("coin"))throw Mn.ProtocolError("missing required 'coin'",{instance:n});if(!n.hasOwnProperty("totalCoin"))throw Mn.ProtocolError("missing required 'totalCoin'",{instance:n});return n},PlayerInfo.decodeDelimited=function(e){return e instanceof Dn||(e=new Dn(e)),this.decode(e,e.uint32())},PlayerInfo.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!Mn.isString(e.openID))return"openID: string expected";if(!Mn.isString(e.sessID))return"sessID: string expected";if(!Mn.isString(e.userID))return"userID: string expected";if(!Mn.isInteger(e.lastSaveTime))return"lastSaveTime: integer expected";if(!Mn.isString(e.nickname))return"nickname: string expected";if(!Mn.isInteger(e.sex))return"sex: integer expected";if(!Mn.isString(e.headUrl))return"headUrl: string expected";if(!Mn.isInteger(e.shareTimesOfToday))return"shareTimesOfToday: integer expected";if(!Mn.isInteger(e.recordDayOfShareTimes))return"recordDayOfShareTimes: integer expected";if(!Mn.isInteger(e.advTimesOfToday))return"advTimesOfToday: integer expected";if(!Mn.isInteger(e.recordDayOfAdvTimes))return"recordDayOfAdvTimes: integer expected";if(i=Rn.roitescape.SettingConfig.verify(e.setting))return"setting."+i;if(null!=e.totalShareTimes&&e.hasOwnProperty("totalShareTimes")&&!Mn.isInteger(e.totalShareTimes))return"totalShareTimes: integer expected";if(null!=e.totalAdvTimes&&e.hasOwnProperty("totalAdvTimes")&&!Mn.isInteger(e.totalAdvTimes))return"totalAdvTimes: integer expected";if(null!=e.redGift&&e.hasOwnProperty("redGift")&&(i=Rn.roitescape.RedGiftConfig.verify(e.redGift)))return"redGift."+i;if(!Mn.isString(e.coin))return"coin: string expected";if(!Mn.isString(e.totalCoin))return"totalCoin: string expected";if(null!=e.levelID&&e.hasOwnProperty("levelID")&&!Mn.isInteger(e.levelID))return"levelID: integer expected";if(null!=e.totalLevelCount&&e.hasOwnProperty("totalLevelCount")&&!Mn.isInteger(e.totalLevelCount))return"totalLevelCount: integer expected";if(null!=e.continueLevel&&e.hasOwnProperty("continueLevel")&&!Mn.isInteger(e.continueLevel))return"continueLevel: integer expected";if(null!=e.skinId&&e.hasOwnProperty("skinId")&&!Mn.isInteger(e.skinId))return"skinId: integer expected";if(null!=e.ownSkinDetail&&e.hasOwnProperty("ownSkinDetail")){if(!Array.isArray(e.ownSkinDetail))return"ownSkinDetail: array expected";for(var t=0;t<e.ownSkinDetail.length;++t){if(i=Rn.roitescape.SkinData.verify(e.ownSkinDetail[t]))return"ownSkinDetail."+i}}if(null!=e.diam&&e.hasOwnProperty("diam")&&!Mn.isString(e.diam))return"diam: string expected";if(null!=e.curSginDay&&e.hasOwnProperty("curSginDay")&&!Mn.isInteger(e.curSginDay))return"curSginDay: integer expected";if(null!=e.curSginWeekCount&&e.hasOwnProperty("curSginWeekCount")&&!Mn.isInteger(e.curSginWeekCount))return"curSginWeekCount: integer expected";if(null!=e.lastSginYear&&e.hasOwnProperty("lastSginYear")&&!Mn.isString(e.lastSginYear))return"lastSginYear: string expected";if(null!=e.lastGetPowerTime&&e.hasOwnProperty("lastGetPowerTime")&&!Mn.isInteger(e.lastGetPowerTime))return"lastGetPowerTime: integer expected";if(null!=e.power&&e.hasOwnProperty("power")&&!Mn.isInteger(e.power))return"power: integer expected";if(null!=e.lastViewAdGetPowerTime&&e.hasOwnProperty("lastViewAdGetPowerTime")&&!Mn.isInteger(e.lastViewAdGetPowerTime))return"lastViewAdGetPowerTime: integer expected";if(null!=e.todayViewAdGetPowerTimes&&e.hasOwnProperty("todayViewAdGetPowerTimes")&&!Mn.isInteger(e.todayViewAdGetPowerTimes))return"todayViewAdGetPowerTimes: integer expected";if(null!=e.todayTurntableTimes&&e.hasOwnProperty("todayTurntableTimes")&&!Mn.isInteger(e.todayTurntableTimes))return"todayTurntableTimes: integer expected";if(null!=e.isShowSubscribeApp&&e.hasOwnProperty("isShowSubscribeApp")&&!Mn.isInteger(e.isShowSubscribeApp))return"isShowSubscribeApp: integer expected";if(null!=e.curDailyTaskId&&e.hasOwnProperty("curDailyTaskId")&&!Mn.isInteger(e.curDailyTaskId))return"curDailyTaskId: integer expected";if(null!=e.dailTaskSgin&&e.hasOwnProperty("dailTaskSgin")&&!Mn.isInteger(e.dailTaskSgin))return"dailTaskSgin: integer expected";if(null!=e.dailTaskTLevel&&e.hasOwnProperty("dailTaskTLevel")&&!Mn.isInteger(e.dailTaskTLevel))return"dailTaskTLevel: integer expected";if(null!=e.curMoney&&e.hasOwnProperty("curMoney")&&!Mn.isString(e.curMoney))return"curMoney: string expected";if(null!=e.loginDays&&e.hasOwnProperty("loginDays")&&!Mn.isInteger(e.loginDays))return"loginDays: integer expected";if(null!=e.lastGetRedTimers&&e.hasOwnProperty("lastGetRedTimers")&&!Mn.isInteger(e.lastGetRedTimers))return"lastGetRedTimers: integer expected";if(null!=e.curGetRedTimers&&e.hasOwnProperty("curGetRedTimers")&&!Mn.isInteger(e.curGetRedTimers))return"curGetRedTimers: integer expected";if(null!=e.dailyTaskBeginTime&&e.hasOwnProperty("dailyTaskBeginTime")&&!Mn.isInteger(e.dailyTaskBeginTime))return"dailyTaskBeginTime: integer expected";if(null!=e.todayDiamGetPowerTimes&&e.hasOwnProperty("todayDiamGetPowerTimes")&&!Mn.isInteger(e.todayDiamGetPowerTimes))return"todayDiamGetPowerTimes: integer expected";if(null!=e.todayShowInsertAdCount&&e.hasOwnProperty("todayShowInsertAdCount")&&!Mn.isInteger(e.todayShowInsertAdCount))return"todayShowInsertAdCount: integer expected";if(null!=e.isShowTeach&&e.hasOwnProperty("isShowTeach")&&!Mn.isInteger(e.isShowTeach))return"isShowTeach: integer expected";if(null!=e.extraPowerCount&&e.hasOwnProperty("extraPowerCount")&&!Mn.isInteger(e.extraPowerCount))return"extraPowerCount: integer expected";if(null!=e.getAdGoldTimes&&e.hasOwnProperty("getAdGoldTimes")&&!Mn.isInteger(e.getAdGoldTimes))return"getAdGoldTimes: integer expected";if(null!=e.teachId&&e.hasOwnProperty("teachId")&&!Mn.isInteger(e.teachId))return"teachId: integer expected";if(null!=e.taskDatas&&e.hasOwnProperty("taskDatas")){if(!Array.isArray(e.taskDatas))return"taskDatas: array expected";for(t=0;t<e.taskDatas.length;++t){if(i=Rn.roitescape.TaskData.verify(e.taskDatas[t]))return"taskDatas."+i}}if(null!=e.curTaskId&&e.hasOwnProperty("curTaskId")&&!Mn.isInteger(e.curTaskId))return"curTaskId: integer expected";if(null!=e.taskLine&&e.hasOwnProperty("taskLine")){if(!Array.isArray(e.taskLine))return"taskLine: array expected";for(t=0;t<e.taskLine.length;++t)if(!Mn.isInteger(e.taskLine[t]))return"taskLine: integer[] expected"}if(null!=e.levelDatas&&e.hasOwnProperty("levelDatas")){if(!Array.isArray(e.levelDatas))return"levelDatas: array expected";for(t=0;t<e.levelDatas.length;++t){if(i=Rn.roitescape.LevelData.verify(e.levelDatas[t]))return"levelDatas."+i}}if(null!=e.lastPlayerPos&&e.hasOwnProperty("lastPlayerPos")&&!Mn.isString(e.lastPlayerPos))return"lastPlayerPos: string expected";if(null!=e.lastLevelId&&e.hasOwnProperty("lastLevelId")&&!Mn.isInteger(e.lastLevelId))return"lastLevelId: integer expected";if(null!=e.beeDatas&&e.hasOwnProperty("beeDatas")){if(!Array.isArray(e.beeDatas))return"beeDatas: array expected";for(t=0;t<e.beeDatas.length;++t){if(i=Rn.roitescape.BeeData.verify(e.beeDatas[t]))return"beeDatas."+i}}if(null!=e.beeSpeedLv&&e.hasOwnProperty("beeSpeedLv")&&!Mn.isInteger(e.beeSpeedLv))return"beeSpeedLv: integer expected";if(null!=e.containLv&&e.hasOwnProperty("containLv")&&!Mn.isInteger(e.containLv))return"containLv: integer expected";if(null!=e.hurtLv&&e.hasOwnProperty("hurtLv")&&!Mn.isInteger(e.hurtLv))return"hurtLv: integer expected";if(null!=e.buyBeeTimes&&e.hasOwnProperty("buyBeeTimes")&&!Mn.isInteger(e.buyBeeTimes))return"buyBeeTimes: integer expected";if(null!=e.playerSkillDatas&&e.hasOwnProperty("playerSkillDatas")){if(!Array.isArray(e.playerSkillDatas))return"playerSkillDatas: array expected";for(t=0;t<e.playerSkillDatas.length;++t){var i;if(i=Rn.roitescape.PlayerSkillData.verify(e.playerSkillDatas[t]))return"playerSkillDatas."+i}}return null!=e.speedUpOpen&&e.hasOwnProperty("speedUpOpen")&&!Mn.isInteger(e.speedUpOpen)?"speedUpOpen: integer expected":null!=e.strongeUpOpen&&e.hasOwnProperty("strongeUpOpen")&&!Mn.isInteger(e.strongeUpOpen)?"strongeUpOpen: integer expected":null!=e.backHomeOpen&&e.hasOwnProperty("backHomeOpen")&&!Mn.isInteger(e.backHomeOpen)?"backHomeOpen: integer expected":null},PlayerInfo.fromObject=function(e){if(e instanceof Rn.roitescape.PlayerInfo)return e;var t=new Rn.roitescape.PlayerInfo;if(null!=e.openID&&(t.openID=String(e.openID)),null!=e.sessID&&(t.sessID=String(e.sessID)),null!=e.userID&&(t.userID=String(e.userID)),null!=e.lastSaveTime&&(t.lastSaveTime=e.lastSaveTime>>>0),null!=e.nickname&&(t.nickname=String(e.nickname)),null!=e.sex&&(t.sex=e.sex>>>0),null!=e.headUrl&&(t.headUrl=String(e.headUrl)),null!=e.shareTimesOfToday&&(t.shareTimesOfToday=e.shareTimesOfToday>>>0),null!=e.recordDayOfShareTimes&&(t.recordDayOfShareTimes=e.recordDayOfShareTimes>>>0),null!=e.advTimesOfToday&&(t.advTimesOfToday=e.advTimesOfToday>>>0),null!=e.recordDayOfAdvTimes&&(t.recordDayOfAdvTimes=e.recordDayOfAdvTimes>>>0),null!=e.setting){if("object"!=typeof e.setting)throw TypeError(".roitescape.PlayerInfo.setting: object expected");t.setting=Rn.roitescape.SettingConfig.fromObject(e.setting)}if(null!=e.totalShareTimes&&(t.totalShareTimes=e.totalShareTimes>>>0),null!=e.totalAdvTimes&&(t.totalAdvTimes=e.totalAdvTimes>>>0),null!=e.redGift){if("object"!=typeof e.redGift)throw TypeError(".roitescape.PlayerInfo.redGift: object expected");t.redGift=Rn.roitescape.RedGiftConfig.fromObject(e.redGift)}if(null!=e.coin&&(t.coin=String(e.coin)),null!=e.totalCoin&&(t.totalCoin=String(e.totalCoin)),null!=e.levelID&&(t.levelID=e.levelID>>>0),null!=e.totalLevelCount&&(t.totalLevelCount=e.totalLevelCount>>>0),null!=e.continueLevel&&(t.continueLevel=e.continueLevel>>>0),null!=e.skinId&&(t.skinId=e.skinId>>>0),e.ownSkinDetail){if(!Array.isArray(e.ownSkinDetail))throw TypeError(".roitescape.PlayerInfo.ownSkinDetail: array expected");t.ownSkinDetail=[];for(var i=0;i<e.ownSkinDetail.length;++i){if("object"!=typeof e.ownSkinDetail[i])throw TypeError(".roitescape.PlayerInfo.ownSkinDetail: object expected");t.ownSkinDetail[i]=Rn.roitescape.SkinData.fromObject(e.ownSkinDetail[i])}}if(null!=e.diam&&(t.diam=String(e.diam)),null!=e.curSginDay&&(t.curSginDay=e.curSginDay>>>0),null!=e.curSginWeekCount&&(t.curSginWeekCount=e.curSginWeekCount>>>0),null!=e.lastSginYear&&(t.lastSginYear=String(e.lastSginYear)),null!=e.lastGetPowerTime&&(t.lastGetPowerTime=e.lastGetPowerTime>>>0),null!=e.power&&(t.power=e.power>>>0),null!=e.lastViewAdGetPowerTime&&(t.lastViewAdGetPowerTime=e.lastViewAdGetPowerTime>>>0),null!=e.todayViewAdGetPowerTimes&&(t.todayViewAdGetPowerTimes=e.todayViewAdGetPowerTimes>>>0),null!=e.todayTurntableTimes&&(t.todayTurntableTimes=e.todayTurntableTimes>>>0),null!=e.isShowSubscribeApp&&(t.isShowSubscribeApp=e.isShowSubscribeApp>>>0),null!=e.curDailyTaskId&&(t.curDailyTaskId=e.curDailyTaskId>>>0),null!=e.dailTaskSgin&&(t.dailTaskSgin=e.dailTaskSgin>>>0),null!=e.dailTaskTLevel&&(t.dailTaskTLevel=e.dailTaskTLevel>>>0),null!=e.curMoney&&(t.curMoney=String(e.curMoney)),null!=e.loginDays&&(t.loginDays=e.loginDays>>>0),null!=e.lastGetRedTimers&&(t.lastGetRedTimers=e.lastGetRedTimers>>>0),null!=e.curGetRedTimers&&(t.curGetRedTimers=e.curGetRedTimers>>>0),null!=e.dailyTaskBeginTime&&(t.dailyTaskBeginTime=e.dailyTaskBeginTime>>>0),null!=e.todayDiamGetPowerTimes&&(t.todayDiamGetPowerTimes=e.todayDiamGetPowerTimes>>>0),null!=e.todayShowInsertAdCount&&(t.todayShowInsertAdCount=e.todayShowInsertAdCount>>>0),null!=e.isShowTeach&&(t.isShowTeach=e.isShowTeach>>>0),null!=e.extraPowerCount&&(t.extraPowerCount=e.extraPowerCount>>>0),null!=e.getAdGoldTimes&&(t.getAdGoldTimes=e.getAdGoldTimes>>>0),null!=e.teachId&&(t.teachId=e.teachId>>>0),e.taskDatas){if(!Array.isArray(e.taskDatas))throw TypeError(".roitescape.PlayerInfo.taskDatas: array expected");t.taskDatas=[];for(i=0;i<e.taskDatas.length;++i){if("object"!=typeof e.taskDatas[i])throw TypeError(".roitescape.PlayerInfo.taskDatas: object expected");t.taskDatas[i]=Rn.roitescape.TaskData.fromObject(e.taskDatas[i])}}if(null!=e.curTaskId&&(t.curTaskId=e.curTaskId>>>0),e.taskLine){if(!Array.isArray(e.taskLine))throw TypeError(".roitescape.PlayerInfo.taskLine: array expected");t.taskLine=[];for(i=0;i<e.taskLine.length;++i)t.taskLine[i]=e.taskLine[i]>>>0}if(e.levelDatas){if(!Array.isArray(e.levelDatas))throw TypeError(".roitescape.PlayerInfo.levelDatas: array expected");t.levelDatas=[];for(i=0;i<e.levelDatas.length;++i){if("object"!=typeof e.levelDatas[i])throw TypeError(".roitescape.PlayerInfo.levelDatas: object expected");t.levelDatas[i]=Rn.roitescape.LevelData.fromObject(e.levelDatas[i])}}if(null!=e.lastPlayerPos&&(t.lastPlayerPos=String(e.lastPlayerPos)),null!=e.lastLevelId&&(t.lastLevelId=e.lastLevelId>>>0),e.beeDatas){if(!Array.isArray(e.beeDatas))throw TypeError(".roitescape.PlayerInfo.beeDatas: array expected");t.beeDatas=[];for(i=0;i<e.beeDatas.length;++i){if("object"!=typeof e.beeDatas[i])throw TypeError(".roitescape.PlayerInfo.beeDatas: object expected");t.beeDatas[i]=Rn.roitescape.BeeData.fromObject(e.beeDatas[i])}}if(null!=e.beeSpeedLv&&(t.beeSpeedLv=e.beeSpeedLv>>>0),null!=e.containLv&&(t.containLv=e.containLv>>>0),null!=e.hurtLv&&(t.hurtLv=e.hurtLv>>>0),null!=e.buyBeeTimes&&(t.buyBeeTimes=e.buyBeeTimes>>>0),e.playerSkillDatas){if(!Array.isArray(e.playerSkillDatas))throw TypeError(".roitescape.PlayerInfo.playerSkillDatas: array expected");t.playerSkillDatas=[];for(i=0;i<e.playerSkillDatas.length;++i){if("object"!=typeof e.playerSkillDatas[i])throw TypeError(".roitescape.PlayerInfo.playerSkillDatas: object expected");t.playerSkillDatas[i]=Rn.roitescape.PlayerSkillData.fromObject(e.playerSkillDatas[i])}}return null!=e.speedUpOpen&&(t.speedUpOpen=e.speedUpOpen>>>0),null!=e.strongeUpOpen&&(t.strongeUpOpen=e.strongeUpOpen>>>0),null!=e.backHomeOpen&&(t.backHomeOpen=e.backHomeOpen>>>0),t},PlayerInfo.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.ownSkinDetail=[],i.taskDatas=[],i.taskLine=[],i.levelDatas=[],i.beeDatas=[],i.playerSkillDatas=[]),t.defaults&&(i.openID="",i.sessID="",i.userID="",i.lastSaveTime=0,i.nickname="",i.sex=0,i.headUrl="",i.shareTimesOfToday=0,i.recordDayOfShareTimes=0,i.advTimesOfToday=0,i.recordDayOfAdvTimes=0,i.setting=null,i.totalShareTimes=0,i.totalAdvTimes=0,i.redGift=null,i.coin="",i.totalCoin="",i.levelID=0,i.totalLevelCount=0,i.continueLevel=0,i.skinId=0,i.diam="",i.curSginDay=0,i.curSginWeekCount=0,i.lastSginYear="",i.lastGetPowerTime=0,i.power=0,i.lastViewAdGetPowerTime=0,i.todayViewAdGetPowerTimes=0,i.todayTurntableTimes=0,i.isShowSubscribeApp=0,i.curDailyTaskId=0,i.dailTaskSgin=0,i.dailTaskTLevel=0,i.curMoney="",i.loginDays=0,i.lastGetRedTimers=0,i.curGetRedTimers=0,i.dailyTaskBeginTime=0,i.todayDiamGetPowerTimes=0,i.todayShowInsertAdCount=0,i.isShowTeach=0,i.extraPowerCount=0,i.getAdGoldTimes=0,i.teachId=0,i.curTaskId=0,i.lastPlayerPos="",i.lastLevelId=0,i.beeSpeedLv=0,i.containLv=0,i.hurtLv=0,i.buyBeeTimes=0,i.speedUpOpen=0,i.strongeUpOpen=0,i.backHomeOpen=0),null!=e.openID&&e.hasOwnProperty("openID")&&(i.openID=e.openID),null!=e.sessID&&e.hasOwnProperty("sessID")&&(i.sessID=e.sessID),null!=e.userID&&e.hasOwnProperty("userID")&&(i.userID=e.userID),null!=e.lastSaveTime&&e.hasOwnProperty("lastSaveTime")&&(i.lastSaveTime=e.lastSaveTime),null!=e.nickname&&e.hasOwnProperty("nickname")&&(i.nickname=e.nickname),null!=e.sex&&e.hasOwnProperty("sex")&&(i.sex=e.sex),null!=e.headUrl&&e.hasOwnProperty("headUrl")&&(i.headUrl=e.headUrl),null!=e.shareTimesOfToday&&e.hasOwnProperty("shareTimesOfToday")&&(i.shareTimesOfToday=e.shareTimesOfToday),null!=e.recordDayOfShareTimes&&e.hasOwnProperty("recordDayOfShareTimes")&&(i.recordDayOfShareTimes=e.recordDayOfShareTimes),null!=e.advTimesOfToday&&e.hasOwnProperty("advTimesOfToday")&&(i.advTimesOfToday=e.advTimesOfToday),null!=e.recordDayOfAdvTimes&&e.hasOwnProperty("recordDayOfAdvTimes")&&(i.recordDayOfAdvTimes=e.recordDayOfAdvTimes),null!=e.setting&&e.hasOwnProperty("setting")&&(i.setting=Rn.roitescape.SettingConfig.toObject(e.setting,t)),null!=e.totalShareTimes&&e.hasOwnProperty("totalShareTimes")&&(i.totalShareTimes=e.totalShareTimes),null!=e.totalAdvTimes&&e.hasOwnProperty("totalAdvTimes")&&(i.totalAdvTimes=e.totalAdvTimes),null!=e.redGift&&e.hasOwnProperty("redGift")&&(i.redGift=Rn.roitescape.RedGiftConfig.toObject(e.redGift,t)),null!=e.coin&&e.hasOwnProperty("coin")&&(i.coin=e.coin),null!=e.totalCoin&&e.hasOwnProperty("totalCoin")&&(i.totalCoin=e.totalCoin),null!=e.levelID&&e.hasOwnProperty("levelID")&&(i.levelID=e.levelID),null!=e.totalLevelCount&&e.hasOwnProperty("totalLevelCount")&&(i.totalLevelCount=e.totalLevelCount),null!=e.continueLevel&&e.hasOwnProperty("continueLevel")&&(i.continueLevel=e.continueLevel),null!=e.skinId&&e.hasOwnProperty("skinId")&&(i.skinId=e.skinId),e.ownSkinDetail&&e.ownSkinDetail.length){i.ownSkinDetail=[];for(var n=0;n<e.ownSkinDetail.length;++n)i.ownSkinDetail[n]=Rn.roitescape.SkinData.toObject(e.ownSkinDetail[n],t)}if(null!=e.diam&&e.hasOwnProperty("diam")&&(i.diam=e.diam),null!=e.curSginDay&&e.hasOwnProperty("curSginDay")&&(i.curSginDay=e.curSginDay),null!=e.curSginWeekCount&&e.hasOwnProperty("curSginWeekCount")&&(i.curSginWeekCount=e.curSginWeekCount),null!=e.lastSginYear&&e.hasOwnProperty("lastSginYear")&&(i.lastSginYear=e.lastSginYear),null!=e.lastGetPowerTime&&e.hasOwnProperty("lastGetPowerTime")&&(i.lastGetPowerTime=e.lastGetPowerTime),null!=e.power&&e.hasOwnProperty("power")&&(i.power=e.power),null!=e.lastViewAdGetPowerTime&&e.hasOwnProperty("lastViewAdGetPowerTime")&&(i.lastViewAdGetPowerTime=e.lastViewAdGetPowerTime),null!=e.todayViewAdGetPowerTimes&&e.hasOwnProperty("todayViewAdGetPowerTimes")&&(i.todayViewAdGetPowerTimes=e.todayViewAdGetPowerTimes),null!=e.todayTurntableTimes&&e.hasOwnProperty("todayTurntableTimes")&&(i.todayTurntableTimes=e.todayTurntableTimes),null!=e.isShowSubscribeApp&&e.hasOwnProperty("isShowSubscribeApp")&&(i.isShowSubscribeApp=e.isShowSubscribeApp),null!=e.curDailyTaskId&&e.hasOwnProperty("curDailyTaskId")&&(i.curDailyTaskId=e.curDailyTaskId),null!=e.dailTaskSgin&&e.hasOwnProperty("dailTaskSgin")&&(i.dailTaskSgin=e.dailTaskSgin),null!=e.dailTaskTLevel&&e.hasOwnProperty("dailTaskTLevel")&&(i.dailTaskTLevel=e.dailTaskTLevel),null!=e.curMoney&&e.hasOwnProperty("curMoney")&&(i.curMoney=e.curMoney),null!=e.loginDays&&e.hasOwnProperty("loginDays")&&(i.loginDays=e.loginDays),null!=e.lastGetRedTimers&&e.hasOwnProperty("lastGetRedTimers")&&(i.lastGetRedTimers=e.lastGetRedTimers),null!=e.curGetRedTimers&&e.hasOwnProperty("curGetRedTimers")&&(i.curGetRedTimers=e.curGetRedTimers),null!=e.dailyTaskBeginTime&&e.hasOwnProperty("dailyTaskBeginTime")&&(i.dailyTaskBeginTime=e.dailyTaskBeginTime),null!=e.todayDiamGetPowerTimes&&e.hasOwnProperty("todayDiamGetPowerTimes")&&(i.todayDiamGetPowerTimes=e.todayDiamGetPowerTimes),null!=e.todayShowInsertAdCount&&e.hasOwnProperty("todayShowInsertAdCount")&&(i.todayShowInsertAdCount=e.todayShowInsertAdCount),null!=e.isShowTeach&&e.hasOwnProperty("isShowTeach")&&(i.isShowTeach=e.isShowTeach),null!=e.extraPowerCount&&e.hasOwnProperty("extraPowerCount")&&(i.extraPowerCount=e.extraPowerCount),null!=e.getAdGoldTimes&&e.hasOwnProperty("getAdGoldTimes")&&(i.getAdGoldTimes=e.getAdGoldTimes),null!=e.teachId&&e.hasOwnProperty("teachId")&&(i.teachId=e.teachId),e.taskDatas&&e.taskDatas.length){i.taskDatas=[];for(n=0;n<e.taskDatas.length;++n)i.taskDatas[n]=Rn.roitescape.TaskData.toObject(e.taskDatas[n],t)}if(null!=e.curTaskId&&e.hasOwnProperty("curTaskId")&&(i.curTaskId=e.curTaskId),e.taskLine&&e.taskLine.length){i.taskLine=[];for(n=0;n<e.taskLine.length;++n)i.taskLine[n]=e.taskLine[n]}if(e.levelDatas&&e.levelDatas.length){i.levelDatas=[];for(n=0;n<e.levelDatas.length;++n)i.levelDatas[n]=Rn.roitescape.LevelData.toObject(e.levelDatas[n],t)}if(null!=e.lastPlayerPos&&e.hasOwnProperty("lastPlayerPos")&&(i.lastPlayerPos=e.lastPlayerPos),null!=e.lastLevelId&&e.hasOwnProperty("lastLevelId")&&(i.lastLevelId=e.lastLevelId),e.beeDatas&&e.beeDatas.length){i.beeDatas=[];for(n=0;n<e.beeDatas.length;++n)i.beeDatas[n]=Rn.roitescape.BeeData.toObject(e.beeDatas[n],t)}if(null!=e.beeSpeedLv&&e.hasOwnProperty("beeSpeedLv")&&(i.beeSpeedLv=e.beeSpeedLv),null!=e.containLv&&e.hasOwnProperty("containLv")&&(i.containLv=e.containLv),null!=e.hurtLv&&e.hasOwnProperty("hurtLv")&&(i.hurtLv=e.hurtLv),null!=e.buyBeeTimes&&e.hasOwnProperty("buyBeeTimes")&&(i.buyBeeTimes=e.buyBeeTimes),e.playerSkillDatas&&e.playerSkillDatas.length){i.playerSkillDatas=[];for(n=0;n<e.playerSkillDatas.length;++n)i.playerSkillDatas[n]=Rn.roitescape.PlayerSkillData.toObject(e.playerSkillDatas[n],t)}return null!=e.speedUpOpen&&e.hasOwnProperty("speedUpOpen")&&(i.speedUpOpen=e.speedUpOpen),null!=e.strongeUpOpen&&e.hasOwnProperty("strongeUpOpen")&&(i.strongeUpOpen=e.strongeUpOpen),null!=e.backHomeOpen&&e.hasOwnProperty("backHomeOpen")&&(i.backHomeOpen=e.backHomeOpen),i},PlayerInfo.prototype.toJSON=function(){return this.constructor.toObject(this,Ln.util.toJSONOptions)},PlayerInfo}(),i}();var xn=Rn.roitescape,Un={init:function(){console.log("start to load framework_extend.js")}};class Hn extends Laya.Script{constructor(){super(),this._serverCheckFinishedCb=null,this._showLoadingFunc=null,this._hideLoadingFunc=null,this._isBannerOnShow=!1,this._bannerAdvObj=null,this._isFirstStartGame=!1,this._startApp()}_startApp(){fi.init(),pi.init(),"undefined"!=typeof lodash&&G_Utils.registerLodash(lodash),G_UIManager.registerAllUIs(),G_GameDB.load(xn),G_GameDB.registerAll(G_GameDBConfigs),G_GameDB.onLoad(function(){Un.init(),G_PlatHelper.isNativePlatform()&&G_NativeWXMgr.init(),G_Reportor.registerAllEvents(G_ReportEventName),G_ServerInfo.load(function(){G_HttpHelper.registerGetServerTimeFunc(function(){return G_ServerInfo.getServerTime()}),this._doServerCheckFinishedCb()}.bind(this))}.bind(this)),this._onAppEventRegistered(),this._onBannerEventRegistered(),this._onInsertEventRegistered()}_onAppEventRegistered(){G_Event.addEventListerner(G_EventName.EN_APP_AFTER_ONSHOW,function(){G_PlatHelper.isOVPlatform()||G_PlatHelper.isHWPlatform()?(G_OVAdv.isWatchingVideoAdv()||G_SoundMgr.resumeMusic(),G_PlatHelper.isHWPlatform()&&G_Event.dispatchEvent(G_EventName.EN_REFRESH_ONSHOW_FLOW_AD)):G_Adv.isWatchingVideoAdv()||G_SoundMgr.resumeMusic()}),G_Event.addEventListerner(G_EventName.EN_APP_BEFORE_ONHIDE,function(){G_SoundMgr.pauseMusic()}),G_Event.addEventListerner(G_EventName.EN_SYSTEM_ERROR,function(){G_PlatHelper.showModal(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SYSTEM_ERROR_TITLE).word,G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SYSTEM_ERROR_CONTENT).word,!0,function(e){e?(console.error("restart"),G_PlatHelper.restartApp()):(console.error("exit"),G_PlatHelper.exitApp())},{confirmText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SYSTEM_ERROR_RELOAD_GAME).word,cancelText:G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SYSTEM_ERROR_EXIT_GAME).word})}),G_Event.addEventListerner(G_EventName.EN_SDK_NOT_SUPPORT,function(){let e=G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_SDK_NOT_SUPPORT_FORMAT).word,t="";t=G_PlatHelper.isQQPlatform()?e.format(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_QQ_PLATFORM_NAME).word):e.format(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_WX_PLATFORM_NAME).word),G_PlatHelper.showToast(t)}),G_Event.addEventListerner(G_EventName.EN_VIDEO_NOT_SUPPORT_RIGHT_NOW,function(){G_PlatHelper.showToast(G_GameDB.getUIWordByID(UIWordIDs.UIWORD_ID_VIDEO_NOT_SUPPORT).word)}),G_Event.addEventListerner(G_EventName.EN_FIRST_OPEN_MAIN_SCENE,function(){G_PlatHelper.isNativePlatform()?G_NativeAdvMgr.preload():(G_PlatHelper.isWXPlatform()||G_PlatHelper.isQQPlatform()||G_PlatHelper.isTTPlatform())&&G_Adv.preload(),(G_PlatHelper.isOVPlatform()||G_PlatHelper.isHWPlatform())&&(G_PlatHelper.isOPPOPlatform()&&G_PlatHelper.getPlat()&&G_PlatHelper.getPlat().reportMonitor&&G_PlatHelper.getPlat().reportMonitor("game_scene",0),(G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isHWPlatform())&&G_PlatHelper.installShortcut(function(){console.log("install shortcut succ...")}),G_OVAdv.preload((e,t)=>{e&&G_Event.dispatchEvent(G_EventName.EN_REFRESH_VIDEO_AD),t&&G_Event.dispatchEvent(G_EventName.EN_REFRESH_FLOW_AD)})),G_PlatHelper.isQTTPlatform()&&G_PlatHelper.getPlat().reportData&&(G_PlatHelper.getPlat().reportData({type:"load",open_id:G_PlayerInfo.getOpenID(),app_id:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str,game_name:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_NAME).str,extend_info:{}}),console.log("report qtt load event succ...")),G_PlatHelper.isTTPlatform()&&G_VideoRankMgr.refreshAndReport(),G_PlatHelper.isWXPlatform()&&G_MistakeMgr.isFakeLoadingMistakeEnabled&&G_MistakeMgr.isFakeLoadingMistakeEnabled(e=>{e&&G_Switch.getFakeLoadingConfig(e=>{e.time>0&&G_UIManager.showUI("fakeLoadingAd",()=>{console.log("on show fakeLoadingAd closed..."),G_MistakeMgr.isFakeLoading2MistakeEnabledAsync&&G_MistakeMgr.isFakeLoading2MistakeEnabledAsync()&&re.getIns().showAdFullView(()=>{})})})})}),G_Event.addEventListerner(G_EventName.EN_FIRST_START_GAME,()=>{this._isFirstStartGame||(this._isFirstStartGame=!0,G_PlatHelper.isQTTPlatform()&&G_PlatHelper.getPlat().reportData&&(G_PlatHelper.getPlat().reportData({type:"start",open_id:G_PlayerInfo.getOpenID(),app_id:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_ID).str,game_name:G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_QTT_MINI_PROGRAM_APP_NAME).str,extend_info:{}}),console.log("report qtt start event succ...")))})}_onBannerEventRegistered(){let e=e=>{console.log("do show banner..."),G_Adv.isSupportBannerAd()?G_Switch.isPublishing(t=>{this._isBannerOnShow=!0;let i=G_PlatHelper.getSysInfo(),n=0;if(G_PlatHelper.isTTPlatform())n=128;else if((G_PlatHelper.isQQPlatform()||G_PlatHelper.isWXPlatform())&&(e.max?n=i.screenWidth:e.min?n=300:"number"==typeof e.width&&e.width>0?(e.width<300&&(e.width=300),e.width>i.screenWidth&&(e.width=i.screenWidth),n=e.width):n=i.screenWidth,"number"==typeof e.topFromHeight&&e.topFromHeight>0)){let t=G_Adv.getBannerOriginalSize(),s=n/t.width*t.height;if(G_PlatHelper.isIPhoneX()&&(s+=G_Adv.getMiniGapFromBottom()),s/i.screenHeight*Laya.stage.height>e.topFromHeight){let s=e.topFromHeight/Laya.stage.height*i.screenHeight;G_PlatHelper.isIPhoneX()&&(s-=G_Adv.getMiniGapFromBottom());let o=s/t.height*t.width;o<300&&(o=300),n=o}}this._bannerAdvObj=t?G_Adv.createBannerAdv({centerX:0,bottom:0,width:300},()=>{console.log("show own banner..."),this._isBannerOnShow&&this._onShowOwnBanner()},()=>{this._isBannerOnShow&&G_Adv.showBannerAdv()}):G_Adv.createBannerAdv({centerX:0,bottom:0,width:n},()=>{console.log("show own banner..."),this._isBannerOnShow&&this._onShowOwnBanner()},()=>{this._isBannerOnShow&&G_Adv.showBannerAdv()})}):(console.log("direct show own banner..."),this._onShowOwnBanner())},t=function(){console.log("do hide banner..."),this._isBannerOnShow=!1,this._bannerAdvObj=null,G_Adv.hideBannerAdv(),this._onHideOwnBanner()}.bind(this);G_Event.addEventListerner(G_EventName.EN_SHOW_BANNER_AD,function(t=null){if(G_PlatHelper.isQQPlatform()&&G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),G_PlatHelper.isHWPlatform())this._isBannerOnShow=!0,console.log("show ui: hwBannerAd"),G_UIManager.showUI("hwBannerAd");else if(G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()){this._isBannerOnShow=!0;let e="showRandomBannerAd",t=G_OVAdv[e];t?t.call(G_OVAdv,e=>{e&&this._isBannerOnShow&&e.show()}):console.warn("there is no target func in G_OVAdv: "+e)}else if(G_PlatHelper.isQTTPlatform())this._isBannerOnShow=!0,G_PlatHelper.getPlat().showBanner();else if(G_PlatHelper.isNativePlatform())this._isBannerOnShow=!0,G_NativeAdvMgr.showBanner();else if(G_PlatHelper.getPlat()){if("boolean"==typeof t){t={max:t,min:!1}}else t?(void 0===t.max&&(t.max=!1),void 0===t.min&&(t.min=!1)):t={max:!1,min:!1};e(t)}}.bind(this)),G_Event.addEventListerner(G_EventName.EN_HIDE_BANNER_AD,function(){G_PlatHelper.isHWPlatform()?(this._isBannerOnShow=!1,console.log("hide ui: hwBannerAd"),G_UIManager.hideUI("hwBannerAd")):G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()?(this._isBannerOnShow=!1,G_OVAdv.hideOnShowBannerAd()):G_PlatHelper.isQTTPlatform()?(this._isBannerOnShow=!1,G_PlatHelper.getPlat().hideBanner()):G_PlatHelper.isNativePlatform()?(this._isBannerOnShow=!1,G_NativeAdvMgr.hideBanner()):G_PlatHelper.getPlat()&&t()}.bind(this)),G_Event.addEventListerner(G_EventName.EN_MOVE_BANNER_AD,function(e){if(this._isBannerOnShow&&this._bannerAdvObj){let t=new Laya.Size(0,0);void 0!==e.left&&(t._width=e.left),void 0!==e.right&&(t._width=-e.right),void 0!==e.top&&(t._height=e.top),void 0!==e.bottom&&(t._height=-e.bottom);let i=G_UIHelper.convertToOpenGLSize(t);0!==i.width&&(this._bannerAdvObj.style.left-=i.width),0!==i.height&&(this._bannerAdvObj.style.top-=i.height)}}.bind(this))}_onInsertEventRegistered(){G_Event.addEventListerner(G_EventName.EN_SHOW_INSERT_AD,function(e,t="Random"){if(G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()||G_PlatHelper.isHWPlatform())if(G_IsUseOwnInsertAd&&G_OVAdv.isSupportNative())G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),G_Event.dispatchEvent(G_EventName.EN_SHOW_OWN_INSERT_AD,()=>{G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD)});else{G_IsUseOwnInsertAd&&!G_OVAdv.isSupportNative()&&G_OVAdv.preload();let i="show"+t+"InsertAd",n=G_OVAdv["show"+t+"InsertAd"];n?(G_PlatHelper.isOVPlatform()&&G_Event.dispatchEvent(G_EventName.EN_HIDE_BANNER_AD),n.call(G_OVAdv,()=>{G_PlatHelper.isOVPlatform()&&G_Event.dispatchEvent(G_EventName.EN_SHOW_BANNER_AD),"function"==typeof e&&e()})):console.warn("there is no target func in G_OVAdv: "+i)}else G_PlatHelper.isQTTPlatform()?G_PlatHelper.getPlat().showHDReward({rewardtype:1}):G_PlatHelper.isNativePlatform()?G_NativeAdvMgr.showInteraction(()=>{console.log("just shutdown the interaction ad...")},()=>{console.log("show interaction ad fail, try later...")}):G_Adv.isSupportInterstitialAd()&&G_Adv.createInterstitialAdv(()=>{console.log("just shutdown the interstitial ad...")},()=>{G_Adv.showInterstitialAdv()},()=>{console.log("create interstitial ad fail...")})}.bind(this))}_onShowOwnBanner(){this._isBannerOnShow=!0,G_Switch.isExportAdvEnabled("Banner",e=>{e&&G_Event.dispatchEvent(G_EventName.EN_SHOW_OWN_BANNER_AD)})}_onHideOwnBanner(){G_Switch.isExportAdvEnabled("Banner",e=>{e&&G_Event.dispatchEvent(G_EventName.EN_HIDE_OWN_BANNER_AD)})}onServerCheckFinished(e){"function"==typeof e&&(this._serverCheckFinishedCb=e)}_doServerCheckFinishedCb(){"function"==typeof this._serverCheckFinishedCb&&this._serverCheckFinishedCb()}registerShowLoadingFunc(e){"function"==typeof e&&(this._showLoadingFunc=e)}_doShowLoading(e){"function"==typeof this._showLoadingFunc&&this._showLoadingFunc(e)}registerHideLoadingFunc(e){"function"==typeof e&&(this._hideLoadingFunc=e)}_doHideLoading(){"function"==typeof this._hideLoadingFunc&&this._hideLoadingFunc()}}class Vn extends Laya.Scene{constructor(e){super(),this._app=null,this._isCfgChecked=!1,this._isLoaded=!1,this.loadScene(e),this._onInitUI(),this._onRegisterEvent()}_onInitUI(){"function"==typeof this.onInitUI&&this.onInitUI()}_onRegisterEvent(){"function"==typeof this.onRegisterEvent&&this.onRegisterEvent()}_startCheckServer(){if(this._app=this.addComponent(Hn),this._app){var e=this;this._app.registerShowLoadingFunc(function(t){e._autoShowLoading(t)}),this._app.registerHideLoadingFunc(function(){e._cancelAutoShowLoading(!0)}),this._app.onServerCheckFinished(function(){e.onServerChecked()})}}_onServerChecked(){"function"==typeof this.onServerChecked?this.onServerChecked():(this._startLogin(),this._startLoad())}_startLogin(){var e=this;console.log("auto login..."),G_PlatHelper.autoLogin(function(t){t?e._onLogined(t):(console.log("manual login..."),G_PlatHelper.login(null,function(t){e._onLogined(t)}))})}_startLoad(){if(""!==G_BaseUrlPath&&Laya.getMiniAdpter&&Laya.getMiniAdpter()){Laya.URL.basePath=G_BaseUrlPath;let e=G_AppNativefiles,t=Laya.getMiniAdpter();t&&(t.nativefiles=t.nativefiles.concat(e),t.AutoCacheDownFile=!0)}let e=()=>{G_PreloadAssets.length>0?(Laya.loader.create(G_PreloadAssets,Laya.Handler.create(this,this._onLoadComplete),Laya.Handler.create(this,this._onLoadProgress)),Laya.loader.on(Laya.Event.ERROR,null,function(){G_Event.dispatchEvent(G_EventName.EN_SYSTEM_ERROR)})):(this._onLoadProgress(1),this._onLoadComplete())};G_PlatHelper.getPlat()&&!G_PlatHelper.isNativePlatform()&&""!==G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_HTTP_ADDR_OF_ASSET_VERSION).str?G_AssetMgr.init(()=>{G_AssetMgr.download(G_PreDownloadAssets,e=>{this._onLoadProgress(e)},()=>{this._onLoadProgress(0),e()})}):e()}_onLoadProgress(e){"function"==typeof this.onLoadProgress&&this.onLoadProgress(e)}_onLoadComplete(){"function"==typeof this.onLoadComplete?this.onLoadComplete():this._openGameScene({isLoaded:!0})}_onLogined(e){"function"==typeof this.onLogined?this.onLogined(e):this._startCheckCfgs()}_startCheckCfgs(){(G_PlatHelper.isOVPlatform()||G_PlatHelper.isMZPlatform()||G_PlatHelper.isHWPlatform())&&(G_OVAdv.registerAll(G_OVAdvConfigs),G_PlatHelper.isVIVOPlatform()&&G_Switch.isPublishing(function(e){e&&G_OVAdv.stopSupport()})),G_PlatHelper.isWXPlatform()&&G_Recommend.init(),G_Reportor.init(G_PlayerInfo.getOpenID()),G_Share.init(),G_Adv.init(function(){G_MistakeMgr.init(function(){this._onCfgChecked()}.bind(this))}.bind(this))}_onCfgChecked(){"function"==typeof this.onCfgChecked?this.onCfgChecked():this._openGameScene({cfgChecked:!0})}_openGameScene(e){e&&e.cfgChecked&&(this._isCfgChecked=!0),e&&e.isLoaded&&(this._isLoaded=!0),console.log("login state: cfgChecked: ",this._isCfgChecked,", isLoaded: ",this._isLoaded),this._isCfgChecked&&this._isLoaded&&G_Scheduler.schedule("delay_open_game_scene",()=>{let e=this.getGameSceneName();console.log("open scene: {0}...".format(e)),Laya.Scene.open(e)},!1,100,0)}getGameSceneName(){return"game/GameScene.scene"}_autoShowLoading(e){this._cancelAutoShowLoading(!0),this._isWillShowLoading=!0,G_Scheduler.schedule("Loading_Auto_Show_Loading",function(){G_PlatHelper.showLoading(e),this._cancelAutoShowLoading(!1)}.bind(this),!1,1e3)}_cancelAutoShowLoading(e){this._isWillShowLoading&&(this._isWillShowLoading=!1,G_Scheduler.unschedule("Loading_Auto_Show_Loading")),e&&G_PlatHelper.hideLoading()}}class Fn extends Vn{constructor(){super("loading/LoadingScene.scene"),this.isConfrom=!0,this.senView_show_key="senView_show"}onInitUI(){}onRegisterEvent(){}onEnable(){this._startCheckServer(),C.getIns().checkNetworkType()}onServerChecked(){console.log("server checked successfully..."),this._startLogin(),this._startLoad()}onLogined(e){console.log("login successfully..."),console.log(e),this._startCheckCfgs()}onLoadComplete(){this._openGameScene({isLoaded:!0})}onCfgChecked(){G_PlatHelper.isHWPlatform()||G_PlatHelper.isWINPlatform(),this.toConfrom()}toConfrom(){this.isConfrom&&ae.getIns().init(()=>{le.getIns().init(()=>{le.getIns().preloadAsset(()=>{this._openGameScene({cfgChecked:!0}),S.getIns().Enter_click(1),S.getIns().Enter_click(2)})})})}getGameSceneName(){return"game/GameScene.scene"}onLoadProgress(e){this.loadingProgress&&(this.loadingProgress.value=e,this.loadingTips.text=Math.floor(100*e)+"%")}}class Wn extends bi{constructor(){super(),this._advLoadMgr=null}onEnable(){this._initUI(),this._initEvent(),this._refreshAd()}onDisable(){this._unInitEvent()}_initUI(){let e=this.owner.getComponent(Fi);e&&(this._advLoadMgr=e)}_initEvent(){G_Event.addEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_unInitEvent(){G_Event.removeEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_doShowAndRefreshAd(){this.showUI(),this._refreshAd()}onInit(){this._refreshAd()}_refreshAd(){(!G_PlatHelper.getPlat()||G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isWXPlatform()||G_PlatHelper.isTTPlatform())&&this._advLoadMgr?this._advLoadMgr.refreshAdv():this.hideUI()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}}class jn extends bi{constructor(){super(),this._advLoadMgr=null}onEnable(){this._initUI(),this._initEvent(),this._refreshAd()}onDisable(){this._unInitEvent()}_initUI(){let e=this.owner.getComponent(Fi);e&&(this._advLoadMgr=e)}_initEvent(){G_Event.addEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_unInitEvent(){G_Event.removeEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this._doShowAndRefreshAd,this)}_doShowAndRefreshAd(){this.showUI(),this._refreshAd()}onInit(){this._refreshAd()}_refreshAd(){(!G_PlatHelper.getPlat()||G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isWXPlatform()||G_PlatHelper.isTTPlatform())&&this._advLoadMgr?this._advLoadMgr.refreshAdv():this.hideUI()}onHide(){this._advLoadMgr&&this._advLoadMgr.hideAdv()}}class qn extends O{constructor(){super(),this.closeFun=null,this.isAutoDestroy=!1}pageInit(){super.pageInit()}pageOpen(e){super.pageOpen(e),this.closeFun=e?e.closeFun:null,G_UIManager.showUI("fullSceneAd",()=>{we.getUIMgr().closeUI(we.getUIName().AdFullView)})}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}}class Kn extends O{constructor(){super(),this.showAdType=0,this.isPartPage=!0,this.isAutoDestroy=!1,this.isDealAdView=!1,this.leftIsInOpen=!1,this.leftIsOpen=!1,this.hasShowBanner=!1,this.movePowerTween=new E,this.movePowerTween.setLoop(!1),this.m_native_banner=null,this.scorllAd=null}pageInit(){super.pageInit(),ce.getIns().showBannerTimer=Laya.timer.currTimer,this.scorllAd=this.viewProp.m_bottomList.getComponent(zi),this.viewProp.m_ad_more.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_ad_more,()=>{if(G_PlatHelper.isWINPlatform()||G_PlatHelper.isWXPlatform()){let e=new Object;e.viewType=2,we.getUIMgr().openUI(we.getUIName().PopupView,e,null)}else if(G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isQQPlatform()){ce.getIns().hintBanner();let e=this.hasShowBanner;this.hasShowBanner=!1,C.getIns().cretaeBoxAd(()=>{e&&ce.getIns.createBanner()})}else console.error("没有配置")})}),this.viewProp.m_power_add_btn_icon.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_power_add_btn_icon,()=>{we.getUIMgr().openUI(we.getUIName().GetPowerView)})}),this.viewProp.m_gold_add_btn_icon.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_gold_add_btn_icon,()=>{we.getUIMgr().openUI(we.getUIName().GetGoldView,null,null)})}),this.viewProp.m_diam_add_btn_icon.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_diam_add_btn_icon,()=>{we.getUIMgr().openUI(we.getUIName().GetDiamView,null,null)})}),this.viewProp.m_box.on(Laya.CLICK,null,()=>{}),this.m_native_banner=this.viewProp.m_native_banner.getComponent(tn),this.m_oppo_banner=this.viewProp.m_oppo_banner.getComponent(tn),this.movePowerTween.setTarget(this.viewProp.m_move_Power),this.viewProp.m_mask.visible=!1,this.showTop(!1),this.m_native_banner.hideUI(),this.m_oppo_banner.hideUI(),this.setBottomType({num:3}),this.showMoreBtn(!1)}tweenPower(e,t,i){this.movePowerTween.clearEndFun(),this.movePowerTween.clearVals(),this.viewProp.m_move_Power.visible=!0,this.viewProp.m_box.visible=!0;let n=this.viewProp.m_power_icon.localToGlobal(new Laya.Point(this.viewProp.m_power_icon.width/2,this.viewProp.m_power_icon.height/2)),s=[];s.push({time:1e3,prop:{x:n.x,y:n.y},ease:Laya.Ease.cubicOut}),s.push({time:1e3,prop:{x:e,y:t},ease:Laya.Ease.cubicOut}),this.movePowerTween.setTweenVals(s),this.movePowerTween.setEndCallBack(()=>{this.viewProp.m_move_Power.visible=!1,this.viewProp.m_box.visible=!1,ce.getIns().handlerFun(i)}),this.movePowerTween.play()}showjuggleAD(e){G_PlatHelper.isQQPlatform()&&(e?G_Adv.createBlockAd({layout:"left",top:150},4,"vertical",null,null):G_Adv.destoryBlockAd())}pageOpen(e){super.pageOpen(e),this.viewProp.m_box.visible=!1,this.viewProp.m_move_Power.visible=!1,this.setPower(!1),this.setGold(!1),this.setDiam(!1),this._showGetNextPowerTime()}showMoreBtn(e){this.viewProp.m_ad_more.visible=e}showTop(e){this.viewProp.m_top.visible=e}setGold(e=!1){this.viewProp.m_gold_count.text=G_Utils.bigNumber2StrNumber(we.getPlayerInfo().getCoin()),e&&ce.getIns().btnTween(this.viewProp.m_gold_icon)}setPower(e=!1){this.viewProp.m_power_count.text=we.getPlayerInfo().getPower(),e&&ce.getIns().btnTween(this.viewProp.m_power_icon)}setDiam(){this.viewProp.m_diam_count.text=G_Utils.bigNumber2StrNumber(we.getPlayerInfo().getDiamCount())}setBottomType(e){if(G_BannerCenterX=0,this.showAdType=e.num,this.viewProp.m_bottomAdIcon.visible=!1,this.scorllAd.hideUI(),G_PlatHelper.isHWPlatform()?this.m_native_banner.hideUI():G_PlatHelper.isOPPOPlatform()&&this.m_oppo_banner.hideUI(),this.hasShowBanner=!1,1==this.showAdType)ce.getIns().hintBanner(),this.scorllAd.showUI();else if(2==this.showAdType){if(!ce.getIns().canShowBanner())return;if(re.getIns().isOnShow("fullSceneAd"))return;if(G_PlatHelper.isTTPlatform()&&this.hasShowBanner)return;G_PlatHelper.isHWPlatform()?this.m_native_banner._doShowAndRefreshAd():G_PlatHelper.isOPPOPlatform()?this.m_oppo_banner.showUI():G_PlatHelper.isWXPlatform()?(e.centerX&&(G_BannerCenterX=e.centerX),ce.getIns().createBanner(null,null)):ce.getIns().createBanner(null,null),this.hasShowBanner=!0}else ce.getIns().hintBanner(),this.hasShowBanner=!1}addListerner(){super.addListerner(),this.refershGold=(()=>{this.setGold()}),G_Event.addEventListerner(GG_EventName.EN_COIN_CHANGED,this.refershGold),this.refershPower=(()=>{this.setPower(!0)}),G_Event.addEventListerner(G_EventName.EN_POWER_CHANGED,this.refershPower),this.refershStar=(()=>{this.setStar(!0)}),G_Event.addEventListerner(GG_EventName.EN_CHANGE_STAR,this.refershStar),this.refershDiam=(()=>{this.setDiam(!0)}),G_Event.addEventListerner(GG_EventName.EN_DIAM_CHANGE,this.refershDiam)}removeListerner(){super.removeListerner(),G_Event.removeEventListerner(G_EventName.EN_COIN_CHANGED,this.refershGold),G_Event.removeEventListerner(G_EventName.EN_POWER_CHANGED,this.refershPower),G_Event.removeEventListerner(G_EventName.EN_CHANGE_STAR,this.refershStar),G_Event.removeEventListerner(GG_EventName.EN_DIAM_CHANGE,this.refershDiam)}restorePowerFromDeltaTime(e){if(e>0){let t=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num+we.getPlayerInfo().getExtraPowerCount()-G_PlayerInfo.getPower();if(t>0){let i=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NEED_TIME_TO_RESTORE_POWER).num;if(e>=i){let n=Math.floor(e/i);n<=t?(G_PlayerInfo.addPower(n,!0),console.log("Restore {0} Power From {1} DeltaTime".format(n.toString(),e.toString()))):(G_PlayerInfo.addPower(t,!0),console.log("Restore {0} Power From {1} DeltaTime".format(t.toString(),e.toString())))}}}}_updateGetNextPowerTime(){if(this.viewProp.m_power_recover_tips){let e=G_PlayerInfo.getLastGetPowerTime(),t=G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_NEED_TIME_TO_RESTORE_POWER).num,i=t-(Math.floor(G_ServerInfo.getServerTime()/1e3)-e);if(0===i){G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num+we.getPlayerInfo().getExtraPowerCount()-G_PlayerInfo.getPower()>1&&(i=t)}this.viewProp.m_power_recover_tips.text=G_Utils.convertSecondToHourMinuteSecond(i,!0);let n=Math.floor(G_ServerInfo.getServerTime()/1e3)-e;n>=t&&this.restorePowerFromDeltaTime(n)}}_showGetNextPowerTime(){if(this.viewProp.m_power_recover_bg&&(this.viewProp.m_power_recover_bg.visible=!0),!G_Scheduler.isScheduled("Auto_Update_Get_Next_Power_Time")){this._updateGetNextPowerTime(),G_PlayerInfo.getPower()<G_GameDB.getBaseConfigByID(BaseConfigIDs.BC_MAX_POWER_NUM).num+we.getPlayerInfo().getExtraPowerCount()?G_Scheduler.schedule("Auto_Update_Get_Next_Power_Time",function(){this._updateGetNextPowerTime()}.bind(this),!1,1e3):this._hideGetNextPowerTime()}}_hideGetNextPowerTime(){this.viewProp.m_power_recover_bg&&(this.viewProp.m_power_recover_bg.visible=!1),G_Scheduler.unschedule("Auto_Update_Get_Next_Power_Time")}}class Xn extends Laya.Script{constructor(){super(),this.decs=null,this.title=null,this.icon=null,this.clickBtn=null,this.close=null,this._insertAdObj=null,this._insertAdInfo=null,this.c_icon=null,this.canRefersh=!0}init(){this.decs=G_UIHelper.seekNodeByName(this.owner,"decs"),this.icon=G_UIHelper.seekNodeByName(this.owner,"icon"),this.c_icon=G_UIHelper.seekNodeByName(this.owner,"c_icon"),this.clickBtn=G_UIHelper.seekNodeByName(this.owner,"clickBtn"),this.close=G_UIHelper.seekNodeByName(this.owner,"close"),this.title=G_UIHelper.seekNodeByName(this.owner,"title"),this.cArea=G_UIHelper.seekNodeByName(this.owner,"cArea"),this.clickBtn&&this.clickBtn.on(Laya.Event.CLICK,this,()=>{this.doClick()}),this.icon&&this.icon.on(Laya.Event.CLICK,this,()=>{this.doClick()}),this.close&&this.close.on(Laya.Event.CLICK,this,()=>{this.hideUI()}),this.cArea&&this.cArea.on(Laya.Event.CLICK,this,()=>{this.doClick()}),this.addListener()}doClick(){this._insertAdObj&&this._insertAdInfo&&G_OVAdv.reportNativeAdClick(this._insertAdObj,this._insertAdInfo.adId,this._insertAdInfo.localAdID),G_Event.dispatchEvent(G_EventName.EN_REFRESH_FLOW_AD),this.hideUI(),this.setCanRefersh()}addListener(){G_Event.addEventListerner(G_EventName.EN_REFRESH_FLOW_AD,this.setCanRefersh,this)}setCanRefersh(){this.owner.visible?this.refershNative():this.canRefersh=!0}refershNative(){if(!G_PlatHelper.isOPPOPlatform())return void this.hideUI();if(!ce.getIns().canShowBanner())return void this.hideUI();let e=G_OVAdv.getNextNativeAdInfo();if(e){let t=e[0],i=e[1];t&&i?(this._insertAdObj=t,this._insertAdInfo=i,this.decs&&(this.decs.text=i.desc),this.title&&(this.title.text=i.title),i.imgUrlList.length>0?(this.setIcon(this.icon,i.imgUrlList[0]),this.setIcon(this.c_icon,i.imgUrlList[0])):i.iconUrlList.length>0?(this.setIcon(this.icon,i.iconUrlList[0]),this.setIcon(this.c_icon,i.iconUrlList[0])):this.hideUI(),this.canRefersh=!1,G_OVAdv.reportNativeAdShow(t,i.adId)):this.hideUI()}else this.hideUI()}setIcon(e,t){e&&(e.skin=t)}hideUI(){this.owner.visible=!1,G_OVAdv.reportNativeAdHide()}showUI(){this.owner.visible=!0,this.canRefersh&&this.refershNative(),this._insertAdObj&&this._insertAdInfo&&G_OVAdv.reportNativeAdShow(this._insertAdObj,this._insertAdInfo.adId)}}class Yn extends Laya.Script{constructor(){super(),this.viewProp=new Object,this.data=null}init(){ce.getIns().setUINode(this.owner,"m_",this.viewProp)}setData(e){this.data=e}}class zn extends Yn{constructor(){super()}setData(e){switch(super.setData(e),this.viewProp.m_gold.visible=!1,this.viewProp.m_diam.visible=!1,this.viewProp.m_chip.visible=!1,e.type){case 3:this.viewProp.m_gold.visible=!0,this.viewProp.m_gold_count.text="x"+G_Utils.bigNumber2StrNumber(BigNumber(e.count));break;case 1:this.viewProp.m_diam.visible=!0,this.viewProp.m_diam_count.text="x"+G_Utils.bigNumber2StrNumber(BigNumber(e.count));break;case 2:this.viewProp.m_chip.visible=!0;let t=G_GameDB.getPlayerConfigByID(e.paraId),i=G_GameDB.getQualityByID(t.quality);this.viewProp.m_chip_skin.skin=G_ResPath.skinPath.format(t.icon),this.viewProp.m_chip.skin=G_ResPath.rareBoxPath.format(i.rareBg),this.viewProp.m_chip_count.text="x"+G_Utils.bigNumber2StrNumber(BigNumber(e.count))}}}class Qn extends Yn{constructor(){super(),this.viewProp=new Object,this.data=null}init(){super.init(),this.viewProp.m_getBtn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_getBtn,()=>{if(!de.getIns().canGetReward(this.data.id))return void console.error("数据出错!");de.getIns().getTaskReward(this.data.id);let e=we.getUIMgr().getPageByName(we.getUIName().DaliyTaskView);e&&e.refreshList()})}),this.viewProp.m_dont_reach.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_dont_reach,()=>{G_PlatHelper.showToast("任务尚未完成!")})}),this.viewProp.m_hasGet.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_hasGet,()=>{G_PlatHelper.showToast("任务奖励已领取!")})}),this.viewProp.m_reward_list.renderHandler=new Laya.Handler(this,this.rewardRender)}rewardRender(e,t){let i=e.getComponent(zn);i||(i=e.addComponent(zn)).init(),i.setData(this.viewProp.m_reward_list.getItem(t))}setData(e){super.setData(e);let t=we.getPlayerInfo().getTaskData(e.id);this.viewProp.m_getBtn.visible=1==t.state,this.viewProp.m_dont_reach.visible=0==t.state,this.viewProp.m_hasGet.visible=2==t.state,this.viewProp.m_taskname.text=e.taskName,this.viewProp.m_decs.text=de.getIns().getTaskDecs(e.taskDecs,e.para1,e.para2);let i=de.getIns().getIdInLineIndex(e.id),n=de.getIns().getIdInLineIndex(de.getIns().getTaskId());this.owner.gray=i>n;let s=de.getIns().getRewardData(e.taskReward);this.viewProp.m_reward_list.array=s}}class Jn extends O{constructor(){super(),this.isNeedTween=!0,this.adObj=new Object,this.adObj.num=2}pageInit(){super.pageInit(),this.m_oppo_native=this.viewProp.m_oppo_native.getComponent(Xn),this.m_oppo_native.init(),G_PlatHelper.isOPPOPlatform()?this.adObj.num=-1:G_PlatHelper.isVIVOPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(we.getUIName().DaliyTaskView)})}),this.m_oppo_native.refershNative(),this.initTask()}initTask(){let e=[],t=de.getIns().taskLine;for(let i=0;i<t.length;i++){let n=G_GameDB.getDailyTaskByID(t[i]);n?e.push(n):console.error("任务id错误:",t[i])}this.viewProp.m_list.array=e,this.viewProp.m_list.renderHandler=new Laya.Handler(this,this.taskRender),this.viewProp.m_list.repeatY=e.length}taskRender(e,t){let i=e.getComponent(Qn);i||(i=e.addComponent(Qn)).init(),i.setData(this.viewProp.m_list.getItem(t))}pageOpen(e){super.pageOpen(e),this.refreshList(),this.autoToTraget(),this.refershNative()}refershNative(){this.m_oppo_native.hideUI(),G_PlatHelper.isOPPOPlatform()&&this.m_oppo_native.showUI()}showAdCallBack(){super.showAdCallBack(),C.getIns().createTwoCustomAd()}refreshList(){this.viewProp.m_list.refresh()}autoToTraget(){let e=0,t=de.getIns().getTaskId(),i=de.getIns().taskLine;for(let n=0;n<i.length;n++)if(i[n]==t){e=n;break}this.viewProp.m_list.tweenTo(e,500)}}class Zn extends O{constructor(){super(),this.chineseName="离线奖励",this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0,this.count=0,this.isShowTop=!1}pageInit(){super.pageInit(),this.viewProp.m_four.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_four,()=>{this.toGetReward(!0)})}),this.viewProp.m_nor.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_nor,()=>{this.toGetReward(!1)})})}pageOpen(e){super.pageOpen(e),this.count=e.count,this.viewProp.m_count.text=G_Utils.bigNumber2StrNumber(this.count),ce.getIns().setAdBtnIcon(this.viewProp.m_four)}toGetReward(e){e?ce.getIns().shareOrAd(this.viewProp.m_four,()=>{we.getPlayerInfo().addItemByType(3,3*this.count,0),we.getUIMgr().closeUI(we.getUIName().DelineReward)}):(we.getPlayerInfo().addItemByType(3,this.count),we.getUIMgr().closeUI(we.getUIName().DelineReward))}}class $n extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_closeBtn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_closeBtn),this.closeWindow()}),this.viewProp.m_bg.on(Laya.Event.CLICK,this,()=>{this.clickBg()}),this.viewProp.m_get&&this.viewProp.m_get.on(Laya.Event.CLICK,this,()=>{this.canViewVideo()&&(this.startGetVideo(),ce.getIns().shareOrAd(this.viewProp.m_get,()=>{this.toGetReward(),this.getVideoEnd(!0)},()=>{this.getVideoEnd(!1)}))})}canViewVideo(){return!0}startGetVideo(){}getVideoEnd(e){}pageOpen(e){super.pageOpen(e),this.viewProp.m_get&&ce.getIns().setAdBtnIcon(this.viewProp.m_get),this.viewProp.m_ef&&(this.viewProp.m_ef.rotation=0)}onUpdate(){this.viewProp.m_ef&&(this.viewProp.m_ef.rotation+=1)}toGetReward(){we.getUIMgr().closeUI(this.pageName)}closeWindow(){we.getUIMgr().closeUI(this.pageName)}clickBg(){this.closeWindow()}}class es extends $n{constructor(){super()}pageInit(){super.pageInit(),this.viewProp.m_ok.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_ok),this.closeWindow()})}toGetReward(){super.toGetReward()}pageOpen(e){super.pageOpen(e),this.viewProp.m_tips.text=e.eggData.tips}}class ts extends O{constructor(){super(),this.chineseName="彩蛋",this.adObj=new Object,this.adObj.num=2,this.isShowTop=!0,this.m_low_Tween=new E;let e=[];e.push({time:350,prop:{centerX:-600,ease:Laya.Ease.quintOut}}),e.push({time:350,prop:{centerX:-271,ease:Laya.Ease.quintOut}}),this.m_low_Tween.setTweenVals(e),this.m_height_Tween=new E;let t=[];t.push({time:350,prop:{centerX:600,ease:Laya.Ease.quintOut}}),t.push({time:350,prop:{centerX:271,ease:Laya.Ease.quintOut}}),this.m_height_Tween.setTweenVals(t),this.lowPool=[],this.heightPool=[],this.lowRateMax=0,this.heightPoolMax=0,this.oneUseDiam=50,this.isInDraw=!1,this.viewAdTenTimes=5}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.initPool(),this.viewProp.m_low_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_low_btn,()=>{this.oneDraw()})}),this.viewProp.m_height_ad_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_height_ad_btn,()=>{this.hasAdTenLuckTimes()?G_PlatHelper.showToast("今日次数已经用完!"):ce.getIns().shareOrAd(this.viewProp.m_height_ad_btn,()=>{this.tenDraw(),we.getPlayerInfo().addViewAdTenLuckTimes(),this.refershLimit()},()=>{this.isInDraw=!1})})}),this.viewProp.m_height_diam_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_height_diam_btn,()=>{let e=10*this.oneUseDiam*.9;ce.getIns().canUseItem(e,1)&&(ce.getIns().useItem(e,1),this.tenDraw())})}),this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(we.getUIName().EggsView)})}),this.m_low_Tween.setTarget(this.viewProp.m_low),this.m_height_Tween.setTarget(this.viewProp.m_height),this.viewProp.m_ten_diam.text=10*this.oneUseDiam*.9,this.viewProp.m_one_diam.text=G_Utils.bigNumber2StrNumber(BigNumber(this.oneUseDiam))}initPool(){let e=G_GameDB.getAllEggss(),t=null,i=0,n=0,s=0;this.lowRateMax=0,this.heightPoolMax=0;let o=null,r=null;for(let a=0;a<e.length;a++){t=e[a].pool.split("&"),s=e[a].poolRate.split("&"),o=e[a].count.split("-");for(let l=0;l<t.length;l++)i=parseInt(t[l]),n=parseInt(s[l]),1==i?(r=this.lowPool,this.lowRateMax+=n):2==i&&(r=this.heightPool,this.heightPoolMax+=n),r.push({data:e[a],realRate:n,countMin:parseInt(o[0]),countMax:parseInt(o[1])})}}pageOpen(e){super.pageOpen(e),this.refershLimit(),ce.getIns().setAdBtnIcon(this.viewProp.m_height_diam_btn),ce.getIns().setAdBtnIcon(this.viewProp.m_height_ad_btn)}oneDraw(){if(!ce.getIns().canUseItem(this.oneUseDiam,1))return;if(this.isInDraw)return;ce.getIns().useItem(this.oneUseDiam,1),this.isInDraw=!0;let e=new Object;e.rewardData=this.getDrawData(this.lowPool,1,this.lowRateMax),e.closeFun=(()=>{this.isInDraw=!1}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e)}refershLimit(){this.viewProp.m_height_limit.text="剩余视频次数:{0}/{1}".format(this.viewAdTenTimes-we.getPlayerInfo().getViewAdTenLuckTimes(),this.viewAdTenTimes)}tenDraw(){if(this.isInDraw)return;this.isInDraw=!0;let e=new Object;e.rewardData=this.getDrawData(this.heightPool,10,this.heightPoolMax),e.closeFun=(()=>{this.isInDraw=!1}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e)}hasAdTenLuckTimes(){return we.getPlayerInfo().getViewAdTenLuckTimes()>=this.viewAdTenTimes}getDrawData(e,t,i){let n=[],s=[];for(let e=0;e<t;e++)s.push(Math.random()*i);s.sort((e,t)=>e>t?1:e<t?-1:0);let o=0,r=0,a=null;for(let t=0;t<e.length&&r!=s.length;t++){o+=e[t].realRate;for(let i=r;i<s.length&&o>=s[i];i++)r=i+1,a=e[t].data,n.push({eggsId:a.id,type:a.itemType,paraId:a.itemId,count:ce.getIns().randomNum(e[t].countMin,e[t].countMax)})}return n.sort(function(e,t){return.5-Math.random()}),n}tweenOpen(e){this.m_height_Tween.setReverse(!1),this.m_height_Tween.end(),this.m_low_Tween.setReverse(!1),this.m_low_Tween.clearEndFun(),this.m_low_Tween.end(),this.m_low_Tween.setEndCallBack(()=>{ce.getIns().handlerFun(e)}),this.m_low_Tween.play(),this.m_height_Tween.play()}tweenClose(e){this.m_height_Tween.setReverse(!0),this.m_height_Tween.end(),this.m_low_Tween.setReverse(!0),this.m_low_Tween.clearEndFun(),this.m_low_Tween.end(),this.m_low_Tween.play(),this.m_height_Tween.play(),Laya.timer.once(100,this,()=>{ce.getIns().handlerFun(e)})}}class is extends Laya.Script{constructor(){super(),this.viewProp=new Object,this.itemData=null,this.selFun=null}init(){let e=[];ce.getIns().getChildBySgin(this.owner,"m_",e);for(let t=0;t<e.length;t++)this.viewProp[e[t].name]=e[t];this.owner.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.owner),ce.getIns().handlerFun(this.selFun,this)})}setData(e){this.itemData=e,this.viewProp.m_name.text=e.name,this.viewProp.m_icon.skin="game/extraWepon/{0}.png".format(e.icon),this.viewProp.m_ef.text=e.ef,this.viewProp.m_ef_val.text=e.efvalT,this.viewProp.m_adBtn.visible=e.isAD,this.owner.visible=!this.itemData.isUse}setSelFun(e){this.selFun=e}}class ns extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.closeFun=null,this.isNeedTween=!0,this.weapons=[{id:1,name:"三级头",ef:"减免伤害",efvalT:"减少30%",efval:.3,icon:"ep1",isAD:!1,isUse:!1},{id:2,name:"三级甲",ef:"玩家血量增加",efvalT:"150血量",efval:150,icon:"ep2",isAD:!1,isUse:!1},{id:3,name:"扩容弹夹",ef:"弹夹容量增加",efvalT:"20发",efval:150,icon:"ep3",isAD:!1,isUse:!1},{id:4,name:"医疗箱",ef:"使用回复血量",efvalT:"100血量",efval:100,icon:"ep4",isAD:!1,isUse:!1},{id:5,name:"火力加强",ef:"枪械伤害翻倍",efvalT:"伤害X2",efval:2,icon:"ep5",isAD:!1,isUse:!1}],this.curWeapon=[]}pageInit(){super.pageInit(),this.viewProp.m_weapon_list.renderHandler=new Laya.Handler(this,this.renderHandler),this.viewProp.m_getAll.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_getAll),this.getAll()}),this.viewProp.m_cancel.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_cancel),we.getUIMgr().closeUI(we.getUIName().ExtraWeapon)})}resetData(){for(let e=0;e<this.weapons.length;e++)this.weapons[e].isAD=!1,this.weapons[e].isUse=!1}initList(e){this.viewProp.m_weapon_list.array=e,this.viewProp.m_weapon_list.refresh()}renderHandler(e,t){this.setCell(e,t)}setCell(e,t){let i=e.getComponent(is);i||((i=e.addComponent(is)).init(),i.setSelFun(function(e){this.selItem(e)}.bind(this))),i.setData(this.viewProp.m_weapon_list.getItem(t))}moveBtn(){let e=this.viewProp.m_cancel.parent.height/2+Laya.stage.height/2-100;ce.getIns().bottomDoMove(this.viewProp.m_cancel,e,998.5,function(e){e||ce.getIns().playBtnShow(this.viewProp.m_cancel,null,G_BtnDoShowTime)}.bind(this),G_BtnDelayTime,G_BrnMoveTimer)}pageOpen(e){super.pageOpen(e),this.closeFun=e.closeFun,this.resetData(),this.curWeapon=ce.getIns().getRandomArrayElements(this.weapons,3),this.initList(this.curWeapon),ce.getIns().setAdBtnIcon(this.viewProp.m_getAll),this.viewProp.m_getAll.visible=!1,this.viewProp.m_cancel.visible=!1}enableVal(e){switch(e){case 1:ue.getIns().setReduceHurtPrecent(.3);break;case 2:ue.getIns().extraHp=150;break;case 3:ue.getIns().setExtraMagazines(20);break;case 4:ue.getIns().hasMedicalCase=!0;break;case 5:ue.getIns().hurtMul=2}}selItem(e){e.itemData.isAD?ce.getIns().shareOrAd(e.viewProp.m_adBtn,function(){this.enableVal(e.itemData.id),e.itemData.isUse=!0,this.checkNotUse(),this.viewProp.m_weapon_list.refresh()}.bind(this)):(this.enableVal(e.itemData.id),e.itemData.isUse=!0,this.setUseAd(!0),this.viewProp.m_getAll.visible=!0,this.viewProp.m_cancel.visible=!0,this.moveBtn(),this.viewProp.m_weapon_list.refresh())}checkNotUse(){for(let e=0;e<this.curWeapon.length;e++)if(!this.curWeapon[e].isUse)return;we.getUIMgr().closeUI(we.getUIName().ExtraWeapon)}getAll(){ce.getIns().shareOrAd(this.viewProp.m_getAll,function(){this.useAll()}.bind(this))}setUseAd(e){for(let t=0;t<this.weapons.length;t++)this.weapons[t].isAD=e}useAll(){for(let e=0;e<this.curWeapon.length;e++)this.enableVal(this.curWeapon[e].id),this.curWeapon[e].isUse=!0;this.checkNotUse()}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}}class ss extends O{constructor(){super(),this.showMore=!1,this.onckickCount=8,this.isOpenBox=!1,this.closeFun=null,this.lastOnclickTime=0,this.updateSpace=500,this.downValMin=.008,this.downValMax=.008,this.onclickAdd=.06,this.curOnclick=0,this.tarVar=.65,this.enableVal=this.tarVar,this.minClickVal=7,this.maxClickVal=4,this.enableClick=this.minClickVal,this.isNeedTween=!0,this.vals=null,this.m_mistake_bar=null}setMisBar(e){this.m_mistake_bar=e}pageInit(){super.pageInit();let e=le.getIns().getMistakeData();if(null!=e){let t=e.split("||");this.updateSpace=parseInt(t[0]),this.downValMin=parseFloat(t[1]),this.downValMax=parseFloat(t[2]),this.onclickAdd=parseFloat(t[3]),this.tarVar=parseFloat(t[4])/100;let i=t[5].split("-");this.minClickVal=parseInt(i[0]),this.maxClickVal=parseInt(i[1])}}pageOpen(e){super.pageOpen(e),this.vals=e,this.resetBar(),this.getAdVal(),this.closeFun=e?e.closeFun:null,G_Scheduler.schedule("mistake_bar_update"+this.id,function(){this.barUpdate()}.bind(this),!1,100,G_Const.C_SCHEDULE_REPEAT_FOREVER)}resetBar(){this.m_mistake_bar.value=0,this.isOpenBox=!1}getAdVal(){this.enableVal=this.tarVar,this.enableVal+=.05*Math.random(),this.enableVal>.9&&(this.enableVal=.9),this.enableClick=this.minClickVal,this.enableClick+=(this.maxClickVal-this.minClickVal)*Math.random(),this.curOnclick=0}barUpdate(){if(this.m_mistake_bar){let e=this.m_mistake_bar.value,t=this.downValMin;G_ServerInfo.getServerTime()-this.lastOnclickTime>this.updateSpace&&(t=this.downValMax),e-=t,this.setBarVal(e)}}setBarVal(e){e=Math.max(0,e),e=Math.min(e,.95),this.m_mistake_bar.value=e}onClickBtn(){let e=this.m_mistake_bar.value;if((e+=this.onclickAdd)>=.95&&(e=.95),this.setBarVal(e),this.lastOnclickTime=G_ServerInfo.getServerTime(),this.curOnclick++,!this.isOpenBox){if(e>this.enableVal&&this.curOnclick>=this.enableClick){this.isOpenBox=!0;let e=this,t=new Object;return t.closeFun=function(){we.getUIMgr().closeUI(e.pageName)},function(){Laya.timer.once(2e3,this,function(){e.mistakeEndFun(t)})}(),e.mistakeOpenFun(t),void e.showAd()}e<=this.enableVal&&(this.curOnclick=0)}}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null,G_Scheduler.unschedule("mistake_bar_update"+this.id)}mistakeEndFun(e){}mistakeOpenFun(e){}showAd(){}showBanner(){ce.getIns().cretaeBannerAyn()}showBox(){let e=this;C.getIns().cretaeBoxAd(function(){e&&e.isOpen&&e.boxCloseCallBack()})}boxCloseCallBack(){}}class os extends ss{constructor(){super()}pageInit(){super.pageInit(),this.setMisBar(this.viewProp.m_mistake_bar),this.viewProp.m_mis_btn.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_mis_btn),this.onClickBtn()})}pageOpen(e){super.pageOpen(e)}mistakeEndFun(e){e.closeFun()}showAd(){this.showBanner()}}class rs extends O{constructor(){super(),this.chineseName="结算成功",this.vals=null,this.adObj=new Object,this.adObj.num=2,this.showMore=!1,this.moveEnd=!0,this.nativeFlow=null,this.downTime=5,this.curDownTime=0,this.pageVals=null,this.isViewAd=!1,this.tGold=750,this.goldTimes=2,this.isToReborn=!1,this.tweenOpenVals=[],this.tweenOpenVals.push({time:800,prop:{alpha:0},ease:Laya.Ease.circOut}),this.tweenOpenVals.push({time:800,prop:{alpha:1},ease:Laya.Ease.circOut}),this.tweenCloseVals=[],this.tweenCloseVals.push({time:100,prop:{alpha:1},ease:Laya.Ease.linearIn}),this.tweenCloseVals.push({time:100,prop:{alpha:0},ease:Laya.Ease.linearIn});let e=[];e.push({time:200,prop:{scaleX:3,scaleY:3},ease:Laya.Ease.quadOut}),e.push({time:200,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.quadIn}),this.skilIconTweem=new E,this.skilIconTweem.setTweenVals(e),this.skilIconTweem.setLoop(!1),this.isNeedTween=!0,this.isInShare=!1,this.shareRewardCount=1e3,this.isClickCheck=!1,this.forceShowAd=!1,this.foreceSelect=!1,this.oppo_nativeAd=null,this.isOppoNativeMis=!1,this.inPageCount=0}pageInit(){super.pageInit(),G_PlatHelper.isOPPOPlatform()&&(this.adObj.num=3),this.viewProp.m_replay_btn.on(Laya.Event.CLICK,this,()=>{this.isToReborn||(this.isToReborn=!0,ce.getIns().shareOrAd(this.viewProp.m_replay_btn,()=>{this.toReborn()},()=>{this.isToReborn=!1}))}),this.viewProp.m_toNext.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_toNext,()=>{this.toGetGold(!1)})}),this.viewProp.m_to_get_oppo.on(Laya.Event.CLICK,this,()=>{this.isOppoNativeMis&&(this.isOppoNativeMis=!1,this.oppo_nativeAd.onClickTouched(this.viewProp.m_to_get_oppo)),this.toGetGold(!1)}),this.viewProp.m_three_check.on(Laya.Event.CLICK,this,()=>{this.isViewAd=!this.isViewAd,this.isClickCheck=!0,this.refershSelect(this.isViewAd)}),this.viewProp.m_reborn_check.on(Laya.Event.CLICK,this,()=>{this.isViewAd=!this.isViewAd,this.isClickCheck=!0,this.refershSelect(this.isViewAd)}),this.viewProp.m_cacel_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_cacel_btn,()=>{this.toNextView()})}),this.viewProp.m_three_get.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_three_get),this.toGetGold(!0,this.isViewAd&&!this.isClickCheck)}),this.viewProp.m_three_get_oppo.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_three_get_oppo),this.toGetGold(!0,this.isViewAd&&!this.isClickCheck)}),this.viewProp.m_share_s_btn.on(Laya.Event.CLICK,null,()=>{S.getIns().Screenc_click("结算成功"),ce.getIns().btnAction(this.m_share_s_btn,()=>{this.doShare()})}),this.viewProp.m_share_f_btn.on(Laya.Event.CLICK,null,()=>{S.getIns().Screenc_click("结算失败"),ce.getIns().btnAction(this.m_share_f_btn,()=>{this.doShare(()=>{this.toNextView()})})}),this.viewProp.m_cancel_s_share.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_cancel_s_share,()=>{this.setShareView(!1,!0)})}),this.viewProp.m_cancel_f_share.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_cancel_f_share,()=>{MapMgr.getIns().isReReception=!0,this.toNextView()})}),this.viewProp.m_reReception_oppo.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_reReception_oppo,()=>{MapMgr.getIns().isReReception=!0,this.toNextView()})}),this.viewProp.m_cancel_f_oppo.on(Laya.Event.CLICK,null,()=>{this.isOppoNativeMis&&(this.isOppoNativeMis=!1,this.oppo_nativeAd.onClickTouched(this.viewProp.m_cancel_f_oppo)),this.toNextView()}),this.viewProp.m_check_oppo.on(Laya.Event.CLICK,null,()=>{this.oppo_nativeAd.onClickTouched(this.viewProp.m_check_oppo)}),this.skilIconTweem.setTarget(this.viewProp.m_skill_icon),this.oppo_nativeAd=this.viewProp.m_oppo_nativeAd.getComponent(tn)}doShare(e,t=!0){if(this.isInShare)return;this.isInShare=!0;let i=t?"结算成功":"结算失败";A.getIns().shareVideo((n,s)=>{n?(S.getIns().Screen_over(i),we.getPlayerInfo().addItemByType(3,this.shareRewardCount,0),G_PlatHelper.showToast("恭喜获得{0}钞票!".format(this.shareRewardCount)),this.setShareView(!1,t),ce.getIns().handlerFun(e)):S.getIns().Screen_fail(i,s),1!=s&&S.getIns().Screen_get(i),this.isInShare=!1})}toReborn(){G_Scheduler.unschedule("reborn_time_down"),this.isToReborn=!1,we.getUIMgr().closeUI(we.getUIName().GameOverViewEnd),we.getIns().gameReborn()}toNextView(){we.getUIMgr().closeUI(we.getUIName().GameOverViewEnd),G_PlatHelper.isTTPlatform()?this.toReadView():we.getUIMgr().openUI(we.getUIName().GameOverView,this.pageVals)}toReadView(){MapMgr.getIns().cleanScenes(MapMgr.getIns().isReReception),we.getUIMgr().openUI(we.getUIName().ReadyView)}toGetGold(e,t=!1){this.foreceSelect&&this.forceShowAd&&(e=!0,!0,this.forceShowAd=!1);let i=(this.tGold+we.getIns().gameGold)*we.getIns().gameMul,n=function(){we.getPlayerInfo().addItemByType(3,i,0),G_PlatHelper.showToast("恭喜获得{0}钞票".format(i)),this.toNextView()}.bind(this);e?ce.getIns().shareOrAd(this.viewProp.m_toNext,()=>{i*=this.goldTimes,n()},()=>{}):n()}refershAd(){this.oppo_nativeAd.hideUI(),G_PlatHelper.isOPPOPlatform()&&(this.oppo_nativeAd.showUI(),this.oppo_nativeAd._refreshNativeAd())}pageOpen(e){super.pageOpen(e),this.isClickCheck=!1,this.isToReborn=!1,this.pageVals=e,this.showTopView(e.isWin),this.refershBottom(e.isWin),e.isWin?S.getIns().Screen_show("结算成功"):S.getIns().Screen_show("结算失败"),this.refershAd(),this.viewProp.m_gold.text="+"+(this.tGold+we.getIns().gameGold)*we.getIns().gameMul,this.foreceSelect=le.getIns().getForeceSelect(),this.isViewAd=this.foreceSelect,G_PlatHelper.isTTPlatform()&&(this.forceShowAd=this.isViewAd),this.refershSelect(this.isViewAd),this.viewProp.m_three_check.visible=!0}refershBottom(e){if(this.viewProp.m_s_b.visible=!1,this.viewProp.m_f_b.visible=!1,this.viewProp.m_s_b_oppo.visible=!1,this.viewProp.m_f_b_oppo.visible=!1,G_PlatHelper.isOPPOPlatform()||G_PlatHelper.isWINPlatform()){this.viewProp.m_s_b_oppo.visible=e,this.viewProp.m_f_b_oppo.visible=!e;let t=!1;0==this.inPageCount?t=!1:le.getIns().getNatvieMisSpace()>0&&this.inPageCount>=le.getIns().getNatvieMisSpace()&&(this.inPageCount=-1,t=!0),this.inPageCount++,this.isOppoNativeMis=t}else this.viewProp.m_s_b.visible=e,this.viewProp.m_f_b.visible=!e;ce.getIns().setAdBtnIcon(this.viewProp.m_three_get),ce.getIns().setAdBtnIcon(this.viewProp.m_three_get_oppo),ce.getIns().setAdBtnIcon(this.viewProp.m_replay_btn),this.setShareView(!0,e)}setShareView(e,t){G_PlatHelper.isTTPlatform()?(this.viewProp.m_f_b.visible=!1,this.viewProp.m_share_s_b.visible=!1,this.viewProp.m_share_f_b.visible=!1,t?(this.viewProp.m_share_s_b.visible=e,this.viewProp.m_s_b.visible=!e):this.viewProp.m_share_f_b.visible=e,le.getIns().getBtnDelayShow()&&(t?ce.getIns().playBtnShowNotLimit(this.viewProp.m_cancel_s_share,null,30):ce.getIns().playBtnShowNotLimit(this.viewProp.m_cancel_f_share,null,30))):(this.viewProp.m_share_f_b.visible=!1,this.viewProp.m_share_s_b.visible=!1)}refershSelect(e){this.viewProp.m_three_check.selected=e,this.viewProp.m_reborn_check.selected=e,this.viewProp.m_cacel_btn.visible=!e,this.viewProp.m_replay_btn.visible=e,this.viewProp.m_toNext.visible=!e,this.viewProp.m_three_get.visible=e}showTopView(e){this.viewProp.m_f_top.visible=!1,this.viewProp.m_s_top.visible=!0,e?(this.viewProp.m_skill_icon.skin="game/gameOver/sp21.png",this.viewProp.m_gold.text="+800",G_SoundMgr.playSound(G_SoundName.SN_SUCC),this.skilIconTweem.play()):(this.viewProp.m_gold.text="+0",G_SoundMgr.playSound(G_SoundName.SN_FAIL),this.viewProp.m_skill_icon.skin="game/gameOver/sp22.png",this.skilIconTweem.end())}refershTimeDown(){this.curDownTime++,this.viewProp.m_timeDown_Icon.skin="game/gameOver/timeDow_{0}.png".format(this.curDownTime),this.viewProp.m_timeDown_Text.text=this.downTime-this.curDownTime,this.curDownTime>=5&&(G_Scheduler.unschedule("reborn_time_down"),this.toNextView())}pageClose(){super.pageClose(),G_Scheduler.unschedule("reborn_time_down")}}class as extends Laya.Script{constructor(){super(),this.wxBottomOffect=0,this.oppoBottomOffect=0,this.vivoBottomOffect=0,this.qqBottomOffect=0,this.ttBottomOffect=0,this.winBottomOffect=0,this.hwBottomOffect=0,this.offect=0}init(){G_PlatHelper.isWXPlatform()?this.offect=this.wxBottomOffect:G_PlatHelper.isQQPlatform()?this.offect=this.qqBottomOffect:G_PlatHelper.isOPPOPlatform()?this.offect=this.oppoBottomOffect:G_PlatHelper.isVIVOPlatform()?this.offect=this.vivoBottomOffect:G_PlatHelper.isTTPlatform()?this.offect=this.ttBottomOffect:G_PlatHelper.isWINPlatform()?this.offect=this.winBottomOffect:G_PlatHelper.isHWPlatform()&&(this.offect=this.hwBottomOffect)}onAwake(){this.init();let e=this.owner.getComponent(ve);e?e.bottom=this.offect:this.owner.bottom=this.offect}}class ls extends O{constructor(){super(),this.leftTween=new E;let e=[];e.push({time:400,prop:{centerX:-800},ease:Laya.Ease.quartOut}),e.push({time:400,prop:{centerX:-168},ease:Laya.Ease.quartOut}),this.leftTween.setTweenVals(e),this.rightTween=new E;let t=[];t.push({time:400,prop:{centerX:800},ease:Laya.Ease.quartOut}),t.push({time:400,prop:{centerX:191},ease:Laya.Ease.quartOut}),this.rightTween.setTweenVals(t),this.succTween=new E;let i=[];i.push({time:300,prop:{scaleX:2,scaleY:2},ease:Laya.Ease.linearOut}),i.push({time:300,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearOut}),i.push({time:120,prop:{scaleX:1.2,scaleY:1.2},ease:Laya.Ease.quadOut}),i.push({time:100,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.quadIn}),this.succTween.setTweenVals(i),this.failTween=new E;let n=[];n.push({time:400,prop:{scaleX:2,scaleY:2},ease:Laya.Ease.linearOut}),n.push({time:400,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearOut}),this.failTween.setTweenVals(n),this.isWin=!1,this.isTeach=!1,this.closeFun=null}pageInit(){super.pageInit(),this.viewProp.m_bg.on(Laya.Event.CLICK,null,()=>{}),this.leftTween.setTarget(this.viewProp.m_left),this.rightTween.setTarget(this.viewProp.m_right),this.succTween.setTarget(this.viewProp.m_succ_icon),this.failTween.setTarget(this.viewProp.m_fail_icon)}pageOpen(e){super.pageOpen(e),this.isWin=e.isWin,this.isTeach=e.isTeach,this.closeFun=e.closeFun}pageOpenTweenOver(){super.pageOpenTweenOver(),this.showBorderTween(this.isWin),Laya.timer.once(1500,null,()=>{we.getUIMgr().closeUI(this.pageName)})}showBorderTween(e){if(this.viewProp.m_succ_icon.visible=!1,this.viewProp.m_fail_icon.visible=!1,this.viewProp.m_teach_icon.visible=this.isTeach,this.viewProp.m_game.visible=!this.isTeach,this.isTeach){this.leftTween.end(),this.rightTween.end();let e=this.viewProp.m_teach_icon;e.tween&&(e.tween.clear(),e.tween=null),e.centerX=-1e3,e.tween=Laya.Tween.to(e,{centerX:0},400,Laya.Ease.quintOut,null,0,!0,!1)}else this.leftTween.end(),this.leftTween.play(),this.rightTween.end(),this.rightTween.play(),Laya.timer.once(250,null,()=>{e?(this.viewProp.m_teach_icon.visible=this.isTeach,this.viewProp.m_succ_icon.visible=!0,this.succTween.end(),this.succTween.play()):(this.viewProp.m_fail_icon.visible=!0,this.failTween.end(),this.failTween.play())})}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}}class hs extends O{constructor(){super(),this.pageVals=null,this.adObj=new Object,this.adObj.num=-1,this.canClick=!0,this.tDaim=50,this.isShowTop=!0,this.tGold=0,this.goldTimes=3,this.scrollAd=null,this.isMisShowBanner=!1;let e=[];e.push({time:800,prop:{rotation:0},ease:Laya.Ease.linearOut}),e.push({time:800,prop:{rotation:12,scaleX:1.2,scaleY:1.2},ease:Laya.Ease.linearOut}),e.push({time:800,prop:{rotation:0,scaleX:1,scaleY:1},ease:Laya.Ease.linearOut}),e.push({time:1e3,prop:{rotation:0},ease:Laya.Ease.linearOut}),this.flowAdTween=new E,this.flowAdTween.setTweenVals(e),this.flowAdTween.setLoop(!0)}pageInit(){super.pageInit(),this.flowAdTween.setTarget(this.viewProp.m_flowAd2),this.flowAdTween.setTarget(this.viewProp.m_flowAd1),this.scrollAd=this.viewProp.m_scrollAd.getComponent(zi),this.viewProp.m_three_get.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_three_get,()=>{this.toGetGold(this.viewProp.m_three_get,!0,()=>{this.toReadView()})})}),this.viewProp.m_get.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_get,()=>{le.getIns().clickMistake(this.viewProp.m_get,()=>{this.toGetGold(this.viewProp.m_get,!1,()=>{this.toReadView()})})})}),this.viewProp.m_reborn_get.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_reborn_get,()=>{this.toGetGold(this.viewProp.m_reborn_get,!0,()=>{this.toReadView()})})}),this.viewProp.m_cancel.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_cancel,()=>{this.toGetGold(this.viewProp.m_cancel,!1,()=>{this.toReadView()})})}),this.viewProp.m_toNext.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_toNext,()=>{this.toGetGold(this.viewProp.m_toNext,!1,()=>{this.toNextLv()})})})}toReadView(){we.getUIMgr().closeUI(we.getUIName().GameOverView),we.getIns().toGame(we.getPlayerInfo().getCurLevelId(),1),re.getIns().showAdFullView(()=>{we.getIns().toReady(()=>{4==we.getPlayerInfo().getShowLevelCount()&&G_PlatHelper.installShortcut(()=>{console.log("install shortcut succ...")}),G_PlatHelper.isWXPlatform()&&le.getIns().autoShowPop()&&we.getUIMgr().openUI(we.getUIName().PopupView,{viewType:2})})})}toNextLv(){we.getUIMgr().closeUI(we.getUIName().GameOverView),we.getIns().toGame(we.getPlayerInfo().getCurLevelId(),1)}toGetGold(e,t,i){if(!this.canClick)return;this.canClick=!1;let n=()=>{let e=t?this.goldTimes:1,n=BigNumber((we.getIns().gameGold+this.tGold)*we.getIns().gameMul*e),s=[];if(n.gt(0)&&s.push({type:3,count:n}),0!=s.length){let e=new Object;e.rewardData=s,e.closeFun=(()=>{this.canClick=!0,ce.getIns().handlerFun(i)}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e)}else this.canClick=!0,ce.getIns().handlerFun(i)};t?(S.getIns().Video_broadcast(10001,2),ce.getIns().shareOrAd(e,()=>{S.getIns().Video_broadcast(10001,4),n()},()=>{this.canClick=!0,S.getIns().Video_broadcast(10001,3)})):n()}pageOpen(e){super.pageOpen(e),le.getIns().resetMisByNode(this.viewProp.m_get),this.flowAdTween.play(),this.canClick=!0,this.pageVals=e,this.refershAd(),this.tGold=20,e.isWin||(this.tGold=0,we.getIns().gameGold=0),this.viewProp.m_t_gold.text=(we.getIns().gameGold+this.tGold)*we.getIns().gameMul,ce.getIns().setAdBtnIcon(this.viewProp.m_three_get),this.setWin(e.isWin,e.slvId),S.getIns().Video_show(10001)}pageClose(){super.pageClose(),this.misFun&&Laya.timer.clear(this,this.misFun),this.flowAdTween.end()}refershAd(){this.scrollAd.showUI()}setWin(e,t){this.viewProp.m_top_succ.visible=e,this.viewProp.m_top_fail.visible=!e,this.viewProp.m_b_succ.visible=e,this.viewProp.m_b_fail.visible=!e,e&&G_UIHelper.delayShow(this.viewProp.m_get,2e3)}}class cs extends $n{constructor(){super(),this.diamNum=100,this.dayLimit=10}pageInit(){super.pageInit(),this.viewProp.m_diam_count.text="+"+G_Utils.bigNumber2StrNumber(BigNumber(this.diamNum))}canViewVideo(){return!!this.canGetGold()||(G_PlatHelper.showToast("今日次数已经用完!"),!1)}canGetGold(){return this.dayLimit-we.getPlayerInfo().getCurViewAdGetDaimTimes()>0}pageOpen(e){super.pageOpen(e),this.refershLimit(),S.getIns().Video_show(10002)}refershLimit(){this.viewProp.m_limit.text="每日限制次数 {0}/{1}".format(this.dayLimit-we.getPlayerInfo().getCurViewAdGetDaimTimes(),this.dayLimit)}startGetVideo(){super.startGetVideo(),S.getIns().Video_broadcast(10002,2)}getVideoEnd(e){super.getVideoEnd(e),e?S.getIns().Video_broadcast(10002,4):S.getIns().Video_broadcast(10002,3)}toGetReward(){super.toGetReward(),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("revivecoin")),we.getPlayerInfo().addViewAdGetDianTimes(),this.refershLimit();let e=new Object;e.rewardData=[],e.rewardData.push({type:1,count:this.diamNum}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e)}}class ds extends $n{constructor(){super(),this.rewardData=null;let e=[];this.eggTween=new E,e.push({time:1e3,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.linearNone}),e.push({time:1e3,prop:{scaleX:1.2,scaleY:1.2},ease:Laya.Ease.quadOut}),e.push({time:1e3,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.quadIn}),this.eggTween.setTweenVals(e),this.eggTween.setLoop(!0)}pageInit(){super.pageInit(),this.eggTween.setTarget(this.viewProp.m_egg),this.eggTween.play()}pageOpen(e){super.pageOpen(e),this.rewardData=e.eggData,this.viewProp.m_egg.skin="game/Eggs/c{0}.png".format(this.rewardData.id+1)}toGetReward(){we.getPlayerInfo().setEggsCube(this.rewardData.id+1);let e=new Object;e.eggData=this.rewardData,we.getUIMgr().openUI(we.getUIName().EggsClue,e),this.closeWindow()}}class us extends $n{constructor(){super(),this.chineseName="领取金币",this.diamNum=1e4,this.dayLimit=10}pageInit(){super.pageInit(),this.viewProp.m_gold_count.text="+"+G_Utils.bigNumber2StrNumber(BigNumber(this.diamNum))}canViewVideo(){return!!this.canGetGold()||(G_PlatHelper.showToast("今日次数已经用完!"),!1)}canGetGold(){return this.dayLimit-we.getPlayerInfo().getAdGoldTimes()>0}pageOpen(e){super.pageOpen(e),this.refershLimit(),S.getIns().Video_show(10004)}refershLimit(){this.viewProp.m_limit.text="每日限制次数 {0}/{1}".format(this.dayLimit-we.getPlayerInfo().getAdGoldTimes(),this.dayLimit)}startGetVideo(){super.startGetVideo(),S.getIns().Video_broadcast(10004,2)}getVideoEnd(e){super.getVideoEnd(e),e?S.getIns().Video_broadcast(10004,4):S.getIns().Video_broadcast(10004,3)}toGetReward(){super.toGetReward(),we.getPlayerInfo().addGoldTimes(),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("revivecoin"));let e=new Object;e.rewardData=[],e.rewardData.push({type:3,count:this.diamNum}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e),this.refershLimit()}}class ps extends $n{constructor(){super(),this.chineseName="领取体力",this.powerNum=1,this.useGold=5e3}pageInit(){super.pageInit(),this.viewProp.m_get_gold.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_get_gold),ce.getIns().canUseItem(this.useGold,3)?(we.getPlayerInfo().minusCoin(this.useGold),this.toGetReward()):G_PlatHelper.showToast("钱不够了!")}),this.viewProp.m_diam_count.text="体力+"+this.powerNum}pageOpen(e){super.pageOpen(e)}startGetVideo(){super.startGetVideo()}getVideoEnd(e){super.getVideoEnd(e)}toGetReward(){super.toGetReward();let e=new Object;e.rewardData=[],e.rewardData.push({id:5,count:this.powerNum}),we.getUIMgr().openUI(we.getUIName().GetRewardView,e)}pageClose(){super.pageClose();let e=we.getUIMgr().getPageByName(we.getUIName().ReadyView);e&&e.refershAdTime()}}class _s extends Yn{constructor(){super(),this.showRang=!1}init(){super.init()}setData(e){if(super.setData(e),!e)return;let t=e.type;if(this.viewProp.m_chip.visible=2==t,this.viewProp.m_gold.visible=3==t,this.viewProp.m_diam.visible=1==t,this.viewProp.m_skin.visible=4==t,this.viewProp.m_rang.visible=!1,this.showRang=!1,2==t){let t=G_GameDB.getPlayerConfigByID(e.paraId);this.viewProp.m_chip_skin.skin=G_ResPath.skinPath.format(t.icon);let i=G_GameDB.getQualityByID(t.quality);this.viewProp.m_chip.skin=G_ResPath.rareBoxPath.format(i.rareBg),t.quality>2&&(this.showRang=!0,this.viewProp.m_rang.rotation=0,this.viewProp.m_rang.visible=!0)}else if(4==t){let t=G_GameDB.getPlayerConfigByID(e.paraId);this.viewProp.m_whole_skin.skin=G_ResPath.skinPath.format(t.icon)}e.count instanceof BigNumber?this.viewProp.m_count.text="x"+G_Utils.bigNumber2StrNumber(e.count):this.viewProp.m_count.text="x"+G_Utils.bigNumber2StrNumber(BigNumber(e.count))}onUpdate(){this.showRang&&(this.viewProp.m_rang.rotation+=5)}}class gs extends O{constructor(){super(),this.rewardData=[],this.adObj=new Object,this.adObj.num=2,this.cellSize={x:150,y:150},this.startPosX=0,this.startPosY=0,this.closeFun=null,this.itemList=[],this.curItemIndex=0,this.isPlay=!1}pageInit(){super.pageInit(),this.viewProp.m_ok.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_ok),this.toGetReward()}),this.viewProp.m_reward_list.renderHandler=new Laya.Handler(this,this.rewardRender)}pageOpen(e){if(super.pageOpen(e),this.rewardData=e.rewardData,this.closeFun=e.closeFun,this.refershNative(),10==this.rewardData.length)this.viewProp.m_reward_list.repeatY=2,this.viewProp.m_reward_list.repeatX=5,this.startPosX=0,this.startPosY=0;else{let e=5*this.cellSize.x+4*this.viewProp.m_reward_list.spaceX;this.viewProp.m_reward_list.repeatY=1,this.viewProp.m_reward_list.repeatX=this.rewardData.length,this.rewardData.length>=5?this.startPosX=0:(this.startPosX=this.rewardData.length*this.cellSize.x+(this.rewardData.length-1)*this.viewProp.m_reward_list.spaceX,this.startPosX=(e-this.startPosX)/2),this.startPosY=this.viewProp.m_reward_list.height/2-this.cellSize.y/2}this.itemList.splice(0,this.itemList.length),this.curItemIndex=0,this.isPlay=!1,this.viewProp.m_reward_list.array=this.rewardData}refershNative(){}showItemTween(){if(this.curItemIndex>=this.itemList.length)return;if(!this.isOpen)return;let e=this.itemList[this.curItemIndex],t=1.2;2==this.rewardData[this.curItemIndex].type&&(t=1.5),this.curItemIndex++,e.tween&&(e.tween.clear(),e.tween=null),G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("collect_item_11_1")),e.tween=Laya.Tween.to(e,{scaleX:t,scaleY:t},200,Laya.Ease.linearOut,Laya.Handler.create(this,()=>{e.tween&&(e.tween.clear(),e.tween=null),e.tween=Laya.Tween.to(e,{scaleX:1,scaleY:1},100,Laya.Ease.linearIn,null,0,!0,!1)}),0,!0,!1),Laya.timer.once(350,this,()=>{this.showItemTween()})}rewardRender(e,t){if(t>=this.rewardData.length)return;e.scaleX=0,e.scaleY=0,t>=this.itemList.length&&this.itemList.push(e),this.itemList.length==this.rewardData.length&&(this.isPlay||(this.isPlay=!0,this.showItemTween()));let i=Math.floor(t/this.viewProp.m_reward_list.repeatX),n=t-i*this.viewProp.m_reward_list.repeatX;e.x=this.startPosX+n*(this.cellSize.x+this.viewProp.m_reward_list.spaceX),e.y=this.startPosY+i*(this.cellSize.y+this.viewProp.m_reward_list.spaceY);let s=e.getComponent(_s);s||(s=e.addComponent(_s)).init(),s.setData(this.viewProp.m_reward_list.getItem(t))}pageClose(){super.pageClose(),Laya.timer.clearAll(this),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}toGetReward(){for(let e=0;e<this.rewardData.length;e++)we.getPlayerInfo().addItemByType(this.rewardData[e].type,this.rewardData[e].count,this.rewardData[e].paraId);we.getUIMgr().closeUI(we.getUIName().GetRewardView)}}class fs extends O{constructor(){super(),this.getType=-1}pageInit(){super.pageInit(),this.viewProp.m_input_view.visible=!1,this.viewProp.m_comfrim_view.visible=!1,this.viewProp.m_tab.selectHandler=new Laya.Handler(this,this.onSelect),this.viewProp.m_input_ok_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_input_ok_btn),this.inputOk()}),this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close),we.getUIMgr().closeUI(we.getUIName().GoldFingerView)}),this.viewProp.m_comfrim_view.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_comfrim_view),we.getPlayerInfo().resetSginDay(),we.getUIMgr().closeUI(we.getUIName().GoldFingerView)})}onSelect(e){this.getType=e,this.viewProp.m_input_view.visible=!1,this.viewProp.m_comfrim_view.visible=!1,0==e||1==e?this.viewProp.m_input_view.visible=!0:2==e&&(this.viewProp.m_comfrim_view.visible=!0)}inputOk(){let e=parseInt(this.viewProp.m_input.text);0==this.getType?we.getPlayerInfo().addItemByType(3,e):1==this.getType&&we.getPlayerInfo().addItemByType(5,e)}}class ms extends O{constructor(){super(),this.chineseName="彩蛋图片领取",this.adObj=new Object,this.adObj.num=2,this.closeFun=null,this.imgUrl=null,this.nailData=null,this.tGold=1e3}pageInit(){super.pageInit(),this.viewProp.m_get_icon.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_get_icon,()=>{ce.getIns().shareOrAd(this.viewProp.m_get_icon,()=>{we.getPlayerInfo().addNailSkinById(this.nailData.id),G_PlatHelper.isTTPlatform()?this.toShare(!0):we.getUIMgr().closeUI(we.getUIName().ManicureVipView)},()=>{})})}),this.viewProp.m_back.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_back,()=>{we.getUIMgr().closeUI(we.getUIName().ManicureVipView)})}),this.viewProp.m_share.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_share,()=>{A.getIns().shareVideo(e=>{e&&(we.getPlayerInfo().addItemByType(3,this.tGold,0),G_PlatHelper.showToast("获得{0}钞票".format(this.tGold)),we.getUIMgr().closeUI(we.getUIName().ManicureVipView))},this.imgUrl)})}),ce.getIns().setAdBtnIcon(this.viewProp.m_get_icon),this.viewProp.m_gold.text="+"+this.tGold}pageOpen(e){super.pageOpen(e),this.closeFun=e.closeFun;let t=e.nailId;le.getIns().getBtnDelayShow()&&ce.getIns().playBtnShowNotLimit(this.viewProp.m_back);let i=this.getData(t);this.nailData=i,this.imgUrl=G_ResPath.nailVipIconPath.format(i.icon),this.viewProp.m_icon.skin=this.imgUrl,this.toShare(!1)}toShare(e){this.viewProp.m_share.visible=e,this.viewProp.m_get_icon.visible=!e}pageClose(){super.pageClose(),we.getPlayerInfo().addItemByType(3,this.tGold,0),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}getData(e){for(let t=0;t<G_NailSkin.length;t++)if(G_NailSkin[t].id==e)return G_NailSkin[t];return null}}class ys extends ss{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.pageVals=null}pageInit(){super.pageInit(),this.setMisBar(this.viewProp.m_mistake_bar),this.viewProp.m_click.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_click),this.onClickBtn()}),this.viewProp.m_close.on(Laya.Event.CLICK,this,function(){this.boxCloseCallBack()})}mistakeOpenFun(e){e.rewardData=[],e.rewardData.push({id:3,count:100}),this.pageVals=e}mistakeEndFun(e){this.viewProp.m_close.visible=!0}pageOpen(e){super.pageOpen(e),this.viewProp.m_close.visible=!1}showAd(){this.showBox()}boxCloseCallBack(){we.getUIMgr().openUI(we.getUIName().GetRewardView,this.pageVals)}}class ws extends Yn{constructor(){super()}init(){super.init(),this.owner.on(Laya.Event.CLICK,this,()=>{if(!this.data.isOpen)if(this.data.isAd)ce.getIns().shareOrAd(this.viewProp.m_ad,()=>{we.getUIMgr().getPageByName(we.getUIName().OpenBoxView).openBox(this.data.id,!0)});else{we.getUIMgr().getPageByName(we.getUIName().OpenBoxView).openBox(this.data.id,!1)}})}setData(e){super.setData(e),this.viewProp.m_open.visible=e.isOpen,this.viewProp.m_box.visible=!e.isOpen,this.viewProp.m_count.text=e.count,ce.getIns().setAdBtnIcon(this.viewProp.m_ad),this.viewProp.m_ad.visible=e.isAd}}class Is extends O{constructor(){super(),this.closeFun=null,this.boxData=[],this.openCount=0,this.showMore=!0}pageInit(){super.pageInit(),this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{le.getIns().clickMistake(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(we.getUIName().OpenBoxView)})})}),this.viewProp.m_box_list.renderHandler=new Laya.Handler(this,this.boxRender),this.initList(),this.viewProp.m_key_list.renderHandler=new Laya.Handler(this,this.keyRender);this.viewProp.m_key_list.array=[1,2,3]}keyRender(e,t){e.getChildAt(0).visible=3-this.openCount-1>=t}initList(){for(let e=1;e<=9;e++){let t=e;this.boxData.push({id:t,isOpen:!1,count:0,isAd:!1})}}resetList(){for(let e=0;e<this.boxData.length;e++)this.boxData[e].isOpen=!1,this.boxData[e].isAd=!1;if(le.getIns().showAdBox()||G_PlatHelper.isWINPlatform()){let e=ce.getIns().getRandomArrayElements(this.boxData,3);for(let t=0;t<e.length;t++)e[t].isAd=!0}this.viewProp.m_box_list.array=this.boxData}boxRender(e,t){let i=e.getComponent(ws);i||(i=e.addComponent(ws)).init(),i.setData(e.dataSource)}pageOpen(e){super.pageOpen(e),e&&(this.closeFun=e.callBack),this.openCount=0,this.viewProp.m_close.visible=this.openCount>=3,this.resetList(),le.getIns().resetMisByNode(this.viewProp.m_close)}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}openBox(e,t){if(!t&&!this.hasTimes())return void G_PlatHelper.showToast("次数不足!");let i=null;for(let t=0;t<this.boxData.length;t++)if(e==this.boxData[t].id){i=this.boxData[t];break}i&&(i.count=ce.getIns().randomNum(20,200)*(t?2:1),i.isOpen=!0,this.viewProp.m_box_list.changeItem(i.id-1,i)),this.openCount++,this.viewProp.m_close.visible=this.openCount>=3,this.viewProp.m_key_list.refresh()}hasTimes(){return this.openCount<3}}class vs extends O{constructor(){super(),this._closeCb=null,this.viewType=0,this.closeBtn=null,this.isOpenMoreGame=!1}pageInit(){super.pageInit(),this.initAllPopups()}showSetting(){this.hideAllPopups(),G_UIManager.showUI("setting",()=>{we.getUIMgr().closeUI(we.getUIName().PopupView)})}showMoreGame(){this.hideAllPopups(),this.isOpenMoreGame=!0,re.getIns().showMoreAd(()=>{this.isOpenMoreGame=!1,we.getUIMgr().closeUI(we.getUIName().PopupView)})}pageOpen(e){this.viewType=e.viewType,this.isOpenMoreGame=!1,super.pageOpen(e),this.closeCb=e.closeCb,this.refershView()}refershView(){switch(this.viewType){case 1:this.showSetting();break;case 2:this.showMoreGame()}}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeCb),this.isOpenMoreGame&&G_UIManager.hideUI("moreGameAd")}hideAllPopups(){}initAllPopups(){}}class Ps extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=1,this.showMore=!0,this.isShowTop=!0,this.fingerTween=new E,this.fingerTween.setLoop(!0);let e=[];e.push({time:500,prop:{centerX:226},ease:Laya.Ease.linearOut}),e.push({time:500,prop:{centerX:120},ease:Laya.Ease.linearOut}),e.push({time:500,prop:{centerX:226},ease:Laya.Ease.linearOut}),this.fingerTween.setTweenVals(e),this.f1Mgr=null,this.f2Mgr=null,this.isStart=!1}pageInit(){super.pageInit(),this.f1Mgr=this.viewProp.m_flowAd1.getComponent(Fi),this.f2Mgr=this.viewProp.m_flowAd2.getComponent(Fi),this.viewProp.m_btn_setting.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_btn_setting,()=>{we.getUIMgr().openUI(we.getUIName().SettingView)})}),this.viewProp.m_start.on(Laya.Event.CLICK,this,()=>{this.clickToStart()}),this.viewProp.m_gold_finger.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_gold_finger,()=>{ne.getIns().changePlayer(1)})}),this.viewProp.m_tools.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_tools,()=>{we.getUIMgr().openUI(we.getUIName().ToolsView)})}),this instanceof Ps&&(ne.getIns().readView=this),this.fingerTween.setTarget(this.viewProp.m_finger),this.fingerTween.play(),G_PlatHelper.isWINPlatform(),G_PlatHelper.isWXPlatform()&&Laya.timer.loop(2e3,this,()=>{this.f2Mgr.refreshAdv(),this.f1Mgr.refreshAdv()})}md(e){console.log(e.target)}pageOpen(e){super.pageOpen(e),ce.getIns().setAdBtnIcon(this.viewProp.m_temp_icon),this.refershAdv(),S.getIns().Video_show(10005),this.isStart=!1,this.viewProp.m_lv_num.value=we.getPlayerInfo().getShowLevelCount()}refershAdv(){}clickToStart(){we.getIns().isGameReady()?this.isStart||(this.isStart=!0,le.getIns().openBoxView(()=>{le.getIns().showStartAd()?ce.getIns().shareOrAd(this.viewProp.m_temp_icon,()=>{this.toStart()},()=>{this.toStart()}):this.toStart()})):G_PlatHelper.showToast("游戏正在初始化!")}toStart(){this.isStart=!1,this.showMistakeView(()=>{we.getIns().gameStart()})}showMistakeView(e){1==le.getIns().mistake_boxtype?re.getIns().showClickBtnView(e):ce.getIns().handlerFun(e)}pageClose(){super.pageClose(),Laya.timer.clear(this,this.refershAdv)}}class Ss extends Laya.Script{constructor(){super(),this.wxPlat=!1,this.oppoPlat=!1,this.vivoPlat=!1,this.qqPlat=!1,this.ttPlat=!1,this.hwPlat=!1,this.winPlat=!0,this.autoInit=!0,this.autoDes=!1,this.isAction=!0}init(){G_PlatHelper.isWXPlatform()?this.isAction=this.wxPlat:G_PlatHelper.isQQPlatform()?this.isAction=this.qqPlat:G_PlatHelper.isOPPOPlatform()?this.isAction=this.oppoPlat:G_PlatHelper.isVIVOPlatform()?this.isAction=this.vivoPlat:G_PlatHelper.isTTPlatform()?this.isAction=this.ttPlat:G_PlatHelper.isWINPlatform()?this.isAction=this.winPlat:G_PlatHelper.isHWPlatform()&&(this.isAction=this.hwPlat)}onStart(){this.autoInit&&this.init(),this.autoDes?this.isAction||this.owner.destroy():this.owner.visible=this.isAction}setAutoInit(e){this.autoInit=e}getIsAction(){return this.isAction}}class Ts extends O{constructor(){super(),this.callBack=null,this.downTime=5,this.curDownTime=0,this.isPause=!1,this.succ=!1,this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_reborn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_reborn,()=>{this.toReborn()})})}pageOpen(e){super.pageOpen(e),this.beginTime(),ce.getIns().setAdBtnIcon(this.viewProp.m_reborn),this.callBack=e.callBack}toReborn(){this.isPause||(this.stopTime(),ce.getIns().shareOrAd(this.viewProp.m_reborn,()=>{this.succ=!0,we.getUIMgr().closeUI(we.getUIName().RebornView)},()=>{this.succ=!1,this.continueTime()}))}beginTime(){this.continueTime(),this.succ=!1,this.curDownTime=0,this.viewProp.m_time.text=this.downTime,ce.getIns().setImgPercent(this.viewProp.m_rang,0),Laya.timer.loop(1e3,this,this.timeDownFun)}closeTime(){Laya.timer.clear(this,this.timeDownFun)}timeDownFun(){this.isPause||(this.curDownTime+=1,this.viewProp.m_time.text=this.downTime-this.curDownTime,G_SoundMgr.playSound(GG_SoundName.SN_Mp3.format("timeDown")),ce.getIns().setImgPercent(this.viewProp.m_rang,this.curDownTime/this.downTime),this.downTime-this.curDownTime<=0&&(this.closeTime(),we.getUIMgr().closeUI(we.getUIName().RebornView)))}stopTime(){this.isPause=!0}continueTime(){this.isPause=!1}pageClose(){super.pageClose(),this.closeTime(),ce.getIns().handlerFun(this.callBack,this.succ),this.callBack=null}}class Gs extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.isShowTop=!0,this.canStartGame=!0,this.isNeedTween=!0,this.passTween=new E;let e=[];e.push({time:500,prop:{centerX:-800},ease:Laya.Ease.quintOut}),e.push({time:500,prop:{centerX:-244},ease:Laya.Ease.quintOut}),this.passTween.setTweenVals(e),this.examTween=new E;let t=[];t.push({time:800,prop:{centerX:800},ease:Laya.Ease.quintOut}),t.push({time:800,prop:{centerX:257},ease:Laya.Ease.quintOut}),this.examTween.setTweenVals(t),this.notLimitTween=new E;let i=[];i.push({time:1e3,prop:{centerX:800},ease:Laya.Ease.quintOut}),i.push({time:1e3,prop:{centerX:288},ease:Laya.Ease.quintOut}),this.notLimitTween.setTweenVals(i),this.notLimitTween.setDelayTime(100)}pageInit(){super.pageInit(),this.viewProp.m_bg.on(Laya.Event.CLICK,null,()=>{}),this.viewProp.m_back.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_back,()=>{we.getUIMgr().closeUI(we.getUIName().SelectLevelModel)})}),this.viewProp.m_pass_lv.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_pass_lv,()=>{this.clickToStart()})}),this.viewProp.m_exam.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_exam,()=>{gi.getIns().isOpenDriver()?(this.selectSumbit(2,we.getPlayerInfo().getShowLevelCount()),we.getUIMgr().openUI(we.getUIName().TrainView)):G_PlatHelper.showToast(gi.getIns().getDriverOpenTips())})}),this.viewProp.m_notLimit.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_notLimit,()=>{gi.getIns().isOpenNotLimit()?this.clickToDontLimit():G_PlatHelper.showToast(gi.getIns().getNotLimitOpenTips())})}),this.passTween.setTarget(this.viewProp.m_pass_lv),this.examTween.setTarget(this.viewProp.m_exam),this.notLimitTween.setTarget(this.viewProp.m_notLimit)}pageOpen(e){super.pageOpen(e),this.canStartGame=!0,this.viewProp.m_lv_count.text="当前关卡:第{0}关".format(we.getPlayerInfo().getShowLevelCount()),this.refershModule()}refershModule(){if(gi.getIns().isOpenDriver()){this.viewProp.m_exam_icon.gray=!1,this.viewProp.m_exam_limit.visible=!1,this.viewProp.m_exam_lv.visible=!0;let e=we.getPlayerInfo().getCurLicenseId();if(e>0){let t=G_GameDB.getDriverLicenseByID(e);this.viewProp.m_exam_lv_count.text="当前驾照:"+t.name}else this.viewProp.m_exam_lv_count.text="当前驾照:无"}else this.viewProp.m_exam_icon.gray=!0,this.viewProp.m_exam_limit.visible=!0,this.viewProp.m_exam_limit_tips.text=gi.getIns().getDriverOpenTips(),this.viewProp.m_exam_limit_tips.gray=!1,this.viewProp.m_exam_lv.visible=!1;gi.getIns().isOpenNotLimit()?(this.viewProp.m_notLimit_icon.gray=!1,this.viewProp.m_notLimit_limit.visible=!1,this.viewProp.m_notLimit_lv.visible=!0,this.viewProp.m_notLimit_lv_count.text="历史最高:第{0}波".format(we.getPlayerInfo().getNotLimitRound())):(this.viewProp.m_notLimit_icon.gray=!0,this.viewProp.m_notLimit_limit.visible=!0,this.viewProp.m_notLimit_limit_tips.text=gi.getIns().getNotLimitOpenTips(),this.viewProp.m_notLimit_lv.visible=!1)}tweenOpen(e){this.passTween.setReverse(!1),this.passTween.end(),this.passTween.play(),this.examTween.setReverse(!1),this.examTween.end(),this.examTween.play(),this.notLimitTween.setReverse(!1),this.notLimitTween.end(),this.notLimitTween.play(),Laya.timer.once(500,this,()=>{ce.getIns().handlerFun(e)})}tweenClose(e){this.passTween.setReverse(!0),this.passTween.end(),this.passTween.play(),this.examTween.setReverse(!0),this.examTween.end(),this.examTween.play(),this.notLimitTween.setReverse(!0),this.notLimitTween.end(),this.notLimitTween.play(),Laya.timer.once(200,this,()=>{ce.getIns().handlerFun(e)})}clickToStart(){if(!this.canStartGame)return;this.canStartGame=!1;let e=we.getPlayerInfo().getCurLevelId();if(12==T.getIns().waitEnableTeachId)we.getIns().toGame(e,4);else{this.selectSumbit(1,e);let t=()=>{we.getIns().toGame(e,1)},i=we.getIns().getRandomSkinIds();if(we.getIns().trySkinId=null,i){let n={};n.skinId=i,n.closeFun=((e,i)=>{e&&(we.getIns().trySkinId=i),t()}),we.getIns().trySkinSumbit(i,e),we.getUIMgr().openUI(we.getUIName().TryUseSkinView,n)}else t()}}clickToDontLimit(){this.canStartGame&&(this.canStartGame=!1,this.selectSumbit(3,we.getPlayerInfo().getShowLevelCount()),we.getIns().toGame(1,3))}selectSumbit(e,t){if(1==e){if(t<=we.getIns().sumbitLvCount){0==we.getPlayerInfo().getLevelDataById(t).playTimes&&S.getIns().Enter_click(3+8*t)}}else 2==e?S.getIns().Enter_click(44):3==e&&S.getIns().Enter_click(46)}}class bs extends O{constructor(){super(),this.closeFun=null,this.adObj=Object(),this.adObj.num=2,this.isExit=!1}pageInit(){super.pageInit(),this.viewProp.m_resume.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_resume,()=>{this.isExit||(this.isExit=!0,we.getIns().gameResume(),we.getUIMgr().closeUI(this.pageName))})}),this.viewProp.m_restart.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_restart,()=>{this.isExit||(this.isExit=!0,we.getIns().outGame(),we.getIns().rePlay())})}),this.viewProp.m_menu.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_menu,()=>{this.isExit||(1==we.getIns().levelType&&we.getPlayerInfo().setLevelPlayTime(4,we.getPlayerInfo().getShowLevelCount()),this.isExit=!0,we.getIns().outGame(),ne.getIns().cleanScenes(),we.getUIMgr().closeUI(we.getUIName().SensibilitySettingView),we.getUIMgr().openUI(we.getUIName().ReadyView))})}),this.viewProp.m_more_game.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_more_game,()=>{re.getIns().showFullMatrix()})})}pageOpen(e){super.pageOpen(e),this.isExit=!1}}class Cs extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0}pageInit(){super.pageInit(),this.viewProp.m_closeBtn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_closeBtn,()=>{we.getUIMgr().closeUI(we.getUIName().SettingView)})}),this.viewProp.m_soundSwitchBtn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_soundSwitchBtn,()=>{this.setSettingState()})}),this.viewProp.m_muteSwitchBtn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_muteSwitchBtn,()=>{this.setMuteState()})}),this.viewProp.m_bg.on(Laya.Event.CLICK,this,()=>{we.getUIMgr().closeUI(we.getUIName().SettingView)}),this.viewProp.m_sound.visible=!0,this.viewProp.m_mute.visible=G_PlatHelper.isSupportVibratePhone()}pageOpen(e){super.pageOpen(e),this.setSwitch(this.viewProp.m_muteSwitchBtn,G_PlayerInfo.isMuteEnable()),this.setSwitch(this.viewProp.m_soundSwitchBtn,G_SoundMgr.isSoundEnable())}setMuteState(){G_PlayerInfo.isMuteEnable()?G_PlayerInfo.setMuteEnable(!1):G_PlayerInfo.setMuteEnable(!0),this.setSwitch(this.viewProp.m_muteSwitchBtn,G_PlayerInfo.isMuteEnable())}setSettingState(){G_SoundMgr.isSoundEnable()?G_SoundMgr.setSoundEnable(!1):G_SoundMgr.setSoundEnable(!0),this.setSwitch(this.viewProp.m_soundSwitchBtn,G_SoundMgr.isSoundEnable())}setSwitch(e,t){e.skin=t?"game/popup/setting/on_btn.png":"game/popup/setting/off_btn.png"}}class Os extends Yn{constructor(){super()}init(){super.init()}setData(e){if(super.setData(e),this.viewProp.m_day.skin="game/sgin/d{0}.png".format(e.day),this.viewProp.m_sel.visible=we.getPlayerInfo().getSginDayCount()>=e.day,this.viewProp.m_diam.visible=1==e.sginData.type,this.viewProp.m_gold.visible=3==e.sginData.type,this.viewProp.m_skin.visible=2==e.sginData.type,2==e.sginData.type||4==e.sginData.type){let t=e.sginData.param1,i=G_GameDB.getPlayerConfigByID(t);this.viewProp.m_skin.skin=G_ResPath.skinPath.format(i.icon)}this.viewProp.m_name.text=e.sginData.name}}class As extends O{constructor(){super(),this.chineseName="签到",this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0,this.isInSgin=!1,this.sginTimes=2}pageInit(){super.pageInit(),this.m_oppo_native=this.viewProp.m_oppo_native.getComponent(Xn),this.m_oppo_native.init(),this.m_oppo_native.refershNative(),G_PlatHelper.isOPPOPlatform()?this.adObj.num=-1:G_PlatHelper.isVIVOPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_sgin.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_sgin,()=>{this.toSgin(this.viewProp.m_sgin,!1)})}),this.viewProp.m_sgin_ad.on(Laya.Event.CLICK,this,()=>{this.toSgin(this.viewProp.m_sgin_ad,!0)}),this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(this.pageName)})});let e=[],t=we.getPlayerInfo().getSginWeekCount();for(let i=1;i<=6;i++){let n=G_GameDB.getSginConfigByID(i),s=this.getSginObj(n,t);e.push({day:i,sginData:s})}this.viewProp.m_list.array=e,this.viewProp.m_list.renderHandler=new Laya.Handler(this,this.sginRender)}getSginObj(e,t){let i=new Object;i.id=e.id;let n=e.type.split("|"),s=t%n.length;return i.type=parseInt(n[s]),s=t%(n=e.count.split("|")).length,i.count=parseInt(n[s]),s=t%(n=e.isDouble.split("|")).length,i.isDouble=parseInt(n[s]),s=t%(n=e.param1.split("|")).length,i.param1=parseInt(n[s]),s=t%(n=e.name.split("|")).length,i.name=n[s],i}toSgin(e,t){if(we.getPlayerInfo().hasSginByDay())return void G_PlatHelper.showToast("今日已经签到!");if(this.isInSgin)return void G_PlatHelper.showToast("正在签到的路上哦!");this.isInSgin=!0;let i=e=>{let t=e?this.sginTimes:1,i=we.getPlayerInfo().getNextSginDay(),n=G_GameDB.getSginConfigByID(i),s=we.getPlayerInfo().getSginWeekCount(),o=this.getSginObj(n,s),r=new Object;r.rewardData=[],r.rewardData.push({type:o.type,count:o.count*t,paraId:o.param1}),we.getUIMgr().openUI(we.getUIName().GetRewardView,r),this.isInSgin=!1,we.getPlayerInfo().markSginToday(),we.getUIMgr().closeUI(this.pageName)};t?ce.getIns().shareOrAd(e,()=>{i(!0)},()=>{this.isInSgin=!1}):i(!1)}sginRender(e,t){let i=e.getComponent(Os);i||(i=e.addComponent(Os)).init(),i.setData(this.viewProp.m_list.getItem(t))}pageOpen(e){super.pageOpen(e),this.isInSgin=!1,ce.getIns().setAdBtnIcon(this.viewProp.m_sgin_ad),this.refershDay(),this.refershView(),this.refershNative()}refershNative(){this.m_oppo_native.hideUI(),G_PlatHelper.isOPPOPlatform()&&this.m_oppo_native.showUI()}showAdCallBack(){super.showAdCallBack(),C.getIns().createTwoCustomAd()}refershDay(){this.viewProp.m_list.refresh(),this.viewProp.m_server_sel.visible=we.getPlayerInfo().getSginDayCount()>=7}refershView(){this.viewProp.m_sgin_ad.visible=!1,this.viewProp.m_sgin.visible=!1,we.getPlayerInfo().hasSginByDay()||(this.viewProp.m_sgin_ad.visible=!0,this.viewProp.m_sgin.visible=!0)}}class Es extends O{constructor(){super(),this.closeFun=null,this.isInShare=!1,this.shareRewardCount=10,this.isNeedTween=!0}pageInit(){super.pageInit(),this.viewProp.m_close.on(Laya.Event.CLICK,this,function(){we.getUIMgr().closeUI(we.getUIName().ShareView)}),this.viewProp.m_to_share.on(Laya.Event.CLICK,this,function(){this.doShare()}),this.viewProp.m_icon.on(Laya.Event.CLICK,this,function(){this.doShare()})}pageOpen(e){super.pageOpen(e),this.isInShare=!1,this.closeFun=e.closeFun}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}doShare(){this.isInShare||(this.isInShare=!0,A.getIns().shareVideo(function(e){e&&(we.getPlayerInfo().addItemByType(1,this.shareRewardCount,0),G_PlatHelper.showToast("恭喜获得{0}钻石!".format(this.shareRewardCount)),we.getUIMgr().closeUI(we.getUIName().ShareView)),this.isInShare=!1}.bind(this)))}}class ks extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.isShowTop=!0,this.maxSkinId=0,this.curSkinId=0,this.rightTween=new E;let e=[];e.push({time:800,prop:{right:-500},ease:Laya.Ease.quintOut}),e.push({time:800,prop:{right:0},ease:Laya.Ease.quintOut}),this.rightTween.setTweenVals(e),this.nameTween=new E;let t=[];t.push({time:500,prop:{right:-500},ease:Laya.Ease.quintOut}),t.push({time:500,prop:{right:143},ease:Laya.Ease.quintOut}),this.nameTween.setTweenVals(t),this.carTween=new E;let i=[];i.push({time:500,prop:{left:-400},ease:Laya.Ease.quintOut}),i.push({time:500,prop:{left:0},ease:Laya.Ease.quintOut}),this.carTween.setTweenVals(i)}pageInit(){super.pageInit(),this.m_oppo_native=this.viewProp.m_oppo_native.getComponent(Xn),this.m_oppo_native.init(),this.m_oppo_native.refershNative(),G_PlatHelper.isOPPOPlatform()?this.adObj.num=-1:G_PlatHelper.isVIVOPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_close.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(this.pageName)})}),this.viewProp.m_left_array.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_left_array,()=>{this.leftClick()})}),this.viewProp.m_right_array.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_right_array,()=>{this.rightClick()})}),this.viewProp.m_ad_buy.on(Laya.Event.CLICK,null,()=>{this.toBuy(this.viewProp.m_ad_buy,6)}),this.viewProp.m_diam_buy.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_diam_buy,()=>{this.toBuy(this.viewProp.m_diam_buy,1)})}),this.viewProp.m_equipUp.on(Laya.Event.CLICK,null,()=>{ce.getIns().btnAction(this.viewProp.m_equipUp,()=>{this.toEquip()})}),this.viewProp.m_UpStar_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_UpStar_btn,()=>{this.toUpStar()})}),this.carTween.setTarget(this.viewProp.m_left),this.rightTween.setTarget(this.viewProp.m_right),this.nameTween.setTarget(this.viewProp.m_carName_bg),this.carTween.setEndCallBack(()=>{this.viewProp.m_left_array.visible=!0,this.viewProp.m_right_array.visible=!0}),this.viewProp.m_hp_prop_list.renderHandler=new Laya.Handler(this,this.propRender),this.viewProp.m_hurt_prop_list.renderHandler=new Laya.Handler(this,this.propRender),this.viewProp.m_def_prop_list.renderHandler=new Laya.Handler(this,this.propRender),this.viewProp.m_star.renderHandler=new Laya.Handler(this,this.starRender),we.getIns().canshow3DImage()&&(this.viewProp.m_skin_icon.source=new Laya.Texture(ne.getIns().cameraMgr.getModelCamera().renderTarget,Laya.Texture.DEF_UV)),this.viewProp.m_ad_buy.visible=!1}pageOpen(e){super.pageOpen(e),ce.getIns().setAdBtnIcon(this.viewProp.m_ad_buy),this.maxSkinId=G_GameDB.getAllPlayerConfigCount(),this.curSkinId=we.getPlayerInfo().getSkinId(),this.refershPlayer(this.curSkinId),this.refershNative()}pageOpenTweenOver(){super.pageOpenTweenOver(),this.rightTween.end(),this.rightTween.play(),this.nameTween.end(),this.nameTween.play(),this.carTween.end(),this.viewProp.m_left_array.visible=!1,this.viewProp.m_right_array.visible=!1,this.carTween.play()}hightPageClose(e){super.hightPageClose(e),e!=we.getUIName().GetGoldView&&e!=we.getUIName().GetDiamView||this.refershBtn(G_GameDB.getPlayerConfigByID(this.curSkinId))}leftClick(){this.curSkinId--,this.curSkinId<=0&&(this.curSkinId=this.maxSkinId),this.refershPlayer(this.curSkinId)}rightClick(){this.curSkinId++,this.curSkinId>this.maxSkinId&&(this.curSkinId=1),this.refershPlayer(this.curSkinId)}refershNative(){this.m_oppo_native.hideUI(),G_PlatHelper.isOPPOPlatform()&&this.m_oppo_native.showUI()}hightPageClose(e){super.hightPageClose(e),e==we.getUIName().GetDiamView&&this.refershPlayer(this.curSkinId)}refershPlayer(e){let t=we.getPlayerInfo().hasSkinById(e),i=G_GameDB.getPlayerConfigByID(e),n=G_GameDB.getQualityByID(i.quality),s=we.getPlayerInfo().getSkinId();this.viewProp.m_has_equip.visible=!1,this.viewProp.m_canBuy.visible=!1,this.viewProp.m_UpStar.visible=!1,this.viewProp.m_chip_box.skin=G_ResPath.rareBoxPath.format(n.rareBg),this.viewProp.m_chip_count.text=we.getPlayerInfo().getSkinChipById(e)+"/"+i.combineChip,this.viewProp.m_chip_skin.skin=G_ResPath.skinPath.format(i.icon),this.viewProp.m_equipUp.visible=!1;let o=G_MaxStar,r=we.getPlayerInfo().getSkinDataById(e),a=r.star%5;0!=r.star&&0==a&&(a=5);let l=StarMgr.getIns().getStarIcon(r.star),h=[];for(let e=0;e<a;e++)h.push(l);if(this.viewProp.m_star.array=h,t){let t=s==e;if(this.viewProp.m_owner_icon.skin="game/skin/yiyongyou.png",this.viewProp.m_equipUp.visible=!t,this.viewProp.m_UpStar.visible=!0,r.star>=o)this.viewProp.m_UpStar_btn.gray=!0,this.viewProp.m_upStar_chip_bg.visible=!1,this.viewProp.m_upStar_diam_bg.visible=!1;else{this.viewProp.m_upStar_chip_bg.visible=!0,this.viewProp.m_upStar_diam_bg.visible=!0,this.viewProp.m_upStar_chip_bg.skin=G_ResPath.rareBoxPath.format(n.rareBg),this.viewProp.m_upStar_chip_icon.skin=G_ResPath.skinPath.format(i.icon);let t=StarMgr.getIns().getStarUseMat(e,r.star+1);this.viewProp.m_upStar_chip_count.text="x"+t.chip,this.viewProp.m_upStar_diam_count.text="x"+t.diam,ce.getIns().setColor(this.viewProp.m_upStar_chip_count,r.skinChip>=t.chip),ce.getIns().setColor(this.viewProp.m_upStar_diam_count,ce.getIns().canUseItemNotTips(t.diam,1))}t?(this.m_oppo_native.owner.right=375,this.viewProp.m_UpStar.right=60,this.viewProp.m_equipUp.centerX=157):(this.viewProp.m_equipUp.centerX=157,this.viewProp.m_UpStar.right=286,this.m_oppo_native.owner.right=602)}else this.viewProp.m_combine_chip_bg.skin=G_ResPath.rareBoxPath.format(n.rareBg),this.viewProp.m_combine_chip_icon.skin=G_ResPath.skinPath.format(i.icon),this.viewProp.m_combine_chip_count.text=i.combineChip,ce.getIns().setColor(this.viewProp.m_combine_chip_count,r.skinChip>=i.combineChip),this.viewProp.m_owner_icon.skin="game/skin/weiyongyou.png",this.viewProp.m_canBuy.visible=!0;we.getIns().canshow3DImage()?ne.getIns().showUIModel(e):this.viewProp.m_skin_icon.skin=G_ResPath.skinPath.format(i.icon),this.viewProp.m_pName.text=i.name;let c=StarMgr.getIns().getPropViewData(e,r.star);this.viewProp.m_hp_prop_list.repeatX=c.hpCount,this.viewProp.m_hp_prop_list.array=c.hpData,this.viewProp.m_hurt_prop_list.repeatX=c.hurtCount,this.viewProp.m_hurt_prop_list.array=c.hurtData,this.viewProp.m_def_prop_list.repeatX=c.defCount,this.viewProp.m_def_prop_list.array=c.defData,this.refershBtn(i)}refershBtn(e){if(!e)return void console.error("皮肤数据错误:",e,this.curSkinId);let t=this.getSkinSaleData(e.unLockCount),i=BigNumber(t[1]);this.viewProp.m_combine_diam_count.text="x"+G_Utils.bigNumber2StrNumber(i),ce.getIns().setColor(this.viewProp.m_combine_diam_count,ce.getIns().canUseItemNotTips(i,1))}getSkinSaleData(e){let t=new Object,i=e.split(","),n=null;for(let e=0;e<i.length;e++)t[(n=i[e].split("&"))[0]]=parseInt(n[1]);return t}toBuy(e,t){let i=G_GameDB.getPlayerConfigByID(this.curSkinId);if(we.getPlayerInfo().getSkinChipById(this.curSkinId)<i.combineChip)return void G_PlatHelper.showToast("请收集足够的碎片!");let n=()=>{let e=this.getSumbitId(this.curSkinId);S.getIns().EnterAction(e,e),we.getPlayerInfo().addItemByType(4,1,this.curSkinId),we.getPlayerInfo().setCurSelectSkinId(this.curSkinId),we.getPlayerInfo().combineSkin(this.curSkinId),this.refershPlayer(this.curSkinId),ne.getIns().showChangeEf()};if(6==t)ce.getIns().shareOrAd(e,()=>{n()});else if(3==t){let e=this.getSkinSaleData(i.unLockCount),s=BigNumber(e[3]);if(!ce.getIns().canUseItem(s,t))return;ce.getIns().useItem(s,t),n()}else if(1==t){let e=this.getSkinSaleData(i.unLockCount),s=BigNumber(e[1]);if(!ce.getIns().canUseItem(s,t))return;ce.getIns().useItem(s,t),n()}}getSumbitId(e){switch(e){case 2:return 1004;case 3:return 1005;case 4:return 1006;case 5:return 2001;case 6:return 2002;case 7:return 2003;default:return 2004}}toEquip(){we.getPlayerInfo().hasSkinById(this.curSkinId)?(ne.getIns().showChangeEf(),we.getPlayerInfo().setCurSelectSkinId(this.curSkinId),this.refershPlayer(this.curSkinId),G_PlatHelper.showToast("装备成功!")):G_PlatHelper.showToast("皮肤尚未获得!")}propRender(e,t){let i=e.parent.parent.getItem(t);e.value=i.pro}toUpStar(){let e=G_MaxStar,t=we.getPlayerInfo().getSkinDataById(this.curSkinId);if(t.star>=e)return void G_PlatHelper.showToast("已达最高星级!");let i=StarMgr.getIns().getStarUseMat(this.curSkinId,t.star+1);t.skinChip<i.chip?G_PlatHelper.showToast("碎片不足!"):ce.getIns().canUseItem(i.diam,1)&&(ce.getIns().useItem(i.chip,2,this.curSkinId),ce.getIns().useItem(i.diam,1),we.getPlayerInfo().upSkinStarById(this.curSkinId),this.refershPlayer(this.curSkinId),G_PlatHelper.showToast("升星成功!"))}starRender(e,t){e.skin=G_ResPath.starPath.format(this.viewProp.m_star.getItem(t))}}class Ns extends O{constructor(){super(),this.autoDepth=!1,this.teachTarget=null,this.teachData=null,this.fingerTween=oe.getIns().getTween();let e=[];e.push({time:500,prop:{scaleX:1,scaleY:1},ease:Laya.Ease.circOut}),e.push({time:500,prop:{scaleX:1.1,scaleY:1.1},ease:Laya.Ease.circOut}),this.fingerTween.setTweenVals(e),this.fingerTween.setLoop(!0),this.otherTarget=null}pageInit(){super.pageInit(),this.fingerTween.setTarget(this.viewProp.m_finger),this.viewProp.m_bg.on(Laya.Event.CLICK,this,()=>{this.teachData&&1==this.teachData.clickMaskToNext&&this.closeFun()})}pageOpen(e){super.pageOpen(e),this.fingerTween.play(),this.teachTarget=e.target,this.initTarget(this.teachTarget.owner);let t=G_GameDB.getTeachByID(T.getIns().getCurTeachId()),i=t.otherKey;"0"!=i&&(this.otherTarget=T.getIns().getTeachBtn(i),this.initTarget(this.otherTarget.owner)),this.setUi(t)}actionStart(e){if(e.btnKey.indexOf("yx_buff_")>=0){let t=parseInt(e.btnKey.split("_")[2]);if(1==t){let e=ne.getIns().configMgr.getStartPoint();ne.getIns().playerMgr.setStartPos(e.transform.position,e.transform.rotationEuler)}let i=ne.getIns().configMgr.getBuffById(t);if(i){let e=ne.getIns().cameraMgr.worldPosToScreenPos(i.owner.transform.position);e.y-=80,this.setFingerPos(this.owner,this.viewProp.m_finger,e,this.teachData.fingerRot)}else console.error("buff不存在:",i)}else if(e.btnKey.indexOf("yx_kill_enemy")>=0){let e=ne.getIns().configMgr.getTeachEnemy();if(e){let t=ne.getIns().cameraMgr.worldPosToScreenPos(e.owner.transform.position);t.y-=90,this.setFingerPos(this.owner,this.viewProp.m_finger,t,this.teachData.fingerRot)}}}actionEnd(e){11==e.id&&ne.getIns().configMgr.loadEnemys(we.getIns().levelData,()=>{T.getIns().enableTeachStep(13)})}initTarget(e){e.lastX=e.x,e.lastY=e.y,e.lastParent=e.parent;let t=new Laya.Point;t=e.localToGlobal(new Laya.Point(e.width/2,e.height/2),!0),e.point=t,e.centerY=NaN,e.centerX=NaN,this.owner.addChild(e),e.pos(t.x,t.y)}hintMask(){this.viewProp.m_mask.visible=!1,this.viewProp.m_teach_bg_right.visible=!1,this.viewProp.m_teach_bg_left.visible=!1,this.viewProp.m_teach_bg_min.visible=!1}setUi(e){1==e.enableClick&&this.addClick(this.teachTarget.owner),this.teachData=e,this.viewProp.m_bg.visible=1==e.isForce,this.viewProp.m_mask.visible=1==e.isMask,this.viewProp.m_finger.visible=!1,this.viewProp.m_finger2.visible=!1;let t=e.fingerOffect.split(","),i=parseFloat(t[0]),n=parseFloat(t[1]);1==e.isFinger&&(this.setFingerCenter(this.teachTarget.owner,this.viewProp.m_finger,{x:i,y:n},e.fingerRot),this.otherTarget&&this.setFingerCenter(this.otherTarget.owner,this.viewProp.m_finger2,{x:i,y:n},e.fingerRot)),this.viewProp.m_teach_bg_left.visible=!1,this.viewProp.m_teach_bg_right.visible=!1,this.viewProp.m_teach_bg_min.visible=!1;let s=e.tipsPos.split(",");if(1==e.needTipsBg){this.viewProp.m_tips_in_Bg_left.text=e.tips,this.viewProp.m_tips_in_Bg_right.text=e.tips;let t=this.viewProp.m_teach_bg_left;1!=e.bgForward&&(t=this.viewProp.m_teach_bg_right),t.visible=!0,t.tween&&(t.tween.clear(),t.tween=null),t.scaleX=.5,t.scaleY=.5,t.tween=Laya.Tween.to(t,{scaleX:1,scaleY:1},200,Laya.Ease.linearOut,null,0,!0,!1)}else 0==e.needTipsBg&&(this.viewProp.m_teach_bg_min.visible=!0,this.viewProp.m_tips.text=e.tips,this.viewProp.m_teach_bg_min.centerX=parseFloat(s[0]),this.viewProp.m_teach_bg_min.centerY=parseFloat(s[1]),this.teachTarget.owner.addChild(this.viewProp.m_teach_bg_min));this.actionStart(e)}setFingerCenter(e,t,i,n){t.visible=!0,e.addChild(t),t.centerX=i.x,t.centerY=i.y,t.rotation=n}setFingerPos(e,t,i,n){t.visible=!0,e.addChild(t),t.centerY=NaN,t.centerX=NaN,t.x=i.x,t.y=i.y,t.rotation=n}mouseDownFun(){this.teachData&&1==this.teachData.clickHintMask&&this.hintMask()}addClick(e){e.on(Laya.Event.CLICK,this,this.closeFun),e.on(Laya.Event.MOUSE_DOWN,this,this.mouseDownFun)}clearClick(e){e&&e._events&&(e.off(Laya.Event.CLICK,this,this.closeFun),e.off(Laya.Event.MOUSE_DOWN,this,this.mouseDownFun))}closeFun(){let e=this.teachTarget.getStepKey();this.clearTarget(),we.getUIMgr().closeUI(we.getUIName().TeachView),T.getIns().closeTeachStep(e),this.actionEnd(this.teachData)}recycleFinger(){this.viewProp.m_finger.parent!=this.owner&&this.owner.addChild(this.viewProp.m_finger),this.viewProp.m_teach_bg_min.parent!=this.owner&&this.owner.addChild(this.viewProp.m_teach_bg_min),this.viewProp.m_finger2.parent!=this.owner&&this.owner.addChild(this.viewProp.m_finger2)}clearTarget(){if(this.teachTarget){let e=this.teachTarget.owner;this.teachTarget=null,this.recycleFinger(),this.clearClick(e),e.lastParent.addChild(e),e.x=e.lastX,e.y=e.lastY,this.viewProp.m_finger.visible=!1,this.viewProp.m_finger2.visible=!1,this.viewProp.m_mask.visible=!1,this.viewProp.m_teach_bg_min.visible=!1}if(this.otherTarget){let e=this.otherTarget.owner;this.otherTarget=null,e.lastParent.addChild(e),e.x=e.lastX,e.y=e.lastY}}depChangeCallBack(){super.depChangeCallBack(),this.owner.zOrder=we.getUIMgr().curPageDepth+40}pageClose(){super.pageClose(),this.fingerTween.end()}}class Ls extends O{constructor(){super(),this.isEnter=!1}pageInit(){super.pageInit(),this.viewProp.m_lv_ok.on(Laya.Event.CLICK,this,()=>{this.toGame()}),this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{we.getUIMgr().closeUI(we.getUIName().ToolsView)}),this.viewProp.m_CompileShader.on(Laya.Event.CLICK,this,()=>{le.getIns().debugModeShader()}),this.viewProp.m_viewOpen.on(Laya.Event.CLICK,this,()=>{le.getIns().openBoxView()})}pageOpen(e){super.pageOpen(e),this.isEnter=!1}toGame(){this.isEnter||(this.isEnter=!0,ne.getIns().cleanScenes(),we.getIns().toGame(parseInt(this.viewProp.m_lv_input.text),1))}}class Ds extends Yn{constructor(){super()}init(){super.init()}setData(e){super.setData(e),this.viewProp.m_prop_decs.text="{0}   +{1}%".format(this.getPropName(e.key),100*e.val)}getPropName(e){switch(e){case PropKey.hp:return"血量";case PropKey.hurt:return"伤害";case PropKey.def:return"防御";case PropKey.defRate:return"免伤";case PropKey.speed:return"速度";case PropKey.bounceHurt:return"反伤";default:return"未命名"}}}class Bs extends Yn{constructor(){super(),this.curTrainIndex=0}init(){super.init(),this.owner.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.owner,()=>{DriverLicense.getIns().canTrain(this.data[0].licenseType)?this.toGame(!DriverLicense.getIns().hasLicenseByLicenseType(this.data[0].licenseType)):G_PlatHelper.showToast("未达开启条件!")})}),this.viewProp.m_prop.renderHandler=new Laya.Handler(this,this.propRender)}toGame(e){let t=we.getUIMgr().getPageByName(we.getUIName().TrainView);t&&t.toGame(this.data[this.curTrainIndex],e)}setData(e){super.setData(e);let t=null,i=-1;for(let t=0;t<e.length;t++)if(!DriverLicense.getIns().hasLicenseById(e[t].id)){i=t;break}let n=-1==i,s=0;-1==i?(i=0,s=e.length):s=i,this.curTrainIndex=i,this.viewProp.m_pro_txt.text="进度 {0}/{1}".format(s,e.length),t=e[i],this.viewProp.m_title.skin=G_ResPath.trainTitle.format(t.licenseType),this.viewProp.m_icon.skin=G_ResPath.trainIcon.format(t.licenseType),this.viewProp.m_diam.visible=!1,this.viewProp.m_free_Text.visible=!1;let o=t.useMat.split("&"),r=parseInt(o[1]);r>0?(this.viewProp.m_diam.visible=!0,this.viewProp.m_diam_count.text=G_Utils.bigNumber2StrNumber(BigNumber(r))):this.viewProp.m_free_Text.visible=!0;let a=DriverLicense.getIns().hasLicenseByLicenseType(t.licenseType-1);1!=t.licenseType&&(this.viewProp.m_state_tips.skin="game/trainView/limit{0}.png".format(t.licenseType)),n?(this.viewProp.m_state_txt.skin="game/trainView/txt3.png",this.viewProp.m_state_tips.visible=!1,this.owner.skin="game/trainView/has_get.png"):a?(this.viewProp.m_state_txt.skin="game/trainView/txt2.png",this.viewProp.m_state_tips.visible=!1,this.owner.skin="game/trainView/can_train.png"):(this.viewProp.m_state_txt.skin="game/trainView/txt1.png",this.viewProp.m_state_tips.visible=!0,this.owner.skin="game/trainView/dont_reach.png"),this.owner.gray=!a;let l=we.getPlayerInfo().getLicensePropObj(t.upProp),h=[],c=Object.keys(l);for(let e=0;e<c.length;e++)h.push({key:c[e],val:l[c[e]]});this.viewProp.m_prop.array=h}propRender(e,t){let i=e.getComponent(Ds);i||(i=e.addComponent(Ds)).init(),i.setData(this.viewProp.m_prop.getItem(t))}}class Ms extends O{constructor(){super(),this.isShowTop=!0,this.isToGame=!1,this.isTweenOpen=!1,this.adObj=new Object}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_back.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_back,()=>{we.getUIMgr().closeUI(we.getUIName().TrainView)})}),this.viewProp.m_list.renderHandler=new Laya.Handler(this,this.trainRender);let e=DriverLicense.getIns().getAllLicense(),t=[],i=Object.keys(e),n=0;for(let s=0;s<i.length;s++)n=i[s],t.push(e[n]);this.viewProp.m_list.array=t}pageOpen(e){super.pageOpen(e),this.isTweenOpen=!0,this.refreshList(),this.isToGame=!1}refreshList(){this.viewProp.m_list.refresh()}trainRender(e,t){let i=e.getComponent(Bs);if(i||(i=e.addComponent(Bs)).init(),this.isTweenOpen){let i=this.viewProp.m_list.array.length;t==i-1&&(this.isTweenOpen=!1),e.toX||0==e.toX||(e.toX=e.x);let n=e.toX;e.x=n+500,e.lTween&&(e.lTween.clear(),e.lTween=null),e.lTween=Laya.Tween.to(e,{x:n},500+40*(i-t),Laya.Ease.quintOut,null,40*t,!0,!1)}i.setData(this.viewProp.m_list.getItem(t))}toGame(e,t=!0){if(!this.isToGame){if(this.isToGame=!0,t){let t=e.useMat.split("&"),i=parseInt(t[0]),n=parseInt(t[1]);if(!ce.getIns().canUseItem(n,i))return void(this.isToGame=!1);ce.getIns().useItem(n,i)}we.getIns().toGame(e.id,2)}}}class Rs extends O{constructor(){super(),this.callBack=null,this.licenseId=1,this.isNeedTween=!0}pageInit(){super.pageInit(),this.viewProp.m_start_btn.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_start_btn,()=>{we.getUIMgr().closeUI(we.getUIName().TrainWantedView)})})}pageOpen(e){super.pageOpen(e),this.callBack=e.callBack,this.licenseId=e.licenseId;let t=G_GameDB.getDriverLicenseByID(this.licenseId);this.viewProp.m_decs.text=t.decs,this.viewProp.m_icon.skin=G_ResPath.trainIcon.format(this.licenseId),this.viewProp.m_train_name.skin=G_ResPath.trainTitle.format(this.licenseId)}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.callBack),this.callBack=null}}class xs extends O{constructor(){super(),this.closeFun=null,this.showSkinId=null,this.adObj=new Object,this.adObj.num=2,this.canClick=!0,this.isNeedTween=!0,this.succ=!1}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_close.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_close,()=>{we.getUIMgr().closeUI(we.getUIName().TryUseSkinView)})}),this.viewProp.m_try.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_try,()=>{this.canClick&&(this.canClick=!1,ce.getIns().shareOrAd(this.viewProp.m_try,()=>{this.toUse()},()=>{this.canClick=!0}))})}),this.viewProp.m_free_try.on(Laya.Event.CLICK,this,()=>{ce.getIns().btnAction(this.viewProp.m_free_try,()=>{this.canClick&&this.toUse()})}),this.viewProp.m_hp_prop_list.renderHandler=new Laya.Handler(this,this.propRender),this.viewProp.m_hurt_prop_list.renderHandler=new Laya.Handler(this,this.propRender),this.viewProp.m_def_prop_list.renderHandler=new Laya.Handler(this,this.propRender),we.getIns().canshow3DImage()&&(this.viewProp.m_skin.source=new Laya.Texture(ne.getIns().cameraMgr.getModelCamera().renderTarget,Laya.Texture.DEF_UV))}propRender(e,t){let i=e.parent.parent.getItem(t);e.value=i.pro}pageOpen(e){super.pageOpen(e),this.viewProp.m_free_try.visible=!1,this.viewProp.m_try.visible=!1,we.getPlayerInfo().getShowLevelCount()<=2?(this.viewProp.m_free_try.visible=!0,this.showSkinId=6):(this.viewProp.m_try.visible=!0,this.showSkinId=e.skinId),we.getIns().trySkinId=null,this.succ=!1,ce.getIns().setAdBtnIcon(this.viewProp.m_try),this.closeFun=e.closeFun,this.canClick=!0,this.showData(this.showSkinId)}showData(e){let t=G_GameDB.getPlayerConfigByID(e),i=we.getPlayerInfo().getSkinDataById(e);this.viewProp.m_playerName.text=t.name,we.getIns().canshow3DImage()?ne.getIns().showUIModel(e):this.viewProp.m_skin.skin=G_ResPath.skinPath.format(t.icon);let n=StarMgr.getIns().getPropViewData(e,i.star);this.viewProp.m_hp_prop_list.repeatX=n.hpCount,this.viewProp.m_hp_prop_list.array=n.hpData,this.viewProp.m_hurt_prop_list.repeatX=n.hurtCount,this.viewProp.m_hurt_prop_list.array=n.hurtData,this.viewProp.m_def_prop_list.repeatX=n.defCount,this.viewProp.m_def_prop_list.array=n.defData}toUse(){this.succ=!0,we.getUIMgr().closeUI(we.getUIName().TryUseSkinView)}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun,this.succ,this.showSkinId),this.closeFun=null}}class Us extends O{constructor(){super(),this.getGold=100,this.adObj=new Object,this.adObj.num=2,this.canClick=!0,this.closeFun=null,this.isNeedTween=!0,this.type=1}pageInit(){super.pageInit(),G_PlatHelper.isOPPOPlatform()&&(this.adObj.num=3),this.viewProp.m_n_get.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_n_get),this.canClick&&this.toGetGold(!1)}),this.viewProp.m_d_get.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_d_get),ce.getIns().shareOrAd(this.viewProp.m_d_get,function(){this.toGetGold(!0)}.bind(this),function(){}.bind(this),G_ShareScene.SS_FREE_TRY)})}toGetGold(e){let t=this.getGold;e&&(t*=2),G_PlayerInfo.plusCoin(t),G_WXHelper.showToast("获得金币X"+t),we.getUIMgr().closeUI(we.getUIName().TTGetItemView)}pageOpen(e){super.pageOpen(e),ce.getIns().setAdBtnIcon(this.viewProp.m_d_get),this.closeFun=e?e.closeFun:null,this.type=e.type,this.getGold=e.count,this.canClick=!1,this.viewProp.m_count.text="X"+this.getGold;let t=this.viewProp.m_n_get.parent.height/2+Laya.stage.height/2-100;ce.getIns().bottomDoMove(this.viewProp.m_n_get,t,990,function(e){e||ce.getIns().playBtnShow(this.viewProp.m_n_get,null,G_BtnDoShowTime),this.canClick=!0}.bind(this),G_BtnDelayTime,G_BrnMoveTimer)}pageClose(){super.pageClose(),ce.getIns().handlerFun(this.closeFun),this.closeFun=null}}class Hs extends Laya.Script{constructor(){super(),this.viewProp=new Object,this.clickFun=null,this.boxData=null}init(){let e=[];ce.getIns().getChildBySgin(this.owner,"m_",e);for(let t=0;t<e.length;t++)this.viewProp[e[t].name]=e[t];this.viewProp.m_box.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_box),this.boxData.isAdBox?ce.getIns().shareOrAd(this.viewProp.m_box,function(){ce.getIns().handlerFun(this.clickFun,this)}.bind(this)):ce.getIns().handlerFun(this.clickFun,this)})}setClickFun(e){this.clickFun=e}setData(e){this.boxData=e,this.viewProp.m_box.visible=!e.isOpen,this.viewProp.m_open.visible=e.isOpen,this.viewProp.m_diam.visible=1==e.type,this.viewProp.m_gold.visible=3==e.type,this.viewProp.m_spped.visible=7==e.type,this.viewProp.m_count.visible=e.isOpen,this.viewProp.m_count.text=e.valT,this.viewProp.m_ad_icon.visible=e.isAdBox}}class Vs extends O{constructor(){super(),this.adObj=new Object,this.adObj.num=2,this.viewAd=!0,this.clickTimes=3,this.curClickTimes=0,this.useAd=!1,this.isNeedTween=!0,this.boxItems=[],this.rewards=[{id:1,type:1,count:20,rate:30,showT:"获得20钻石"},{id:2,type:3,count:4,rate:30,showT:"获得4小时收益"},{id:3,type:1,count:40,rate:5,showT:"获得40钻石"},{id:4,type:3,count:24,rate:5,showT:"获得24小时收益"},{id:4,type:7,count:150,rate:5,showT:"获得加速时间150s"}]}pageInit(){super.pageInit(),this.viewProp.m_cancel.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_cancel),this.clickBtn(!1,this.viewProp.m_cancel)}),this.viewProp.m_ad_btn.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_ad_btn),this.clickBtn(!0,this.viewProp.m_ad_btn)}),this.viewProp.m_viewAd.on(Laya.Event.CLICK,this,function(){this.viewAd=!this.viewAd,this.setViewAdBtn(this.viewAd)}),this.viewProp.m_back.on(Laya.Event.CLICK,this,function(){ce.getIns().btnAction(this.viewProp.m_back),we.getUIMgr().closeUI(we.getUIName().TTOpenBoxView)}),this.viewProp.m_box_list.renderHandler=new Laya.Handler(this,this.renderHandler),this.initList()}initList(){for(let e=0;e<9;e++)this.boxItems.push({id:e,isOpen:!1,type:0,valT:"",isAdBox:!1});this.viewProp.m_box_list.array=this.boxItems}reSetList(){for(let e=0;e<this.boxItems.length;e++)this.boxItems[e].isOpen=!1,this.boxItems[e].type=0,this.boxItems[e].isAdBox=!1;if(le.getIns().getForeceSelect()){let e=ce.getIns().getRandomArrayElements(this.boxItems,3);for(let t=0;t<e.length;t++)e[t].isAdBox=!0}}renderHandler(e,t){this.setData(e,t)}setData(e,t){let i=e.getComponent(Hs);i||((i=e.addComponent(Hs)).init(),i.setClickFun(function(e){this.itemClick(e)}.bind(this))),i.setData(this.viewProp.m_box_list.getItem(t))}pageOpen(e){super.pageOpen(e),this.curClickTimes=0,this.useAd=!1,this.viewProp.m_back.visible=!1,this.viewProp.m_viewAd.visible=!1,this.viewProp.m_ad_btn.visible=!1,this.viewProp.m_cancel.visible=!1,this.viewAd=le.getIns().getForeceSelect(),this.checkBtn(),this.setViewAdBtn(this.viewAd),this.reSetList(),this.viewProp.m_box_list.refresh()}setViewAdBtn(e){this.viewProp.m_view_ad_check.visible=e,this.checkBtn()}clickBtn(e,t){e?ce.getIns().shareOrAd(t,function(){this.useAd=!0,this.curClickTimes=0,this.checkBtn()}.bind(this)):we.getUIMgr().closeUI(we.getUIName().TTOpenBoxView)}checkBtn(){this.useAd?(this.viewProp.m_ad_btn.visible=!1,this.viewProp.m_cancel.visible=!1,this.viewProp.m_viewAd.visible=!1,this.curClickTimes>=this.clickTimes&&(this.viewProp.m_back.visible=!0)):this.curClickTimes>=this.clickTimes?(this.viewProp.m_ad_btn.visible=this.viewAd,this.viewProp.m_cancel.visible=!this.viewAd,this.viewProp.m_viewAd.visible=!0):(this.viewProp.m_ad_btn.visible=!1,this.viewProp.m_cancel.visible=!1,this.viewProp.m_viewAd.visible=!1);let e=!0;for(let t=0;t<this.boxItems.length;t++)if(!this.boxItems[t].isOpen){e=!1;break}e&&(this.viewProp.m_back.visible=!0)}canOpen(){return this.curClickTimes<this.clickTimes}itemClick(e){if(!this.canOpen())return void G_PlatHelper.showToast("次数已经用完");let t=e.boxData.id,i=this.boxItems[t];i.isOpen=!0;let n=ce.getIns().getRandArrayIndex(this.rewards),s=this.rewards[n];i.type=s.type,i.valT=s.showT,this.getReward(s),this.refreshItem(t),e.boxData.isAdBox||this.curClickTimes++,this.checkBtn()}refreshItem(e){this.viewProp.m_box_list.changeItem(e,this.viewProp.m_box_list.getItem(e))}getReward(e){switch(e.type){case 1:we.getPlayerInfo().addItemByType(1,e.count,0),G_PlatHelper.showToast("获得{0}钻石".format(e.count));break;case 3:let t=G_PlayerInfo.getAllEffect().times(60*e.count*60);we.getPlayerInfo().addItemByType(3,t,0),G_PlatHelper.showToast("获得{0}金币".format(G_Utils.bigNumber2StrNumber(t)));break;case 7:G_PlayerInfo.setSpeedToTime(1e3*e.count)}}}class Fs extends O{constructor(){super(),this.isStart=!1,this.rotationRang=2880,this.currotationRang=0,this.speedCut=.01,this.cutAngle=720,this.lerpVal=0,this.staticTime=3,this.itemData=new n,this.rewardData=0,this.adObj=new Object,this.adObj.num=2,this.isNeedTween=!0}pageInit(){super.pageInit(),G_PlatHelper.isOVPlatform()?this.adObj.num=2:this.adObj.num=-1,this.viewProp.m_colse.on(Laya.Event.CLICK,this,function(){this.isStart||(we.getUIMgr().closeUI(we.getUIName().TurntableView),ce.getIns().btnAction(this.viewProp.m_colse))}),this.viewProp.m_free.on(Laya.Event.CLICK,this,function(){this.isStart||(this.startRotation(),ce.getIns().btnAction(this.viewProp.m_free))}),this.viewProp.m_ad.on(Laya.Event.CLICK,this,function(){this.isStart||(G_Reportor.report(G_ReportEventName.EN_TURNTABLEVIEW_AD),ce.getIns().shareOrAd(this.viewProp.m_ad,function(){this.startRotation()}.bind(this),null,G_ShareScene.SS_FREE_TRY),ce.getIns().btnAction(this.viewProp.m_ad))}),this.viewProp.m_mis_click.on(Laya.Event.CLICK,this,function(){this.isStart||(G_Reportor.report(G_ReportEventName.EN_TURNTABLEVIEW_AD),ce.getIns().shareOrAd(this.viewProp.m_mis_click,function(){this.startRotation()}.bind(this),null,G_ShareScene.SS_FREE_TRY),ce.getIns().btnAction(this.viewProp.m_mis_click))})}initItemData(){this.itemData.clear();let e=G_PlayerInfo.getAllEffect();this.itemData.add(this.createItemData(1,0,3,e.times(1440),10,24)),this.itemData.add(this.createItemData(2,60,-2,300,20,150)),this.itemData.add(this.createItemData(3,300,1,20,10,0)),this.itemData.add(this.createItemData(4,180,3,e.times(240),20,4));let t=G_PlayerInfo.getSelectGunId(),i=0;t?i=5:(t=G_PlayerInfo.getSkinId(),i=0);let n=G_GameDB.getSkinConfigByID(t);0!=i&&this.itemData.add(this.createItemData(5,120,4,1,50,t)),(t=G_PlayerInfo.getSelectGunId())?i=5:(t=G_PlayerInfo.getSkinId(),i=0),n=G_GameDB.getSkinConfigByID(t),0!=i&&this.itemData.add(this.createItemData(6,240,4,1,20,t))}createItemData(e,t,i,n,s,o){let r=new Object;return r.id=e,r.angle=t,r.rewardType=i,r.count=n,r.rate=s,r.param=o,r}pageOpen(){super.pageOpen(),this.initItemData(),this.resetTurntable(),this.isStart=!1,this.refershBtn(),ce.getIns().setAdBtnIcon(this.viewProp.m_ad),ce.getIns().setAdBtnIcon(this.viewProp.m_mis_click)}onUpdate(){if(this.isStart){if(this.viewProp.m_turntable.rotation>this.currotationRang-this.cutAngle){let e=(this.currotationRang-this.viewProp.m_turntable.rotation)/this.cutAngle;e<.2&&(e=.2),this.lerpVal+=this.speedCut*e}else this.lerpVal+=this.speedCut;this.lerpVal>=1&&(this.lerpVal=1),1==this.lerpVal?(this.viewProp.m_turntable.rotation=this.currotationRang,this.isStart=!1,this.getReward()):this.viewProp.m_turntable.rotation=ce.getIns().lerp(0,this.currotationRang,this.lerpVal)}}refershBtn(){let e=G_PlayerInfo.getSupTurntableTimes();this.viewProp.m_ad.visible=!1,this.viewProp.m_free.visible=!1,this.viewProp.m_mis_click.visible=!1,5==e?this.viewProp.m_free.visible=!0:e>0&&(this.viewProp.m_ad.visible=!0,this.viewProp.m_mis_click.visible=le.getIns().getForeceSelect()),this.reefershTips()}getReward(){this.refershBtn(),4==this.rewardData.rewardType?6==this.rewardData.id?(G_PlayerInfo.setGunInPos(this.rewardData.param),G_PlayerInfo.setGunInPos(this.rewardData.param)):G_PlayerInfo.setGunInPos(this.rewardData.param):-2==this.rewardData.rewardType?G_PlayerInfo.setSpeedToTime(1e3*this.rewardData.param):G_PlayerInfo.addItemByType(this.rewardData.rewardType,this.rewardData.count,this.rewardData.param),G_WXHelper.showToast("恭喜获得奖励")}resetTurntable(){this.viewProp.m_turntable.rotation=0,this.speedCut=1/(60*this.staticTime),this.lerpVal=0}startRotation(){this.resetTurntable(),this.isStart=!0,this.rewardData=this.getRandBoxData(),this.currotationRang=this.rotationRang+this.rewardData.angle,G_PlayerInfo.addTurntableTimes(1)}getRandBoxData(){let e=new n;for(var t=0;t<this.itemData.getCount();t++)e.add(this.itemData.getValue(t));e.sort(function(e,t){return e.rate<t.rate?-1:e.rate>t.rate?1:0});let i=0;for(t=0;t<e.getCount();t++)i+=e.getValue(t).rate;let s=Math.floor(Math.random()*i),o=e.getCount();for(t=0;t<o;t++)if((s-=e.getValue(t).rate)<=0)return e.getValue(t);return e.getValue(e.getCount()-1)}reefershTips(){let e=G_PlayerInfo.getSupTurntableTimes();this.viewProp.m_tips.text="剩余次数:"+e}}class Ws{static init(){let e=Laya.ClassUtils.regClass;e("script/game/Game.js",Ie),e("script/game/ctrl/WidgetMgr.js",ve),e("script/add/Page/LoadingView.js",ie),e("script/game/GameTest.js",Se),e("script/game/ctrl/AutoShake.js",Te),e("script/game/ctrl/AutoScale.js",Ge),e("script/game/Loading.js",Fn),e("script/game/ctrl/AdvLoadMgr.js",Fi),e("script/game/ui/popup/BannerPopup.js",Yi),e("script/game/ui/popup/Flow.js",Wn),e("script/game/ui/popup/Finish.js",jn),e("script/game/ui/popup/MoreGamePopup.js",Wi),e("script/game/ui/popup/NativeFlow.js",tn),e("script/game/ui/popup/InsertPopup.js",Xi),e("script/game/ui/popup/ExitPopup.js",Qi),e("script/game/ui/popup/ExitBtnPopup.js",Ji),e("script/game/ui/popup/FullScenePopup.js",ji),e("script/game/ui/popup/NewGameExitPopup.js",Zi),e("script/game/ui/popup/ScrollPopup.js",zi),e("script/game/ui/popup/FakeLoadingPopup.js",Ki),e("script/game/ui/popup/NewFullScenePopup.js",qi),e("script/game/ui/popup/RewardNavAdPopup.js",en),e("script/game/ui/popup/CaptureMgr.js",ki),e("script/game/ui/popup/Finger.js",Ni),e("script/game/ui/popup/Waiting.js",Ei),e("script/game/ui/popup/ClickPopup.js",$i),e("script/game/ui/popup/Modal.js",Oi),e("script/add/Page/AdFullView.js",qn),e("script/add/Page/AdView.js",Kn),e("script/add/UIFrame/TweenType.js",b),e("script/add/Page/DaliyTaskView.js",Jn),e("script/add/gameMgr/NativeInsert.js",Xn),e("script/add/Page/DelineReward.js",Zn),e("script/add/Page/EggsClue.js",es),e("script/add/Page/EggsView.js",ts),e("script/add/Page/ExtraWeapon.js",ns),e("script/add/Page/FightBoxView.js",os),e("script/add/Page/GameOverViewEnd.js",rs),e("script/add/UIFrame/PlatPosOffect.js",as),e("script/add/Page/GameOverFirst.js",ls),e("script/add/Page/GameOverView.js",hs),e("script/add/Page/GameView.js",N),e("script/add/ctrol/DragCorl.js",k),e("script/add/Page/GetDiamView.js",cs),e("script/add/Page/GetEggsCube.js",ds),e("script/add/Page/GetGoldView.js",us),e("script/add/Page/GetPowerView.js",ps),e("script/add/Page/GetRewardView.js",gs),e("script/add/Page/GoldFingerView.js",fs),e("script/add/Page/ManicureVipView.js",ms),e("script/add/Page/MisGetDaim.js",ys),e("script/add/Page/OpenBoxView.js",Is),e("script/add/Page/PopupView.js",vs),e("script/add/Page/ReadView.js",Ps),e("script/add/teach/TeachBtn.js",G),e("script/add/UIFrame/PlatHint.js",Ss),e("script/add/Page/RebornView.js",Ts),e("script/add/Page/SelectLevelModel.js",Gs),e("script/add/Page/SensibilitySettingView.js",bs),e("script/add/Page/SettingView.js",Cs),e("script/add/Page/SginView.js",As),e("script/add/Page/ShareView.js",Es),e("script/add/Page/SkinView.js",ks),e("script/add/Page/TeachView.js",Ns),e("script/add/Page/ToolsView.js",Ls),e("script/add/Page/TrainView.js",Ms),e("script/add/Page/TrainWantedView.js",Rs),e("script/add/Page/TryUseSkinView.js",xs),e("script/add/Page/TTGetItemView.js",Us),e("script/add/Page/TTOpenBoxView.js",Vs),e("script/add/Page/TurntableView.js",Fs),e("script/game/ui/popup/SettingPopup.js",Li),e("script/game/ui/popup/Tips.js",Ci)}}Ws.width=750,Ws.height=1344,Ws.scaleMode="fixedheight",Ws.screenMode="vertical",Ws.alignV="top",Ws.alignH="left",Ws.startScene="loading/LoadingScene.scene",Ws.sceneRoot="",Ws.debug=!1,Ws.stat=!1,Ws.physicsDebug=!1,Ws.exportSceneToJson=!0,Ws.init();new class{constructor(){if(void 0!==window.mz)if(mz.getAndroidVersion()<=23)console.log("sdk is below android 6"),mz.setSurfaceScaleShowAll(Ws.width,Ws.height),Ws.scaleMode=Laya.Stage.SCALE_SHOWALL;else{let e=qg.getSystemInfoSync();if(Ws.scaleMode===Laya.Stage.SCALE_FIXED_WIDTH){let t=Ws.width,i=e.screenHeight/e.screenWidth*t;mz.setSurfaceScaleShowAll(t,i),console.log("mz.setSurfaceScaleShowAll",t,i)}else if(Ws.scaleMode===Laya.Stage.SCALE_FIXED_HEIGHT){let t=Ws.height,i=e.screenWidth/e.screenHeight*t;mz.setSurfaceScaleShowAll(i,t),console.log("mz.setSurfaceScaleShowAll",i,t)}}window.Laya3D?Laya3D.init(Ws.width,Ws.height):Laya.init(Ws.width,Ws.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=Ws.scaleMode,Laya.stage.screenMode=Ws.screenMode,Laya.stage.alignV=Ws.alignV,Laya.stage.alignH=Ws.alignH,Laya.URL.exportSceneToJson=Ws.exportSceneToJson,(Ws.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),Ws.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Ws.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Ws.startScene&&Laya.Scene.open(Ws.startScene)}}}();